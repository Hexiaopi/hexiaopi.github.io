const s=JSON.parse('{"key":"v-4fc166fe","path":"/devops/kube-state-metrics-k8s-deploy.html","title":"kube-state-metrics k8s 部署","lang":"zh-CN","frontmatter":{"title":"kube-state-metrics k8s 部署","date":"2024-01-15T00:00:00.000Z","tag":["prometheus","k8s"],"category":["devops"],"description":"kube-state-metrics用于监控k8s 1、部署cluster-role apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRole metadata: labels: app.kubernetes.io/component: exporter app.kubernetes.io/name: kube-state-metrics app.kubernetes.io/version: 2.10.0 name: kube-state-metrics rules: - apiGroups: - \\"\\" resources: - configmaps - secrets - nodes - pods - services - serviceaccounts - resourcequotas - replicationcontrollers - limitranges - persistentvolumeclaims - persistentvolumes - namespaces - endpoints verbs: - list - watch - apiGroups: - apps resources: - statefulsets - daemonsets - deployments - replicasets verbs: - list - watch - apiGroups: - batch resources: - cronjobs - jobs verbs: - list - watch - apiGroups: - autoscaling resources: - horizontalpodautoscalers verbs: - list - watch - apiGroups: - authentication.k8s.io resources: - tokenreviews verbs: - create - apiGroups: - authorization.k8s.io resources: - subjectaccessreviews verbs: - create - apiGroups: - policy resources: - poddisruptionbudgets verbs: - list - watch - apiGroups: - certificates.k8s.io resources: - certificatesigningrequests verbs: - list - watch - apiGroups: - discovery.k8s.io resources: - endpointslices verbs: - list - watch - apiGroups: - storage.k8s.io resources: - storageclasses - volumeattachments verbs: - list - watch - apiGroups: - admissionregistration.k8s.io resources: - mutatingwebhookconfigurations - validatingwebhookconfigurations verbs: - list - watch - apiGroups: - networking.k8s.io resources: - networkpolicies - ingressclasses - ingresses verbs: - list - watch - apiGroups: - coordination.k8s.io resources: - leases verbs: - list - watch - apiGroups: - rbac.authorization.k8s.io resources: - clusterrolebindings - clusterroles - rolebindings - roles verbs: - list - watch","head":[["meta",{"property":"og:url","content":"https://Hexiaopi.github.io/devops/kube-state-metrics-k8s-deploy.html"}],["meta",{"property":"og:site_name","content":"Hexiaopi"}],["meta",{"property":"og:title","content":"kube-state-metrics k8s 部署"}],["meta",{"property":"og:description","content":"kube-state-metrics用于监控k8s 1、部署cluster-role apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRole metadata: labels: app.kubernetes.io/component: exporter app.kubernetes.io/name: kube-state-metrics app.kubernetes.io/version: 2.10.0 name: kube-state-metrics rules: - apiGroups: - \\"\\" resources: - configmaps - secrets - nodes - pods - services - serviceaccounts - resourcequotas - replicationcontrollers - limitranges - persistentvolumeclaims - persistentvolumes - namespaces - endpoints verbs: - list - watch - apiGroups: - apps resources: - statefulsets - daemonsets - deployments - replicasets verbs: - list - watch - apiGroups: - batch resources: - cronjobs - jobs verbs: - list - watch - apiGroups: - autoscaling resources: - horizontalpodautoscalers verbs: - list - watch - apiGroups: - authentication.k8s.io resources: - tokenreviews verbs: - create - apiGroups: - authorization.k8s.io resources: - subjectaccessreviews verbs: - create - apiGroups: - policy resources: - poddisruptionbudgets verbs: - list - watch - apiGroups: - certificates.k8s.io resources: - certificatesigningrequests verbs: - list - watch - apiGroups: - discovery.k8s.io resources: - endpointslices verbs: - list - watch - apiGroups: - storage.k8s.io resources: - storageclasses - volumeattachments verbs: - list - watch - apiGroups: - admissionregistration.k8s.io resources: - mutatingwebhookconfigurations - validatingwebhookconfigurations verbs: - list - watch - apiGroups: - networking.k8s.io resources: - networkpolicies - ingressclasses - ingresses verbs: - list - watch - apiGroups: - coordination.k8s.io resources: - leases verbs: - list - watch - apiGroups: - rbac.authorization.k8s.io resources: - clusterrolebindings - clusterroles - rolebindings - roles verbs: - list - watch"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-15T14:32:40.000Z"}],["meta",{"property":"article:author","content":"Hexiaopi"}],["meta",{"property":"article:tag","content":"prometheus"}],["meta",{"property":"article:tag","content":"k8s"}],["meta",{"property":"article:published_time","content":"2024-01-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-15T14:32:40.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"kube-state-metrics k8s 部署\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-01-15T00:00:00.000Z\\",\\"dateModified\\":\\"2024-01-15T14:32:40.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hexiaopi\\",\\"url\\":\\"https://github.com/Hexiaopi\\"}]}"]]},"headers":[],"git":{"createdTime":1705329160000,"updatedTime":1705329160000,"contributors":[{"name":"HeXiaoPi","email":"hechangjie0619@icloud.com","commits":1}]},"readingTime":{"minutes":1.48,"words":443},"filePathRelative":"devops/kube-state-metrics-k8s-deploy.md","localizedDate":"2024年1月15日","excerpt":"<p>kube-state-metrics用于监控k8s</p>\\n<p>1、部署cluster-role</p>\\n<div class=\\"language-yaml line-numbers-mode\\" data-ext=\\"yml\\"><pre class=\\"language-yaml\\"><code><span class=\\"token key atrule\\">apiVersion</span><span class=\\"token punctuation\\">:</span> rbac.authorization.k8s.io/v1\\n<span class=\\"token key atrule\\">kind</span><span class=\\"token punctuation\\">:</span> ClusterRole\\n<span class=\\"token key atrule\\">metadata</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">labels</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">app.kubernetes.io/component</span><span class=\\"token punctuation\\">:</span> exporter\\n    <span class=\\"token key atrule\\">app.kubernetes.io/name</span><span class=\\"token punctuation\\">:</span> kube<span class=\\"token punctuation\\">-</span>state<span class=\\"token punctuation\\">-</span>metrics\\n    <span class=\\"token key atrule\\">app.kubernetes.io/version</span><span class=\\"token punctuation\\">:</span> 2.10.0\\n  <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> kube<span class=\\"token punctuation\\">-</span>state<span class=\\"token punctuation\\">-</span>metrics\\n<span class=\\"token key atrule\\">rules</span><span class=\\"token punctuation\\">:</span>\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> <span class=\\"token string\\">\\"\\"</span>\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> configmaps\\n  <span class=\\"token punctuation\\">-</span> secrets\\n  <span class=\\"token punctuation\\">-</span> nodes\\n  <span class=\\"token punctuation\\">-</span> pods\\n  <span class=\\"token punctuation\\">-</span> services\\n  <span class=\\"token punctuation\\">-</span> serviceaccounts\\n  <span class=\\"token punctuation\\">-</span> resourcequotas\\n  <span class=\\"token punctuation\\">-</span> replicationcontrollers\\n  <span class=\\"token punctuation\\">-</span> limitranges\\n  <span class=\\"token punctuation\\">-</span> persistentvolumeclaims\\n  <span class=\\"token punctuation\\">-</span> persistentvolumes\\n  <span class=\\"token punctuation\\">-</span> namespaces\\n  <span class=\\"token punctuation\\">-</span> endpoints\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> apps\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> statefulsets\\n  <span class=\\"token punctuation\\">-</span> daemonsets\\n  <span class=\\"token punctuation\\">-</span> deployments\\n  <span class=\\"token punctuation\\">-</span> replicasets\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> batch\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> cronjobs\\n  <span class=\\"token punctuation\\">-</span> jobs\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> autoscaling\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> horizontalpodautoscalers\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> authentication.k8s.io\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> tokenreviews\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> create\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> authorization.k8s.io\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> subjectaccessreviews\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> create\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> policy\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> poddisruptionbudgets\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> certificates.k8s.io\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> certificatesigningrequests\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> discovery.k8s.io\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> endpointslices\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> storage.k8s.io\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> storageclasses\\n  <span class=\\"token punctuation\\">-</span> volumeattachments\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> admissionregistration.k8s.io\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> mutatingwebhookconfigurations\\n  <span class=\\"token punctuation\\">-</span> validatingwebhookconfigurations\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> networking.k8s.io\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> networkpolicies\\n  <span class=\\"token punctuation\\">-</span> ingressclasses\\n  <span class=\\"token punctuation\\">-</span> ingresses\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> coordination.k8s.io\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> leases\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n<span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">apiGroups</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> rbac.authorization.k8s.io\\n  <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> clusterrolebindings\\n  <span class=\\"token punctuation\\">-</span> clusterroles\\n  <span class=\\"token punctuation\\">-</span> rolebindings\\n  <span class=\\"token punctuation\\">-</span> roles\\n  <span class=\\"token key atrule\\">verbs</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token punctuation\\">-</span> list\\n  <span class=\\"token punctuation\\">-</span> watch\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{s as data};
