import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a,b as n,o as t}from"./app-DKt1YyMi.js";const s="/assets/minio-dashboard-CI6T6W5N.png",o={},r=n(`<h2 id="minio监控" tabindex="-1"><a class="header-anchor" href="#minio监控"><span>Minio监控</span></a></h2><p>运行Minio Client(mc)容器</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--entrypoint</span><span class="token operator">=</span>/bin/sh minio/mc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>设置别名</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mc</span> <span class="token builtin class-name">alias</span> <span class="token builtin class-name">set</span> minio http://172.100.2.65:9000 minioadmin minioadmin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输出结果：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>mc: Configuration written to \`/root/.mc/config.json\`. Please update your access credentials.
mc: Successfully created \`/root/.mc/share\`.
mc: Initialized share uploads \`/root/.mc/share/uploads.json\` file.
mc: Initialized share downloads \`/root/.mc/share/downloads.json\` file.
Added \`minio\` successfully.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>生成 Prometheus 抓取目标配置</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mc</span> admin prometheus generate minio
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输出结果：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>scrape_configs:
- job_name: minio-job
  bearer_token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJwcm9tZXRoZXVzIiwic3ViIjoibWluaW9hZG1pbiIsImV4cCI6NDg2NzAyNTgyOX0.QgEjjQvA1ieHhM8sxMxMhYGGOcmsN4dQT1lIcOHGe5Lo4ZTeTsgzKAq65HPBkFQ1RayMzolQ_R2J3aByVe_ZNw
  metrics_path: /minio/v2/metrics/cluster
  scheme: http
  static_configs:
  - targets: <span class="token punctuation">[</span><span class="token string">&#39;172.100.2.65:9000&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们可以看到是通过<code>bearer_token</code>的方式获取指标，将上面生成的抓取目标配置同步到Prometheus</p><h2 id="minio-dashboard" tabindex="-1"><a class="header-anchor" href="#minio-dashboard"><span>minio-dashboard</span></a></h2><figure><img src="`+s+`" alt="minio-dashboard" tabindex="0" loading="lazy"><figcaption>minio-dashboard</figcaption></figure><h2 id="minio常用监控语句" tabindex="-1"><a class="header-anchor" href="#minio常用监控语句"><span>minio常用监控语句</span></a></h2><h3 id="minio集群节点离线" tabindex="-1"><a class="header-anchor" href="#minio集群节点离线"><span>minio集群节点离线</span></a></h3><div class="language-promQL line-numbers-mode" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>minio_cluster_nodes_offline_total &gt; 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="minio集群磁盘离线" tabindex="-1"><a class="header-anchor" href="#minio集群磁盘离线"><span>minio集群磁盘离线</span></a></h3><div class="language-promQL line-numbers-mode" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>minio_cluster_drive_offline_total &gt; 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="参考文献" tabindex="-1"><a class="header-anchor" href="#参考文献"><span>参考文献</span></a></h2><p><a href="https://min.io/docs/minio/linux/operations/monitoring/collect-minio-metrics-using-prometheus.html?ref=docs-redirect" target="_blank" rel="noopener noreferrer">Prometheus官方文档</a></p><p><a href="https://www.cnblogs.com/zmh520/p/17771438.html" target="_blank" rel="noopener noreferrer">minio部署及监控</a></p>`,22);function l(d,c){return t(),i("div",null,[a(" more "),r])}const h=e(o,[["render",l],["__file","minio-monitor.html.vue"]]),u=JSON.parse('{"path":"/database/minio/minio-monitor.html","title":"Minio监控","lang":"zh-CN","frontmatter":{"title":"Minio监控","date":"2024-04-18T00:00:00.000Z","tag":["Minio","监控"],"category":["数据存储"],"head":[["meta",{"property":"og:url","content":"http://blog.cjhe.top/database/minio/minio-monitor.html"}],["meta",{"property":"og:site_name","content":"个人博客"}],["meta",{"property":"og:title","content":"Minio监控"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-20T03:37:50.000Z"}],["meta",{"property":"article:author","content":"Hexiaopi"}],["meta",{"property":"article:tag","content":"Minio"}],["meta",{"property":"article:tag","content":"监控"}],["meta",{"property":"article:published_time","content":"2024-04-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-20T03:37:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Minio监控\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-04-18T00:00:00.000Z\\",\\"dateModified\\":\\"2024-05-20T03:37:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hexiaopi\\",\\"url\\":\\"https://github.com/Hexiaopi\\"}]}"]]},"headers":[{"level":2,"title":"Minio监控","slug":"minio监控","link":"#minio监控","children":[]},{"level":2,"title":"minio-dashboard","slug":"minio-dashboard","link":"#minio-dashboard","children":[]},{"level":2,"title":"minio常用监控语句","slug":"minio常用监控语句","link":"#minio常用监控语句","children":[{"level":3,"title":"minio集群节点离线","slug":"minio集群节点离线","link":"#minio集群节点离线","children":[]},{"level":3,"title":"minio集群磁盘离线","slug":"minio集群磁盘离线","link":"#minio集群磁盘离线","children":[]}]},{"level":2,"title":"参考文献","slug":"参考文献","link":"#参考文献","children":[]}],"git":{"createdTime":1713431020000,"updatedTime":1716176270000,"contributors":[{"name":"HeXiaoPi","email":"hechangjie0619@icloud.com","commits":1}]},"readingTime":{"minutes":0.7,"words":210},"filePathRelative":"database/minio/minio-monitor.md","localizedDate":"2024年4月18日","excerpt":""}');export{h as comp,u as data};
