const n=JSON.parse('{"key":"v-578c1b54","path":"/devops/cadvisor-k8s-deploy.html","title":"cadvisor k8s 部署","lang":"zh-CN","frontmatter":{"title":"cadvisor k8s 部署","date":"2024-01-15T00:00:00.000Z","tag":["prometheus","k8s"],"category":["devops"],"description":"cadvisor 是谷歌公司用来分析运行中的 Docker 容器的资源占用以及性能特性的工具，简单来说是用于监控 Docker 容器。 apiVersion: apps/v1 kind: DaemonSet metadata: name: cadvisor namespace: monitor spec: selector: matchLabels: app: cAdvisor template: metadata: labels: app: cAdvisor spec: tolerations: #污点容忍,忽略master的NoSchedule - effect: NoSchedule key: node-role.kubernetes.io/master hostNetwork: true restartPolicy: Always containers: - name: cadvisor image: google/cadvisor:latest imagePullPolicy: IfNotPresent ports: - containerPort: 8080 volumeMounts: - name: root mountPath: /rootfs - name: run mountPath: /var/run - name: sys mountPath: /sys - name: docker mountPath: /var/lib/containerd volumes: - name: root hostPath: path: / - name: run hostPath: path: /var/run - name: sys hostPath: path: /sys - name: docker hostPath: path: /var/lib/containerd","head":[["meta",{"property":"og:url","content":"https://Hexiaopi.github.io/devops/cadvisor-k8s-deploy.html"}],["meta",{"property":"og:site_name","content":"Hexiaopi"}],["meta",{"property":"og:title","content":"cadvisor k8s 部署"}],["meta",{"property":"og:description","content":"cadvisor 是谷歌公司用来分析运行中的 Docker 容器的资源占用以及性能特性的工具，简单来说是用于监控 Docker 容器。 apiVersion: apps/v1 kind: DaemonSet metadata: name: cadvisor namespace: monitor spec: selector: matchLabels: app: cAdvisor template: metadata: labels: app: cAdvisor spec: tolerations: #污点容忍,忽略master的NoSchedule - effect: NoSchedule key: node-role.kubernetes.io/master hostNetwork: true restartPolicy: Always containers: - name: cadvisor image: google/cadvisor:latest imagePullPolicy: IfNotPresent ports: - containerPort: 8080 volumeMounts: - name: root mountPath: /rootfs - name: run mountPath: /var/run - name: sys mountPath: /sys - name: docker mountPath: /var/lib/containerd volumes: - name: root hostPath: path: / - name: run hostPath: path: /var/run - name: sys hostPath: path: /sys - name: docker hostPath: path: /var/lib/containerd"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-15T12:40:19.000Z"}],["meta",{"property":"article:author","content":"Hexiaopi"}],["meta",{"property":"article:tag","content":"prometheus"}],["meta",{"property":"article:tag","content":"k8s"}],["meta",{"property":"article:published_time","content":"2024-01-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-15T12:40:19.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"cadvisor k8s 部署\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-01-15T00:00:00.000Z\\",\\"dateModified\\":\\"2024-01-15T12:40:19.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hexiaopi\\",\\"url\\":\\"https://github.com/Hexiaopi\\"}]}"]]},"headers":[],"git":{"createdTime":1705322419000,"updatedTime":1705322419000,"contributors":[{"name":"HeXiaoPi","email":"hechangjie0619@icloud.com","commits":1}]},"readingTime":{"minutes":0.49,"words":146},"filePathRelative":"devops/cadvisor-k8s-deploy.md","localizedDate":"2024年1月15日","excerpt":"<p>cadvisor 是谷歌公司用来分析运行中的 Docker 容器的资源占用以及性能特性的工具，简单来说是用于监控 Docker 容器。</p>\\n<div class=\\"language-yaml line-numbers-mode\\" data-ext=\\"yml\\"><pre class=\\"language-yaml\\"><code><span class=\\"token key atrule\\">apiVersion</span><span class=\\"token punctuation\\">:</span> apps/v1\\n<span class=\\"token key atrule\\">kind</span><span class=\\"token punctuation\\">:</span> DaemonSet\\n<span class=\\"token key atrule\\">metadata</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> cadvisor\\n  <span class=\\"token key atrule\\">namespace</span><span class=\\"token punctuation\\">:</span> monitor\\n<span class=\\"token key atrule\\">spec</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">selector</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">matchLabels</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">app</span><span class=\\"token punctuation\\">:</span> cAdvisor\\n  <span class=\\"token key atrule\\">template</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">metadata</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">labels</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">app</span><span class=\\"token punctuation\\">:</span> cAdvisor\\n    <span class=\\"token key atrule\\">spec</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">tolerations</span><span class=\\"token punctuation\\">:</span>    <span class=\\"token comment\\">#污点容忍,忽略master的NoSchedule</span>\\n        <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">effect</span><span class=\\"token punctuation\\">:</span> NoSchedule\\n          <span class=\\"token key atrule\\">key</span><span class=\\"token punctuation\\">:</span> node<span class=\\"token punctuation\\">-</span>role.kubernetes.io/master\\n      <span class=\\"token key atrule\\">hostNetwork</span><span class=\\"token punctuation\\">:</span> <span class=\\"token boolean important\\">true</span>\\n      <span class=\\"token key atrule\\">restartPolicy</span><span class=\\"token punctuation\\">:</span> Always\\n      <span class=\\"token key atrule\\">containers</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> cadvisor\\n        <span class=\\"token key atrule\\">image</span><span class=\\"token punctuation\\">:</span> google/cadvisor<span class=\\"token punctuation\\">:</span>latest\\n        <span class=\\"token key atrule\\">imagePullPolicy</span><span class=\\"token punctuation\\">:</span> IfNotPresent \\n        <span class=\\"token key atrule\\">ports</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">containerPort</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">8080</span>\\n        <span class=\\"token key atrule\\">volumeMounts</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> root\\n            <span class=\\"token key atrule\\">mountPath</span><span class=\\"token punctuation\\">:</span> /rootfs\\n          <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> run\\n            <span class=\\"token key atrule\\">mountPath</span><span class=\\"token punctuation\\">:</span> /var/run\\n          <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> sys\\n            <span class=\\"token key atrule\\">mountPath</span><span class=\\"token punctuation\\">:</span> /sys\\n          <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> docker\\n            <span class=\\"token key atrule\\">mountPath</span><span class=\\"token punctuation\\">:</span> /var/lib/containerd\\n      <span class=\\"token key atrule\\">volumes</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> root\\n        <span class=\\"token key atrule\\">hostPath</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token key atrule\\">path</span><span class=\\"token punctuation\\">:</span> /\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> run\\n        <span class=\\"token key atrule\\">hostPath</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token key atrule\\">path</span><span class=\\"token punctuation\\">:</span> /var/run\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> sys\\n        <span class=\\"token key atrule\\">hostPath</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token key atrule\\">path</span><span class=\\"token punctuation\\">:</span> /sys\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> docker\\n        <span class=\\"token key atrule\\">hostPath</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token key atrule\\">path</span><span class=\\"token punctuation\\">:</span> /var/lib/containerd\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{n as data};
