import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as n,f as s,a as i,e as d}from"./app-cbce4ab3.js";const r={},c=i("p",null,'同事运行docker镜像时，控制台报错"no such file or directory"，但是查看该文件确实存在，本文记录该问题的定位和解决。',-1),o=d(`<h3 id="查看镜像使用方式" tabindex="-1"><a class="header-anchor" href="#查看镜像使用方式" aria-hidden="true">#</a> 查看镜像使用方式</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>COPY xxx/run.sh /run.sh
<span class="token comment"># RUN命令</span>
RUN chmod 777 /run.sh
<span class="token comment"># 执行命令</span>
ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;/run.sh&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里查看dockerfile，采用的是脚本方式启动服务进程，使用方式上并没有什么问题</p><h3 id="根据报错信息查看文件是否存在" tabindex="-1"><a class="header-anchor" href="#根据报错信息查看文件是否存在" aria-hidden="true">#</a> 根据报错信息查看文件是否存在</h3><p>通过新增RUN命令:<code>RUN ls -al</code>,打印当前路径文件的方式确认是有<code>run.sh</code>脚本文件</p><h3 id="检查脚本文件" tabindex="-1"><a class="header-anchor" href="#检查脚本文件" aria-hidden="true">#</a> 检查脚本文件</h3><p>对比了服务器的脚本文件和开发使用的脚本文件，仔细观察发现脚本文件唯一不同的是换行符不一样</p><ul><li>开发使用的是windows系统，换行符为<strong>CRLF</strong>,对应为:<code>\\r\\n</code></li><li>服务器使用的linux系统，换行符为<strong>LF</strong>，对应为:<code>\\n</code></li></ul><h3 id="关键问题" tabindex="-1"><a class="header-anchor" href="#关键问题" aria-hidden="true">#</a> 关键问题</h3><p>脚本第一行</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>表明使用<code>/bin/bash</code>来解释脚本，但如何后面有windows的换行符导致无法识别，因此会报错：“no such file or directory”</p><h3 id="问题结局" tabindex="-1"><a class="header-anchor" href="#问题结局" aria-hidden="true">#</a> 问题结局</h3><p>通过修改<code>run.sh</code>的换行符为<strong>LF</strong>，问题得以解决。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>代码提交时，将文件换行符设置为LF格式。</p></div>`,15);function t(l,h){return a(),n("div",null,[c,s(" more "),o])}const m=e(r,[["render",t],["__file","shell-line-break.html.vue"]]);export{m as default};
