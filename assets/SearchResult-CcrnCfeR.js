import{u as _,g as ae,h as te,i as U,j as le,P as re,k as se,l as oe,m as j,n as w,p as ne,q as G,s as t,v as ie,R as O,x as ge,y as ue,z as ce,C as me,A as de,B as he,D as pe,E as Ee,F as ve,G as ye,H as Be,I,J as $,K as Ae,L as C,M as be}from"./app-BxIvKJnO.js";const ke=["/CHANGELOG.html","/","/intro.html","/slides.html","/algorithm/limit.html","/algorithm/recommend.html","/database/","/design-pattern/","/design-pattern/principle.html","/design-pattern/quantity-code.html","/design-pattern/recommend.html","/devops/","/language/","/middleware/grafana.html","/middleware/promql.html","/middleware/recommend.html","/network/","/open-source-project/","/open-source-project/drawio-store.html","/open-source-project/rdm-toy.html","/project-standard/","/project-standard/api.html","/project-standard/branch.html","/project-standard/commit.html","/project-standard/directory.html","/project-standard/doc.html","/project-standard/version.html","/share/12factors.html","/share/","/share/how-to-get-rich-without-getting-lucky.html","/share/how-to-live-longer.html","/tools/ca.html","/tools/confd.html","/tools/recommend.html","/tools/vscode-leetcode.html","/database/minio/","/database/minio/cluster-docker.html","/database/minio/minio-monitor.html","/database/mongodb/","/database/mongodb/mongodb-exporter.html","/database/mysql/","/database/mysql/develop-standard.html","/database/mysql/engine.html","/database/mysql/idx.html","/database/mysql/join.html","/database/mysql/mysql-exporter.html","/database/mysql/read-process.html","/database/mysql/sql-order.html","/database/mysql/transaction.html","/database/mysql/write-process.html","/database/nacos/","/database/nacos/nacos-monitor.html","/database/postgresql/","/database/postgresql/cluster-docker.html","/database/redis/","/database/redis/deadline-message.html","/database/redis/distribute-lock.html","/database/redis/redis-exporter.html","/data-structure/tree/binary-search-tree.html","/data-structure/tree/binary-tree.html","/design-pattern/behavioral/","/design-pattern/behavioral/chain-of-responsibility.html","/design-pattern/behavioral/command.html","/design-pattern/behavioral/iterator.html","/design-pattern/behavioral/mediator.html","/design-pattern/behavioral/memento.html","/design-pattern/behavioral/observer.html","/design-pattern/behavioral/state.html","/design-pattern/behavioral/strategy.html","/design-pattern/behavioral/template-method.html","/design-pattern/behavioral/visitor.html","/design-pattern/concurrency/","/design-pattern/concurrency/exit.html","/design-pattern/concurrency/fan-in-fan-out.html","/design-pattern/concurrency/pipeline.html","/design-pattern/concurrency/producer-consumer.html","/design-pattern/creational/","/design-pattern/creational/abstract-factory.html","/design-pattern/creational/builder.html","/design-pattern/creational/factory-compare.html","/design-pattern/creational/factory-method.html","/design-pattern/creational/object-pool.html","/design-pattern/creational/prototype.html","/design-pattern/creational/simple-factory.html","/design-pattern/creational/singleton.html","/design-pattern/function/","/design-pattern/function/option.html","/design-pattern/structural/","/design-pattern/structural/adapter.html","/design-pattern/structural/bridge.html","/design-pattern/structural/composite.html","/design-pattern/structural/decorator.html","/design-pattern/structural/facade.html","/design-pattern/structural/flyweight.html","/design-pattern/structural/proxy.html","/devops/docker/","/devops/docker/recommand.html","/devops/docker/shell-line-break.html","/devops/k8s/","/devops/k8s/cadvisor-k8s-deploy.html","/devops/k8s/chartmuseum.html","/devops/k8s/helm-dashboard.html","/devops/k8s/k8s-on-gpu.html","/devops/k8s/kube-state-metrics-k8s-deploy.html","/devops/k8s/makefile-deploy.html","/devops/k8s/node-exporter-k8s-deploy.html","/devops/k8s/prometheus-k8s-deploy.html","/devops/k8s/recommand.html","/language/go/","/language/vue/","/network/application-layer/HTTP.html","/network/application-layer/MQTT.html","/network/application-layer/","/network/application-layer/SSE.html","/network/application-layer/websocket.html","/network/internet-layer/ICMP.html","/network/internet-layer/","/network/link-layer/","/network/transport-layer/","/system-design/security/auth.html","/language/go/advance/","/language/go/advance/break.html","/language/go/advance/context.html","/language/go/advance/errgroup.html","/language/go/advance/for-range.html","/language/go/advance/gomaxprocs.html","/language/go/advance/goroutine.html","/language/go/advance/interface.html","/language/go/advance/memory-alignment.html","/language/go/advance/mutex.html","/language/go/advance/no-copy.html","/language/go/advance/sync-cond.html","/language/go/advance/sync-map.html","/language/go/advance/sync-once.html","/language/go/base/","/language/go/base/array.html","/language/go/base/command.html","/language/go/base/constant.html","/language/go/base/context.html","/language/go/base/data-type.html","/language/go/base/defer.html","/language/go/base/enviroment.html","/language/go/base/identifier.html","/language/go/base/iota.html","/language/go/base/map.html","/language/go/base/operator.html","/language/go/base/package.html","/language/go/base/recover.html","/language/go/base/slice.html","/language/go/base/string.html","/language/go/base/variable.html","/language/go/recommend/","/language/go/recommend/article.html","/language/go/recommend/blog.html","/language/go/recommend/book.html","/language/go/recommend/community.html","/language/go/recommend/example.html","/language/go/recommend/tool.html","/language/go/reprint/","/language/go/reprint/proverb.html","/language/go/reprint/tencent-secguide.html","/language/go/reprint/uber-guide.html","/language/go/reprint/zen.html","/language/go/standard-library/","/language/go/standard-library/flag.html","/language/go/test/","/language/go/test/mysql-test.html","/language/go/third-party/","/language/go/third-party/pflag.html","/language/vue/advance/","/language/vue/advance/communication.html","/404.html","/algorithm/","/middleware/","/tools/","/data-structure/tree/","/data-structure/","/system-design/security/","/system-design/","/category/","/category/%E7%AE%97%E6%B3%95/","/category/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/","/category/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/category/devops/","/category/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/","/category/%E7%BC%96%E7%A8%8B%E6%A1%86%E6%9E%B6/","/category/%E4%B8%AD%E9%97%B4%E4%BB%B6/","/category/%E7%BD%91%E7%BB%9C/","/category/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/","/category/%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83/","/category/%E8%BD%AC%E8%BD%BD/","/category/%E5%B7%A5%E5%85%B7/","/category/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/category/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/","/tag/","/tag/go/","/tag/%E7%AE%97%E6%B3%95/","/tag/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/tag/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/","/tag/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/","/tag/grafana/","/tag/prometheus/","/tag/promql/","/tag/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/","/tag/redis/","/tag/vue/","/tag/%E8%A7%84%E8%8C%83/","/tag/%E6%8E%A5%E5%8F%A3/","/tag/%E5%88%86%E6%94%AF/","/tag/%E6%96%87%E6%A1%A3/","/tag/%E7%89%88%E6%9C%AC/","/tag/%E5%8E%9F%E5%88%99/","/tag/%E8%B4%A2%E5%AF%8C/","/tag/%E5%81%A5%E5%BA%B7/","/tag/%E5%B7%A5%E5%85%B7/","/tag/vscode/","/tag/leetcode/","/tag/%E6%8F%92%E4%BB%B6/","/tag/minio/","/tag/%E7%9B%91%E6%8E%A7/","/tag/mongodb/","/tag/mysql/","/tag/%E7%B4%A2%E5%BC%95/","/tag/nacos/","/tag/postgresql/","/tag/lua/","/tag/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/","/tag/%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%BC%8F/","/tag/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/","/tag/%E5%87%BD%E6%95%B0%E6%A8%A1%E5%BC%8F/","/tag/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/","/tag/docker/","/tag/k8s/","/tag/helm/","/tag/gpu/","/tag/%E5%9F%BA%E7%A1%80/","/tag/%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE/","/tag/http/","/tag/mqtt/","/tag/sse/","/tag/websocket/","/tag/icmp/","/tag/%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/","/tag/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8D%8F%E8%AE%AE/","/tag/%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE/","/tag/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/","/tag/%E8%BF%9B%E9%98%B6/","/tag/%E7%A4%BE%E5%8C%BA/","/tag/%E5%8D%9A%E5%AE%A2/","/tag/%E4%B9%A6%E7%B1%8D/","/tag/%E5%AE%89%E5%85%A8/","/tag/%E6%A0%87%E5%87%86%E5%BA%93/","/tag/%E6%B5%8B%E8%AF%95/","/tag/%E4%B8%89%E6%96%B9%E5%BA%93/","/article/","/star/","/timeline/"],fe="SEARCH_PRO_QUERY_HISTORY",v=_(fe,[]),we=()=>{const{queryHistoryCount:l}=C,r=l>0;return{enabled:r,queryHistory:v,addQueryHistory:s=>{r&&(v.value=Array.from(new Set([s,...v.value.slice(0,l-1)])))},removeQueryHistory:s=>{v.value=[...v.value.slice(0,s),...v.value.slice(s+1)]}}},S=l=>ke[l.id]+("anchor"in l?`#${l.anchor}`:""),Ce="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:M}=C,y=_(Ce,[]),qe=()=>{const l=M>0;return{enabled:l,resultHistory:y,addResultHistory:r=>{if(l){const s={link:S(r),display:r.display};"header"in r&&(s.header=r.header),y.value=[s,...y.value.slice(0,M-1)]}},removeResultHistory:r=>{y.value=[...y.value.slice(0,r),...y.value.slice(r+1)]}}},Fe=l=>{const r=me(),s=U(),q=de(),n=j(0),b=w(()=>n.value>0),h=he([]);return pe(()=>{const{search:p,terminate:F}=Ee(),B=Ae(u=>{const A=u.join(" "),{searchFilter:D=d=>d,splitWord:x,suggestionsFilter:L,...E}=r.value;A?(n.value+=1,p(u.join(" "),s.value,E).then(d=>D(d,A,s.value,q.value)).then(d=>{n.value-=1,h.value=d}).catch(d=>{console.warn(d),n.value-=1,n.value||(h.value=[])})):h.value=[]},C.searchDelay-C.suggestDelay);G([l,s],([u])=>B(u),{immediate:!0}),ve(()=>{F()})}),{isSearching:b,results:h}};var xe=ae({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:r}){const s=te(),q=U(),n=le(re),{enabled:b,addQueryHistory:h,queryHistory:p,removeQueryHistory:F}=we(),{enabled:B,resultHistory:u,addResultHistory:A,removeResultHistory:D}=qe(),x=b||B,L=se(l,"queries"),{results:E,isSearching:d}=Fe(L),o=oe({isQuery:!0,index:0}),c=j(0),m=j(0),T=w(()=>x&&(p.value.length>0||u.value.length>0)),H=w(()=>E.value.length>0),R=w(()=>E.value[c.value]||null),Y=()=>{const{isQuery:e,index:a}=o;a===0?(o.isQuery=!e,o.index=e?u.value.length-1:p.value.length-1):o.index=a-1},z=()=>{const{isQuery:e,index:a}=o;a===(e?p.value.length-1:u.value.length-1)?(o.isQuery=!e,o.index=0):o.index=a+1},J=()=>{c.value=c.value>0?c.value-1:E.value.length-1,m.value=R.value.contents.length-1},K=()=>{c.value=c.value<E.value.length-1?c.value+1:0,m.value=0},N=()=>{m.value<R.value.contents.length-1?m.value+=1:K()},V=()=>{m.value>0?m.value-=1:J()},Q=e=>e.map(a=>be(a)?a:t(a[0],a[1])),W=e=>{if(e.type==="customField"){const a=ye[e.index]||"$content",[i,f=""]=Be(a)?a[q.value].split("$content"):a.split("$content");return e.display.map(g=>t("div",Q([i,...g,f])))}return e.display.map(a=>t("div",Q(a)))},k=()=>{c.value=0,m.value=0,r("updateQuery",""),r("close")},X=()=>b?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},n.value.queryHistory),p.value.map((e,a)=>t("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===a}],onClick:()=>{r("updateQuery",e)}},[t(I,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:i=>{i.preventDefault(),i.stopPropagation(),F(a)}})]))])):null,Z=()=>B?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},n.value.resultHistory),u.value.map((e,a)=>t(O,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===a}],onClick:()=>{k()}},()=>[t(I,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(i=>Q(i)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:i=>{i.preventDefault(),i.stopPropagation(),D(a)}})]))])):null;return ne("keydown",e=>{if(l.isFocusing){if(H.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const a=R.value.contents[m.value];h(l.queries.join(" ")),A(a),s.push(S(a)),k()}}else if(B){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:a}=o;o.isQuery?(r("updateQuery",p.value[a]),e.preventDefault()):(s.push(u.value[a].link),k())}}}}),G([c,m],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!H.value:!T.value}],id:"search-pro-results"},l.queries.length?d.value?t(ie,{hint:n.value.searching}):H.value?t("ul",{class:"search-pro-result-list"},E.value.map(({title:e,contents:a},i)=>{const f=c.value===i;return t("li",{class:["search-pro-result-list-item",{active:f}]},[t("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),a.map((g,ee)=>{const P=f&&m.value===ee;return t(O,{to:S(g),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{h(l.queries.join(" ")),A(g),k()}},()=>[g.type==="text"?null:t(g.type==="title"?ge:g.type==="heading"?ue:ce,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[g.type==="text"&&g.header?t("div",{class:"content-header"},g.header):null,t("div",W(g))])])})])})):n.value.emptyResult:x?T.value?[X(),Z()]:n.value.emptyHistory:n.value.emptyResult)}});export{xe as default};
