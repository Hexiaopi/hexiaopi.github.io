<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="http://blog.cjhe.top/rss.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <atom:link href="http://blog.cjhe.top/rss.xml" rel="self" type="application/rss+xml"/>
    <title>ä¸ªäººåšå®¢</title>
    <link>http://blog.cjhe.top/</link>
    <description>ä½•å°è¿›ç«¥é‹çš„ä¸ªäººåšå®¢</description>
    <language>zh-CN</language>
    <pubDate>Tue, 23 Apr 2024 03:02:08 GMT</pubDate>
    <lastBuildDate>Tue, 23 Apr 2024 03:02:08 GMT</lastBuildDate>
    <generator>@vuepress/plugin-feed</generator>
    <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
    <category>devops</category>
    <category>Goè¯­è¨€</category>
    <category>ç½‘ç»œ</category>
    <category>æ•°æ®åº“</category>
    <category>é¡¹ç›®è§„èŒƒ</category>
    <category>è½¬è½½</category>
    <category>è®¾è®¡æ¨¡å¼</category>
    <category>ç³»ç»Ÿè®¾è®¡</category>
    <category>å·¥å…·</category>
    <item>
      <title>Minioç›‘æ§</title>
      <link>http://blog.cjhe.top/devops/docker/minio-monitor.html</link>
      <guid>http://blog.cjhe.top/devops/docker/minio-monitor.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Minioç›‘æ§</source>
      <description>Minioç›‘æ§ è¿è¡ŒMinio Client(mc)å®¹å™¨ è®¾ç½®åˆ«å è¾“å‡ºç»“æœï¼š ç”Ÿæˆ Prometheus æŠ“å–ç›®æ ‡é…ç½® è¾“å‡ºç»“æœï¼š æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯é€šè¿‡bearer_tokençš„æ–¹å¼è·å–æŒ‡æ ‡ï¼Œå°†ä¸Šé¢ç”Ÿæˆçš„æŠ“å–ç›®æ ‡é…ç½®åŒæ­¥åˆ°Prometheus minio-dashboard minio-dashboardminio-dashboard minioå¸¸ç”¨ç›‘...</description>
      <category>devops</category>
      <pubDate>Thu, 18 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h2>Minioç›‘æ§</h2>
<p>è¿è¡ŒMinio Client(mc)å®¹å™¨</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--entrypoint</span><span class="token operator">=</span>/bin/sh minio/mc
</code></pre></div><p>è®¾ç½®åˆ«å</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mc</span> <span class="token builtin class-name">alias</span> <span class="token builtin class-name">set</span> minio http://172.100.2.65:9000 minioadmin minioadmin
</code></pre></div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>mc: Configuration written to `/root/.mc/config.json`. Please update your access credentials.
mc: Successfully created `/root/.mc/share`.
mc: Initialized share uploads `/root/.mc/share/uploads.json` file.
mc: Initialized share downloads `/root/.mc/share/downloads.json` file.
Added `minio` successfully.
</code></pre></div><p>ç”Ÿæˆ Prometheus æŠ“å–ç›®æ ‡é…ç½®</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mc</span> admin prometheus generate minio
</code></pre></div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>scrape_configs:
- job_name: minio-job
  bearer_token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJwcm9tZXRoZXVzIiwic3ViIjoibWluaW9hZG1pbiIsImV4cCI6NDg2NzAyNTgyOX0.QgEjjQvA1ieHhM8sxMxMhYGGOcmsN4dQT1lIcOHGe5Lo4ZTeTsgzKAq65HPBkFQ1RayMzolQ_R2J3aByVe_ZNw
  metrics_path: /minio/v2/metrics/cluster
  scheme: http
  static_configs:
  - targets: <span class="token punctuation">[</span><span class="token string">'172.100.2.65:9000'</span><span class="token punctuation">]</span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯é€šè¿‡<code>bearer_token</code>çš„æ–¹å¼è·å–æŒ‡æ ‡ï¼Œå°†ä¸Šé¢ç”Ÿæˆçš„æŠ“å–ç›®æ ‡é…ç½®åŒæ­¥åˆ°Prometheus</p>
<h2>minio-dashboard</h2>
<figure><figcaption>minio-dashboard</figcaption></figure>
<h2>minioå¸¸ç”¨ç›‘æ§è¯­å¥</h2>
<h3>minioé›†ç¾¤èŠ‚ç‚¹ç¦»çº¿</h3>
<div class="language-promQL" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>minio_cluster_nodes_offline_total &gt; 0
</code></pre></div><h3>minioé›†ç¾¤ç£ç›˜ç¦»çº¿</h3>
<div class="language-promQL" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>minio_cluster_drive_offline_total &gt; 0
</code></pre></div><h2>å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://min.io/docs/minio/linux/operations/monitoring/collect-minio-metrics-using-prometheus.html?ref=docs-redirect" target="_blank" rel="noopener noreferrer">Prometheuså®˜æ–¹æ–‡æ¡£</a></p>
<p><a href="https://www.cnblogs.com/zmh520/p/17771438.html" target="_blank" rel="noopener noreferrer">minioéƒ¨ç½²åŠç›‘æ§</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>Goè¯­è¨€æ¨èä¹¦ç±</title>
      <link>http://blog.cjhe.top/go-language/recommend/book.html</link>
      <guid>http://blog.cjhe.top/go-language/recommend/book.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Goè¯­è¨€æ¨èä¹¦ç±</source>
      <description>åœ¨çº¿ä¹¦ç± Goé«˜çº§ç¼–ç¨‹ Goè¯­è¨€è®¾è®¡ä¸å®ç° Goè¯­è¨€å››åäºŒç« ç» Mastering Go ApacheCN Golang è¯‘æ–‡é›† Go Patterns Goè¯­è¨€æ ‡å‡†åº“ Goæµ‹è¯•é©±åŠ¨å¼€å‘ Goç»ƒä¹  Goè¯­è¨€åŸæœ¬ Goè¯­è¨€ç¼–ç¨‹ä¹‹æ—… Goç¨‹åºå‘˜é¢è¯• goè¯­è¨€190é¢˜</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Tue, 16 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h2>åœ¨çº¿ä¹¦ç±</h2>
<p>Goé«˜çº§ç¼–ç¨‹<a href="https://books.studygolang.com/advanced-go-programming-book/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goè¯­è¨€è®¾è®¡ä¸å®ç°<a href="https://draveness.me/golang/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goè¯­è¨€å››åäºŒç« ç»<a href="https://github.com/ffhelicopter/Go42" target="_blank" rel="noopener noreferrer"></a></p>
<p>Mastering Go<a href="https://wskdsgcf.gitbook.io/mastering-go-zh-cn/" target="_blank" rel="noopener noreferrer"></a></p>
<p>ApacheCN Golang è¯‘æ–‡é›†<a href="https://go.apachecn.org/#/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Go Patterns<a href="https://hxangel.gitbooks.io/go-patterns/content/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goè¯­è¨€æ ‡å‡†åº“<a href="https://books.studygolang.com/The-Golang-Standard-Library-by-Example/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goæµ‹è¯•é©±åŠ¨å¼€å‘<a href="https://studygolang.gitbook.io/learn-go-with-tests/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goç»ƒä¹ <a href="https://www.practical-go-lessons.com/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goè¯­è¨€åŸæœ¬<a href="https://golang.design/under-the-hood/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goè¯­è¨€ç¼–ç¨‹ä¹‹æ—…<a href="https://golang2.eddycjy.com/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goç¨‹åºå‘˜é¢è¯•<a href="https://golang.design/go-questions/" target="_blank" rel="noopener noreferrer"></a></p>
<h3>goè¯­è¨€190é¢˜</h3>
]]></content:encoded>
    </item>
    <item>
      <title>MongoDBç›‘æ§</title>
      <link>http://blog.cjhe.top/devops/docker/mongodb-exporter.html</link>
      <guid>http://blog.cjhe.top/devops/docker/mongodb-exporter.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">MongoDBç›‘æ§</source>
      <description>MongoDBç›‘æ§ æˆ‘ä»¬é€šè¿‡mongodb-exporterç›‘æ§mongodbçŠ¶æ€ mongodb-exporteréƒ¨ç½² æ³¨æ„ï¼š --collect-allï¼Œå‚æ•°ç”¨äºæ”¶é›†æ‰€æœ‰æŒ‡æ ‡ --compatible-modeï¼Œç”¨äºå…¼å®¹æ—§çš„æŒ‡æ ‡ï¼Œå¦åˆ™éƒ¨åˆ†grafanaçš„dashboardå±•ç¤ºä¸å…¼å®¹ mongodb-dashboard mongodb-dashboa...</description>
      <category>devops</category>
      <pubDate>Tue, 16 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h2>MongoDBç›‘æ§</h2>
<p>æˆ‘ä»¬é€šè¿‡mongodb-exporterç›‘æ§mongodbçŠ¶æ€</p>
<h2>mongodb-exporteréƒ¨ç½²</h2>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">9216</span>:9216 <span class="token parameter variable">-p</span> <span class="token number">17001</span>:17001 <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">--name</span><span class="token operator">=</span>mongodb_exporter percona/mongodb_exporter:0.40 <span class="token parameter variable">--mongodb.uri</span><span class="token operator">=</span>mongodb://172.87.7.247:27017/admin?ssl<span class="token operator">=</span>false --collect-all --compatible-mode
</code></pre></div><p>æ³¨æ„ï¼š</p>
<ul>
<li>--collect-allï¼Œå‚æ•°ç”¨äºæ”¶é›†æ‰€æœ‰æŒ‡æ ‡</li>
<li>--compatible-modeï¼Œç”¨äºå…¼å®¹æ—§çš„æŒ‡æ ‡ï¼Œå¦åˆ™éƒ¨åˆ†grafanaçš„dashboardå±•ç¤ºä¸å…¼å®¹</li>
</ul>
<h2>mongodb-dashboard</h2>
<figure><figcaption>mongodb-dashboard</figcaption></figure>
<h2>mongodbå¸¸ç”¨ç›‘æ§è¯­å¥</h2>
<h3>ç›‘æ§æ•°æ®åº“æ˜¯å¦å®•æœº</h3>
<div class="language-promQL" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>mongodb_up == 0
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>æ¨è</title>
      <link>http://blog.cjhe.top/go-language/recommend/</link>
      <guid>http://blog.cjhe.top/go-language/recommend/</guid>
      <source url="http://blog.cjhe.top/rss.xml">æ¨è</source>
      <category>Goè¯­è¨€</category>
      <pubDate>Mon, 15 Apr 2024 00:00:00 GMT</pubDate>
    </item>
    <item>
      <title>Redisç›‘æ§</title>
      <link>http://blog.cjhe.top/devops/docker/redis-exporter.html</link>
      <guid>http://blog.cjhe.top/devops/docker/redis-exporter.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Redisç›‘æ§</source>
      <description>Redisç›‘æ§
æˆ‘ä»¬é€šè¿‡redis-exporterç›‘æ§redisçŠ¶æ€
redis-exporteréƒ¨ç½²
redis-dashboard
redis-dashboardredis-dashboard
rediså¸¸è§ç›‘æ§è¯­å¥
ç›‘æ§Redisæ˜¯å¦å®•æœº
Redisè¿æ¥æ•°è¿‡å¤š</description>
      <category>devops</category>
      <pubDate>Fri, 12 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<!-- more -->
<h2>Redisç›‘æ§</h2>
<p>æˆ‘ä»¬é€šè¿‡redis-exporterç›‘æ§redisçŠ¶æ€</p>
<h2>redis-exporteréƒ¨ç½²</h2>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> redis_exporter <span class="token parameter variable">--restart</span> always <span class="token parameter variable">-p</span> <span class="token number">9121</span>:9121 oliver006/redis_exporter <span class="token parameter variable">--redis.addr</span> redis://172.87.7.247:6379
</code></pre></div><h2>redis-dashboard</h2>
<figure><figcaption>redis-dashboard</figcaption></figure>
<h2>rediså¸¸è§ç›‘æ§è¯­å¥</h2>
<h3>ç›‘æ§Redisæ˜¯å¦å®•æœº</h3>
<div class="language-promQL" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>redis_up == 0
</code></pre></div><h3>Redisè¿æ¥æ•°è¿‡å¤š</h3>
<div class="language-promQL" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>redis_connected_clients / redis_config_maxclients * 100 &gt; 90
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>MySQLç›‘æ§</title>
      <link>http://blog.cjhe.top/devops/docker/mysql-exporter.html</link>
      <guid>http://blog.cjhe.top/devops/docker/mysql-exporter.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">MySQLç›‘æ§</source>
      <description>MySQLç›‘æ§ æˆ‘ä»¬é€šè¿‡mysqld-exporterå»å°†MySQLç›¸å…³çŠ¶æ€è½¬æ¢æˆæŒ‡æ ‡ï¼Œä»è€Œè¿›è¡Œç›‘æ§ mysql-exporteréƒ¨ç½² å…¶ä¸­**.my.cnf**é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š [client] host=your host port=your port user=your username password=your passwor...</description>
      <category>devops</category>
      <pubDate>Fri, 12 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h2>MySQLç›‘æ§</h2>
<p>æˆ‘ä»¬é€šè¿‡mysqld-exporterå»å°†MySQLç›¸å…³çŠ¶æ€è½¬æ¢æˆæŒ‡æ ‡ï¼Œä»è€Œè¿›è¡Œç›‘æ§</p>
<h2>mysql-exporteréƒ¨ç½²</h2>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> mysql_exporter <span class="token parameter variable">--restart</span> always <span class="token parameter variable">-p</span> <span class="token number">9104</span>:9104 <span class="token parameter variable">-v</span> ./.my.cnf:/.my.cnf prom/mysqld-exporter
</code></pre></div><p>å…¶ä¸­**.my.cnf**é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š
[client]
host=your host
port=your port
user=your username
password=your password</p>
<h2>mysql-grafanaé¢æ¿</h2>
<figure><figcaption>mysql-dashboard</figcaption></figure>
<h2>mysqlå¸¸è§ç›‘æ§è¯­å¥</h2>
<h3>ç›‘æ§æ•°æ®åº“æ˜¯å¦å®•æœº</h3>
<div class="language-promQL" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>mysql_up == 0
</code></pre></div><h3>ç›‘æ§æ•°æ®åº“æ˜¯å¦è¶…è¿‡æœ€å¤§è¿æ¥æ•°80%</h3>
<div class="language-promQL" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>max_over_time(mysql_global_status_threads_connected[1m]) / mysql_global_variables_max_connections * 100 &gt; 80
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>å¦‚æœè¶…è¿‡æœ€å¤§è¿æ¥æ•°ï¼Œä¼šæŠ¥<strong>Too many connections</strong>é”™è¯¯</p>
</div>
<h3>æ•°æ®åº“æ…¢æŸ¥è¯¢</h3>
<div class="language-promQL" data-ext="promQL" data-title="promQL"><pre class="language-promQL"><code>increase(mysql_global_status_slow_queries[1m]) &gt; 0
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>HTTPåè®®</title>
      <link>http://blog.cjhe.top/network/application-layer/HTTP.html</link>
      <guid>http://blog.cjhe.top/network/application-layer/HTTP.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">HTTPåè®®</source>
      <description>HTTPåè®®æ˜¯ç›®å‰ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„åº”ç”¨å±‚åè®®

HTTPå‘å±•ç®€å²

1989 å¹´ï¼šè’‚å§†Â·ä¼¯çº³æ–¯-æåœ¨ CERN æå‡ºä¸‡ç»´ç½‘çš„æ¦‚å¿µã€‚
1991 å¹´ï¼šè’‚å§†Â·ä¼¯çº³æ–¯-æå‘å¸ƒ HTTP/0.9ï¼ŒHTTP åè®®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚
1996 å¹´ï¼šHTTP/1.0 å‘å¸ƒï¼Œå¼•å…¥äº†çŠ¶æ€ç ã€å¤´å­—æ®µå’ŒæŒä¹…è¿æ¥ç­‰æ–°åŠŸèƒ½ã€‚
1997 å¹´ï¼šHTTP/1.1 å‘å¸ƒï¼Œå¯¹ HTTP/1.0 ...</description>
      <category>ç½‘ç»œ</category>
      <pubDate>Thu, 11 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<!-- more -->
<blockquote>
<p>HTTPåè®®æ˜¯ç›®å‰ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„åº”ç”¨å±‚åè®®</p>
</blockquote>
<h2>HTTPå‘å±•ç®€å²</h2>
<ul>
<li><strong>1989 å¹´</strong>ï¼šè’‚å§†Â·ä¼¯çº³æ–¯-æåœ¨ CERN æå‡ºä¸‡ç»´ç½‘çš„æ¦‚å¿µã€‚</li>
<li><strong>1991 å¹´</strong>ï¼šè’‚å§†Â·ä¼¯çº³æ–¯-æå‘å¸ƒ HTTP/0.9ï¼ŒHTTP åè®®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚</li>
<li><strong>1996 å¹´</strong>ï¼šHTTP/1.0 å‘å¸ƒï¼Œå¼•å…¥äº†çŠ¶æ€ç ã€å¤´å­—æ®µå’ŒæŒä¹…è¿æ¥ç­‰æ–°åŠŸèƒ½ã€‚</li>
<li><strong>1997 å¹´</strong>ï¼šHTTP/1.1 å‘å¸ƒï¼Œå¯¹ HTTP/1.0 è¿›è¡Œäº†é‡å¤§æ›´æ–°ï¼ŒåŒ…æ‹¬ç®¡é“åŒ–è¯·æ±‚ã€åˆ†å—ä¼ è¾“ç¼–ç å’Œä¸»æœºå¤´å­—æ®µã€‚</li>
<li><strong>2015 å¹´</strong>ï¼šHTTP/2 å‘å¸ƒï¼Œå¯¹ HTTP/1.1 è¿›è¡Œäº†é‡å¤§é‡æ–°è®¾è®¡ï¼Œé‡ç‚¹æ˜¯æé«˜æ€§èƒ½å’Œæ•ˆç‡ã€‚</li>
<li><strong>2022 å¹´</strong>ï¼šHTTP/3 å‘å¸ƒï¼ŒHTTP/2 çš„æœ€æ–°ç‰ˆæœ¬ï¼ŒåŸºäº QUIC ä¼ è¾“åè®®ã€‚</li>
</ul>
<p>HTTP/1.1 ä»ç„¶æ˜¯å½“ä»Šäº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ HTTP ç‰ˆæœ¬ï¼Œä½† HTTP/2 å’Œ HTTP/3 æ­£åœ¨é€æ¸è·å¾—é‡‡ç”¨ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œé¢„è®¡ HTTP/3 å°†æˆä¸ºæ–°çš„æ ‡å‡†ã€‚</p>
<h2>HTTPæ–¹æ³•</h2>
<figure><figcaption>http</figcaption></figure>
<p>HTTP æ–¹æ³•æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶æ‰€ä½¿ç”¨çš„åŠ¨ä½œã€‚æœ€å¸¸ç”¨çš„ HTTP æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>GETï¼š</strong> ä»æœåŠ¡å™¨è·å–æŒ‡å®šèµ„æºã€‚è¿™æ˜¯æœ€åŸºæœ¬çš„ HTTP æ–¹æ³•ï¼Œç”¨äºæ£€ç´¢ç½‘é¡µã€å›¾åƒæˆ–å…¶ä»–æ–‡ä»¶ã€‚</li>
<li><strong>POSTï¼š</strong> å‘æœåŠ¡å™¨æäº¤æ•°æ®ä»¥åˆ›å»ºèµ„æºã€‚é€šå¸¸ç”¨äºæäº¤è¡¨å•æ•°æ®æˆ–ä¸Šä¼ æ–‡ä»¶ã€‚</li>
<li><strong>PUTï¼š</strong> æ›´æ–°æœåŠ¡å™¨ä¸Šçš„ç°æœ‰èµ„æºã€‚</li>
<li><strong>DELETEï¼š</strong> åˆ é™¤æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚</li>
<li><strong>HEADï¼š</strong> è·å–èµ„æºçš„å…ƒæ•°æ®ï¼ˆå¦‚å¤§å°å’Œå†…å®¹ç±»å‹ï¼‰ï¼Œè€Œä¸å®é™…è·å–èµ„æºå†…å®¹ã€‚</li>
<li><strong>OPTIONSï¼š</strong> è·å–æœåŠ¡å™¨æ”¯æŒçš„ HTTP æ–¹æ³•å’ŒåŠŸèƒ½ã€‚</li>
<li><strong>PATCHï¼š</strong> éƒ¨åˆ†æ›´æ–°æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong></p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº› HTTP æ–¹æ³•çš„ç¤ºä¾‹ï¼š</p>
<ul>
<li><code>GET /index.html HTTP/1.1</code>ï¼šä»æœåŠ¡å™¨è·å– index.html æ–‡ä»¶ã€‚</li>
<li><code>POST /submit-form HTTP/1.1</code>ï¼šå‘æœåŠ¡å™¨æäº¤è¡¨å•æ•°æ®ã€‚</li>
<li><code>PUT /users/1 HTTP/1.1</code>ï¼šæ›´æ–°æœåŠ¡å™¨ä¸Š ID ä¸º 1 çš„ç”¨æˆ·ã€‚</li>
<li><code>DELETE /files/image.png HTTP/1.1</code>ï¼šä»æœåŠ¡å™¨åˆ é™¤ image.png æ–‡ä»¶ã€‚</li>
<li><code>HEAD /about-us HTTP/1.1</code>ï¼šè·å–å…³äºæˆ‘ä»¬é¡µé¢çš„å…ƒæ•°æ®ã€‚</li>
<li><code>OPTIONS /api/v1 HTTP/1.1</code>ï¼šè·å– API çš„åŠŸèƒ½ä¿¡æ¯ã€‚</li>
<li><code>PATCH /users/1 HTTP/1.1</code>ï¼šéƒ¨åˆ†æ›´æ–°ç”¨æˆ·ä¸ªäººèµ„æ–™ï¼ˆä¾‹å¦‚ï¼Œä»…æ›´æ–°å§“åï¼‰ã€‚</li>
</ul>
<h2>HTTPçŠ¶æ€ç </h2>
<p>TTP çŠ¶æ€ç åˆ†ä¸ºäº”ç±»ï¼Œæ¯ç±»è¡¨ç¤ºä¸€ä¸ªä¸åŒçš„å“åº”ç±»åˆ«ï¼š</p>
<p><strong>1xx ä¿¡æ¯å“åº”</strong></p>
<ul>
<li>è¡¨ç¤ºè¯·æ±‚å·²æ”¶åˆ°å¹¶æ­£åœ¨å¤„ç†ã€‚</li>
<li>ä¾‹å¦‚ï¼š
<ul>
<li>100 ç»§ç»­</li>
<li>101 åˆ‡æ¢åè®®</li>
</ul>
</li>
</ul>
<p><strong>2xx æˆåŠŸå“åº”</strong></p>
<ul>
<li>è¡¨ç¤ºè¯·æ±‚å·²æˆåŠŸå¤„ç†ã€‚</li>
<li>ä¾‹å¦‚ï¼š
<ul>
<li>200 OK</li>
<li>201 å·²åˆ›å»º</li>
<li>204 æ— å†…å®¹</li>
</ul>
</li>
</ul>
<p><strong>3xx é‡å®šå‘</strong></p>
<ul>
<li>è¡¨ç¤ºéœ€è¦è¿›ä¸€æ­¥æ“ä½œæ‰èƒ½å®Œæˆè¯·æ±‚ã€‚</li>
<li>ä¾‹å¦‚ï¼š
<ul>
<li>301 æ°¸ä¹…é‡å®šå‘</li>
<li>302 ä¸´æ—¶é‡å®šå‘</li>
<li>308 æ°¸ä¹…é‡å®šå‘</li>
</ul>
</li>
</ul>
<p><strong>4xx å®¢æˆ·ç«¯é”™è¯¯</strong></p>
<ul>
<li>è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯¯ã€‚</li>
<li>ä¾‹å¦‚ï¼š
<ul>
<li>400 é”™è¯¯çš„è¯·æ±‚</li>
<li>401 æœªç»æˆæƒ</li>
<li>404 æœªæ‰¾åˆ°</li>
</ul>
</li>
</ul>
<p><strong>5xx æœåŠ¡å™¨é”™è¯¯</strong></p>
<ul>
<li>è¡¨ç¤ºæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶é‡åˆ°é”™è¯¯ã€‚</li>
<li>ä¾‹å¦‚ï¼š
<ul>
<li>500 å†…éƒ¨æœåŠ¡å™¨é”™è¯¯</li>
<li>502 é”™è¯¯çš„ç½‘å…³</li>
<li>503 æœåŠ¡ä¸å¯ç”¨</li>
</ul>
</li>
</ul>
<h2>å‚è€ƒé“¾æ¥</h2>
<p><a href="https://mp.weixin.qq.com/s/AuYEWkY9LN6TRrQvU-AaQA" target="_blank" rel="noopener noreferrer">HTTPå‘æ”¾å’Œä½¿ç”¨å¤§å…¨</a>
<a href="https://mp.weixin.qq.com/s/Q_BeNgqNWizwVkMkH39e7g" target="_blank" rel="noopener noreferrer">HTTPçŠ¶æ€ç å®Œæ•´æŒ‡å—</a>
<a href="https://mp.weixin.qq.com/s/VTFC8WEJTnoDzEtKsi48Aw" target="_blank" rel="noopener noreferrer">å›¾è§£|ä»€ä¹ˆæ˜¯HTTPç®€å²</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>åº”ç”¨å±‚åè®®</title>
      <link>http://blog.cjhe.top/network/application-layer/</link>
      <guid>http://blog.cjhe.top/network/application-layer/</guid>
      <source url="http://blog.cjhe.top/rss.xml">åº”ç”¨å±‚åè®®</source>
      <description>æœ¬ç¯‡ä»‹ç»è®¡ç®—æœºç½‘ç»œåº”ç”¨å±‚åè®® å¸¸è§çš„åº”ç”¨å±‚åè®®ï¼š HTTP DNS Telnet SSH FTP POP3 IMAP</description>
      <category>ç½‘ç»œ</category>
      <pubDate>Thu, 11 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>æœ¬ç¯‡ä»‹ç»è®¡ç®—æœºç½‘ç»œåº”ç”¨å±‚åè®®</p>
</blockquote>
<p>å¸¸è§çš„åº”ç”¨å±‚åè®®ï¼š</p>
<ul>
<li>HTTP</li>
<li>DNS</li>
<li>Telnet</li>
<li>SSH</li>
<li>FTP</li>
<li>POP3</li>
<li>IMAP</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>ICMPåè®®</title>
      <link>http://blog.cjhe.top/network/internet-layer/ICMP.html</link>
      <guid>http://blog.cjhe.top/network/internet-layer/ICMP.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ICMPåè®®</source>
      <description>ICMP(Internet Control Message Protocol,äº’è”ç½‘æ§åˆ¶åè®®)ï¼Œå±äºç½‘ç»œå±‚åè®®ã€‚ä¸»è¦ç”¨äºåœ¨IPä¸»æœºå’Œè·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šä¸»æœºæ˜¯å¦å¯è¾¾ã€è·¯ç”±æ˜¯å¦å¯ç”¨ç­‰ã€‚ ICMPä½¿ç”¨IPåè®®å‘é€ä¿¡æ¯ï¼Œå®ƒè™½ç„¶å±äºç½‘ç»œå±‚åè®®ï¼Œä½†ä¸¥æ ¼æ¥è¯´ï¼Œå®ƒä½äºIPä¹‹ä¸Šã€‚</description>
      <category>ç½‘ç»œ</category>
      <pubDate>Mon, 13 Nov 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ICMP(Internet Control Message Protocol,äº’è”ç½‘æ§åˆ¶åè®®)ï¼Œå±äºç½‘ç»œå±‚åè®®ã€‚ä¸»è¦ç”¨äºåœ¨IPä¸»æœºå’Œè·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šä¸»æœºæ˜¯å¦å¯è¾¾ã€è·¯ç”±æ˜¯å¦å¯ç”¨ç­‰ã€‚</p>
<p>ICMPä½¿ç”¨IPåè®®å‘é€ä¿¡æ¯ï¼Œå®ƒè™½ç„¶å±äºç½‘ç»œå±‚åè®®ï¼Œä½†ä¸¥æ ¼æ¥è¯´ï¼Œå®ƒä½äºIPä¹‹ä¸Šã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>ç½‘ç»œå±‚åè®®</title>
      <link>http://blog.cjhe.top/network/internet-layer/</link>
      <guid>http://blog.cjhe.top/network/internet-layer/</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç½‘ç»œå±‚åè®®</source>
      <description>æœ¬ç¯‡ä»‹ç»è®¡ç®—æœºç½‘ç»œç½‘ç»œå±‚åè®® å¸¸è§çš„ç½‘ç»œå±‚åè®®ï¼š IP IPv6 ICMP ARP</description>
      <category>ç½‘ç»œ</category>
      <pubDate>Thu, 11 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>æœ¬ç¯‡ä»‹ç»è®¡ç®—æœºç½‘ç»œç½‘ç»œå±‚åè®®</p>
</blockquote>
<p>å¸¸è§çš„ç½‘ç»œå±‚åè®®ï¼š</p>
<ul>
<li>IP</li>
<li>IPv6</li>
<li>ICMP</li>
<li>ARP</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>é“¾è·¯å±‚åè®®</title>
      <link>http://blog.cjhe.top/network/link-layer/</link>
      <guid>http://blog.cjhe.top/network/link-layer/</guid>
      <source url="http://blog.cjhe.top/rss.xml">é“¾è·¯å±‚åè®®</source>
      <description>é“¾è·¯å±‚åè®®æ¯”è¾ƒååº•å±‚ï¼Œæœ‰æœºä¼šå†ä»‹ç»</description>
      <category>ç½‘ç»œ</category>
      <pubDate>Thu, 11 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>é“¾è·¯å±‚åè®®æ¯”è¾ƒååº•å±‚ï¼Œæœ‰æœºä¼šå†ä»‹ç»</p>
</blockquote>
]]></content:encoded>
    </item>
    <item>
      <title>ä¼ è¾“å±‚åè®®</title>
      <link>http://blog.cjhe.top/network/transport-layer/</link>
      <guid>http://blog.cjhe.top/network/transport-layer/</guid>
      <source url="http://blog.cjhe.top/rss.xml">ä¼ è¾“å±‚åè®®</source>
      <description>æœ¬ç¯‡ä»‹ç»è®¡ç®—æœºç½‘ç»œä¼ è¾“å±‚åè®® å¸¸è§çš„ä¼ è¾“å±‚åè®®ï¼š TCP UDP</description>
      <category>ç½‘ç»œ</category>
      <pubDate>Thu, 11 Apr 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>æœ¬ç¯‡ä»‹ç»è®¡ç®—æœºç½‘ç»œä¼ è¾“å±‚åè®®</p>
</blockquote>
<p>å¸¸è§çš„ä¼ è¾“å±‚åè®®ï¼š</p>
<ul>
<li>TCP</li>
<li>UDP</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>docker</title>
      <link>http://blog.cjhe.top/devops/docker/</link>
      <guid>http://blog.cjhe.top/devops/docker/</guid>
      <source url="http://blog.cjhe.top/rss.xml">docker</source>
      <description>è¿™é‡Œè®°å½•å·¥ä½œä¸­å­¦ä¹ åˆ°çš„dockerç›¸å…³çŸ¥è¯†</description>
      <category>devops</category>
      <pubDate>Mon, 18 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>è¿™é‡Œè®°å½•å·¥ä½œä¸­å­¦ä¹ åˆ°çš„dockerç›¸å…³çŸ¥è¯†</p>
]]></content:encoded>
    </item>
    <item>
      <title>å®¹å™¨æ‰§è¡ŒæŠ¥&amp;quot;no such file or directory&amp;quot;é—®é¢˜</title>
      <link>http://blog.cjhe.top/devops/docker/shell-line-break.html</link>
      <guid>http://blog.cjhe.top/devops/docker/shell-line-break.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å®¹å™¨æ‰§è¡ŒæŠ¥&amp;quot;no such file or directory&amp;quot;é—®é¢˜</source>
      <description>åŒäº‹è¿è¡Œdockeré•œåƒæ—¶ï¼Œæ§åˆ¶å°æŠ¥é”™&amp;quot;no such file or directory&amp;quot;ï¼Œä½†æ˜¯æŸ¥çœ‹è¯¥æ–‡ä»¶ç¡®å®å­˜åœ¨ï¼Œæœ¬æ–‡è®°å½•è¯¥é—®é¢˜çš„å®šä½å’Œè§£å†³ã€‚</description>
      <category>devops</category>
      <pubDate>Mon, 18 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>åŒäº‹è¿è¡Œdockeré•œåƒæ—¶ï¼Œæ§åˆ¶å°æŠ¥é”™"no such file or directory"ï¼Œä½†æ˜¯æŸ¥çœ‹è¯¥æ–‡ä»¶ç¡®å®å­˜åœ¨ï¼Œæœ¬æ–‡è®°å½•è¯¥é—®é¢˜çš„å®šä½å’Œè§£å†³ã€‚</p>
<!-- more -->
<h3>æŸ¥çœ‹é•œåƒä½¿ç”¨æ–¹å¼</h3>
<div class="language-yaml" data-ext="yml" data-title="yml"><pre class="language-yaml"><code>COPY xxx/run.sh /run.sh
<span class="token comment"># RUNå‘½ä»¤</span>
RUN chmod 777 /run.sh
<span class="token comment"># æ‰§è¡Œå‘½ä»¤</span>
ENTRYPOINT <span class="token punctuation">[</span><span class="token string">"/run.sh"</span><span class="token punctuation">]</span>
</code></pre></div><p>è¿™é‡ŒæŸ¥çœ‹dockerfileï¼Œé‡‡ç”¨çš„æ˜¯è„šæœ¬æ–¹å¼å¯åŠ¨æœåŠ¡è¿›ç¨‹ï¼Œä½¿ç”¨æ–¹å¼ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜</p>
<h3>æ ¹æ®æŠ¥é”™ä¿¡æ¯æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨</h3>
<p>é€šè¿‡æ–°å¢RUNå‘½ä»¤:<code>RUN ls -al</code>,æ‰“å°å½“å‰è·¯å¾„æ–‡ä»¶çš„æ–¹å¼ç¡®è®¤æ˜¯æœ‰<code>run.sh</code>è„šæœ¬æ–‡ä»¶</p>
<h3>æ£€æŸ¥è„šæœ¬æ–‡ä»¶</h3>
<p>å¯¹æ¯”äº†æœåŠ¡å™¨çš„è„šæœ¬æ–‡ä»¶å’Œå¼€å‘ä½¿ç”¨çš„è„šæœ¬æ–‡ä»¶ï¼Œä»”ç»†è§‚å¯Ÿå‘ç°è„šæœ¬æ–‡ä»¶å”¯ä¸€ä¸åŒçš„æ˜¯æ¢è¡Œç¬¦ä¸ä¸€æ ·</p>
<ul>
<li>å¼€å‘ä½¿ç”¨çš„æ˜¯windowsç³»ç»Ÿï¼Œæ¢è¡Œç¬¦ä¸º<strong>CRLF</strong>,å¯¹åº”ä¸º:<code>\r\n</code></li>
<li>æœåŠ¡å™¨ä½¿ç”¨çš„linuxç³»ç»Ÿï¼Œæ¢è¡Œç¬¦ä¸º<strong>LF</strong>ï¼Œå¯¹åº”ä¸º:<code>\n</code></li>
</ul>
<h3>å…³é”®é—®é¢˜</h3>
<p>è„šæœ¬ç¬¬ä¸€è¡Œ</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
</code></pre></div><p>è¡¨æ˜ä½¿ç”¨<code>/bin/bash</code>æ¥è§£é‡Šè„šæœ¬ï¼Œä½†å¦‚ä½•åé¢æœ‰windowsçš„æ¢è¡Œç¬¦å¯¼è‡´æ— æ³•è¯†åˆ«ï¼Œå› æ­¤ä¼šæŠ¥é”™ï¼šâ€œno such file or directoryâ€</p>
<h3>é—®é¢˜ç»“å±€</h3>
<p>é€šè¿‡ä¿®æ”¹<code>run.sh</code>çš„æ¢è¡Œç¬¦ä¸º<strong>LF</strong>ï¼Œé—®é¢˜å¾—ä»¥è§£å†³ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä»£ç æäº¤æ—¶ï¼Œå°†æ–‡ä»¶æ¢è¡Œç¬¦è®¾ç½®ä¸ºLFæ ¼å¼ã€‚</p>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>k8s</title>
      <link>http://blog.cjhe.top/devops/k8s/</link>
      <guid>http://blog.cjhe.top/devops/k8s/</guid>
      <source url="http://blog.cjhe.top/rss.xml">k8s</source>
      <description>è¿™é‡Œè®°å½•å·¥ä½œä¸­å­¦ä¹ åˆ°çš„k8sç›¸å…³çŸ¥è¯†</description>
      <category>devops</category>
      <pubDate>Mon, 18 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>è¿™é‡Œè®°å½•å·¥ä½œä¸­å­¦ä¹ åˆ°çš„k8sç›¸å…³çŸ¥è¯†</p>
]]></content:encoded>
    </item>
    <item>
      <title>Helm Dashboardç®€ä»‹</title>
      <link>http://blog.cjhe.top/devops/k8s/helm-dashboard.html</link>
      <guid>http://blog.cjhe.top/devops/k8s/helm-dashboard.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Helm Dashboardç®€ä»‹</source>
      <description>helm-dashboardæ˜¯helmçš„å¯è§†åŒ–ç•Œé¢ï¼Œå¯ä»¥æŸ¥çœ‹é›†ç¾¤å†…é€šè¿‡helméƒ¨ç½²çš„chartåŒ…ã€‚å¥½å¤„ï¼šä¸éœ€è¦ç™»å½•æœºå™¨å°±å¯ä»¥å‡çº§ã€å›æ»šchartåŒ…ã€‚</description>
      <category>devops</category>
      <pubDate>Tue, 12 Mar 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>helm-dashboardæ˜¯helmçš„å¯è§†åŒ–ç•Œé¢ï¼Œå¯ä»¥æŸ¥çœ‹é›†ç¾¤å†…é€šè¿‡helméƒ¨ç½²çš„chartåŒ…ã€‚å¥½å¤„ï¼šä¸éœ€è¦ç™»å½•æœºå™¨å°±å¯ä»¥å‡çº§ã€å›æ»šchartåŒ…ã€‚</p>
<!-- more -->
<h2>Helm Dashboardç®€ä»‹</h2>
<h3>å¸¸ç”¨ç‰¹æ€§</h3>
<ul>
<li>æŸ¥çœ‹ã€å‡çº§ã€å›æ»šchartåŒ…åŠå…¶å†…å®¹</li>
<li>æŸ¥çœ‹å„ä¸ªç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ«</li>
</ul>
<h3>æŸ¥çœ‹å·²å®‰è£…çš„chartåŒ…</h3>
<figure><figcaption></figcaption></figure>
<h3>å•ä¸ªchartåŒ…çš„å‡çº§ã€å›æ»šå’Œä¿®æ”¹é…ç½®</h3>
<figure><figcaption></figcaption></figure>
<h3>æ¯”è¾ƒå„ä¸ªç‰ˆæœ¬ä¹‹å‰çš„åŒºåˆ«</h3>
<figure><figcaption></figcaption></figure>
<h3>Helm Dadshboard é­”æ”¹</h3>
<p>helm-dashboardä¾èµ–çš„å‰ç«¯é™æ€èµ„æºå¦‚ï¼š</p>
<ul>
<li>https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/styles/github.min.css</li>
<li>https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/lightfair.min.css</li>
<li>https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css</li>
</ul>
<p>ç”±äºå›½å†…ç½‘ç»œåŸå› ï¼Œå¶å°”è®¿é—®ä¸åˆ°ï¼Œå¯¼è‡´é¡µé¢åŠ è½½ä¸å‡ºæ¥ï¼Œå½±å“ä½¿ç”¨ã€‚å› æ­¤éœ€è¦å°†è¿™äº›cdnèµ„æºæ”¹ä¸ºæœ¬åœ°å¼•ç”¨ã€‚<a href="https://github.com/Hexiaopi/helm-dashboard/commit/4eb18e1655606cd80ce1eb8001f03eaca6a55dc7" target="_blank" rel="noopener noreferrer">ä»£ç ä¿®æ”¹è¯¦è§</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>kube-state-metrics k8s éƒ¨ç½²</title>
      <link>http://blog.cjhe.top/devops/k8s/kube-state-metrics-k8s-deploy.html</link>
      <guid>http://blog.cjhe.top/devops/k8s/kube-state-metrics-k8s-deploy.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">kube-state-metrics k8s éƒ¨ç½²</source>
      <description>kube-state-metricsç”¨äºç›‘æ§k8sç›¸å…³æŒ‡æ ‡</description>
      <category>devops</category>
      <pubDate>Mon, 15 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>kube-state-metricsç”¨äºç›‘æ§k8sç›¸å…³æŒ‡æ ‡</p>
<!-- more -->
<h2>k8séƒ¨ç½²</h2>
<p>1ã€éƒ¨ç½²cluster-role</p>
<div class="language-yaml" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> exporter
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 2.10.0
  <span class="token key atrule">name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">""</span>
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> configmaps
  <span class="token punctuation">-</span> secrets
  <span class="token punctuation">-</span> nodes
  <span class="token punctuation">-</span> pods
  <span class="token punctuation">-</span> services
  <span class="token punctuation">-</span> serviceaccounts
  <span class="token punctuation">-</span> resourcequotas
  <span class="token punctuation">-</span> replicationcontrollers
  <span class="token punctuation">-</span> limitranges
  <span class="token punctuation">-</span> persistentvolumeclaims
  <span class="token punctuation">-</span> persistentvolumes
  <span class="token punctuation">-</span> namespaces
  <span class="token punctuation">-</span> endpoints
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> apps
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> statefulsets
  <span class="token punctuation">-</span> daemonsets
  <span class="token punctuation">-</span> deployments
  <span class="token punctuation">-</span> replicasets
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> batch
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> cronjobs
  <span class="token punctuation">-</span> jobs
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> autoscaling
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> horizontalpodautoscalers
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> authentication.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> tokenreviews
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> create
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> authorization.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> subjectaccessreviews
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> create
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> policy
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> poddisruptionbudgets
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> certificates.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> certificatesigningrequests
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> discovery.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> endpointslices
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> storage.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> storageclasses
  <span class="token punctuation">-</span> volumeattachments
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> admissionregistration.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> mutatingwebhookconfigurations
  <span class="token punctuation">-</span> validatingwebhookconfigurations
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> networking.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> networkpolicies
  <span class="token punctuation">-</span> ingressclasses
  <span class="token punctuation">-</span> ingresses
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> coordination.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> leases
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> rbac.authorization.k8s.io
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> clusterrolebindings
  <span class="token punctuation">-</span> clusterroles
  <span class="token punctuation">-</span> rolebindings
  <span class="token punctuation">-</span> roles
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> list
  <span class="token punctuation">-</span> watch
</code></pre></div><p>2ã€éƒ¨ç½²cluster-role-binding</p>
<div class="language-yaml" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> exporter
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 2.10.0
  <span class="token key atrule">name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
  <span class="token key atrule">name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
</code></pre></div><p>3ã€éƒ¨ç½²deployment</p>
<p>ğŸ‘ï¸ ç”±äºå›½å¤–ç½‘ç»œåŸå› ï¼Œæ³¨æ„éœ€è¦ä¿®æ”¹é•œåƒåœ°å€</p>
<div class="language-yaml" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> exporter
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 2.10.0
  <span class="token key atrule">name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> exporter
        <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
        <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 2.10.0
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">automountServiceAccountToken</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token comment">#- image: registry.k8s.io/kube-state-metrics/kube-state-metrics:v2.10.0</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/bitnami/kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics<span class="token punctuation">:</span>latest
        <span class="token key atrule">livenessProbe</span><span class="token punctuation">:</span>
          <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /healthz
            <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
          <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
          <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> http<span class="token punctuation">-</span>metrics
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8081</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> telemetry
        <span class="token key atrule">readinessProbe</span><span class="token punctuation">:</span>
          <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /
            <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8081</span>
          <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
          <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
        <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>
          <span class="token key atrule">allowPrivilegeEscalation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">capabilities</span><span class="token punctuation">:</span>
            <span class="token key atrule">drop</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> ALL
          <span class="token key atrule">readOnlyRootFilesystem</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">runAsNonRoot</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">65534</span>
          <span class="token key atrule">seccompProfile</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> RuntimeDefault
      <span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span>
        <span class="token key atrule">kubernetes.io/os</span><span class="token punctuation">:</span> linux
      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
</code></pre></div><p>4ã€éƒ¨ç½²service</p>
<p>æ³¨æ„ï¼Œéœ€è¦è®¾ç½®annotationï¼Œè®©Prometheusè‡ªåŠ¨å‘ç°</p>
<div class="language-yaml" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> exporter
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 2.10.0
  <span class="token key atrule">name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">prometheus.io/scrape</span><span class="token punctuation">:</span> <span class="token string">'true'</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">clusterIP</span><span class="token punctuation">:</span> None
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> http<span class="token punctuation">-</span>metrics
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> http<span class="token punctuation">-</span>metrics
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> telemetry
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8081</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> telemetry
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
</code></pre></div><p>5ã€éƒ¨ç½²service-account</p>
<div class="language-yaml" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">automountServiceAccountToken</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/component</span><span class="token punctuation">:</span> exporter
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
    <span class="token key atrule">app.kubernetes.io/version</span><span class="token punctuation">:</span> 2.10.0
  <span class="token key atrule">name</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>state<span class="token punctuation">-</span>metrics
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>cadvisor k8s éƒ¨ç½²</title>
      <link>http://blog.cjhe.top/devops/k8s/cadvisor-k8s-deploy.html</link>
      <guid>http://blog.cjhe.top/devops/k8s/cadvisor-k8s-deploy.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">cadvisor k8s éƒ¨ç½²</source>
      <description>cadvisor æ˜¯è°·æ­Œå…¬å¸ç”¨æ¥åˆ†æè¿è¡Œä¸­çš„ Docker å®¹å™¨çš„èµ„æºå ç”¨ä»¥åŠæ€§èƒ½ç‰¹æ€§çš„å·¥å…·ï¼Œç®€å•æ¥è¯´æ˜¯ç”¨äºç›‘æ§ Docker å®¹å™¨ã€‚</description>
      <category>devops</category>
      <pubDate>Mon, 15 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>cadvisor æ˜¯è°·æ­Œå…¬å¸ç”¨æ¥åˆ†æè¿è¡Œä¸­çš„ Docker å®¹å™¨çš„èµ„æºå ç”¨ä»¥åŠæ€§èƒ½ç‰¹æ€§çš„å·¥å…·ï¼Œç®€å•æ¥è¯´æ˜¯ç”¨äºç›‘æ§ Docker å®¹å™¨ã€‚</p>
<!-- more -->
<h2>k8séƒ¨ç½²</h2>
<div class="language-yaml" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> DaemonSet
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cadvisor
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> monitor
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> cAdvisor
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> cAdvisor
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">tolerations</span><span class="token punctuation">:</span>    <span class="token comment">#æ±¡ç‚¹å®¹å¿,å¿½ç•¥masterçš„NoSchedule</span>
        <span class="token punctuation">-</span> <span class="token key atrule">effect</span><span class="token punctuation">:</span> NoSchedule
          <span class="token key atrule">key</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>role.kubernetes.io/master
      <span class="token key atrule">hostNetwork</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">restartPolicy</span><span class="token punctuation">:</span> Always
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> cadvisor
        <span class="token key atrule">image</span><span class="token punctuation">:</span> google/cadvisor<span class="token punctuation">:</span>latest
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent 
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> root
            <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /rootfs
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> run
            <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /var/run
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> sys
            <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /sys
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> docker
            <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /var/lib/containerd
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> root
        <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> /
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> run
        <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> /var/run
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> sys
        <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> /sys
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> docker
        <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> /var/lib/containerd
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>node-exporter k8s éƒ¨ç½²</title>
      <link>http://blog.cjhe.top/devops/k8s/node-exporter-k8s-deploy.html</link>
      <guid>http://blog.cjhe.top/devops/k8s/node-exporter-k8s-deploy.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">node-exporter k8s éƒ¨ç½²</source>
      <description>node-exporterç”¨äºæš´éœ²å„ä¸ªèŠ‚ç‚¹çš„æŒ‡æ ‡ï¼Œç”±äºéœ€è¦æ¯ä¸ªèŠ‚ç‚¹éƒ½éƒ¨ç½²node-exporterï¼Œå› æ­¤kindé€‰æ‹©DaemonSetï¼Œå®ƒä¼šä¿éšœæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸€ä¸ªç›¸åŒçš„å®ä¾‹ã€‚</description>
      <category>devops</category>
      <pubDate>Mon, 15 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>node-exporterç”¨äºæš´éœ²å„ä¸ªèŠ‚ç‚¹çš„æŒ‡æ ‡ï¼Œç”±äºéœ€è¦æ¯ä¸ªèŠ‚ç‚¹éƒ½éƒ¨ç½²node-exporterï¼Œå› æ­¤kindé€‰æ‹©DaemonSetï¼Œå®ƒä¼šä¿éšœæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸€ä¸ªç›¸åŒçš„å®ä¾‹ã€‚</p>
<!-- more -->
<h2>k8séƒ¨ç½²</h2>
<div class="language-yaml" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> DaemonSet
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>exporter
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> monitor
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>exporter
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
        <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>exporter
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">k8s-app</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>exporter
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">tolerations</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">effect</span><span class="token punctuation">:</span> NoSchedule
          <span class="token key atrule">key</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>role.kubernetes.io/master
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> prom/node<span class="token punctuation">-</span>exporter<span class="token punctuation">:</span>latest
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
        <span class="token key atrule">name</span><span class="token punctuation">:</span> prometheus<span class="token punctuation">-</span>node<span class="token punctuation">-</span>exporter
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">9100</span>
          <span class="token key atrule">hostPort</span><span class="token punctuation">:</span> <span class="token number">9100</span>
          <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
          <span class="token key atrule">name</span><span class="token punctuation">:</span> metrics
        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /host/proc
          <span class="token key atrule">name</span><span class="token punctuation">:</span> proc
        <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /host/sys
          <span class="token key atrule">name</span><span class="token punctuation">:</span> sys
        <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /host
          <span class="token key atrule">name</span><span class="token punctuation">:</span> rootfs
        <span class="token key atrule">args</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>path.procfs=/host/proc
        <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>path.sysfs=/host/sys
        <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>path.rootfs=/host
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> proc
          <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /proc
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> sys
          <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /sys
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> rootfs
          <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /
      <span class="token key atrule">hostNetwork</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">hostPID</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>devops</title>
      <link>http://blog.cjhe.top/devops/</link>
      <guid>http://blog.cjhe.top/devops/</guid>
      <source url="http://blog.cjhe.top/rss.xml">devops</source>
      <description>è¿™é‡Œè®°å½•å·¥ä½œä¸­å­¦ä¹ åˆ°çš„devopsåŸºç¡€çŸ¥è¯†</description>
      <category>devops</category>
      <pubDate>Mon, 15 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>è¿™é‡Œè®°å½•å·¥ä½œä¸­å­¦ä¹ åˆ°çš„devopsåŸºç¡€çŸ¥è¯†</p>
]]></content:encoded>
    </item>
    <item>
      <title>Prometheus k8s éƒ¨ç½²</title>
      <link>http://blog.cjhe.top/devops/k8s/prometheus-k8s-deploy.html</link>
      <guid>http://blog.cjhe.top/devops/k8s/prometheus-k8s-deploy.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Prometheus k8s éƒ¨ç½²</source>
      <description>Prometheusæ˜¯ä¸ªä¼˜ç§€çš„ç›‘æ§ç³»ç»Ÿï¼ŒåŸºäºæ—¶åºæ•°æ®åº“ï¼Œè¿™é‡Œè®°å½•k8séƒ¨ç½²</description>
      <category>devops</category>
      <pubDate>Mon, 15 Jan 2024 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>Prometheusæ˜¯ä¸ªä¼˜ç§€çš„ç›‘æ§ç³»ç»Ÿï¼ŒåŸºäºæ—¶åºæ•°æ®åº“ï¼Œè¿™é‡Œè®°å½•k8séƒ¨ç½²</p>
<!-- more -->
<h2>k8séƒ¨ç½²</h2>
<p>æ­¥éª¤ä¸€ã€åˆ›å»ºæ•°æ®å­˜å‚¨</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> /home/data/prometheus
<span class="token function">chmod</span> <span class="token number">777</span> /home/data/prometheus
</code></pre></div><p>æ­¥éª¤äºŒã€åˆ›å»ºserviceaccountå’Œclusterrolebinding</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>kubectl create serviceaccount monitor <span class="token parameter variable">-n</span> monitor
kubectl create clusterrolebinding monitor-clusterrolebinding <span class="token parameter variable">-n</span> monitor <span class="token parameter variable">--clusterrole</span><span class="token operator">=</span>cluster-admin <span class="token parameter variable">--serviceaccount</span><span class="token operator">=</span>monitor:monitor
</code></pre></div><p>æ­¥éª¤ä¸‰ã€åˆ›å»ºPrometheus configmapç”¨äºå­˜å‚¨æŠ“å–é…ç½®</p>
<div class="language-yaml" data-ext="yml" data-title="yml"><pre class="language-yaml"><code></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>ç½‘ç»œ</title>
      <link>http://blog.cjhe.top/network/</link>
      <guid>http://blog.cjhe.top/network/</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç½‘ç»œ</source>
      <description>è¿™é‡Œè®°å½•å·¥ä½œä¸­å­¦ä¹ åˆ°çš„ç½‘ç»œåŸºç¡€çŸ¥è¯†</description>
      <category>ç½‘ç»œ</category>
      <pubDate>Sat, 23 Sep 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>è¿™é‡Œè®°å½•å·¥ä½œä¸­å­¦ä¹ åˆ°çš„ç½‘ç»œåŸºç¡€çŸ¥è¯†</p>
]]></content:encoded>
    </item>
    <item>
      <title>ä¸‰æ–¹åº“</title>
      <link>http://blog.cjhe.top/go-language/third-party/</link>
      <guid>http://blog.cjhe.top/go-language/third-party/</guid>
      <source url="http://blog.cjhe.top/rss.xml">ä¸‰æ–¹åº“</source>
      <category>Goè¯­è¨€</category>
      <pubDate>Wed, 20 Sep 2023 00:00:00 GMT</pubDate>
    </item>
    <item>
      <title>pflag</title>
      <link>http://blog.cjhe.top/go-language/third-party/pflag.html</link>
      <guid>http://blog.cjhe.top/go-language/third-party/pflag.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">pflag</source>
      <description>æˆ‘åœ¨æ ‡å‡†åº“ä¸­ä»‹ç»äº†ï¼Œå¯¹äºå°å‹çš„é¡¹ç›®flagèƒ½å¤ŸåŸºæœ¬æ»¡è¶³éœ€æ±‚ï¼Œä½†æ˜¯åœ¨æŸäº›å¤§å‹é¡¹ç›®æˆ–è€…ç‰¹æ®Šåœºæ™¯ä¸‹flagæœ‰äº›åŠ›ä¸ä»å¿ƒã€‚ä¸»è¦åœ¨äºï¼š flagçš„å­å‘½ä»¤éœ€è¦è‡ªå·±è§£æ flagçš„çŸ­å‘½ä»¤éœ€è¦å®šä¹‰ä¸¤ä¸ªå˜é‡ ä¸æ”¯æŒä¸€äº›å‚æ•°åºŸå¼ƒè¯´æ˜ï¼Œè¿™åœ¨æ›´æ–°çš„å·¥å…·ä¸­å¯¹ç”¨æˆ·æœ‰æ›´å¥½çš„å¼•å¯¼ä½œç”¨ å› æ­¤ä¸šç•Œå¼€æºçš„pflagå—åˆ°å¹¿å¤§çˆ±å¥½è€…çš„ä½¿ç”¨ï¼Œåœ¨ä¸€äº›è€³ç†Ÿèƒ½è¯¦çš„å¼€æºé¡¹ç›®é‡Œä¹Ÿéƒ½åœ¨ä½¿ç”¨pflagï¼Œä¾‹å¦‚ï¼š...</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Wed, 20 Sep 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>æˆ‘åœ¨æ ‡å‡†åº“ä¸­ä»‹ç»äº†<a href="/go-language/standard-library/flag.html" target="_blank">flagä½¿ç”¨</a>ï¼Œå¯¹äºå°å‹çš„é¡¹ç›®flagèƒ½å¤ŸåŸºæœ¬æ»¡è¶³éœ€æ±‚ï¼Œä½†æ˜¯åœ¨æŸäº›å¤§å‹é¡¹ç›®æˆ–è€…ç‰¹æ®Šåœºæ™¯ä¸‹flagæœ‰äº›åŠ›ä¸ä»å¿ƒã€‚ä¸»è¦åœ¨äºï¼š</p>
<ul>
<li>flagçš„å­å‘½ä»¤éœ€è¦è‡ªå·±è§£æ</li>
<li>flagçš„çŸ­å‘½ä»¤éœ€è¦å®šä¹‰ä¸¤ä¸ªå˜é‡</li>
<li>ä¸æ”¯æŒä¸€äº›å‚æ•°åºŸå¼ƒè¯´æ˜ï¼Œè¿™åœ¨æ›´æ–°çš„å·¥å…·ä¸­å¯¹ç”¨æˆ·æœ‰æ›´å¥½çš„å¼•å¯¼ä½œç”¨</li>
</ul>
<p>å› æ­¤ä¸šç•Œå¼€æºçš„<a href="https://github.com/spf13/pflag" target="_blank" rel="noopener noreferrer">pflag</a>å—åˆ°å¹¿å¤§çˆ±å¥½è€…çš„ä½¿ç”¨ï¼Œåœ¨ä¸€äº›è€³ç†Ÿèƒ½è¯¦çš„å¼€æºé¡¹ç›®é‡Œä¹Ÿéƒ½åœ¨ä½¿ç”¨pflagï¼Œä¾‹å¦‚ï¼šKubernetesã€Istioã€Helmã€Dockerã€Etcdç­‰ã€‚</p>
<h2>ç®€å•ç”¨æ³•</h2>
<h3>æ”¯æŒæ ‡å‡†åº“flagç”¨æ³•</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> flagStrA <span class="token operator">=</span> pflag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">"str-a"</span><span class="token punctuation">,</span> <span class="token string">"str-a"</span><span class="token punctuation">,</span> <span class="token string">"flag test *string"</span><span class="token punctuation">)</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleFlagLongStringPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	pflag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"--str-a"</span><span class="token punctuation">,</span> <span class="token string">"stra"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>flagStrA<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// stra</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>æ³¨æ„æ˜¯é•¿é€‰é¡¹ï¼Œå³å‚æ•°ä¸º<code>--xxx</code></p>
</div>
<h3>æ”¯æŒçŸ­é€‰é¡¹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> flagStrB <span class="token operator">=</span> pflag<span class="token punctuation">.</span><span class="token function">StringP</span><span class="token punctuation">(</span><span class="token string">"str-b"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"str-b"</span><span class="token punctuation">,</span> <span class="token string">"long and short flag test *string"</span><span class="token punctuation">)</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleFlagShortStringPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	pflag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"-b"</span><span class="token punctuation">,</span> <span class="token string">"strb"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>flagStrB<span class="token punctuation">)</span>
	<span class="token comment">// OutPut:</span>
	<span class="token comment">// strb</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>æ”¯æŒç»‘å®šåˆ°å·²æœ‰å˜é‡</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> flagStrC <span class="token builtin">string</span>
<span class="token keyword">var</span> flagStrD <span class="token builtin">string</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	pflag<span class="token punctuation">.</span><span class="token function">StringVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>flagStrC<span class="token punctuation">,</span> <span class="token string">"str-c"</span><span class="token punctuation">,</span> <span class="token string">"str-c"</span><span class="token punctuation">,</span> <span class="token string">"long flag test string"</span><span class="token punctuation">)</span>
	pflag<span class="token punctuation">.</span><span class="token function">StringVarP</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>flagStrD<span class="token punctuation">,</span> <span class="token string">"str-d"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"str-d"</span><span class="token punctuation">,</span> <span class="token string">"long and short flag test string"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleFlagString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	pflag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"--str-c"</span><span class="token punctuation">,</span> <span class="token string">"strc"</span><span class="token punctuation">,</span> <span class="token string">"-d"</span><span class="token punctuation">,</span> <span class="token string">"strd"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>flagStrC<span class="token punctuation">,</span> flagStrD<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// strc strd</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>æ ‡è®°å‘½ä»¤è¡Œå‚æ•°å·²åºŸå¼ƒ</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>pflag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">MarkDeprecated</span><span class="token punctuation">(</span><span class="token string">"badflag"</span><span class="token punctuation">,</span> <span class="token string">"please use --desc instead"</span><span class="token punctuation">)</span>
pflag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">MarkShorthandDeprecated</span><span class="token punctuation">(</span><span class="token string">"str-b"</span><span class="token punctuation">,</span> <span class="token string">"please use --str-b instead"</span><span class="token punctuation">)</span>
</code></pre></div><p>æ‰“å°Usage()</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>Flag --badflag has been deprecated, please use --desc instead
Flag shorthand -b has been deprecated, please use --str-b instead
</code></pre></div><h3>æŒ‡å®šäº†å‚æ•°å´æ²¡æœ‰ä¼ å€¼åœºæ™¯ä¸‹çš„é»˜è®¤å€¼æ”¹å†™</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> age <span class="token operator">=</span> pflag<span class="token punctuation">.</span><span class="token function">IntP</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">"Input Your Age"</span><span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	pflag<span class="token punctuation">.</span><span class="token function">Lookup</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>NoOptDefVal <span class="token operator">=</span> <span class="token string">"25"</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestFlagDefault</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	tests <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span> <span class="token punctuation">{</span>
		name      <span class="token builtin">string</span>
		arguments <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
		want      <span class="token builtin">int</span>
	<span class="token punctuation">}</span><span class="token punctuation">{</span>
		<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"æ²¡ä¼ å…¥å‚æ•°å’Œå€¼"</span><span class="token punctuation">,</span> arguments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">,</span> want<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"ä¼ å…¥å‚æ•°å’Œå€¼"</span><span class="token punctuation">,</span> arguments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"--age=10"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> want<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"ä¼ å…¥å‚æ•°,æ²¡ä¼ å€¼"</span><span class="token punctuation">,</span> arguments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"--age"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> want<span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> test <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span>
		pflag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span>arguments<span class="token punctuation">)</span>
		<span class="token keyword">if</span> <span class="token operator">*</span>age <span class="token operator">!=</span> test<span class="token punctuation">.</span>want <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"%s pflag parse want:%d,but got:%d"</span><span class="token punctuation">,</span> test<span class="token punctuation">.</span>name<span class="token punctuation">,</span> test<span class="token punctuation">.</span>want<span class="token punctuation">,</span> <span class="token operator">*</span>age<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>::: notice</p>
<ul>
<li>å½“è¾“å…¥--age 10ï¼Œageå˜é‡å€¼ä¸ºï¼š10ï¼›</li>
<li>å½“è¾“å…¥--ageï¼Œageå˜é‡å€¼ä¸ºï¼š25ï¼›</li>
<li>å½“æ²¡è¾“å…¥--ageï¼Œageå˜é‡å€¼ä¸ºï¼š30ï¼›</li>
</ul>
<p>:::</p>
<h3>æ”¯æŒéšè—å‚æ•°</h3>
<blockquote>
<p>éšè—çš„å‚æ•°ä¸ä¼šæ˜¾ç¤ºåœ¨usage/helpä¸­</p>
</blockquote>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>pflag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">MarkHidden</span><span class="token punctuation">(</span><span class="token string">"secretFlag"</span><span class="token punctuation">)</span>
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>æ ‡å‡†åº“</title>
      <link>http://blog.cjhe.top/go-language/standard-library/</link>
      <guid>http://blog.cjhe.top/go-language/standard-library/</guid>
      <source url="http://blog.cjhe.top/rss.xml">æ ‡å‡†åº“</source>
      <category>Goè¯­è¨€</category>
      <pubDate>Tue, 19 Sep 2023 00:00:00 GMT</pubDate>
    </item>
    <item>
      <title>flagä½¿ç”¨</title>
      <link>http://blog.cjhe.top/go-language/standard-library/flag.html</link>
      <guid>http://blog.cjhe.top/go-language/standard-library/flag.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">flagä½¿ç”¨</source>
      <description>flagåº“å®ç°å‘½ä»¤è¡Œå‚æ•°è§£æ ç®€å•ç”¨æ³• flagå‚æ•°ä½¿ç”¨è¯­æ³• -flag // ç ´æŠ˜å·ï¼Œä½¿ç”¨é»˜è®¤å€¼ --flag // åŒç ´æŠ˜å· -flag=x // æŒ‡å®šå‚æ•°å€¼ -flag x // non-boolean flags only å­—ç¬¦ä¸²ç±»å‹ ä½¿ç”¨ç¤ºä¾‹ ä¸è¿‡ç”±äºflag.String()è¿”å›çš„æ˜¯æŒ‡é’ˆç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå› æ­¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹å¼å®šä¹‰ ä½¿ç”¨ç¤ºä¾‹ ...</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Tue, 05 Sep 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>flagåº“å®ç°å‘½ä»¤è¡Œå‚æ•°è§£æ</p>
</blockquote>
<h2>ç®€å•ç”¨æ³•</h2>
<div class="hint-container tip">
<p class="hint-container-title">flagå‚æ•°ä½¿ç”¨è¯­æ³•</p>
<p>-flag    // ç ´æŠ˜å·ï¼Œä½¿ç”¨é»˜è®¤å€¼
--flag   // åŒç ´æŠ˜å·
-flag=x  // æŒ‡å®šå‚æ•°å€¼
-flag x  // non-boolean flags only</p>
</div>
<h3>å­—ç¬¦ä¸²ç±»å‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Example1ï¼šflag.String è¿”å›æŒ‡é’ˆç±»å‹å­—ç¬¦ä¸²</span>
<span class="token keyword">var</span> flagStrA <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">"str-a"</span><span class="token punctuation">,</span> <span class="token string">"str-a"</span><span class="token punctuation">,</span> <span class="token string">"flag test *string"</span><span class="token punctuation">)</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleFlagStringPointPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"-str-a"</span><span class="token punctuation">,</span> <span class="token string">"stra"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>flagStrA<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// stra</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸è¿‡ç”±äºflag.String()è¿”å›çš„æ˜¯æŒ‡é’ˆç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå› æ­¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹å¼å®šä¹‰</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Example2ï¼šå¦‚æœæœŸæœ›å®šä¹‰å­—ç¬¦ä¸²ç±»å‹ï¼Œå¯ä»¥é€šè¿‡initå‡½æ•°åˆå§‹åŒ–</span>
<span class="token keyword">var</span> flagStrB <span class="token builtin">string</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// flag.StringVarå¯ä»¥ç»‘å®šå·²æœ‰çš„å˜é‡</span>
	flag<span class="token punctuation">.</span><span class="token function">StringVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>flagStrB<span class="token punctuation">,</span> <span class="token string">"str-b"</span><span class="token punctuation">,</span> <span class="token string">"str-b"</span><span class="token punctuation">,</span> <span class="token string">"flag test string"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleFlagStringPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"-str-b"</span><span class="token punctuation">,</span> <span class="token string">"strb"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>flagStrB<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// strb</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>intç±»å‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Example3ï¼šintç±»å‹å˜é‡</span>
<span class="token keyword">var</span> flagInt <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token string">"int"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"flag test *int"</span><span class="token punctuation">)</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleFlagIntPointPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"-int"</span><span class="token punctuation">,</span> <span class="token string">"10"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>flagInt<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// 10</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>Boolç±»å‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Example3ï¼šintç±»å‹å˜é‡</span>
<span class="token keyword">var</span> flagInt <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token string">"int"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"flag test *int"</span><span class="token punctuation">)</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">boolç±»å‹å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å­—é¢é‡</p>
<p>1, 0, t, f, T, F, true, false, TRUE, FALSE, True, False</p>
</div>
<p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleBoolPointPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"-bool=True"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>flagBool<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ³¨æ„äº‹é¡¹</p>
<h4>boolç±»å‹ä¸å¯ä½¿ç”¨ï¼š-flag xå½¢å¼</h4>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleBoolPointNoticPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"-bool"</span><span class="token punctuation">,</span> <span class="token string">"false"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>flagBool<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è™½ç„¶æ˜¾ç¤ºçš„ä¼ å…¥<code>false</code>ï¼Œä½†æ˜¯æœ€ç»ˆç»“æœæ˜¯<code>true</code></p>
</div>
<h4>boolç±»å‹ï¼š-flagå½¢å¼ï¼Œè®¤ä¸ºtrue</h4>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleBoolPointEmptyPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"-bool"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>flagBool<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// true</span>
<span class="token punctuation">}</span>
</code></pre></div></div>
<h3>durationç±»å‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Example5ï¼šdurationç±»å‹å˜é‡</span>
<span class="token keyword">var</span> flagDuration <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span><span class="token string">"duration"</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>Minute<span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"flag test *duration"</span><span class="token punctuation">)</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleFlagDurationPointPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"-duration"</span><span class="token punctuation">,</span> <span class="token string">"1m1s"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>flagDuration<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// 1m1s</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>é«˜é˜¶ç”¨æ³•</h2>
<p>flagæ ‡å‡†åº“æä¾›äº†åŸºç¡€çš„æ•°æ®ç±»å‹å‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p>
<ul>
<li>bool</li>
<li>int</li>
<li>int64</li>
<li>uint</li>
<li>uint64</li>
<li>string</li>
<li>float64</li>
<li>duration</li>
</ul>
<h3>è‡ªå®šä¹‰ç±»å‹</h3>
<p>å¦‚æœéœ€è¦è‡ªå®šä¹‰ç±»å‹ï¼Œéœ€è¦å®ç°<code>flag.Value</code>æ¥å£</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Value <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
	<span class="token function">Set</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Example6: è‡ªå®šä¹‰ç±»å‹</span>
<span class="token keyword">type</span> URLValue <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	URL <span class="token operator">*</span>url<span class="token punctuation">.</span>URL
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>v URLValue<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> v<span class="token punctuation">.</span>URL <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> v<span class="token punctuation">.</span>URL<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token string">""</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>v <span class="token operator">*</span>URLValue<span class="token punctuation">)</span> <span class="token function">Set</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> u<span class="token punctuation">,</span> err <span class="token operator">:=</span> url<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		v<span class="token punctuation">.</span>URL <span class="token operator">=</span> u
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> u URLValue

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span><span class="token function">Var</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span> <span class="token string">"url"</span><span class="token punctuation">,</span> <span class="token string">"flag test self struct"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleStructPrint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span>CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"-url"</span><span class="token punctuation">,</span> <span class="token string">"https://golang.org/pkg/flag/"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// https://golang.org/pkg/flag/</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>å­å‘½ä»¤</h3>
<p>è¿™é‡Œå‚è€ƒç½‘ç«™ç¤ºä¾‹ï¼š<a href="https://gobyexample.com/command-line-subcommands" target="_blank" rel="noopener noreferrer">gobyexample</a></p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"flag"</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    fooCmd <span class="token operator">:=</span> flag<span class="token punctuation">.</span><span class="token function">NewFlagSet</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> flag<span class="token punctuation">.</span>ExitOnError<span class="token punctuation">)</span>
    fooEnable <span class="token operator">:=</span> fooCmd<span class="token punctuation">.</span><span class="token function">Bool</span><span class="token punctuation">(</span><span class="token string">"enable"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">"enable"</span><span class="token punctuation">)</span>
    fooName <span class="token operator">:=</span> fooCmd<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span>

    barCmd <span class="token operator">:=</span> flag<span class="token punctuation">.</span><span class="token function">NewFlagSet</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">,</span> flag<span class="token punctuation">.</span>ExitOnError<span class="token punctuation">)</span>
    barLevel <span class="token operator">:=</span> barCmd<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token string">"level"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"level"</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"expected 'foo' or 'bar' subcommands"</span><span class="token punctuation">)</span>
        os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">switch</span> os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>

    <span class="token keyword">case</span> <span class="token string">"foo"</span><span class="token punctuation">:</span>
        fooCmd<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"subcommand 'foo'"</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"  enable:"</span><span class="token punctuation">,</span> <span class="token operator">*</span>fooEnable<span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"  name:"</span><span class="token punctuation">,</span> <span class="token operator">*</span>fooName<span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"  tail:"</span><span class="token punctuation">,</span> fooCmd<span class="token punctuation">.</span><span class="token function">Args</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token string">"bar"</span><span class="token punctuation">:</span>
        barCmd<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"subcommand 'bar'"</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"  level:"</span><span class="token punctuation">,</span> <span class="token operator">*</span>barLevel<span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"  tail:"</span><span class="token punctuation">,</span> barCmd<span class="token punctuation">.</span><span class="token function">Args</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"expected 'foo' or 'bar' subcommands"</span><span class="token punctuation">)</span>
        os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>./command-line-subcommands foo <span class="token parameter variable">-enable</span> <span class="token parameter variable">-name</span><span class="token operator">=</span>joe a1 a2
</code></pre></div><div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>subcommand 'foo'
  enable: true
  name: joe
  tail: [a1 a2]
</code></pre></div><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>./command-line-subcommands bar <span class="token parameter variable">-level</span> <span class="token number">8</span> a1
</code></pre></div><div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>subcommand 'bar'
  level: 8
  tail: [a1]
</code></pre></div><h2>åº•å±‚ç»“æ„</h2>
<p>Flagä»£è¡¨ä¸€ä¸ªæ ‡å¿—ï¼Œä¾‹å¦‚:<code>--version</code></p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// A Flag represents the state of a flag.</span>
<span class="token keyword">type</span> Flag <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name     <span class="token builtin">string</span> <span class="token comment">// name as it appears on command line</span>
	Usage    <span class="token builtin">string</span> <span class="token comment">// help message</span>
	Value    Value  <span class="token comment">// value as set</span>
	DefValue <span class="token builtin">string</span> <span class="token comment">// default value (as text); for usage message</span>
<span class="token punctuation">}</span>
</code></pre></div><p>FlagSet ä»£è¡¨æ ‡å¿—çš„é›†åˆï¼Œä¾‹å¦‚ï¼š<code>--name</code>ã€<code>--age</code>...</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> FlagSet <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token comment">// Usage is the function called when an error occurs while parsing flags.</span>
	<span class="token comment">// The field is a function (not a method) that may be changed to point to</span>
	<span class="token comment">// a custom error handler. What happens after Usage is called depends</span>
	<span class="token comment">// on the ErrorHandling setting; for the command line, this defaults</span>
	<span class="token comment">// to ExitOnError, which exits the program after calling Usage.</span>
	Usage <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	name          <span class="token builtin">string</span>
	parsed        <span class="token builtin">bool</span>
	actual        <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">*</span>Flag
	formal        <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">*</span>Flag
	args          <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token comment">// arguments after flags</span>
	errorHandling ErrorHandling
	output        io<span class="token punctuation">.</span>Writer <span class="token comment">// nil means stderr; use Output() accessor</span>
<span class="token punctuation">}</span>
</code></pre></div><p>FlagSetåŒ…å«ä¸€ç³»åˆ—æ–¹æ³•ï¼š</p>
<ul>
<li>BoolVar(p *bool,name string,value bool,usage string)</li>
<li>Bool(name string,value bool,usage string) *bool</li>
<li>IntVar(p *int,name string,value int,usage string)</li>
<li>Int(name string,value int,usage string) *int</li>
<li>Int64Var(p *int64,name string,value int64,usage string)</li>
<li>Int64(name string,value int64,usage string) *int64</li>
<li>UIntVar(p *uint,name string,value uint,usage string)</li>
<li>UInt(name string,value uint,usage string) *Uint</li>
<li>UInt64Var(p *uint64,name string,value uint64,usage string)</li>
<li>UInt64(name string,value uint64,usage string) *Uint64</li>
<li>StringVar(p *string,name string,value string,usage string)</li>
<li>String(name string,value string,usage string) *string</li>
<li>Float64Var(p *float64,name string,value float64,usage string)</li>
<li>Float64(name string,value float64,usage string) *float64</li>
<li>DurationVar(p *time.Duration,name string,value time.Duration,usage string)</li>
<li>Duration(name string,value time.Duration,usage string) *time.Duration</li>
<li>TextVar(p encoding.TextUnmarshaler,name string,value encoding.TextMarshaler,usage string)</li>
<li>Var(value Value, name string, usage string)</li>
</ul>
<p>è€Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨çš„æ˜¯flagåº“ä¸­çš„ä»¥ä¸‹æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š<code>flag.StringVar()</code></p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">StringVar</span><span class="token punctuation">(</span>p <span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">,</span> name <span class="token builtin">string</span><span class="token punctuation">,</span> value <span class="token builtin">string</span><span class="token punctuation">,</span> usage <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	CommandLine<span class="token punctuation">.</span><span class="token function">Var</span><span class="token punctuation">(</span><span class="token function">newStringValue</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> usage<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶æœ¬è´¨ä¸Šæ˜¯è°ƒç”¨<code>CommandLine.Var</code>æ–¹æ³•ï¼Œè€ŒCommandLineæ˜¯FlagSetçš„ä¸€ä¸ªå®ä¾‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> CommandLine <span class="token operator">=</span> <span class="token function">NewFlagSet</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ExitOnError<span class="token punctuation">)</span>
</code></pre></div><ul>
<li><code>os.Args[0]</code>ï¼šæ˜¯ç¨‹åºè¿è¡Œæ—¶çš„åç§°ã€‚</li>
<li><code>ExitOnError</code>ï¼šæ˜¯è§£æå‚æ•°æ—¶é‡åˆ°é”™è¯¯æ—¶é€€å‡º</li>
</ul>
<p><code>flag.Parse</code>å…¶æœ¬è´¨ä¸Šä¹Ÿæ˜¯è°ƒç”¨CommandLineçš„è§£æï¼Œå¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Ignore errors; CommandLine is set for ExitOnError.</span>
	CommandLine<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®ƒå°†<code>os.Args[1:]</code>ï¼Œå³é™¤äº†ç¨‹åºåç§°å¤–ï¼Œå…¶ä½™çš„å‚æ•°ä¼ ç»™CommandLineè¿›è¡Œè§£æã€‚</p>
<p>æœ€ä¸ºæ ¸å¿ƒçš„ä»£ç è«è¿‡äºå‚æ•°çš„è§£æï¼Œå¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>f <span class="token operator">*</span>FlagSet<span class="token punctuation">)</span> <span class="token function">Parse</span><span class="token punctuation">(</span>arguments <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	f<span class="token punctuation">.</span>parsed <span class="token operator">=</span> <span class="token boolean">true</span>
	f<span class="token punctuation">.</span>args <span class="token operator">=</span> arguments
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		seen<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">parseOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> seen <span class="token punctuation">{</span>
			<span class="token keyword">continue</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">switch</span> f<span class="token punctuation">.</span>errorHandling <span class="token punctuation">{</span>
		<span class="token keyword">case</span> ContinueOnError<span class="token punctuation">:</span>
			<span class="token keyword">return</span> err
		<span class="token keyword">case</span> ExitOnError<span class="token punctuation">:</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> ErrHelp <span class="token punctuation">{</span>
				os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
		<span class="token keyword">case</span> PanicOnError<span class="token punctuation">:</span>
			<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™é‡Œå¾ªç¯è§£ææ¯ä¸€ä¸ªFlagï¼Œå³ï¼š<code>f.parseOne()</code>ã€‚</p>
<p>æœ€åæ€»ç»“å…¶ä¸­çš„å…³ç³»å›¾:</p>
<figure><figcaption>flag</figcaption></figure>
]]></content:encoded>
    </item>
    <item>
      <title>recoveræ³¨æ„äº‹é¡¹</title>
      <link>http://blog.cjhe.top/go-language/base/recover.html</link>
      <guid>http://blog.cjhe.top/go-language/base/recover.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">recoveræ³¨æ„äº‹é¡¹</source>
      <description>deferç»“åˆrecoveré€šå¸¸ç”¨äºæ•è·panic æ­£ç¡®ä½¿ç”¨ç¤ºä¾‹ ä½¿ç”¨ç¤ºä¾‹ é”™è¯¯ç”¨ä¾‹ï¼šä¸ä½¿ç”¨defer è­¦å‘Š ä¸ä½¿ç”¨defer æ–¹å¼ï¼Œå°†æ— æ³•æ•è·å¼‚å¸¸ï¼Œç¨‹åºé™·å…¥panic é”™è¯¯ç”¨ä¾‹ï¼šrecover åœ¨ defer åµŒå¥—å‡½æ•°ä¸­ è­¦å‘Š defer recoverå’Œpanicä¸åœ¨åŒä¸€å±‚çº§ï¼Œå¯¼è‡´æ— æ³•æ•è·å¼‚å¸¸ï¼Œç¨‹åºé™·å…¥panic</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Sun, 27 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>deferç»“åˆrecoveré€šå¸¸ç”¨äºæ•è·panic</p>
</blockquote>
<h2>æ­£ç¡®ä½¿ç”¨ç¤ºä¾‹</h2>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">PrintRecover</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"some thing"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExamplePrintRecover</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">PrintRecover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// a</span>
	<span class="token comment">// some thing</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>é”™è¯¯ç”¨ä¾‹ï¼šä¸ä½¿ç”¨defer</h2>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">FailRecoverWithoutDefer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"some thing"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container caution">
<p class="hint-container-title">è­¦å‘Š</p>
<p>ä¸ä½¿ç”¨defer æ–¹å¼ï¼Œå°†æ— æ³•æ•è·å¼‚å¸¸ï¼Œç¨‹åºé™·å…¥panic</p>
</div>
<h2>é”™è¯¯ç”¨ä¾‹ï¼šrecover åœ¨ defer åµŒå¥—å‡½æ•°ä¸­</h2>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">FailRecoverWithoutLevelDefer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//recover åœ¨ defer åµŒå¥—å‡½æ•°ä¸­</span>
			<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"some thing"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container caution">
<p class="hint-container-title">è­¦å‘Š</p>
<p>defer recoverå’Œpanicä¸åœ¨åŒä¸€å±‚çº§ï¼Œå¯¼è‡´æ— æ³•æ•è·å¼‚å¸¸ï¼Œç¨‹åºé™·å…¥panic</p>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>package</title>
      <link>http://blog.cjhe.top/go-language/base/package.html</link>
      <guid>http://blog.cjhe.top/go-language/base/package.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">package</source>
      <description>Goè¯­è¨€ä½¿ç”¨åŒ…ï¼ˆpackageï¼‰ä½œä¸ºåŸºæœ¬å•å…ƒæ¥ç»„ç»‡æºç ã€‚ packageçš„ä¼˜ç‚¹ ç¼–è¯‘é€Ÿåº¦å¿« Goè¦æ±‚æ¯ä¸ªæºæ–‡ä»¶åœ¨å¼€å¤´æ˜¾ç¤ºåœ°åˆ—å‡ºæ‰€æœ‰ä¾èµ–çš„åŒ…ï¼Œå¦‚æœå¼•å…¥äº†æœªä½¿ç”¨çš„åŒ…ï¼ŒGoè¯­è¨€ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ Goè¦æ±‚åŒ…ä¹‹é—´ä¸èƒ½å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œè¿™æ ·åŒ…çš„ä¾èµ–å…³ç³»ä¾¿å½¢æˆäº†ä¸€å¼ æœ‰å‘æ— ç¯å›¾ï¼Œè¿™æ ·æ¯ä¸ªåŒ…å¯ä»¥å•ç‹¬ç¼–è¯‘ä¹Ÿå¯å¹¶è¡Œç¼–è¯‘ å·²ç¼–è¯‘çš„GoåŒ…ä¸ä»…è®°å½•äº†è¯¥åŒ…çš„ä¿¡æ¯ï¼Œè¿˜è®°å½•äº†ä¾èµ–åŒ…çš„ä¿¡æ¯ã€‚åª...</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Sun, 27 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>Goè¯­è¨€ä½¿ç”¨åŒ…ï¼ˆpackageï¼‰ä½œä¸ºåŸºæœ¬å•å…ƒæ¥ç»„ç»‡æºç ã€‚</p>
<h2>packageçš„ä¼˜ç‚¹</h2>
<h3>ç¼–è¯‘é€Ÿåº¦å¿«</h3>
<ul>
<li>Goè¦æ±‚æ¯ä¸ªæºæ–‡ä»¶åœ¨å¼€å¤´æ˜¾ç¤ºåœ°åˆ—å‡ºæ‰€æœ‰ä¾èµ–çš„åŒ…ï¼Œå¦‚æœå¼•å…¥äº†æœªä½¿ç”¨çš„åŒ…ï¼ŒGoè¯­è¨€ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</li>
<li>Goè¦æ±‚åŒ…ä¹‹é—´ä¸èƒ½å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œè¿™æ ·åŒ…çš„ä¾èµ–å…³ç³»ä¾¿å½¢æˆäº†ä¸€å¼ æœ‰å‘æ— ç¯å›¾ï¼Œè¿™æ ·æ¯ä¸ªåŒ…å¯ä»¥å•ç‹¬ç¼–è¯‘ä¹Ÿå¯å¹¶è¡Œç¼–è¯‘</li>
<li>å·²ç¼–è¯‘çš„GoåŒ…ä¸ä»…è®°å½•äº†è¯¥åŒ…çš„ä¿¡æ¯ï¼Œè¿˜è®°å½•äº†ä¾èµ–åŒ…çš„ä¿¡æ¯ã€‚åªéœ€è¯»å–ç¼“å­˜çš„ç¼–è¯‘äº§ç‰©å³å¯ã€‚</li>
</ul>
<h2>åˆå§‹åŒ–é¡ºåº</h2>
<p>Goè¯­è¨€å†…ç½®å‡½æ•°<code>init()</code>ï¼Œå¸¸ç”¨äºåŒ…çº§æ•°æ®åˆå§‹åŒ–ä»¥åŠåˆå§‹çŠ¶æ€çš„æ£€æŸ¥å·¥ä½œã€‚</p>
<ul>
<li>ä¸€ä¸ªGoåŒ…å¯ä»¥æœ‰å¤šä¸ªinit()å‡½æ•°</li>
<li>init()å‡½æ•°ä¸å¯æ˜¾ç¤ºçš„è°ƒç”¨ï¼Œå¦åˆ™ä¼šç¼–è¯‘æœŸé—´æŠ¥é”™</li>
<li>init()åªä¼šæ‰§è¡Œä¸€æ¬¡</li>
</ul>
<p>GoåŒ…å¼•å…¥å…¶ä»–åŒ…ï¼Œåˆå§‹åŒ–æ—¶æŒ‰ç…§ä¸€å®šçš„æ¬¡åºé€ä¸€è°ƒç”¨è¯¥åŒ…çš„initå‡½æ•°ã€‚</p>
<figure><figcaption>package-init</figcaption></figure>
<p>Goè¯­è¨€è¿è¡Œæ—¶æŒ‰ç…§å¸¸é‡-&gt;å˜é‡-&gt;init()é¡ºåºè¿›è¡Œåˆå§‹åŒ–ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>MQTTåè®®</title>
      <link>http://blog.cjhe.top/network/application-layer/MQTT.html</link>
      <guid>http://blog.cjhe.top/network/application-layer/MQTT.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">MQTTåè®®</source>
      <description>MQTT(Mesage Queuing Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“åè®®)ï¼Œæ˜¯ä¸€ç§åŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„è½»é‡çº§é€šè®¯åè®®ï¼Œè¯¥åè®®æ„å»ºäºTCP/IPåè®®ä¸Šã€‚ å‘å±•å†å² 1999å¹´ç”±IBMå‘æ˜ï¼Œèµ·åˆç”¨äºåŸæ²¹ç®¡é“æ•°æ®é‡‡é›†ç›‘æ§ç³»ç»Ÿï¼Œè§£å†³å«æ˜Ÿä¸åŸæ²¹ç®¡é“æ£€æµ‹æ•°æ®çš„ä¼ è¾“é—®é¢˜ã€‚ 2010 å‘å¸ƒMQTT 3.1ã€‚ 2014å¹´åœ¨ OASIS æ ‡å‡†åŒ–...</description>
      <category>ç½‘ç»œ</category>
      <pubDate>Sat, 26 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>MQTT(Mesage Queuing Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“åè®®)ï¼Œæ˜¯ä¸€ç§åŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„è½»é‡çº§é€šè®¯åè®®ï¼Œè¯¥åè®®æ„å»ºäºTCP/IPåè®®ä¸Šã€‚</p>
</blockquote>
<h2>å‘å±•å†å²</h2>
<ul>
<li>1999å¹´ç”±IBMå‘æ˜ï¼Œèµ·åˆç”¨äºåŸæ²¹ç®¡é“æ•°æ®é‡‡é›†ç›‘æ§ç³»ç»Ÿï¼Œè§£å†³å«æ˜Ÿä¸åŸæ²¹ç®¡é“æ£€æµ‹æ•°æ®çš„ä¼ è¾“é—®é¢˜ã€‚</li>
<li>2010 å‘å¸ƒMQTT 3.1ã€‚</li>
<li>2014å¹´åœ¨ <strong>OASIS</strong> æ ‡å‡†åŒ–ç»„ç»‡çš„æ¨åŠ¨ä¸‹äºå…¬å¸ƒäº† <a href="https://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html" target="_blank" rel="noopener noreferrer"><code>V3.1.1</code></a> ç‰ˆæœ¬è§„èŒƒã€‚</li>
<li>2019å¹´3æœˆå‘å¸ƒäº†æœ€æ–°çš„ <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/cs02/mqtt-v5.0-cs02.html" target="_blank" rel="noopener noreferrer"><code>V5.0</code></a> ç‰ˆæœ¬è§„èŒƒã€‚</li>
</ul>
<h2>ä¼˜ç‚¹</h2>
<ul>
<li>æ”¯æŒQoSï¼ˆè®¾å¤‡ç½‘ç»œç¯å¢ƒå¤æ‚ï¼‰</li>
<li>è½»é‡ä¸”çœå¸¦å®½ï¼ˆMQTTæŠ¥æ–‡ç´§å‡‘ï¼Œå¯åœ¨ä¸¥é‡å—é™çš„ç¡¬ä»¶è®¾å¤‡å’Œä½å¸¦å®½ã€é«˜å»¶è¿Ÿçš„ç½‘ç»œä¸Šå®ç°ç¨³å®šä¼ è¾“ï¼‰</li>
<li>å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå°†å‘å¸ƒè€…ä¸è®¢é˜…è€…è§£è€¦</li>
<li>æŒç»­ä¼šè¯æ„ŸçŸ¥èƒ½åŠ›ï¼ˆæ—¶åˆ»çŸ¥é“è®¾å¤‡æ˜¯å¦åœ¨çº¿ï¼‰</li>
</ul>
<h2>é€šä¿¡æ¨¡å¼</h2>
<blockquote>
<p>å‘å¸ƒ/è®¢é˜…æ¨¡å¼(Publish/Subscribe)å°†å‘é€æ¶ˆæ¯çš„å‘å¸ƒè€…(Publisher)ä¸æ¥æ”¶æ¶ˆæ¯çš„è®¢é˜…è€…(Subscriber)åˆ†ç¦»ï¼Œä¹‹é—´çš„è¿æ¥å…³ç³»ç”±ä»£ç†è€…(Broker)è¿›è¡Œå¤„ç†ã€‚ä¸¤è€…ä¸ç›´æ¥è¿›è¡Œé€šä¿¡ï¼Œç”šè‡³å½¼æ­¤ä¹‹å‰éƒ½ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ã€‚</p>
</blockquote>
<figure><figcaption>MQTTé€šä¿¡æ¨¡å¼</figcaption></figure>
<h3>ç‰¹ç‚¹</h3>
<blockquote>
<p>å‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„é‡è¦ç‰¹æ€§å°±æ˜¯å°†æ¶ˆæ¯çš„å‘å¸ƒè€…ä¸è®¢é˜…è€…è§£è€¦ï¼Œè¿™ç§è§£è€¦ä½“ç°åœ¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>ç©ºé—´è§£è€¦ï¼šå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸éœ€è¦ç›¸äº’äº†è§£ï¼ˆä¾‹å¦‚æ— é¡»äº¤æ¢IPåœ°å€ä¸ç«¯å£ï¼‰ï¼›</li>
<li>æ—¶é—´è§£è€¦ï¼šå‘å¸ƒè€…ä¸è®¢é˜…è€…çš„æ“ä½œä¸éœ€è¦åŒæ—¶è¿è¡Œï¼ˆå¯ä¸‹çº¿ï¼‰ï¼›</li>
<li>åŒæ­¥è§£è€¦ï¼šåœ¨å‘å¸ƒæˆ–è€…è®¢é˜…æ¶ˆæ¯çš„è¿‡ç¨‹å½“ä¸­ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…å¯ä»¥å¼‚æ­¥è¿›è¡Œå·¥ä½œï¼ˆC/Sæ¨¡å¼éœ€è¦å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯ç­‰å¾…ï¼‰ï¼›</li>
</ul>
</blockquote>
<p>Brokeré€šè¿‡æŸç§<strong>è¿‡æ»¤è§„åˆ™</strong>å°†Publisherçš„æ¶ˆæ¯å‘é€ç»™Subscriberï¼Œè¯¥<strong>è¿‡æ»¤è§„åˆ™</strong>å°±æ˜¯<strong>Topic</strong></p>
<h2>æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3>ä¸»é¢˜ Topic</h3>
<blockquote>
<p>MQTT åè®®çš„<strong>ä¸»é¢˜</strong>ï¼ˆTopicï¼‰æ˜¯æŒ‡<strong>ä»£ç†è€…</strong>ç”¨äºä¸º<strong>å®¢æˆ·ç«¯</strong>è¿‡æ»¤ä¸è·¯ç”±æ¶ˆæ¯çš„ <strong>UTF-8 ç¼–ç å­—ç¬¦ä¸²</strong></p>
<p>ä¸€ä¸ª<strong>ä¸»é¢˜</strong>æ˜¯ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ª<strong>ä¸»é¢˜çº§åˆ«</strong>ï¼ˆTopic Levelï¼‰æ„æˆï¼Œæ¯ä¸ªä¸»é¢˜çº§åˆ«ç”±æ­£æ–œçº¿ <code>/</code> è¿›è¡Œåˆ†éš”ã€‚</p>
<p>ä¾‹å¦‚ï¼š&lt;çˆ¶çº§Topicåç§°&gt;/&lt;äºŒçº§Topicåç§°&gt;/&lt;ä¸‰çº§Topicåç§°&gt;</p>
<p>æ¯ä¸ª<strong>ä¸»é¢˜</strong>å¿…é¡»è‡³å°‘åŒ…å« 1 ä¸ªå­—ç¬¦ï¼ˆä¸€ä¸ªå•ç‹¬çš„æ–œæ† <code>/</code> ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ä¸»é¢˜ï¼‰ï¼Œå¹¶ä¸”ä¸»é¢˜å­—ç¬¦ä¸²å…è®¸å­˜åœ¨<strong>ç©ºæ ¼</strong>ã€‚</p>
<p>ä¸»é¢˜<strong>åŒºåˆ†å¤§å°å†™</strong>ï¼Œ<code>home/temperature</code> ä¸ <code>Home/Temperature</code> æ˜¯ 2 ä¸ªä¸åŒçš„<strong>ä¸»é¢˜</strong>ã€‚</p>
<p>ä¸»é¢˜ä¸éœ€è¦æå‰åˆ›å»ºï¼Œå‘å¸ƒè€…å‘é€æ¶ˆæ¯åˆ°æŸä¸ªä¸»é¢˜æˆ–è®¢é˜…è€…è®¢é˜…æŸä¸ªä¸»é¢˜æ—¶ï¼ŒBrokerå°±ä¼šè‡ªåŠ¨åˆ›å»º</p>
</blockquote>
<h4>é€šé…ç¬¦</h4>
<ul>
<li>
<p>å•çº§é€šé…ç¬¦ï¼š<code>+</code></p>
<blockquote>
<p>åªèƒ½åŒ¹é…ä¸€ä¸ªä¸»é¢˜çº§åˆ«</p>
</blockquote>
</li>
</ul>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>  ä¾‹å¦‚ï¼šè®¢é˜…myhome/groundfloor/+/temperature
  myhome/groundfloor/livingroom/temperature		//åŒ¹é…
  myhome/groundfloor/kitchen/temperature			//åŒ¹é…
  myhome/groundfloor/kitchen/brightness			//ä¸åŒ¹é…
  myhome/firstfloor/kitchen/temperature			//ä¸åŒ¹é…
  myhome/groundfloor/kitchen/fridge/temperature	//ä¸åŒ¹é…
</code></pre></div><ul>
<li>
<p>å¤šçº§é€šé…ç¬¦ï¼š<code>#</code></p>
<blockquote>
<p>å¯ä»¥åŒ¹é…å¤šä¸ªä¸»é¢˜çº§åˆ«</p>
</blockquote>
</li>
</ul>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>  ä¾‹å¦‚ï¼šè®¢é˜…myhome/groundfloor/#
  myhome/groundfloor/livingroom/temperature		//åŒ¹é…
  myhome/groundfloor/kitchen/temperature			//åŒ¹é…
  myhome/groundfloor/kitchen/brightness			//åŒ¹é…
  myhome/firstfloor/kitchen/temperature			//ä¸åŒ¹é…
</code></pre></div><ul>
<li>
<p>ç³»ç»Ÿä¿ç•™ä¸»é¢˜ï¼š<code>$</code></p>
<blockquote>
<p>MQTTç³»ç»Ÿå†…éƒ¨ä¿ç•™ï¼Œç”¨äºä»£ç†è€…å†…éƒ¨ç»Ÿè®¡ä¿¡æ¯</p>
</blockquote>
</li>
</ul>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>  $SYS/broker/clients/disconnected
  $SYS/broker/clients/connected
  $SYS/broker/messages/sent
  $SYS/broker/clients/total
  $SYS/broker/uptime
</code></pre></div><h4>ç”¨ä¾‹</h4>
<p>æ¯”å¦‚æˆ‘ä»¬ç”¨ä¼ æ„Ÿå™¨ç›‘è§†å®¶é‡Œçš„å§å®¤ã€å®¢å…ä»¥åŠå¨æˆ¿çš„æ¸©åº¦ã€æ¹¿åº¦å’Œç©ºæ°”è´¨é‡ï¼Œå¯ä»¥è®¾è®¡ä¸€ä¸‹å‡ ä¸ªä¸»é¢˜ï¼š</p>
<ul>
<li><code>myhome/bedroom/temperature</code></li>
<li><code>myhome/bedroom/humidity</code></li>
<li><code>myhome/bedroom/airquality</code></li>
<li><code>myhome/livingroom/temperature</code></li>
<li><code>myhome/livingroom/humidity</code></li>
<li><code>myhome/livingroom/airquality</code></li>
<li><code>myhome/kitchen/temperature</code></li>
<li><code>myhome/kitchen/humidity</code></li>
<li><code>myhome/kitchen/airquality</code></li>
</ul>
<p>å½“æˆ‘ä»¬æƒ³è·å–å§å®¤çš„æ‰€æœ‰æ•°æ®æ—¶ï¼Œå¯ä»¥è®¢é˜… <code>myhome/bedroom/+</code> ä¸»é¢˜ï¼Œå½“æˆ‘ä»¬æƒ³è·å–ä¸‰ä¸ªæˆ¿é—´çš„æ¸©åº¦æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥è®¢é˜… <code>myhome/+/temperature</code> ä¸»é¢˜ï¼Œå½“æˆ‘ä»¬æƒ³è·å–æ‰€æœ‰çš„æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥è®¢é˜… <code>myhome/#</code> æˆ–è€… <code>#</code>ã€‚</p>
<h4>æœ€ä½³å®è·µ</h4>
<ul>
<li>åˆ‡å‹¿åœ¨ä¸»é¢˜å¼€å¤´ä½¿ç”¨æ­£æ–œæ  <code>/</code>ï¼Œé¿å…å¼•å…¥ä¸€ä¸ª<strong>é›¶å­—ç¬¦</strong>ä½œä¸ºä¸å¿…è¦çš„ä¸»é¢˜çº§åˆ«ï¼›</li>
<li>æ°¸è¿œä¸è¦åœ¨ä¸»é¢˜ä¸­ä½¿ç”¨ç©ºæ ¼ï¼ˆåŒ…æ‹¬ UTF-8 å½“ä¸­ä¸åŒç±»å‹çš„ç©ºç™½ï¼‰ï¼Œä»è€Œé¿å…ä¸ºé˜…è¯»å’Œè°ƒè¯•å¸¦æ¥ä¸å¿…è¦çš„å›°æ‰°ï¼›</li>
<li>å°½é‡ä¿æŒä¸»é¢˜ç®€çŸ­ï¼Œå¯¹äºèµ„æºæœ‰é™çš„ç‰©è”ç½‘è®¾å¤‡ï¼Œæ¯ä¸ªå­—èŠ‚å ç”¨çš„å­˜å‚¨ç©ºé—´éƒ½éå¸¸é‡è¦ï¼›</li>
<li>ä»…ä½¿ç”¨ ASCII å­—ç¬¦ï¼Œé¿å…ä½¿ç”¨ä¸€äº›ä¸å¯æ‰“å°çš„å­—ç¬¦ï¼›</li>
<li>å°†å”¯ä¸€æ ‡è¯†ç¬¦æˆ–è€…<strong>å®¢æˆ·ç«¯</strong> ID åµŒå…¥ä¸»é¢˜ï¼Œä»è€Œæ–¹ä¾¿çš„è¯†åˆ«æ¶ˆæ¯çš„å‘é€è€…ï¼›</li>
<li>ä¸è¦è½»æ˜“ç›´æ¥è®¢é˜… <code>#</code>ï¼Œå³ä¸è¦ç›´æ¥ä½¿ç”¨<strong>å¤šçº§é€šé…ç¬¦</strong>è®¢é˜…<strong>ä»£ç†è€…</strong>ä¸Šå‘å¸ƒçš„å…¨éƒ¨æ¶ˆæ¯ï¼Œé¿å…ç»™<strong>è®¢é˜…è€…</strong>å¸¦æ¥è¿‡å¤§çš„æ•°æ®ååé‡ï¼›</li>
<li>ä¼˜åŒ–ä¸»é¢˜å±‚æ¬¡ç»“æ„ï¼Œä¿æŒä¸»é¢˜å‘½åçš„é•¿æœŸæ‰©å±•æ€§ï¼›</li>
</ul>
<h3>æœåŠ¡è´¨é‡ QoS</h3>
<ul>
<li>QoS-0(è‡³å¤šä¸€æ¬¡)ï¼šæ¥æ”¶æ–¹ä¸ä¼šç¡®è®¤æ”¶åˆ°æ¶ˆæ¯ï¼Œå‘é€å‘ä¹Ÿä¸ä¼šå­˜å‚¨å’Œé‡æ–°ä¼ è¾“æ¶ˆæ¯ï¼Œæ¶ˆæ¯å‘å¸ƒå®Œå…¨ä¾èµ–åº•å±‚TCP/IPç½‘ç»œï¼Œæ¶ˆæ¯å¯èƒ½ä¼šä¸¢å¤±ã€‚</li>
<li>QoS-1(è‡³å°‘ä¸€æ¬¡)ï¼šå‘é€æ–¹ä¼šå­˜å‚¨æ¶ˆæ¯ç›´è‡³æ¥æ”¶æ–¹è·å¾—ç¡®è®¤æ¶ˆæ¯çš„PUBACKæ•°æ®åŒ…ä¸ºæ­¢ï¼Œç¡®ä¿æ¶ˆæ¯åˆ°è¾¾ï¼Œä½†å¯èƒ½ä¼šå‡ºç°é‡å¤ï¼›</li>
<li>QoS-2(åªæœ‰ä¸€æ¬¡)ï¼šç¡®ä¿æ¶ˆæ¯åˆ°è¾¾ä¸”æ²¡æœ‰é‡å¤ã€‚</li>
</ul>
<figure><figcaption>MQTT-QoS</figcaption></figure>
<p>http://www.steves-internet-guide.com/mqtt-publish-subscribe/</p>
<ul>
<li>å½“å®¢æˆ·ç«¯ A çš„å‘å¸ƒ QoS å¤§äºå®¢æˆ·ç«¯ B çš„è®¢é˜… QoS æ—¶ï¼ŒæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯ B è½¬å‘æ¶ˆæ¯æ—¶ä½¿ç”¨çš„ QoS ä¸ºå®¢æˆ·ç«¯ B çš„è®¢é˜… QoSã€‚</li>
<li>å½“å®¢æˆ·ç«¯ A çš„å‘å¸ƒ QoS å°äºå®¢æˆ·ç«¯ B çš„è®¢é˜… QoS æ—¶ï¼ŒæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯ B è½¬å‘æ¶ˆæ¯æ—¶ä½¿ç”¨çš„ QoS ä¸ºå®¢æˆ·ç«¯ A çš„å‘å¸ƒ QoS</li>
</ul>
<h3>æ¶ˆæ¯ç±»å‹</h3>
<ul>
<li>CONNECT/CONNACK è¿æ¥ç›¸å…³</li>
<li>PUBLISH/PUBACK å‘å¸ƒç›¸å…³</li>
<li>SUBSCRIBE/SUBACK è®¢é˜…ç›¸å…³</li>
<li>UNSUBSCRIBE/UNSUBACK å–æ¶ˆè®¢é˜…ç›¸å…³</li>
<li>PINGREQ/PINGRESP å¿ƒè·³ç›¸å…³</li>
<li>DISCONNECT å…³é—­è¿æ¥</li>
</ul>
<h4>CONNECT</h4>
<figure><img src="http://www.uinio.com/Embedded/MQTT/4.png" alt="MQTT-CONNECT" tabindex="0" loading="lazy"><figcaption>MQTT-CONNECT</figcaption></figure>
<ul>
<li><strong>å®¢æˆ·ç«¯æ ‡è¯†ç¬¦</strong> <code>clientId</code>ï¼šç”¨äºæ ‡è¯†è¿æ¥åˆ°<strong>ä»£ç†è€…</strong>çš„æ¯ä¸ª<strong>å®¢æˆ·ç«¯</strong>ï¼Œè¯¥æ ‡è¯†ç¬¦çš„å–å€¼å¯¹äº<strong>ä»£ç†è€…</strong>ä¸<strong>å®¢æˆ·ç«¯</strong>è€Œè¨€å¿…é¡»å”¯ä¸€ï¼›</li>
<li><strong>æ¸…ç†ä¼šè¯</strong> <code>cleanSession</code>ï¼šç”¨äºå‘ŠçŸ¥<strong>ä»£ç†è€…</strong>ï¼Œå½“å‰<strong>å®¢æˆ·ç«¯</strong>æ˜¯å¦éœ€è¦å»ºç«‹æŒä¹…ä¼šè¯ï¼›
<ul>
<li>å½“ <code>CleanSession = false</code> æ—¶ï¼Œ<strong>ä»£ç†è€…</strong>å°†å­˜å‚¨<strong>å®¢æˆ·ç«¯</strong>çš„æ‰€æœ‰è®¢é˜…ï¼Œä»¥åŠå®¢æˆ·ç«¯ä»¥<strong>æœåŠ¡è´¨é‡</strong>ï¼ˆQoSï¼‰çº§åˆ« <code>1</code> æˆ–è€… <code>2</code> æ‰€è®¢é˜…çš„å…¨éƒ¨é—æ¼æ¶ˆæ¯ï¼›</li>
<li>å½“ <code>CleanSession = true</code> æ—¶ï¼Œ<strong>ä»£ç†è€…</strong>ä¸ä½†ä¸ä¼šä¸º<strong>å®¢æˆ·ç«¯</strong>ä¿å­˜ä»»ä½•æ¶ˆæ¯ï¼Œè¿˜ä¼šæ¸…é™¤æ‰æ¥è‡ªäºä¹‹å‰æŒä¹…ä¼šè¯çš„æ‰€æœ‰æ¶ˆæ¯ï¼›</li>
</ul>
</li>
<li><strong>ç”¨æˆ·å/å¯†ç </strong> <code>username</code>/<code>password</code>ï¼šç”¨äºå¯¹<strong>å®¢æˆ·ç«¯</strong>è¿›è¡Œè®¤è¯ä¸æˆæƒï¼Œé»˜è®¤ä¸ºæ˜æ–‡ä¼ è¾“ï¼Œå®é™…åº”ç”¨å½“ä¸­åº”å½“è¿›è¡ŒåŠ å¯†å¤„ç†ï¼›</li>
<li><strong>ä¸´ç»ˆé—å˜±</strong> <code>lastWill*</code>ï¼šå±äº MQTT <strong>ä¸´ç»ˆé—å˜±</strong>ï¼ˆLWTï¼ŒLast Will and Testamentï¼‰ç‰¹æ€§çš„ä¸€éƒ¨åˆ†ï¼Œå½“<strong>å®¢æˆ·ç«¯</strong>éæ­£å¸¸æ–­å¼€è¿æ¥æ—¶ï¼Œç”¨äºå‘é€é—å˜±æ¶ˆæ¯é€šçŸ¥å…¶å®ƒçš„<strong>å®¢æˆ·ç«¯</strong>ï¼›</li>
<li><strong>ä¿æŒè¿æ¥</strong> <code>keepAlive</code>ï¼šç”¨äºæŒ‡å®š<strong>å®¢æˆ·ç«¯</strong>åœ¨è¿æ¥å»ºç«‹æ—¶ï¼Œä¸<strong>ä»£ç†è€…</strong>é€šä¿¡çš„æ—¶é—´é—´éš”ï¼ˆä»¥<strong>ç§’</strong>ä¸ºå•ä½ï¼‰ï¼Œå³<strong>ä»£ç†è€…</strong>ä¸<strong>å®¢æˆ·ç«¯</strong>åœ¨ä¸å‘é€æ¶ˆæ¯çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¿æŒè¿æ¥çš„æœ€é•¿æ—¶é—´ï¼›</li>
</ul>
<h4>CONNACK</h4>
<figure><img src="http://www.uinio.com/Embedded/MQTT/5.png" alt="MQTT-CONNACK" tabindex="0" loading="lazy"><figcaption>MQTT-CONNACK</figcaption></figure>
<ul>
<li>
<p><strong>ä¼šè¯å‡ºç°æ ‡è¯†</strong> <code>sessionPresent</code>ï¼šç”¨äºå‘ŠçŸ¥<strong>å®¢æˆ·ç«¯</strong>ï¼Œå½“å‰çš„<strong>ä»£ç†è€…</strong>æ˜¯å¦å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªä¼šè¯ï¼›å½“<strong>å®¢æˆ·ç«¯</strong>è¿æ¥æ¶ˆæ¯çš„ <code>cleanSession = true</code> æ—¶ï¼Œç”±äºå½“å‰æ²¡æœ‰å¯ç”¨çš„ä¼šè¯ï¼Œæ‰€ä»¥è¯¥é¡¹æ€»æ˜¯ä¸º <code>false</code>ï¼›è€Œå½“<strong>å®¢æˆ·ç«¯</strong>è¿æ¥æ¶ˆæ¯çš„ <code>cleanSession = false</code> æ—¶ï¼Œæ­¤æ—¶å°±ä¼šå­˜åœ¨ä¸¤ç§å¯èƒ½æ€§ï¼š</p>
<ul>
<li>å¦‚æœä¼šè¯æ¶ˆæ¯å¯¹äº <code>clientId</code> å¯ç”¨ï¼Œå¹¶ä¸”<strong>ä»£ç†è€…</strong>æœåŠ¡å·²ç»ç¼“å­˜äº†è¿™äº›ä¼šè¯ä¿¡æ¯ï¼Œé‚£ä¹ˆ <code>sessionPresent</code> ä¸º <code>true</code>ï¼›</li>
<li>åä¹‹ï¼Œå¦‚æœ<strong>ä»£ç†è€…</strong>æ²¡æœ‰ä»»ä½•è¿™ä¸ª <code>clientId</code> çš„ä¼šè¯ä¿¡æ¯ï¼Œé‚£ä¹ˆè¯¥é¡¹å°±ä¸º <code>false</code>ï¼›</li>
</ul>
</li>
<li>
<p><strong>è¿æ¥è¿”å›ç </strong> <code>returnCode</code>ï¼šç”¨äºé€šçŸ¥<strong>å®¢æˆ·ç«¯</strong>å½“å‰è¿æ¥æ˜¯å¦æˆåŠŸï¼Œå…·ä½“å–å€¼è¯·å‚è€ƒä¸‹é¢è¡¨æ ¼ï¼š</p>
<p>| è¿”å›ä»£ç  | è¿”å›ç å“åº”                       |
| :</p>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>æ•°æ®åº“</title>
      <link>http://blog.cjhe.top/database/</link>
      <guid>http://blog.cjhe.top/database/</guid>
      <source url="http://blog.cjhe.top/rss.xml">æ•°æ®åº“</source>
      <description>è®°å½•å­¦ä¹ æ•°æ®åº“çš„è¿‡ç¨‹ è®¡åˆ’ï¼š MySQL MongoDB Redis Prometheus</description>
      <category>æ•°æ®åº“</category>
      <pubDate>Thu, 24 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>è®°å½•å­¦ä¹ æ•°æ®åº“çš„è¿‡ç¨‹</p>
</blockquote>
<p>è®¡åˆ’ï¼š</p>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> MySQL</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> MongoDB</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> Redis</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" disabled="disabled"><label class="task-list-item-label" for="task-item-3"> Prometheus</label></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>MySQL</title>
      <link>http://blog.cjhe.top/database/mysql/</link>
      <guid>http://blog.cjhe.top/database/mysql/</guid>
      <source url="http://blog.cjhe.top/rss.xml">MySQL</source>
      <description>MySQLæ˜¯ä¸€ç§æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š å¼€æºå…è´¹: MySQLé‡‡ç”¨å¼€æºè®¸å¯è¯ï¼Œå¯ä»¥å…è´¹è·å¾—å’Œä½¿ç”¨ã€‚è¿™ä½¿å¾—MySQLæˆä¸ºè®¸å¤šä¸ªäººå¼€å‘è€…ã€åˆåˆ›å…¬å¸å’Œä¸­å°å‹ä¼ä¸šçš„é¦–é€‰æ•°æ®åº“ï¼Œå¯ä»¥é™ä½æˆæœ¬å¹¶æé«˜çµæ´»æ€§ã€‚ å¯é æ€§å’Œç¨³å®šæ€§: MySQLç»è¿‡äº†å¹¿æ³›æµ‹è¯•å’Œå¸‚åœºéªŒè¯ï¼Œå…·æœ‰è‰¯å¥½çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚å®ƒæ”¯æŒäº‹åŠ¡å¤„ç†å’ŒACIDï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…...</description>
      <category>æ•°æ®åº“</category>
      <pubDate>Thu, 24 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>MySQLæ˜¯ä¸€ç§æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š</p>
<ul>
<li>
<p>å¼€æºå…è´¹: MySQLé‡‡ç”¨å¼€æºè®¸å¯è¯ï¼Œå¯ä»¥å…è´¹è·å¾—å’Œä½¿ç”¨ã€‚è¿™ä½¿å¾—MySQLæˆä¸ºè®¸å¤šä¸ªäººå¼€å‘è€…ã€åˆåˆ›å…¬å¸å’Œä¸­å°å‹ä¼ä¸šçš„é¦–é€‰æ•°æ®åº“ï¼Œå¯ä»¥é™ä½æˆæœ¬å¹¶æé«˜çµæ´»æ€§ã€‚</p>
</li>
<li>
<p>å¯é æ€§å’Œç¨³å®šæ€§: MySQLç»è¿‡äº†å¹¿æ³›æµ‹è¯•å’Œå¸‚åœºéªŒè¯ï¼Œå…·æœ‰è‰¯å¥½çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚å®ƒæ”¯æŒäº‹åŠ¡å¤„ç†å’ŒACIDï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ï¼‰å±æ€§ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®‰å…¨ã€‚</p>
</li>
<li>
<p>é«˜æ€§èƒ½: MySQLå…·æœ‰å‡ºè‰²çš„æ€§èƒ½ç‰¹ç‚¹ï¼Œèƒ½å¤Ÿå¤„ç†å¤§è§„æ¨¡çš„å¹¶å‘è¯·æ±‚ã€‚å®ƒä¸ºå¤šç”¨æˆ·å¹¶å‘æ“ä½œæä¾›äº†æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”ä¼˜åŒ–äº†å¤„ç†å¤§é‡æ•°æ®çš„èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>å¯æ‰©å±•æ€§: MySQLæ”¯æŒæ°´å¹³å’Œå‚ç›´æ‰©å±•ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¢åŠ æ›´å¤šçš„æœåŠ¡å™¨ã€èŠ‚ç‚¹å’Œå­˜å‚¨ï¼Œä»¥åº”å¯¹ä¸æ–­å¢é•¿çš„æ•°æ®éœ€æ±‚ã€‚å®ƒè¿˜æä¾›äº†å¤åˆ¶å’Œåˆ†ç‰‡ç­‰æœºåˆ¶ï¼Œä»¥å®ç°æ•°æ®çš„å¤åˆ¶å’Œåˆ†å¸ƒå¼å­˜å‚¨ã€‚</p>
</li>
<li>
<p>çµæ´»æ€§: MySQLæ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬Windowsã€Linuxã€macOSç­‰ï¼Œå¯ä»¥åœ¨å„ç§ç¯å¢ƒä¸­è¿è¡Œã€‚å®ƒè¿˜æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„é©±åŠ¨ç¨‹åºå’ŒAPIï¼Œå¦‚Pythonã€Javaã€PHPç­‰ï¼Œæä¾›äº†å¹¿æ³›çš„å¼€å‘å’Œé›†æˆé€‰é¡¹ã€‚</p>
</li>
<li>
<p>ç¤¾åŒºæ”¯æŒå’Œç”Ÿæ€ç³»ç»Ÿ: MySQLæ‹¥æœ‰åºå¤§çš„å¼€å‘è€…ç¤¾åŒºå’Œæ´»è·ƒçš„ç”Ÿæ€ç³»ç»Ÿï¼Œæœ‰è®¸å¤šå¼€æºå·¥å…·ã€ç¬¬ä¸‰æ–¹åº“å’Œæ’ä»¶å¯ä¾›é€‰æ‹©ã€‚è¿™æ„å‘³ç€å¯ä»¥è·å¾—ä¸°å¯Œçš„èµ„æºå’Œæ”¯æŒï¼Œèƒ½å¤Ÿæ›´å¿«åœ°è§£å†³é—®é¢˜å’Œå¼€å‘åº”ç”¨ã€‚</p>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>é¡¹ç›®è§„èŒƒ</title>
      <link>http://blog.cjhe.top/project-standard/</link>
      <guid>http://blog.cjhe.top/project-standard/</guid>
      <source url="http://blog.cjhe.top/rss.xml">é¡¹ç›®è§„èŒƒ</source>
      <description>è¿™é‡Œè®°å½•å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­çš„é¡¹ç›®è§„èŒƒï¼Œå¥½çš„è§„èŒƒæœ‰åŠ©äºï¼š ä¸€è‡´æ€§: é¡¹ç›®è§„èŒƒç¡®ä¿å›¢é˜Ÿæˆå‘˜åœ¨å·¥ä½œä¸­éµå¾ªç›¸åŒçš„æ ‡å‡†å’Œåšæ³•ï¼Œä½¿å¾—ä»£ç ã€æ–‡æ¡£ã€å‘½åç­‰ä¿æŒä¸€è‡´ã€‚è¿™æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå‡å°‘æ··ä¹±å’Œé”™è¯¯ã€‚ æé«˜æ•ˆç‡: é¡¹ç›®è§„èŒƒå®šä¹‰äº†å·²ç»éªŒè¯è¿‡çš„æœ€ä½³å®è·µå’ŒæŒ‡å¯¼åŸåˆ™ï¼Œå¯ä»¥å‡å°‘é‡å¤åŠ³åŠ¨å’Œä¸å¿…è¦çš„æ€è€ƒï¼Œæé«˜å›¢é˜Ÿæˆå‘˜çš„å·¥ä½œæ•ˆç‡ã€‚è§„èŒƒåŒ–çš„æµç¨‹å’Œæ¨¡æ¿ä¹Ÿèƒ½å‡å°‘æ²Ÿé€šæˆæœ¬ï¼Œä½¿å¾—å›¢...</description>
      <category>é¡¹ç›®è§„èŒƒ</category>
      <pubDate>Wed, 23 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>è¿™é‡Œè®°å½•å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­çš„é¡¹ç›®è§„èŒƒï¼Œå¥½çš„è§„èŒƒæœ‰åŠ©äºï¼š</p>
<ul>
<li>
<p>ä¸€è‡´æ€§: é¡¹ç›®è§„èŒƒç¡®ä¿å›¢é˜Ÿæˆå‘˜åœ¨å·¥ä½œä¸­éµå¾ªç›¸åŒçš„æ ‡å‡†å’Œåšæ³•ï¼Œä½¿å¾—ä»£ç ã€æ–‡æ¡£ã€å‘½åç­‰ä¿æŒä¸€è‡´ã€‚è¿™æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå‡å°‘æ··ä¹±å’Œé”™è¯¯ã€‚</p>
</li>
<li>
<p>æé«˜æ•ˆç‡: é¡¹ç›®è§„èŒƒå®šä¹‰äº†å·²ç»éªŒè¯è¿‡çš„æœ€ä½³å®è·µå’ŒæŒ‡å¯¼åŸåˆ™ï¼Œå¯ä»¥å‡å°‘é‡å¤åŠ³åŠ¨å’Œä¸å¿…è¦çš„æ€è€ƒï¼Œæé«˜å›¢é˜Ÿæˆå‘˜çš„å·¥ä½œæ•ˆç‡ã€‚è§„èŒƒåŒ–çš„æµç¨‹å’Œæ¨¡æ¿ä¹Ÿèƒ½å‡å°‘æ²Ÿé€šæˆæœ¬ï¼Œä½¿å¾—å›¢é˜Ÿæ›´é«˜æ•ˆåœ°ååŒå·¥ä½œã€‚</p>
</li>
<li>
<p>å¯ç»´æŠ¤æ€§: é¡¹ç›®è§„èŒƒé€šå¸¸åŒ…æ‹¬å‘½åçº¦å®šã€ä»£ç ç»“æ„ã€æ³¨é‡Šè§„èŒƒç­‰ï¼Œè¿™äº›æŒ‡å¯¼å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚å½“æ–°æˆå‘˜åŠ å…¥æˆ–è€…å›¢é˜Ÿæˆå‘˜å˜åŠ¨æ—¶ï¼Œä»–ä»¬èƒ½å¤Ÿæ›´å¿«åœ°ç†è§£é¡¹ç›®çš„ç»“æ„å’Œä»£ç ï¼Œå‡è½»ç»´æŠ¤è´Ÿæ‹…ã€‚</p>
</li>
<li>
<p>è´¨é‡æ§åˆ¶: é¡¹ç›®è§„èŒƒå¯ä»¥ç¡®ä¿é¡¹ç›®ç¬¦åˆè‰¯å¥½çš„è½¯ä»¶å·¥ç¨‹å®è·µå’Œè¡Œä¸šæ ‡å‡†ï¼Œä»è€Œæé«˜é¡¹ç›®çš„è´¨é‡ã€‚è§„èŒƒåŒ–çš„ä»£ç å’Œæµç¨‹å¯ä»¥å‡å°‘æ½œåœ¨çš„ bug å’Œé—®é¢˜ï¼Œå¹¶ä¸”æä¾›äº†ä¸€è‡´çš„è¯„ä¼°æ ‡å‡†ï¼Œæœ‰åŠ©äºæå‰å‘ç°å’Œçº æ­£é—®é¢˜ã€‚</p>
</li>
<li>
<p>å¯æ‰©å±•æ€§: é€šè¿‡å®šä¹‰è‰¯å¥½çš„è§„èŒƒå¹¶éµå¾ªå®ƒä»¬ï¼Œé¡¹ç›®å¯ä»¥æ›´å®¹æ˜“åœ°è¿›è¡Œæ‰©å±•å’Œç»´æŠ¤ã€‚åˆç†çš„æ¶æ„è®¾è®¡å’Œè§„èŒƒåŒ–çš„å¼€å‘å®è·µå¯ä»¥ä½¿å¾—é¡¹ç›®æ›´æ˜“äºæ‰©å±•ï¼Œå¹¶ä¸”é™ä½äº†å¼•å…¥æ–°åŠŸèƒ½ã€æ”¹è¿›å’Œä¼˜åŒ–çš„é£é™©ã€‚</p>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>è¿›é˜¶</title>
      <link>http://blog.cjhe.top/go-language/advance/</link>
      <guid>http://blog.cjhe.top/go-language/advance/</guid>
      <source url="http://blog.cjhe.top/rss.xml">è¿›é˜¶</source>
      <description>ä»‹ç»Goè¯­è¨€è¿›é˜¶çŸ¥è¯†ï¼ŒåŒ…æ‹¬é‡åˆ°çš„ä¸€äº›å‘å’Œåº•å±‚åŸç†ï¼Œè¿›é˜¶çŸ¥è¯†å¯¹äºå…¥é—¨ç«¥é‹æ¥è¯´å¯ä»¥ä¸ç”¨äº†è§£ï¼Œå¹¶ä¸ä¼šå½±å“æ—¥å¸¸å¼€å‘ï¼Œå±äºæ·±åº¦æ¢è®¨</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Thu, 24 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>ä»‹ç»Goè¯­è¨€è¿›é˜¶çŸ¥è¯†ï¼ŒåŒ…æ‹¬é‡åˆ°çš„ä¸€äº›å‘å’Œåº•å±‚åŸç†ï¼Œè¿›é˜¶çŸ¥è¯†å¯¹äºå…¥é—¨ç«¥é‹æ¥è¯´å¯ä»¥ä¸ç”¨äº†è§£ï¼Œå¹¶ä¸ä¼šå½±å“æ—¥å¸¸å¼€å‘ï¼Œå±äºæ·±åº¦æ¢è®¨</p>
</blockquote>
]]></content:encoded>
    </item>
    <item>
      <title>åŸºç¡€</title>
      <link>http://blog.cjhe.top/go-language/base/</link>
      <guid>http://blog.cjhe.top/go-language/base/</guid>
      <source url="http://blog.cjhe.top/rss.xml">åŸºç¡€</source>
      <description>ä»‹ç»Goè¯­è¨€åŸºç¡€çŸ¥è¯†ï¼Œä¹Ÿä¼šæ¶‰åŠåˆ°åº•å±‚åŸç†ï¼Œè¿™äº›æ˜¯æˆ‘è®¤ä¸ºè¦æŒæ¡çš„çŸ¥è¯†ã€‚</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Thu, 24 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>ä»‹ç»Goè¯­è¨€åŸºç¡€çŸ¥è¯†ï¼Œä¹Ÿä¼šæ¶‰åŠåˆ°åº•å±‚åŸç†ï¼Œè¿™äº›æ˜¯æˆ‘è®¤ä¸ºè¦æŒæ¡çš„çŸ¥è¯†ã€‚</p>
</blockquote>
]]></content:encoded>
    </item>
    <item>
      <title>è½¬è½½</title>
      <link>http://blog.cjhe.top/go-language/reprint/</link>
      <guid>http://blog.cjhe.top/go-language/reprint/</guid>
      <source url="http://blog.cjhe.top/rss.xml">è½¬è½½</source>
      <description>è¿™é‡Œä¼šè½¬è½½æˆ‘è®¤ä¸ºæ¯”è¾ƒå¥½çš„åšæ–‡</description>
      <category>Goè¯­è¨€</category>
      <category>è½¬è½½</category>
      <pubDate>Thu, 24 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>è¿™é‡Œä¼šè½¬è½½æˆ‘è®¤ä¸ºæ¯”è¾ƒå¥½çš„åšæ–‡</p>
</blockquote>
]]></content:encoded>
    </item>
    <item>
      <title>é€€å‡ºæ¨¡å¼</title>
      <link>http://blog.cjhe.top/design-pattern/concurrency/exit.html</link>
      <guid>http://blog.cjhe.top/design-pattern/concurrency/exit.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">é€€å‡ºæ¨¡å¼</source>
      <description>é€€å‡ºæ¨¡å¼ ä½¿ç”¨å…³é”®å­—goå¾ˆå®¹æ˜“å¯åŠ¨goroutineï¼Œè¿™æ ·åˆ›å»ºçš„åç¨‹å’Œå½“å‰åç¨‹å·²ç»åˆ†ç¦»ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ ç­‰å¾…æŒ‡å®šåç¨‹é€€å‡º æç¤º spawnå‡½æ•°åˆ›å»ºçš„æ–°goroutineä¸è°ƒç”¨spawnå‡½æ•°çš„goroutineï¼ˆmain goroutineï¼‰ä¹‹é—´é€šè¿‡channelå»ºç«‹äº†è”ç³»ã€‚ ç­‰å¾…å¤šä¸ªåç¨‹é€€å‡º æç¤º é€šè¿‡sync.WaitGroupï¼Œå¯¹äºæ¯ä¸€ä¸ªåç¨‹å¤„ç†å‰è¿›...</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 22 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h2>é€€å‡ºæ¨¡å¼</h2>
<p>ä½¿ç”¨å…³é”®å­—<code>go</code>å¾ˆå®¹æ˜“å¯åŠ¨goroutineï¼Œè¿™æ ·åˆ›å»ºçš„åç¨‹å’Œå½“å‰åç¨‹å·²ç»åˆ†ç¦»ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“</p>
<h3>ç­‰å¾…æŒ‡å®šåç¨‹é€€å‡º</h3>
<div class="language-go" data-ext="go" data-title="go"><pre go="" class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> signal <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"worker is working..."</span><span class="token punctuation">)</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">spawn</span><span class="token punctuation">(</span>f <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span><span class="token keyword">chan</span> signal <span class="token punctuation">{</span>
	c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> signal<span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"worker start to work..."</span><span class="token punctuation">)</span>
		<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		c <span class="token operator">&lt;-</span> <span class="token function">signal</span><span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> c
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"start a worker..."</span><span class="token punctuation">)</span>
	c <span class="token operator">:=</span> <span class="token function">spawn</span><span class="token punctuation">(</span>worker<span class="token punctuation">)</span>
	<span class="token operator">&lt;-</span>c
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"worker work done!"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>spawnå‡½æ•°åˆ›å»ºçš„æ–°goroutineä¸è°ƒç”¨spawnå‡½æ•°çš„goroutineï¼ˆmain goroutineï¼‰ä¹‹é—´é€šè¿‡channelå»ºç«‹äº†è”ç³»ã€‚</p>
</div>
<h3>ç­‰å¾…å¤šä¸ªåç¨‹é€€å‡º</h3>
<div class="language-go" data-ext="go" data-title="go"><pre go="" class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> signal <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"worker %d: is working...\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"worker %d: works done\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">spawnGroup</span><span class="token punctuation">(</span>f <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">,</span> num <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span><span class="token keyword">chan</span> signal <span class="token punctuation">{</span>
	c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> signal<span class="token punctuation">)</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"worker %d: start to work...\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
			<span class="token function">f</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		c <span class="token operator">&lt;-</span> <span class="token function">signal</span><span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> c
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"the group of workers start to work..."</span><span class="token punctuation">)</span>
	c <span class="token operator">:=</span> <span class="token function">spawnGroup</span><span class="token punctuation">(</span>worker<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
	<span class="token operator">&lt;-</span>c
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"the group of workers work done!"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>é€šè¿‡sync.WaitGroupï¼Œå¯¹äºæ¯ä¸€ä¸ªåç¨‹å¤„ç†å‰è¿›è¡Œwg.Add(1)ï¼Œé€€å‡ºæ—¶æ‰§è¡Œwg.Done()ï¼Œå¹¶ç­‰å¾…æ‰€æœ‰çš„åç¨‹é€€å‡ºwg.Wait()ã€‚ä¿éšœæ‰€æœ‰çš„åç¨‹éƒ½ä¼šç»“æŸã€‚</p>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>æ‰‡å…¥/æ‰‡å‡ºæ¨¡å‹</title>
      <link>http://blog.cjhe.top/design-pattern/concurrency/fan-in-fan-out.html</link>
      <guid>http://blog.cjhe.top/design-pattern/concurrency/fan-in-fan-out.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">æ‰‡å…¥/æ‰‡å‡ºæ¨¡å‹</source>
      <description>æ‰‡å‡ºæ¨¡å¼ å³å¤šä¸ªç›¸åŒgoroutineä»åŒä¸€ä¸ªchannelè¯»å–æ•°æ®å¹¶å¤„ç† fan-outfan-out è¾“å‡ºç»“æœ æˆ‘ä»¬ä½¿ç”¨ä¸‰ä¸ªåç¨‹ä»ä¸€ä¸ªchannelä¸­è¿‡æ»¤2çš„å€æ•°ï¼Œåˆ†åˆ«æ”¾åœ¨ä¸‰ä¸ªchannelè¾“å‡ºã€‚ç”±äºGoè¯­è¨€è°ƒåº¦ä¸ç¡®å®šæ€§ï¼Œå› æ­¤æµ‹è¯•ç»“æœå¯èƒ½ä¸ä¸€è‡´ã€‚ æ‰‡å…¥æ¨¡å¼ ä»å¤šä¸ªchannelè¯»å–æ•°æ®å¹¶å¤„ç†ï¼Œå°†ç»“æœæ”¾å…¥ä¸€ä¸ªchannel fan-infan-in ...</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 22 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h2>æ‰‡å‡ºæ¨¡å¼</h2>
<p>å³å¤šä¸ªç›¸åŒgoroutineä»åŒä¸€ä¸ªchannelè¯»å–æ•°æ®å¹¶å¤„ç†</p>
<figure><figcaption>fan-out</figcaption></figure>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestFanOut</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span>
	in <span class="token operator">:=</span> <span class="token function">echo</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
	c1 <span class="token operator">:=</span> <span class="token function">odd</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span>
	c2 <span class="token operator">:=</span> <span class="token function">odd</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span>
	c3 <span class="token operator">:=</span> <span class="token function">odd</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span>
	t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"c1"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token keyword">range</span> c1 <span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"c2"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token keyword">range</span> c2 <span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"c3"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token keyword">range</span> c3 <span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¾“å‡ºç»“æœ</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>=== RUN   TestFanOut
    fan-in-fan-out_test.go:24: c1
    fan-in-fan-out_test.go:26: 1
    fan-in-fan-out_test.go:26: 7
    fan-in-fan-out_test.go:26: 9
    fan-in-fan-out_test.go:28: c2
    fan-in-fan-out_test.go:30: 3
    fan-in-fan-out_test.go:32: c3
    fan-in-fan-out_test.go:34: 5
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>ç®¡é“æ¨¡å¼</title>
      <link>http://blog.cjhe.top/design-pattern/concurrency/pipeline.html</link>
      <guid>http://blog.cjhe.top/design-pattern/concurrency/pipeline.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç®¡é“æ¨¡å¼</source>
      <description>ç®¡é“æ˜¯Unix/Linuxä¸Šä¸€ç§å…¸å‹çš„å¹¶å‘ç¨‹åºè®¾è®¡æ¨¡å¼ï¼Œä¹Ÿæ˜¯Unixå´‡å°šç»„åˆè®¾è®¡å“²å­¦çš„å…·ä½“ä½“ç°ï¼Œä¾‹å¦‚æ‰§è¡Œï¼š å°±å¯ä»¥åˆ©ç”¨ç®¡é“æœºåˆ¶è¿‡æ»¤å‡ºå½“å‰è·¯å¾„ä¸‹ä»¥&amp;quot;.go&amp;quot;ç»“å°¾çš„æ–‡ä»¶åˆ—è¡¨ã€‚ ls -lçš„è¾“å‡ºä½œä¸ºgrep &amp;quot;\.go&amp;quot;çš„è¾“å…¥å¾ˆå®¹æ˜“å°†ä¸¤ä¸ªåŠŸèƒ½æ¨¡å—ä¸²åœ¨ä¸€èµ·ã€‚ ç®¡é“æ¨¡å¼ pipelinepipeline Goé€šå¸¸ä½¿ç”¨channelåŸè¯­æ„å»ºç®¡é“æ¨¡å¼ ç®¡é“æ¨¡å¼ä½¿ç”¨ç¤º...</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 22 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ç®¡é“æ˜¯Unix/Linuxä¸Šä¸€ç§å…¸å‹çš„å¹¶å‘ç¨‹åºè®¾è®¡æ¨¡å¼ï¼Œä¹Ÿæ˜¯Unixå´‡å°š<strong>ç»„åˆ</strong>è®¾è®¡å“²å­¦çš„å…·ä½“ä½“ç°ï¼Œä¾‹å¦‚æ‰§è¡Œï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"\.go"</span>
</code></pre></div><p>å°±å¯ä»¥åˆ©ç”¨ç®¡é“æœºåˆ¶è¿‡æ»¤å‡ºå½“å‰è·¯å¾„ä¸‹ä»¥".go"ç»“å°¾çš„æ–‡ä»¶åˆ—è¡¨ã€‚</p>
<p><code>ls -l</code>çš„è¾“å‡ºä½œä¸º<code>grep "\.go"</code>çš„è¾“å…¥å¾ˆå®¹æ˜“å°†ä¸¤ä¸ªåŠŸèƒ½æ¨¡å—ä¸²åœ¨ä¸€èµ·ã€‚</p>
<h2>ç®¡é“æ¨¡å¼</h2>
<figure><figcaption>pipeline</figcaption></figure>
<p>Goé€šå¸¸ä½¿ç”¨channelåŸè¯­æ„å»ºç®¡é“æ¨¡å¼</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> concurrency

<span class="token keyword">func</span> <span class="token function">echo</span><span class="token punctuation">(</span>nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	out <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> n <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
			out <span class="token operator">&lt;-</span> n
		<span class="token punctuation">}</span>
		<span class="token function">close</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> out
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">square</span><span class="token punctuation">(</span>in <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	out <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token keyword">range</span> in <span class="token punctuation">{</span>
			out <span class="token operator">&lt;-</span> n <span class="token operator">*</span> n
		<span class="token punctuation">}</span>
		<span class="token function">close</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> out
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">odd</span><span class="token punctuation">(</span>in <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	out <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token keyword">range</span> in <span class="token punctuation">{</span>
			<span class="token keyword">if</span> n<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
				out <span class="token operator">&lt;-</span> n
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token function">close</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> out
<span class="token punctuation">}</span>
</code></pre></div><p>ç®¡é“æ¨¡å¼ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> concurrency

<span class="token keyword">import</span> <span class="token string">"testing"</span>

<span class="token keyword">func</span> <span class="token function">TestPipeline</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">}</span>
	<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token function">odd</span><span class="token punctuation">(</span><span class="token function">echo</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¾“å‡ºç»“æœ</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>=== RUN   TestPipeline
    pipeline_test.go:8: 1
    pipeline_test.go:8: 9
    pipeline_test.go:8: 25
    pipeline_test.go:8: 49
    pipeline_test.go:8: 81
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼</title>
      <link>http://blog.cjhe.top/design-pattern/concurrency/producer-consumer.html</link>
      <guid>http://blog.cjhe.top/design-pattern/concurrency/producer-consumer.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼</source>
      <description>ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­å¸¸è§çš„æ¨¡å‹ï¼Œè¯¥æ¨¡å‹ä¸»è¦é€šè¿‡å¹³è¡¡ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¥æé«˜ç¨‹åºçš„æ•´ä½“å¤„ç†æ•°æ®çš„èƒ½åŠ› ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼ è¯¥æ¨¡å‹ä¸­ï¼šç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ï¼Œæ”¾åˆ°é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­å–æ•°æ®ã€‚è¿™æ ·ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å˜æˆå¼‚æ­¥çš„ä¸¤ä¸ªè¿‡ç¨‹ã€‚ producer-consumerproducer-consumer å®šä¹‰ç”Ÿäº§è€… å®šä¹‰æ¶ˆè´¹è€… å¯åŠ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å‹ åœ¨è¿™ä¸ªä¾‹å­...</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 22 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p><strong>ç”Ÿäº§è€…/æ¶ˆè´¹è€…</strong>æ¨¡å¼æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­å¸¸è§çš„æ¨¡å‹ï¼Œè¯¥æ¨¡å‹ä¸»è¦é€šè¿‡å¹³è¡¡ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¥æé«˜ç¨‹åºçš„æ•´ä½“å¤„ç†æ•°æ®çš„èƒ½åŠ›</p>
<h2>ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼</h2>
<p>è¯¥æ¨¡å‹ä¸­ï¼šç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ï¼Œæ”¾åˆ°é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­å–æ•°æ®ã€‚è¿™æ ·ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å˜æˆå¼‚æ­¥çš„ä¸¤ä¸ªè¿‡ç¨‹ã€‚</p>
<figure><figcaption>producer-consumer</figcaption></figure>
<p>å®šä¹‰ç”Ÿäº§è€…</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Producer: ç”Ÿäº§factorå€æ•°</span>
<span class="token keyword">func</span> <span class="token function">Producer</span><span class="token punctuation">(</span>factor <span class="token builtin">int</span><span class="token punctuation">,</span> out <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		out <span class="token operator">&lt;-</span> i <span class="token operator">*</span> factor
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®šä¹‰æ¶ˆè´¹è€…</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Consumer: æ¶ˆè´¹æ‰“å°é˜Ÿåˆ—</span>
<span class="token keyword">func</span> <span class="token function">Consumer</span><span class="token punctuation">(</span>in <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> in <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯åŠ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">Producer</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> ch<span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">Producer</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> ch<span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">Consumer</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
</code></pre></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯åŠ¨ï¼š</p>
<ul>
<li>ä¸¤ä¸ªç”Ÿäº§è€…ï¼Œåˆ†åˆ«ç”Ÿäº§3çš„å€æ•°ã€5çš„å€æ•°</li>
<li>ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œæ‰“å°é˜Ÿåˆ—ä¸­çš„æ•°æ®</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>deferæ³¨æ„äº‹é¡¹</title>
      <link>http://blog.cjhe.top/go-language/base/defer.html</link>
      <guid>http://blog.cjhe.top/go-language/base/defer.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">deferæ³¨æ„äº‹é¡¹</source>
      <description>defer è¯­å¥èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç¡®ä¿åœ¨å‡½æ•°ç»“æŸæ—¶æ‰§è¡Œä¸€äº›å¿…è¦çš„æ“ä½œï¼Œæ¯”å¦‚ï¼šå…³é—­æ–‡ä»¶å¥æŸ„ã€é‡Šæ”¾èµ„æºã€è§£é”äº’æ–¥é”ç­‰ã€‚defer å…³é”®å­—åªèƒ½ä½œç”¨å‡½æ•°æˆ–å‡½æ•°è°ƒç”¨ã€‚ æ³¨æ„äº‹é¡¹ æ‰§è¡Œé¡ºåº æ³¨æ„ defer è¯­å¥çš„æ‰§è¡Œé¡ºåºæ˜¯æŒ‰ç…§å…ˆè¿›åå‡ºï¼ˆFILOï¼‰çš„ï¼Œå³å…ˆè¿›å» defer è¯­å¥å°†æœ€åæ‰§è¡Œã€‚ æ‰§è¡Œç»“æœ 43210 å‚æ•°è®¡ç®—æ—¶æœº æ³¨æ„ defer è¯­å¥ä¸­çš„å‡½æ•°å‚æ•°ä¼šåœ¨ de...</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Sun, 27 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>defer è¯­å¥èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç¡®ä¿åœ¨å‡½æ•°ç»“æŸæ—¶æ‰§è¡Œä¸€äº›å¿…è¦çš„æ“ä½œï¼Œæ¯”å¦‚ï¼š<strong>å…³é—­æ–‡ä»¶å¥æŸ„</strong>ã€<strong>é‡Šæ”¾èµ„æº</strong>ã€<strong>è§£é”äº’æ–¥é”</strong>ç­‰ã€‚defer å…³é”®å­—åªèƒ½ä½œç”¨å‡½æ•°æˆ–å‡½æ•°è°ƒç”¨ã€‚</p>
<h2>æ³¨æ„äº‹é¡¹</h2>
<h3>æ‰§è¡Œé¡ºåº</h3>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>defer è¯­å¥çš„æ‰§è¡Œé¡ºåºæ˜¯æŒ‰ç…§å…ˆè¿›åå‡ºï¼ˆFILOï¼‰çš„ï¼Œå³å…ˆè¿›å» defer è¯­å¥å°†æœ€åæ‰§è¡Œã€‚</p>
</div>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> 
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æ‰§è¡Œç»“æœ</summary>
<p>43210</p>
</details>
<h3>å‚æ•°è®¡ç®—æ—¶æœº</h3>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>defer è¯­å¥ä¸­çš„å‡½æ•°å‚æ•°ä¼šåœ¨ defer è¯­å¥è¢«å£°æ˜æ—¶è¿›è¡Œæ±‚å€¼ï¼Œè€Œä¸æ˜¯åœ¨å®é™…æ‰§è¡Œæ—¶ã€‚</p>
</div>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span>
	<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	i <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æ‰§è¡Œç»“æœ</summary>
<p>1</p>
</details>
<h3>é‡è§os.Exit</h3>
<p>ä¸»åŠ¨è°ƒç”¨os.Exit(int)é€€å‡ºè¿›ç¨‹æ—¶ï¼Œdeferå°†ä¸å†è¢«æ‰§è¡Œ</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"defer"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"some thing..."</span><span class="token punctuation">)</span>
	os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æ‰§è¡Œç»“æœ</summary>
<p>some thing...
exit status 1</p>
</details>
<h3>å»¶è¿Ÿå‡½æ•°ä½“</h3>
<h4>å»¶è¿Ÿå‡½æ•°ä½“æœªä¼ å‚</h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	i <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æ‰§è¡Œç»“æœ</summary>
<p>2</p>
</details>
<h4>å»¶è¿Ÿå‡½æ•°ä½“ä¼ å‚</h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	i <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æ‰§è¡Œç»“æœ</summary>
<p>1</p>
</details>
<p>demo3å’Œdemo4çš„å”¯ä¸€åŒºåˆ«æ˜¯æ‰§è¡Œå‡½æ•°ä½“æ˜¯å¦ä¼ å‚ï¼Œå´å¾—åˆ°å®Œå…¨ä¸åŒçš„ç»“æœã€‚</p>
<ul>
<li>demo3æ²¡æœ‰ä¼ å‚ï¼Œæ— æ³•ç›´æ¥è®¡ç®—ï¼Œä½†æ˜¯å¯ä»¥å¼•ç”¨</li>
<li>demo4ä¼ å…¥å‚æ•°ï¼Œå¯ä»¥ç›´æ¥è®¡ç®—</li>
</ul>
<h3>å¯èƒ½ä¼šæ“ä½œå¹¶å½±å“è¿”å›å€¼</h3>
<h4>å‡½æ•°ç­¾åè¿”å›å…·åè¿”å›å€¼</h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>result <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	i <span class="token operator">:=</span> <span class="token number">1</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		result<span class="token operator">++</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> i
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æ‰§è¡Œç»“æœ</summary>
<p>2</p>
</details>
<p>è¿™æ˜¯ç”±äºreturnå¹¶éåŸå­æ“ä½œï¼Œä¸Šé¢å‡½æ•°ç­‰ä»·äº</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>result <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  i <span class="token operator">:=</span> <span class="token number">1</span>
  result <span class="token operator">=</span> i
  result<span class="token operator">++</span>
  <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre></div><h4>å‡½æ•°ç­¾åè¿”å›åŒ¿åè¿”å›å€¼</h4>
<div class="hint-container caution">
<p class="hint-container-title">è­¦å‘Š</p>
<p>è¿™ç§æƒ…å†µä¸‹deferè¯­å¥å¯ä»¥å¼•ç”¨è¿”å›å€¼ï¼Œä½†ä¸ä¼šæ”¹å˜è¿”å›å€¼</p>
</div>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	i <span class="token operator">:=</span> <span class="token number">1</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		i<span class="token operator">++</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> i
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æ‰§è¡Œç»“æœ</summary>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleDeferDemo6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">DeferDemo6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// 1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™é‡Œç­‰ä»·äºè¿”å›äº†ä¸€ä¸ª<code>anony</code>çš„åŒ¿åå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>anony <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	i <span class="token operator">:=</span> <span class="token number">1</span>
  anony <span class="token operator">=</span> i
  i<span class="token operator">++</span>
	<span class="token keyword">return</span> anony
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4>æ˜¾ç¤ºreturnå¸¸é‡ä¹Ÿå¯èƒ½ä¼šå½±å“è¿”å›å€¼</h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>result <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		result<span class="token operator">++</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æ‰§è¡Œç»“æœ</summary>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleDeferDemo7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">DeferDemo7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// 1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è™½ç„¶æ˜¾ç¤ºè¿”å›0ï¼Œä½†ç”±äºreturnä¸æ˜¯åŸå­æ“ä½œã€‚ç­‰ä»·äºï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">DeferDemo7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>result <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	result <span class="token operator">=</span> <span class="token number">0</span>
	result<span class="token operator">++</span>
	<span class="token keyword">return</span> 
<span class="token punctuation">}</span>
</code></pre></div></details>
]]></content:encoded>
    </item>
    <item>
      <title>Goä¹‹ç¦…</title>
      <link>http://blog.cjhe.top/go-language/reprint/zen.html</link>
      <guid>http://blog.cjhe.top/go-language/reprint/zen.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Goä¹‹ç¦…</source>
      <description>Pythonçš„æ ¸å¿ƒå¼€å‘æˆå‘˜ä¹‹ä¸€Tim Peterå†™ä¸‹çš„ã€ŠThe Zen of Pythonã€‹ï¼Œæˆä¸ºPythonç¼–ç¨‹å’Œè®¾è®¡çš„æŒ‡å¯¼åŸåˆ™ã€‚Goè¯­è¨€æ­¥é“å¸ˆDave Cheney 2020å¹´å‘è¡¨äº†åä¸ºã€ŠThe Zen of Goã€‹ è¯‘æ–‡ Each package fulfils a single purpose æ¯ä¸€ä¸ªpackageå®ç°å•ä¸€ç›®æ ‡ A well d...</description>
      <category>Goè¯­è¨€</category>
      <category>è½¬è½½</category>
      <pubDate>Tue, 15 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<blockquote>
<p>Pythonçš„æ ¸å¿ƒå¼€å‘æˆå‘˜ä¹‹ä¸€Tim Peterå†™ä¸‹çš„ã€ŠThe Zen of Pythonã€‹ï¼Œæˆä¸ºPythonç¼–ç¨‹å’Œè®¾è®¡çš„æŒ‡å¯¼åŸåˆ™ã€‚Goè¯­è¨€æ­¥é“å¸ˆDave Cheney 2020å¹´å‘è¡¨äº†åä¸ºã€ŠThe Zen of Goã€‹</p>
</blockquote>
<h2>è¯‘æ–‡</h2>
<h3>Each package fulfils a single purpose æ¯ä¸€ä¸ªpackageå®ç°å•ä¸€ç›®æ ‡</h3>
<p>A well designed Go package provides a single idea, a set of related behaviours. A good Go package starts by choosing a good name. Think of your packageâ€™s name as an elevator pitch to describe what it provides, using just one word.
ç²¾å¿ƒè®¾è®¡çš„Goè½¯ä»¶åŒ…åªæä¾›å•ä¸€åŠŸèƒ½å’Œä¸€ç³»åˆ—ç›¸å…³çš„è¡Œä¸ºã€‚ä¸€ä¸ªå¥½çš„Goè½¯ä»¶åŒ…ä»é€‰æ‹©ä¸€ä¸ªå¥½çš„åå­—å¼€å§‹ã€‚æŠŠä½ çš„åŒ…çš„åå­—æƒ³è±¡æˆä¸€ä¸ªç”µæ¢¯å¹¿å‘Šï¼Œä»…ç”¨ä¸€ä¸ªè¯æ¥æè¿°å®ƒæ‰€æä¾›çš„åŠŸèƒ½ã€‚</p>
<h3>Handle errors explicitly æ˜¾å¼å¤„ç†é”™è¯¯</h3>
<p>Robust programs are composed from pieces that handle the failure cases before they pat themselves on the back. The verbosity of if err != nil { return err } is outweighed by the value of deliberately handling each failure condition at the point at which they occur. Panic and recover are not exceptions, they arenâ€™t intended to be used that way.
å¥å£®çš„ç¨‹åºæ˜¯ç”±å¤„ç†å¤±è´¥caseçš„å„ä¸ªç‰‡æ®µç»„æˆçš„ã€‚ å†—é•¿çš„<code>if err != nil { return err }</code> æ¯”å‡ºäº†æ•…éšœå†ä¸€ä¸ªä¸ªå»å¤„ç†æ›´æœ‰ä»·å€¼ã€‚Panicå’Œrecoverä¹Ÿä¸€æ ·ã€‚</p>
<h3>Return early rather than nesting deeply å°½æ—©returnï¼Œä¸è¦æ·±é™·</h3>
<p>Every time you indent you add another precondition to the programmerâ€™s stack consuming one of the 7 Â±2 slots in their short term memory. Avoid control flow that requires deep indentation. Rather than nesting deeply, keep the success path to the left using guard clauses.
æ¯ç¼©è¿›ä¸€æ¬¡ï¼Œå°±ä¼šåœ¨ç¨‹åºå‘˜çš„å †æ ˆä¸­å¢åŠ ä¸€ä¸ªå‰ææ¡ä»¶ï¼Œå ç”¨å…¶çŸ­æ—¶è®°å¿†ä¸­ 7 Â±2 ä¸ªæ’æ§½ä¸­çš„ä¸€ä¸ªã€‚é¿å…éœ€è¦æ·±åº¦ç¼©è¿›çš„æ§åˆ¶æµã€‚ä¸å…¶æ·±åº¦åµŒå¥—ï¼Œä¸å¦‚ä½¿ç”¨ä¿æŠ¤å­å¥å°†æˆåŠŸè·¯å¾„ä¿æŒåœ¨å·¦ä¾§ã€‚</p>
<h3>Leave concurrency to the caller å¹¶å‘æƒç•™ç»™è°ƒç”¨è€…</h3>
<p>Let the caller choose if they want to run your library or function asynchronously, donâ€™t force it on them. If your library uses concurrency it should do so transparently.
è®©è°ƒç”¨è€…è‡ªå·±é€‰æ‹©æ˜¯å¦è¦å¼‚æ­¥è¿è¡Œä½ çš„åº“æˆ–å‡½æ•°ï¼Œä¸è¦å¼ºè¿«ä»–ä»¬ã€‚å¦‚æœæ‚¨çš„ç¨‹åºåº“ä½¿ç”¨å¹¶å‘åŠŸèƒ½ï¼Œåˆ™åº”é€æ˜åœ°ä½¿ç”¨ã€‚</p>
<h3>Before you launch a goroutine, know when it will stop åœ¨å¯åŠ¨goroutineä¹‹å‰ï¼Œè¦çŸ¥é“å®ƒä»€ä¹ˆæ—¶å€™ä¼šåœæ­¢</h3>
<p>Goroutines own resources; locks, variables, memory, etc. The sure fire way to free those resources is to stop the owning goroutine.
goroutine æ‹¥æœ‰é”ã€å˜é‡ã€å†…å­˜ç­‰èµ„æºã€‚é‡Šæ”¾è¿™äº›èµ„æºçš„å¯é æ–¹æ³•æ˜¯åœæ­¢æ‹¥æœ‰èµ„æºçš„ goroutineã€‚</p>
<h3>Avoid package level state é¿å…åŒ…çº§çŠ¶æ€</h3>
<p>Seek to be explicit, reduce coupling, and spooky action at a distance by providing the dependencies a type needs as fields on that type rather than using package variables.
é€šè¿‡å°†ç±»å‹æ‰€éœ€çš„ä¾èµ–å…³ç³»ä½œä¸ºè¯¥ç±»å‹çš„å­—æ®µè€Œä¸æ˜¯ä½¿ç”¨åŒ…å˜é‡æ¥æä¾›ï¼ŒåŠ›æ±‚æ˜¾å¼åŒ–ï¼Œå‡å°‘è€¦åˆï¼Œå¹¶å®ç°è¶…è·ä½œç”¨ã€‚</p>
<h3>Simplicity matters ç®€å•å¾ˆé‡è¦</h3>
<p>Simplicity is not a synonym for unsophisticated. Simple doesnâ€™t mean crude, it means readable and maintainable. When it is possible to choose, defer to the simpler solution.
ç®€å•ä¸æ˜¯å®¹æ˜“ï¼ˆä¸å¤æ‚ï¼‰çš„åŒä¹‰è¯ã€‚ç®€å•å¹¶ä¸æ„å‘³ç€ç²—ç³™ï¼Œå®ƒæ„å‘³ç€å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¦‚æœå¯ä»¥é€‰æ‹©ï¼Œè¯·éµå¾ªè¾ƒç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3>Write tests to lock in the behaviour of your packageâ€™s API ç¼–å†™æµ‹è¯•ä»¥ç¡®å®šåŒ…APIçš„è¡Œä¸º</h3>
<p>Test first or test later, if you shoot for 100% test coverage or are happy with less, regardless your packageâ€™s API is your contract with its users. Tests are the guarantees that those contracts are written in. Make sure you test for the behaviour that users can observe and rely on.
å…ˆæµ‹è¯•è¿˜æ˜¯åæµ‹è¯•ï¼Œæ˜¯è¿½æ±‚ 100% çš„æµ‹è¯•è¦†ç›–ç‡è¿˜æ˜¯æ»¡è¶³äºè¾ƒä½çš„æµ‹è¯•è¦†ç›–ç‡ï¼Œæ— è®ºå¦‚ä½•ï¼Œè½¯ä»¶åŒ…çš„åº”ç”¨ç¨‹åºæ¥å£éƒ½æ˜¯æ‚¨ä¸ç”¨æˆ·ä¹‹é—´çš„å¥‘çº¦ã€‚æµ‹è¯•æ˜¯è¿™äº›åˆçº¦çš„ä¿è¯ã€‚è¯·ç¡®ä¿æ‚¨æµ‹è¯•çš„æ˜¯ç”¨æˆ·å¯ä»¥è§‚å¯Ÿå’Œä¾èµ–çš„è¡Œä¸ºã€‚</p>
<h3>If you think itâ€™s slow, first prove it with a benchmark å¦‚æœä½ è§‰å¾—æ…¢ï¼Œå…ˆç”¨åŸºå‡†æ¥è¯æ˜</h3>
<p>So many crimes against maintainability are committed in the name of performance. Optimisation tears down abstractions, exposes internals, and couples tightly. If youâ€™re choosing to shoulder that cost, ensure it is done for good reason.
ä»¥æ€§èƒ½ä¸ºåï¼Œå¯¹å¯ç»´æŠ¤æ€§çŠ¯ä¸‹äº†è®¸å¤šç½ªè¡Œã€‚ä¼˜åŒ–ä¼šç ´åæŠ½è±¡æ¦‚å¿µï¼Œæš´éœ²å†…éƒ¨ç»“æ„ï¼Œå¹¶é€ æˆç´§å¯†è€¦åˆã€‚å¦‚æœä½ é€‰æ‹©æ‰¿æ‹…è¿™ç§ä»£ä»·ï¼Œè¯·ç¡®ä¿è¿™æ ·åšæ˜¯æœ‰å……åˆ†ç†ç”±çš„ã€‚</p>
<h3>Moderation is a virtue èŠ‚åˆ¶æ˜¯ä¸€ç§ç¾å¾·</h3>
<p>Use goroutines, channels, locks, interfaces, embedding, in moderation.
é€‚åº¦ä½¿ç”¨goroutinesã€channelsã€locksã€interfacesã€embeddedã€‚</p>
<h3>Maintainability counts å¯ç»´æŠ¤æ€§å¾ˆé‡è¦</h3>
<p>Clarity, readability, simplicity, are all aspects of maintainability. Can the thing you worked hard to build be maintained after youâ€™re gone? What can you do today to make it easier for those that come after you?
æ¸…æ™°åº¦ã€å¯è¯»æ€§ã€ç®€æ´æ€§éƒ½æ˜¯å¯ç»´æŠ¤æ€§çš„ä½“ç°ã€‚ä½ è¾›è¾›è‹¦è‹¦åˆ›å»ºçš„ä¸œè¥¿åœ¨ä½ ç¦»å¼€åè¿˜èƒ½è¢«ç»´æŠ¤å—ï¼Ÿä½ ä»Šå¤©èƒ½åšäº›ä»€ä¹ˆæ¥è®©ä½ çš„åäººæ›´å®¹æ˜“åœ°ç»´æŠ¤å®ƒï¼Ÿ</p>
<h2>å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://the-zen-of-go.netlify.app" target="_blank" rel="noopener noreferrer">ç®€æ´ç‰ˆ</a>
<a href="https://dave.cheney.net/2020/02/23/the-zen-of-go" target="_blank" rel="noopener noreferrer">å®Œæ•´ç‰ˆ</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>Goç®´è¨€</title>
      <link>http://blog.cjhe.top/go-language/reprint/proverb.html</link>
      <guid>http://blog.cjhe.top/go-language/reprint/proverb.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Goç®´è¨€</source>
      <description>ã€è½¬ã€‘åŸæ–‡é“¾æ¥ Go è¯­è¨€ä¹‹çˆ¶ Rob Pike åœ¨ 2015 å¹´åˆ†äº«çš„ä¸»é¢˜ã€ŠGo Proverbsã€‹ æ ¸å¿ƒç†å¿µæ˜¯ï¼šç®€å•ã€è¯—æ„ã€ç®€æ´ï¼ˆSimple, Poetic, Pithyï¼‰ã€‚ è¯‘æ–‡ Don&amp;apos;t communicate by sharing memory, share memory by communicating. ä¸è¦é€šè¿‡å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡ï¼Œé€šè¿‡...</description>
      <category>Goè¯­è¨€</category>
      <category>è½¬è½½</category>
      <pubDate>Tue, 15 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ã€è½¬ã€‘<a href="http://go-proverbs.github.io/" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a></p>
<blockquote>
<p>Go è¯­è¨€ä¹‹çˆ¶ Rob Pike åœ¨ 2015 å¹´åˆ†äº«çš„ä¸»é¢˜ã€ŠGo Proverbsã€‹</p>
<p>æ ¸å¿ƒç†å¿µæ˜¯ï¼šç®€å•ã€è¯—æ„ã€ç®€æ´ï¼ˆSimple, Poetic, Pithyï¼‰ã€‚</p>
</blockquote>
<h2>è¯‘æ–‡</h2>
<p>Don't communicate by sharing memory, share memory by communicating.
ä¸è¦é€šè¿‡å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡ï¼Œé€šè¿‡é€šä¿¡å…±äº«å†…å­˜</p>
<p>Concurrency is not parallelism.
å¹¶å‘ä¸æ˜¯å¹¶è¡Œ</p>
<p>Channels orchestrate; mutexes serialize.
ç®¡é“ç”¨äºåè°ƒï¼›äº’æ–¥é”ç”¨äºåŒæ­¥</p>
<p>The bigger the interface, the weaker the abstraction.
æ¥å£è¶Šå¤§ï¼ŒæŠ½è±¡å°±è¶Šå¼±</p>
<p>Make the zero value useful.
åˆ©ç”¨å¥½é›¶å€¼</p>
<p>interface{} says nothing.
ç©ºæ¥å£ interface{} æ²¡æœ‰ä»»ä½•ç±»å‹çº¦æŸ</p>
<p>Gofmt's style is no one's favorite, yet gofmt is everyone's favorite.
Gofmt çš„é£æ ¼ä¸æ˜¯äººä»¬æœ€å–œæ¬¢çš„ï¼Œä½† gofmt æ˜¯æ¯ä¸ªäººçš„æœ€çˆ±</p>
<p>A little copying is better than a little dependency.
å…è®¸ä¸€ç‚¹ç‚¹é‡å¤æ¯”å¼•å…¥ä¸€ç‚¹ç‚¹ä¾èµ–æ›´å¥½</p>
<p>Syscall must always be guarded with build tags.
ç³»ç»Ÿè°ƒç”¨å¿…é¡»å§‹ç»ˆä½¿ç”¨æ„å»ºæ ‡è®°è¿›è¡Œä¿æŠ¤</p>
<p>Cgo must always be guarded with build tags.
å¿…é¡»å§‹ç»ˆä½¿ç”¨æ„å»ºæ ‡è®°ä¿æŠ¤ Cgo</p>
<p>Cgo is not Go.
Cgo ä¸æ˜¯ Goã€‚</p>
<p>With the unsafe package there are no guarantees.
ä½¿ç”¨æ ‡å‡†åº“çš„ unsafe åŒ…ï¼Œä¸èƒ½ä¿è¯èƒ½å¦‚æœŸè¿è¡Œ</p>
<p>Clear is better than clever.
æ¸…æ™°æ¯”èªæ˜æ›´å¥½</p>
<p>Reflection is never clear.
åå°„æ°¸è¿œä¸æ¸…æ™°</p>
<p>Errors are values.
é”™è¯¯æ˜¯å€¼</p>
<p>Don't just check errors, handle them gracefully.
ä¸è¦åªæ£€æŸ¥é”™è¯¯ï¼Œè¿˜è¦ä¼˜é›…åœ°å¤„ç†å®ƒä»¬</p>
<p>Design the architecture, name the components, document the details.
è®¾è®¡æ¶æ„ï¼Œå‘½åç»„ä»¶ï¼Œæ–‡æ¡£è®°å½•ç»†èŠ‚</p>
<p>Documentation is for users.
æ–‡æ¡£æ˜¯ä¾›ç”¨æˆ·ä½¿ç”¨çš„</p>
<p>Don't panic.
ä¸è¦ä½¿ç”¨ panic</p>
<h2>å‚è€ƒæ–‡çŒ®</h2>
<p><a href="http://go-proverbs.github.io/" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>
<a href="https://zhuanlan.zhihu.com/p/514680942" target="_blank" rel="noopener noreferrer">ä¸­æ–‡è¯‘æ–‡</a></p>
]]></content:encoded>
    </item>
    <item>
      <title></title>
      <link>http://blog.cjhe.top/CHANGELOG.html</link>
      <guid>http://blog.cjhe.top/CHANGELOG.html</guid>
      <source url="http://blog.cjhe.top/rss.xml"></source>
      <description>v0.11.0 (2024-04-14) ğŸ›Bug Fixes ä¿®æ”¹vuepress icon ä¿®å¤bug devops: ä¿®æ”¹helm-dashboard go-language: ä¿®æ”¹mapï¼Œå¢åŠ ä¸€äº›æ³¨æ„äº‹é¡¹ go-language: deferå¢åŠ é‡è§os.Exit go-language: ä¿®æ”¹æ•°æ®ç±»å‹ â™»ï¸Code Refactoring ...</description>
      <pubDate>Thu, 03 Aug 2023 13:57:06 GMT</pubDate>
      <content:encoded><![CDATA[<p><a name="v0.11.0"></a></p>
<h2><a class="header-anchor" href="#v0-11-0-2024-04-14"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.10.1...v0.11.0" target="_blank" rel="noopener noreferrer">v0.11.0</a> (2024-04-14)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li>ä¿®æ”¹vuepress icon</li>
<li>ä¿®å¤bug</li>
<li><strong>devops:</strong> ä¿®æ”¹helm-dashboard</li>
<li><strong>go-language:</strong> ä¿®æ”¹mapï¼Œå¢åŠ ä¸€äº›æ³¨æ„äº‹é¡¹</li>
<li><strong>go-language:</strong> deferå¢åŠ é‡è§os.Exit</li>
<li><strong>go-language:</strong> ä¿®æ”¹æ•°æ®ç±»å‹</li>
</ul>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li>è°ƒæ•´devopsåˆ°k8så­ç±»</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li><strong>devops:</strong> å¢åŠ redisç›‘æ§</li>
<li><strong>devops:</strong> å¢åŠ mysqlç›‘æ§</li>
<li><strong>devops:</strong> å¢åŠ è®°å½•dockeræ‰§è¡ŒæŠ¥é”™é—®é¢˜</li>
<li><strong>devops:</strong> å¢åŠ helm-dashboardç®€ä»‹</li>
<li><strong>devops:</strong> å¢åŠ kube-state-metrics k8s éƒ¨ç½²</li>
<li><strong>devops:</strong> å¢åŠ cadvisor k8séƒ¨ç½²</li>
<li><strong>devops:</strong> å¢åŠ node-exporter k8séƒ¨ç½²</li>
<li><strong>devops:</strong> å¢åŠ Prometheus k8séƒ¨ç½²</li>
<li><strong>go-language:</strong> å¢åŠ Goé¡¹ç›®è„šæ‰‹æ¶</li>
<li><strong>network:</strong> å¢åŠ HTTPåè®®ä»‹ç»</li>
</ul>
<p><a name="v0.10.1"></a></p>
<h2><a class="header-anchor" href="#v0-10-1-2023-09-23"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.10.0...v0.10.1" target="_blank" rel="noopener noreferrer">v0.10.1</a> (2023-09-23)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>go-language:</strong> ä¿®æ”¹flagæ ‡å‡†åº“ï¼Œå¢åŠ åº•å±‚åŸç†</li>
</ul>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li>è°ƒæ•´ç›®å½•é¡ºåº</li>
</ul>
<p><a name="v0.10.0"></a></p>
<h2><a class="header-anchor" href="#v0-10-0-2023-09-20"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.9.2...v0.10.0" target="_blank" rel="noopener noreferrer">v0.10.0</a> (2023-09-20)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>go-language:</strong> ä¿®æ”¹ç¬¬ä¸‰æ–¹åº“</li>
<li><strong>project-language:</strong> æäº¤è§„èŒƒå¢åŠ å‚è€ƒæ–‡çŒ®</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li><strong>go-language:</strong> å¢åŠ ä¸‰æ–¹åº“pflagä»‹ç»</li>
</ul>
<p><a name="v0.9.2"></a></p>
<h2><a class="header-anchor" href="#v0-9-2-2023-09-11"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.9.1...v0.9.2" target="_blank" rel="noopener noreferrer">v0.9.2</a> (2023-09-11)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>go-language:</strong> flagå¢åŠ å­å‘½ä»¤</li>
<li><strong>go-language:</strong> ä¿®æ”¹flag</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li>å¢åŠ Goè¯­è¨€æ ‡å‡†åº“</li>
</ul>
<p><a name="v0.9.1"></a></p>
<h2><a class="header-anchor" href="#v0-9-1-2023-09-05"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.9.0...v0.9.1" target="_blank" rel="noopener noreferrer">v0.9.1</a> (2023-09-05)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>design-pattern:</strong> ä¿®æ”¹åˆ›å»ºå‹è®¾è®¡æ¨¡å¼</li>
</ul>
<p><a name="v0.9.0"></a></p>
<h2><a class="header-anchor" href="#v0-9-0-2023-09-02"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.8.0...v0.9.0" target="_blank" rel="noopener noreferrer">v0.9.0</a> (2023-09-02)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>go-language:</strong> ä¿®æ”¹Goè¯­è¨€ç®€ä»‹</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li><strong>go-language:</strong> å¢åŠ deferå’Œrecoveræ³¨æ„äº‹é¡¹</li>
<li><strong>go-language:</strong> å¢åŠ packageä»‹ç»</li>
<li><strong>network:</strong> å¢åŠ MQTTä»‹ç»</li>
</ul>
<p><a name="v0.8.0"></a></p>
<h2><a class="header-anchor" href="#v0-8-0-2023-08-22"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.7.1...v0.8.0" target="_blank" rel="noopener noreferrer">v0.8.0</a> (2023-08-22)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>design-pattern:</strong> ä¿®æ”¹å¹¶å‘æ¨¡å¼</li>
<li><strong>go-language:</strong> ä¿®æ”¹Goä¹‹ç¦…ä¸­æ¨¡ç³Šçš„å«ä¹‰</li>
<li><strong>go-language:</strong> ä¿®æ”¹slice</li>
<li><strong>middleware:</strong> ä¿®æ”¹ç›‘æ§ç³»ç»Ÿè‡³ä¸­é—´ä»¶</li>
</ul>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li>markdownæ ¼å¼ä¼˜åŒ–</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li><strong>go-language:</strong> å¢åŠ Goä¹‹ç¦…</li>
<li><strong>go-language:</strong> è½¬è½½Goç®´è¨€</li>
</ul>
<p><a name="v0.7.1"></a></p>
<h2><a class="header-anchor" href="#v0-7-1-2023-08-13"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.7.0...v0.7.1" target="_blank" rel="noopener noreferrer">v0.7.1</a> (2023-08-13)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>design-pattern:</strong> ä¿®æ”¹è®¾è®¡åŸåˆ™</li>
<li><strong>go-language:</strong> ä¿®æ”¹Goè¯­è¨€åŸºç¡€</li>
</ul>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li>è°ƒæ•´å‡½æ•°æ¨¡å¼å’Œå¹¶å‘æ¨¡å¼</li>
</ul>
<p><a name="v0.7.0"></a></p>
<h2><a class="header-anchor" href="#v0-7-0-2023-08-07"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.6.0...v0.7.0" target="_blank" rel="noopener noreferrer">v0.7.0</a> (2023-08-07)</h2>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li>ä¾§è¾¹æ å¯æŠ˜å </li>
<li>è°ƒæ•´ç›®å½•ç»“æ„</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li><strong>design-pattern:</strong> å¢åŠ é€‰é¡¹æ¨¡å¼</li>
</ul>
<p><a name="v0.6.0"></a></p>
<h2><a class="header-anchor" href="#v0-6-0-2023-08-03"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.5.0...v0.6.0" target="_blank" rel="noopener noreferrer">v0.6.0</a> (2023-08-03)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li>ä¿®æ”¹è®¾è®¡æ¨¡å¼</li>
<li>é…ç½®é¡µé¢å…ƒæ•°æ®</li>
<li>è‡ªåŠ¨åŒ–éƒ¨ç½²é—®é¢˜ä¿®å¤</li>
<li>åˆ é™¤ä¸´æ—¶æ–‡ä»¶</li>
<li><strong>design-pattern:</strong> ä¿®æ”¹è®¾è®¡æ¨¡å¼é—®é¢˜</li>
<li><strong>project-stanard:</strong> ä¿®æ”¹é¡¹ç›®è§„èŒƒä¸€äº›é—®é¢˜</li>
</ul>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li>è°ƒæ•´ä¾§è¾¹æ å’Œå¯¼èˆªæ </li>
<li>è°ƒæ•´å¯¼èˆªæ å’Œä¾§è¾¹æ </li>
<li><strong>databae:</strong> ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li>å¢åŠ å˜æ›´æ—¥å¿—</li>
<li>å¢åŠ Goè¯­è¨€çˆ±å¥½è€…å‘¨åˆŠå‹æƒ…é“¾æ¥</li>
<li>åˆ‡æ¢ä¸ºvuepress-theme-hope</li>
</ul>
<p><a name="v0.5.0"></a></p>
<h2><a class="header-anchor" href="#v0-5-0-2022-05-24"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.4.0...v0.5.0" target="_blank" rel="noopener noreferrer">v0.5.0</a> (2022-05-24)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>database:</strong> å¢åŠ äº‹åŠ¡ä¸€è‡´æ€§è§†å›¾</li>
</ul>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li><strong>go-language:</strong> ä¿®æ”¹æ“ä½œç¬¦</li>
<li><strong>go-language:</strong> è°ƒæ•´æ•°ç»„ä¸åˆ‡ç‰‡</li>
<li><strong>go-language:</strong> å­—ç¬¦ä¸²è°ƒæ•´</li>
<li><strong>go-language:</strong> æ•°ç»„ä¸åˆ‡ç‰‡è°ƒæ•´</li>
<li><strong>go-language:</strong> è°ƒæ•´å˜é‡ã€å¸¸é‡åŠå‘½åè§„åˆ™</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li><strong>database:</strong> å¢åŠ mysqlè¯»è¿‡ç¨‹ã€å†™è¿‡ç¨‹å’Œäº‹åŠ¡</li>
<li><strong>database:</strong> å¢åŠ rediså¤§çº²</li>
<li><strong>go-language:</strong> å¢åŠ breakä½¿ç”¨è¯´æ˜</li>
<li><strong>go-language:</strong> å¢åŠ for-rangeæ³¨æ„ç‚¹</li>
<li><strong>go-language:</strong> å¢åŠ å­—ç¬¦ä¸²åº•å±‚ç»“æ„</li>
<li><strong>go-language:</strong> å¢åŠ mapä»‹ç»</li>
</ul>
<p><a name="v0.4.0"></a></p>
<h2><a class="header-anchor" href="#v0-4-0-2022-03-27"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.3.4...v0.4.0" target="_blank" rel="noopener noreferrer">v0.4.0</a> (2022-03-27)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>algorithm:</strong> å¢åŠ é™æµ-ä»¤ç‰Œæ¡¶ç®—æ³•</li>
<li><strong>project-standard:</strong> å¢åŠ è¯­ä¹‰åŒ–ç‰ˆæœ¬å·¥å…·</li>
<li><strong>project-standard:</strong> å¢åŠ è¯­ä¹‰åŒ–ç‰ˆæœ¬è¯¦ç»†å¤–é“¾</li>
<li><strong>project-standard:</strong> å¢åŠ readme.soå¤–é“¾</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li><strong>database:</strong> å¢åŠ MySQL-è¡¨è¿æ¥</li>
<li><strong>go-language:</strong> å¢åŠ ä¸€äº›ç¯å¢ƒå˜é‡è¯´æ˜</li>
<li><strong>tools:</strong> å¢åŠ CAè¯ä¹¦</li>
</ul>
<p><a name="v0.3.4"></a></p>
<h2><a class="header-anchor" href="#v0-3-4-2022-03-20"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.3.3...v0.3.4" target="_blank" rel="noopener noreferrer">v0.3.4</a> (2022-03-20)</h2>
<h3>âœ¨Features</h3>
<ul>
<li><strong>algorithm:</strong> å¢åŠ é™æµç®—æ³•</li>
</ul>
<p><a name="v0.3.3"></a></p>
<h2><a class="header-anchor" href="#v0-3-3-2022-03-03"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.3.2...v0.3.3" target="_blank" rel="noopener noreferrer">v0.3.3</a> (2022-03-03)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>project-standard:</strong> é¡¹ç›®ç®¡ç†æ”¹ä¸ºé¡¹ç›®è§„èŒƒ</li>
</ul>
<p><a name="v0.3.2"></a></p>
<h2><a class="header-anchor" href="#v0-3-2-2022-02-23"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.3.1...v0.3.2" target="_blank" rel="noopener noreferrer">v0.3.2</a> (2022-02-23)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>data-structure:</strong> åˆ é™¤äºŒå‰æœç´¢æ ‘è¿­ä»£ç‰ˆæœ¬</li>
</ul>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li>è°ƒæ•´ç»“æ„å’Œæè¿°</li>
</ul>
<p><a name="v0.3.1"></a></p>
<h2><a class="header-anchor" href="#v0-3-1-2022-02-23"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.3.0...v0.3.1" target="_blank" rel="noopener noreferrer">v0.3.1</a> (2022-02-23)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>data-structure:</strong> ä¿®æ”¹äºŒå‰æœç´¢æ ‘åˆ é™¤èŠ‚ç‚¹ç®—æ³•</li>
</ul>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li><strong>data-structure:</strong> ä¿®æ”¹åˆ é™¤æœ€å°èŠ‚ç‚¹å‘½å</li>
</ul>
<p><a name="v0.3.0"></a></p>
<h2><a class="header-anchor" href="#v0-3-0-2022-02-20"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.2.0...v0.3.0" target="_blank" rel="noopener noreferrer">v0.3.0</a> (2022-02-20)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>data-structure:</strong> ä¾§è¾¹æ ä¿®å¤</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li><strong>data-structure:</strong> å¢åŠ äºŒå‰æœç´¢æ ‘</li>
<li><strong>data-structure:</strong> å¢åŠ äºŒå‰æ ‘</li>
</ul>
<p><a name="v0.2.0"></a></p>
<h2><a class="header-anchor" href="#v0-2-0-2022-02-11"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.1.0...v0.2.0" target="_blank" rel="noopener noreferrer">v0.2.0</a> (2022-02-11)</h2>
<h3>âœ¨Features</h3>
<ul>
<li><strong>project-manager:</strong> å¢åŠ åˆ†æ”¯è§„èŒƒ</li>
</ul>
<p><a name="v0.1.0"></a></p>
<h2><a class="header-anchor" href="#v0-1-0-2022-02-09"><span></span></a><a href="https://github.com/Hexiaopi/hexiaopi.github.io/compare/v0.0.1...v0.1.0" target="_blank" rel="noopener noreferrer">v0.1.0</a> (2022-02-09)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li><strong>project-manager:</strong> ä¿®æ­£ç›®å½•è§„èŒƒ</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li><strong>commit:</strong> å¢åŠ è¯­ä¹‰åŒ–ç‰ˆæœ¬è‡ªåŠ¨ç”Ÿæˆå·¥å…·gsemveré…ç½®å’Œä»‹ç»</li>
<li><strong>commit:</strong> å¢åŠ CHANGE LOGè‡ªåŠ¨ç”Ÿäº§</li>
<li><strong>docs:</strong> å¢åŠ å˜æ›´å†å²</li>
<li><strong>project-manager:</strong> å¢åŠ ç›®å½•è§„èŒƒ</li>
</ul>
<p><a name="v0.0.1"></a></p>
<h2>v0.0.1 (2022-02-03)</h2>
<h3>ğŸ›Bug Fixes</h3>
<ul>
<li>æ›´æ–°ä¾§è¾¹æ </li>
<li>update sidebar</li>
<li>project manager</li>
<li><strong>monitor-system:</strong> ç»Ÿä¸€å›¾ç‰‡æ–‡ä»¶å¤¹å‘½å</li>
<li><strong>project-manager:</strong> æ›´æ–°æäº¤è§„èŒƒ</li>
<li><strong>project-manager:</strong> update version</li>
</ul>
<h3>â™»ï¸Code Refactoring</h3>
<ul>
<li><strong>go-language:</strong> è°ƒæ•´ç»“æ„</li>
<li><strong>go-language:</strong> è°ƒæ•´ç»“æ„</li>
</ul>
<h3>âœ¨Features</h3>
<ul>
<li>å¢åŠ CHANGE LOG</li>
<li>å¢åŠ ç‰ˆæœ¬è§„èŒƒ</li>
<li>é¡¹ç›®æ–‡æ¡£è§„èŒƒ</li>
<li>add project manager</li>
<li>add README.md</li>
<li><strong>design-pattern:</strong> add some design pattern</li>
<li><strong>project-manager:</strong> add api standard</li>
<li><strong>project-manager:</strong> add api standard</li>
<li><strong>project-manager:</strong> add commit standard</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>å·¥å‚æ¨¡å¼çš„æ¯”è¾ƒ</title>
      <link>http://blog.cjhe.top/design-pattern/creational/factory-compare.html</link>
      <guid>http://blog.cjhe.top/design-pattern/creational/factory-compare.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å·¥å‚æ¨¡å¼çš„æ¯”è¾ƒ</source>
      <description>ç®€å•å·¥å‚æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼éƒ½å¯ä»¥ç»Ÿç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œå…¶ä¸­ï¼š ç®€å•å·¥å‚æ¨¡å¼ï¼šé€‚ç”¨äºéœ€è¦æ ¹æ®å®¢æˆ·ç«¯çš„è¾“å…¥æ¥åˆ›å»ºå¯¹è±¡çš„åœºæ™¯ï¼Œä½†ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œéšç€äº§å“çš„å¢åŠ éœ€è¦ä¿®æ”¹å·¥å‚ç±»ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šé€šè¿‡å°†å…·ä½“äº§å“çš„åˆ›å»ºå»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚ç±»è´Ÿè´£åˆ›å»ºä¸€ä¸ªå…·ä½“äº§å“ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šé€‚ç”¨äºéœ€è¦åˆ›å»ºä¸€ç»„ç›¸å…³äº§å“å¯¹è±¡çš„åœºæ™¯ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚ç±»è´Ÿè´£åˆ›...</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Mon, 31 Jul 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ç®€å•å·¥å‚æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼éƒ½å¯ä»¥ç»Ÿç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œå…¶ä¸­ï¼š</p>
<p>ç®€å•å·¥å‚æ¨¡å¼ï¼šé€‚ç”¨äºéœ€è¦æ ¹æ®å®¢æˆ·ç«¯çš„è¾“å…¥æ¥åˆ›å»ºå¯¹è±¡çš„åœºæ™¯ï¼Œä½†ä¸ç¬¦åˆ<code>å¼€é—­åŸåˆ™</code>ï¼Œéšç€äº§å“çš„å¢åŠ éœ€è¦ä¿®æ”¹å·¥å‚ç±»ã€‚</p>
<p>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šé€šè¿‡å°†å…·ä½“äº§å“çš„åˆ›å»ºå»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ï¼Œç¬¦åˆ<code>å¼€é—­åŸåˆ™</code>ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚ç±»è´Ÿè´£åˆ›å»ºä¸€ä¸ªå…·ä½“äº§å“ã€‚</p>
<p>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šé€‚ç”¨äºéœ€è¦åˆ›å»ºä¸€ç»„ç›¸å…³äº§å“å¯¹è±¡çš„åœºæ™¯ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚ç±»è´Ÿè´£åˆ›å»ºä¸€ç»„ç›¸å…³äº§å“ã€‚</p>
<p>é€‰æ‹©é€‚åˆçš„åˆ›å»ºå‹è®¾è®¡æ¨¡å¼å–å†³äºå…·ä½“çš„é¡¹ç›®éœ€æ±‚å’Œè®¾è®¡è€ƒè™‘ï¼Œç®€å•å·¥å‚æ¨¡å¼ç®€å•æ˜“æ‡‚ä½†å¯æ‰©å±•æ€§å·®ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼æ›´çµæ´»ä½†éœ€è¦é¢å¤–çš„å­ç±»ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼é€‚ç”¨äºåˆ›å»ºä¸€ç»„ç›¸å…³çš„äº§å“å¯¹è±¡ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>ä»‹ç»é¡µ</title>
      <link>http://blog.cjhe.top/intro.html</link>
      <guid>http://blog.cjhe.top/intro.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ä»‹ç»é¡µ</source>
      <description>ä»‹ç»é¡µ profile-details profile-language commit-language stats time</description>
      <pubDate>Sun, 30 Jul 2023 09:20:01 GMT</pubDate>
      <content:encoded><![CDATA[
<p><img src="https://raw.githubusercontent.com/Hexiaopi/Hexiaopi/master/profile-summary-card-output/github/0-profile-details.svg" alt="profile-details" loading="lazy">
<img src="https://raw.githubusercontent.com/Hexiaopi/Hexiaopi/master/profile-summary-card-output/github/1-repos-per-language.svg" alt="profile-language" loading="lazy">
<img src="https://raw.githubusercontent.com/Hexiaopi/Hexiaopi/master/profile-summary-card-output/github/2-most-commit-language.svg" alt="commit-language" loading="lazy">
<img src="https://raw.githubusercontent.com/Hexiaopi/Hexiaopi/master/profile-summary-card-output/github/3-stats.svg" alt="stats" loading="lazy">
<img src="https://raw.githubusercontent.com/Hexiaopi/Hexiaopi/master/profile-summary-card-output/github/4-productive-time.svg" alt="time" loading="lazy"></p>
]]></content:encoded>
      <enclosure url="http://blog.cjhe.top/assets/images/cover3.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>å¹»ç¯ç‰‡é¡µ</title>
      <link>http://blog.cjhe.top/slides.html</link>
      <guid>http://blog.cjhe.top/slides.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å¹»ç¯ç‰‡é¡µ</source>
      <pubDate>Sun, 30 Jul 2023 09:20:01 GMT</pubDate>
      <content:encoded><![CDATA[<!-- markdownlint-disable MD024 MD033 MD051 -->
]]></content:encoded>
      <enclosure url="http://blog.cjhe.top/logo.svg" type="image/svg+xml"/>
    </item>
    <item>
      <title>è®¾è®¡æ¨¡å¼</title>
      <link>http://blog.cjhe.top/design-pattern/</link>
      <guid>http://blog.cjhe.top/design-pattern/</guid>
      <source url="http://blog.cjhe.top/rss.xml">è®¾è®¡æ¨¡å¼</source>
      <description>æç¤º é¢å‘å¯¹è±¡æ˜¯æ­¦å™¨ è®¾è®¡æ¨¡å¼æ˜¯æ‹›å¼ è®¾è®¡åŸåˆ™æ˜¯å¿ƒæ³• ä»¥å¿ƒæ³•ä¸ºåŸºç¡€ï¼Œä»¥æ­¦å™¨è¿ç”¨æ‹›å¼åº”å¯¹å¤æ‚çš„ç¼–ç¨‹é—®é¢˜</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sat, 10 Sep 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>é¢å‘å¯¹è±¡æ˜¯<strong>æ­¦å™¨</strong></p>
<p>è®¾è®¡æ¨¡å¼æ˜¯<strong>æ‹›å¼</strong></p>
<p>è®¾è®¡åŸåˆ™æ˜¯<strong>å¿ƒæ³•</strong></p>
<p>ä»¥å¿ƒæ³•ä¸ºåŸºç¡€ï¼Œä»¥æ­¦å™¨è¿ç”¨æ‹›å¼åº”å¯¹å¤æ‚çš„ç¼–ç¨‹é—®é¢˜</p>
</div>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼</h2>
<p>è®¾è®¡æ¨¡å¼æœ€æ—©æ¥æºäºå»ºç­‘é¢†åŸŸ</p>
<blockquote>
<p>å…‹é‡Œæ–¯æ‰˜å¼—.äºšå†å±±å¤§åœ¨ä½œå“ã€Šå»ºç­‘çš„æ°¸æ’ä¹‹é“ã€‹ä¸­è¿™æ ·è¯´ï¼š"æ¯ä¸ªæ¨¡å¼éƒ½æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬çš„ç¯å¢ƒä¸­ä¸æ–­å‡ºç°çš„é—®é¢˜ï¼Œç„¶åæè¿°äº†è¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ— æ•°æ¬¡åœ°é‡ç”¨é‚£äº›å·²æœ‰çš„æˆåŠŸçš„è§£å†³æ–¹æ¡ˆï¼Œæ— é¡»å†é‡å¤ç›¸åŒçš„å·¥ä½œã€‚"</p>
</blockquote>
<p>ä¹‹åå››äººç»„ï¼ˆGang of Fourï¼Œç®€ç§°GoFï¼‰å°†æ¨¡å¼çš„æ¦‚å¿µåº”ç”¨åœ¨è½¯ä»¶å¼€å‘è®¾è®¡ä¸­ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>å®ƒæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚</p>
<p>å®ƒæè¿°äº†åœ¨è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€äº›ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯<strong>è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—è§£å†³æ–¹æ¡ˆ</strong>ï¼Œæ˜¯å‰è¾ˆä»¬çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚</p>
<h2>æœ‰å“ªäº›ä¼˜ç‚¹</h2>
<ul>
<li><strong>æé«˜ä»£ç å¤ç”¨æ€§</strong>ï¼šè®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒç›®æ ‡ä¹‹ä¸€æ˜¯æä¾›å¯å¤ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡ä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼Œå¯ä»¥å°†é€šç”¨çš„è§£å†³æ–¹æ³•åº”ç”¨äºä¸åŒçš„æƒ…å†µï¼Œä»è€Œå‡å°‘ä»£ç çš„å†—ä½™å’Œé‡å¤ç¼–å†™ã€‚</li>
<li><strong>æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</strong>ï¼šè®¾è®¡æ¨¡å¼é€šè¿‡å¼•å…¥ä¸€å®šçš„ç»“æ„å’Œè§„èŒƒï¼Œä½¿ä»£ç æ›´æœ‰ç»„ç»‡æ€§å’Œå¯è¯»æ€§ã€‚å¼€å‘äººå‘˜å¯ä»¥æ›´è½»æ¾åœ°ç†è§£å’Œç»´æŠ¤ä»£ç é€»è¾‘ã€‚</li>
<li><strong>é™ä½ä»£ç è€¦åˆåº¦</strong>ï¼šè®¾è®¡æ¨¡å¼é€šè¿‡å°†ç³»ç»Ÿåˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰æ˜ç¡®å®šä¹‰çš„èŒè´£å’Œæ¥å£ï¼Œä»è€Œé™ä½äº†ä»£ç çš„è€¦åˆåº¦ã€‚è¿™ä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºæ‰©å±•ã€ä¿®æ”¹å’Œç»´æŠ¤ã€‚</li>
<li><strong>æé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§</strong>ï¼šè®¾è®¡æ¨¡å¼é¼“åŠ±ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»è¿›è¡Œç¼–ç¨‹ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å®ç°ç±»ã€‚è¿™ç§æ¾è€¦åˆçš„è®¾è®¡ä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºæ‰©å±•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å¼•å…¥æ–°çš„åŠŸèƒ½å’Œæ¨¡å—ã€‚</li>
<li><strong>æé«˜ç³»ç»Ÿçš„å¯æµ‹è¯•æ€§</strong>ï¼šè®¾è®¡æ¨¡å¼å°†ç³»ç»Ÿåˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•ã€‚è¿™æ ·å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™å’Œæ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œæé«˜ä»£ç çš„è´¨é‡å’Œå¯é æ€§ã€‚</li>
</ul>
<h2>æœ‰å“ªäº›è¦ç´ </h2>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šé—®é¢˜æˆ–ç§°ä¸ºä¸Šä¸‹æ–‡ã€åœºæ™¯ï¼ŒæŒ‡åœ¨è½¯ä»¶å¼€å‘ä¸­éœ€è¦è§£å†³çš„æŸä¸ªé—®é¢˜æˆ–éœ€æ±‚ã€‚è®¾è®¡æ¨¡å¼é€šå¸¸è§£å†³é’ˆå¯¹ç‰¹å®šä¸Šä¸‹æ–‡æˆ–åœºæ™¯ä¸­å‡ºç°çš„é—®é¢˜ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šè§£å†³æ–¹æ¡ˆæˆ–ç§°ä¸ºæ¨¡å‹ã€æ¨¡å¼ï¼Œæ˜¯æŒ‡ç”¨äºè§£å†³ä¸Šè¿°é—®é¢˜çš„é€šç”¨æ–¹æ³•æˆ–æœ€ä½³å®è·µã€‚è®¾è®¡æ¨¡å¼æè¿°äº†è§£å†³æŸé—®é¢˜çš„æ–¹æ³•æˆ–æ¨¡æ¿ï¼Œå¹¶æä¾›äº†è¿™äº›æ–¹æ³•çš„å®ç°ç»†èŠ‚ï¼Œä½¿å¾—ç±»ä¼¼é—®é¢˜å¯ä»¥è¢«è§£å†³ä¸”æ˜“äºå¤ç”¨ã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼šæ•ˆæœæˆ–ç§°ä¸ºç»“æœã€è´¡çŒ®ï¼Œæ˜¯æŒ‡ä½¿ç”¨è¯¥æ¨¡å¼å¸¦æ¥çš„å¥½å¤„å’Œä¼˜ç‚¹ã€‚è®¾è®¡æ¨¡å¼æä¾›äº†å¯é‡ç”¨ã€çµæ´»çš„è§£å†³æ–¹æ¡ˆï¼Œå¢åŠ å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¯é‡ç”¨æ€§ã€‚</li>
<li><strong>å…ƒç´ </strong>ï¼šå…ƒç´ æˆ–ç§°ä¸ºå‚ä¸è€…ã€è§’è‰²ã€ç±»å’Œå¯¹è±¡ï¼Œç»„æˆäº†è®¾è®¡æ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†ã€‚è¿™äº›å…ƒç´ å¯ä»¥æ˜¯ç±»ã€å¯¹è±¡ã€æ¥å£ã€æ–¹æ³•ç­‰ç­‰ã€‚å…ƒç´ æè¿°äº†åœ¨ç‰¹å®šä¸Šä¸‹æ–‡æˆ–åœºæ™¯ä¸­å‚ä¸æ¨¡å¼å®ç°çš„å„ç§ç»„ä»¶ã€‚</li>
</ul>
<h2>å…·ä½“åˆ†ç±»</h2>
<figure><figcaption>åˆ†ç±»</figcaption></figure>
]]></content:encoded>
    </item>
    <item>
      <title>è®¾è®¡åŸåˆ™</title>
      <link>http://blog.cjhe.top/design-pattern/principle.html</link>
      <guid>http://blog.cjhe.top/design-pattern/principle.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">è®¾è®¡åŸåˆ™</source>
      <description>è®¾è®¡åŸåˆ™æ˜¯å¿ƒæ³•ï¼Œå¯¹äºæ„å»ºé«˜è´¨é‡çš„è½¯ä»¶ç³»ç»Ÿæä¾›æŒ‡å¯¼å’Œçº¦æŸï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ä½œç”¨ï¼š æé«˜ä»£ç è´¨é‡ï¼šè®¾è®¡åŸåˆ™å¼ºè°ƒä»£ç çš„æ¸…æ™°æ€§ã€å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚é€šè¿‡éµå¾ªè®¾è®¡åŸåˆ™ï¼Œå¯ä»¥ç¼–å†™å‡ºæ›´ç»“æ„åŒ–ã€æ›´æ¨¡å—åŒ–çš„ä»£ç ï¼Œå‡å°‘ä»£ç é‡å¤å’Œå†—ä½™ã€‚ é™ä½è€¦åˆåº¦ï¼šè®¾è®¡åŸåˆ™é¼“åŠ±æ¾æ•£è€¦åˆçš„è®¾è®¡ï¼Œå°†ç³»ç»Ÿåˆ’åˆ†ä¸ºæ›´å°çš„ã€ç›¸äº’ç‹¬ç«‹çš„æ¨¡å—ã€‚è¿™æ ·å¯ä»¥å‡å°‘æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚ ä¿ƒè¿›ä»£ç ...</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sat, 15 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>è®¾è®¡åŸåˆ™æ˜¯å¿ƒæ³•ï¼Œå¯¹äºæ„å»ºé«˜è´¨é‡çš„è½¯ä»¶ç³»ç»Ÿæä¾›<strong>æŒ‡å¯¼</strong>å’Œ<strong>çº¦æŸ</strong>ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ä½œç”¨ï¼š</p>
<ul>
<li>æé«˜ä»£ç è´¨é‡ï¼šè®¾è®¡åŸåˆ™å¼ºè°ƒä»£ç çš„æ¸…æ™°æ€§ã€å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚é€šè¿‡éµå¾ªè®¾è®¡åŸåˆ™ï¼Œå¯ä»¥ç¼–å†™å‡ºæ›´ç»“æ„åŒ–ã€æ›´æ¨¡å—åŒ–çš„ä»£ç ï¼Œå‡å°‘ä»£ç é‡å¤å’Œå†—ä½™ã€‚</li>
<li>é™ä½è€¦åˆåº¦ï¼šè®¾è®¡åŸåˆ™é¼“åŠ±æ¾æ•£è€¦åˆçš„è®¾è®¡ï¼Œå°†ç³»ç»Ÿåˆ’åˆ†ä¸ºæ›´å°çš„ã€ç›¸äº’ç‹¬ç«‹çš„æ¨¡å—ã€‚è¿™æ ·å¯ä»¥å‡å°‘æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</li>
<li>ä¿ƒè¿›ä»£ç é‡ç”¨ï¼šè®¾è®¡åŸåˆ™æ¨å´‡å°è£…ã€ç»§æ‰¿ã€å¤šæ€ç­‰é¢å‘å¯¹è±¡çš„ç‰¹æ€§ï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºé‡ç”¨ã€‚é€šè¿‡è®¾è®¡æ¨¡å¼å’Œè®¾è®¡åŸåˆ™ï¼Œå¯ä»¥å°†é€šç”¨çš„è§£å†³æ–¹æ¡ˆæŠ½è±¡å‡ºæ¥ï¼Œå¹¶åœ¨ä¸åŒçš„åœºæ™¯ä¸­é‡å¤åº”ç”¨ã€‚</li>
<li>ç®€åŒ–ç³»ç»Ÿç»´æŠ¤ï¼šè‰¯å¥½çš„è®¾è®¡åŸåˆ™å¯ä»¥å‡å°‘ç³»ç»Ÿçš„è€¦åˆå’Œå¤æ‚åº¦ï¼Œä½¿ç³»ç»Ÿæ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚å½“éœ€è¦å¯¹ç³»ç»Ÿè¿›è¡Œä¿®æ”¹æˆ–æ‰©å±•æ—¶ï¼Œé€šè¿‡éµå¾ªè®¾è®¡åŸåˆ™ï¼Œå¯ä»¥æ›´å¿«é€Ÿã€æ›´å®‰å…¨åœ°è¿›è¡Œå˜æ›´ã€‚</li>
<li>æé«˜å›¢é˜Ÿåä½œæ•ˆç‡ï¼šè®¾è®¡åŸåˆ™æä¾›äº†ä¸€ç§é€šç”¨çš„è®¾è®¡æ€ç»´å’Œè§„èŒƒï¼Œä½¿æ•´ä¸ªå›¢é˜Ÿåœ¨è®¾è®¡å’Œå¼€å‘è¿‡ç¨‹ä¸­èƒ½å¤Ÿæ›´å¥½åœ°è¿›è¡Œäº¤æµå’Œåä½œã€‚å›¢é˜Ÿæˆå‘˜å¯ä»¥å…±åŒç†è§£å’Œéµå¾ªè®¾è®¡åŸåˆ™ï¼Œé™ä½æ²Ÿé€šæˆæœ¬ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</li>
</ul>
<!-- more -->
<h2>SOLIDåŸåˆ™</h2>
<p>SOLIDåŸåˆ™æ˜¯ç”±ç½—ä¼¯ç‰¹Â·CÂ·é©¬ä¸åœ¨21ä¸–çºªæ—©æœŸå¼•å…¥ï¼ŒæŒ‡ä»£äº†é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡è®¾è®¡çš„äº”ä¸ªåŸºæœ¬åŸåˆ™ã€‚éµå¾ªSOLIDåŸåˆ™å¯ä»¥ç¡®ä¿æˆ‘ä»¬è®¾è®¡çš„ä»£ç æ˜¯æ˜“ç»´æŠ¤ã€æ˜“æ‰©å±•ã€æ˜“é˜…è¯»çš„ã€‚SOLIDåŸåˆ™åŒæ ·ä¹Ÿé€‚ç”¨äºGoç¨‹åºè®¾è®¡ã€‚å…·ä½“SOLIDç¼–ç åŸåˆ™è§ä¸‹è¡¨ï¼š</p>
<p>| ç®€å†™ | å…¨ç§°                                | ä¸­æ–‡æè¿°     |
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>é«˜è´¨é‡ä»£ç </title>
      <link>http://blog.cjhe.top/design-pattern/quantity-code.html</link>
      <guid>http://blog.cjhe.top/design-pattern/quantity-code.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">é«˜è´¨é‡ä»£ç </source>
      <description>æç¤º ä»€ä¹ˆæ ·çš„ä»£ç æ‰æ˜¯é«˜è´¨é‡çš„ä»£ç â“</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 01 Nov 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä»€ä¹ˆæ ·çš„ä»£ç æ‰æ˜¯é«˜è´¨é‡çš„ä»£ç â“</p>
</div>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯é«˜è´¨é‡ä»£ç </h2>
<p>ä»£ç è´¨é‡çš„è¯„ä»·æœ‰å¾ˆå¼ºçš„ä¸»è§‚æ€§ï¼Œæè¿°ä»£ç è´¨é‡çš„è¯æ±‡ä¹Ÿæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ã€çµæ´»ã€ä¼˜é›…ã€ç®€æ´ç­‰ï¼Œè¿™äº›è¯æ±‡æ˜¯ä»ä¸åŒçš„ç»´åº¦å»è¯„ä»·ä»£ç è´¨é‡çš„ã€‚å®ƒä»¬ä¹‹é—´æœ‰äº’ç›¸ä½œç”¨ï¼Œå¹¶ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯”å¦‚ï¼Œä»£ç çš„å¯è¯»æ€§å¥½ã€å¯æ‰©å±•æ€§å¥½å°±æ„å‘³ç€ä»£ç çš„å¯ç»´æŠ¤æ€§å¥½ã€‚ä»£ç è´¨é‡é«˜ä½æ˜¯ä¸€ä¸ªç»¼åˆå„ç§å› ç´ å¾—åˆ°çš„ç»“è®ºã€‚æˆ‘ä»¬å¹¶ä¸èƒ½é€šè¿‡å•ä¸€çš„ç»´åº¦å»è¯„ä»·ä¸€æ®µä»£ç çš„å¥½åã€‚</p>
<h3>å¯ç»´æŠ¤æ€§ï¼ˆmaintainabilityï¼‰</h3>
<blockquote>
<p>ç»´æŠ¤ï¼šæ— å¤–ä¹å°±æ˜¯ä¿®æ”¹bugã€ä¿®æ”¹è€çš„ä»£ç ã€æ·»åŠ æ–°çš„ä»£ç ä¹‹ç±»çš„å·¥ä½œã€‚</p>
</blockquote>
<p><strong>ç»´æŠ¤ä»£ç çš„æ—¶é—´è¿œè¿œå¤§äºç¼–å†™ä»£ç çš„æ—¶é—´</strong>
å…¶ä¸­ï¼š</p>
<ul>
<li>ä»£ç æ˜“ç»´æŠ¤ï¼šåœ¨ä¸ç ´ååŸæœ‰ä»£ç è®¾è®¡ã€ä¸å¼•å…¥æ–°çš„bugçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå¿«é€Ÿåœ°ä¿®æ”¹æˆ–è€…æ·»åŠ ä»£ç ã€‚</li>
<li>ä»£ç ä¸æ˜“ç»´æŠ¤ï¼šä¿®æ”¹æˆ–è€…æ·»åŠ ä»£ç éœ€è¦å†’ç€æå¤§çš„å¼•å…¥æ–°bugçš„é£é™©ï¼Œå¹¶ä¸”éœ€è¦èŠ±è´¹å¾ˆé•¿çš„æ—¶é—´æ‰èƒ½å®Œæˆã€‚</li>
</ul>
<h3>å¯è¯»æ€§ï¼ˆreadabilityï¼‰</h3>
<blockquote>
<p>å¯è¯»ï¼šä»£ç æ˜“è¯»æ˜“ç†è§£</p>
</blockquote>
<p><strong>ä»£ç è¢«é˜…è¯»çš„æ¬¡æ•°è¿œè¿œè¶…è¿‡è¢«ç¼–å†™çš„æ¬¡æ•°</strong>
æˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹æ–¹é¢æ¥è¯„ä»·ï¼š</p>
<ol>
<li>ä»£ç æ˜¯å¦ç¬¦åˆç¼–ç è§„èŒƒï¼›</li>
<li>å‘½åæ˜¯å¦è¾¾æ„ï¼›</li>
<li>æ³¨é‡Šæ˜¯å¦è¯¦å°½ï¼›</li>
<li>å‡½æ•°æ˜¯å¦é•¿çŸ­åˆé€‚ï¼›</li>
<li>æ¨¡å—åˆ’åˆ†æ˜¯å¦æ¸…æ™°ï¼›</li>
<li>æ˜¯å¦ç¬¦åˆé«˜å†…èšä½è€¦åˆï¼›</li>
</ol>
<h3>å¯æ‰©å±•æ€§ï¼ˆextensibilityï¼‰</h3>
<blockquote>
<p>å¯æ‰©å±•ï¼šä»£ç åº”å¯¹æœªæ¥éœ€æ±‚å˜åŒ–çš„èƒ½åŠ›</p>
</blockquote>
<p><strong>å¼€é—­åŸåˆ™ï¼šå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾</strong>
è¯„åˆ¤æ ‡å‡†ï¼š</p>
<ul>
<li>æˆ‘ä»¬åœ¨ä¸ä¿®æ”¹æˆ–å°‘é‡ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µï¼Œé€šè¿‡æ‰©å±•çš„æ–¹å¼æ·»åŠ æ–°çš„åŠŸèƒ½ä»£ç ï¼›</li>
<li>ä»£ç é¢„ç•™äº†ä¸€äº›åŠŸèƒ½æ‰©å±•ç‚¹ï¼Œä¸éœ€è¦å› ä¸ºæ·»åŠ ä¸€ä¸ªåŠŸèƒ½è€Œå¤§åŠ¨å¹²æˆˆï¼Œæ”¹åŠ¨å¤§é‡çš„åŸå§‹ä»£ç ï¼›</li>
</ul>
<h3>çµæ´»æ€§ï¼ˆflexibilityï¼‰</h3>
<blockquote>
<p>çµæ´»ï¼šä»£ç æ˜“æ‰©å±•ã€æ˜“å¤ç”¨æˆ–è€…æ˜“ç”¨</p>
</blockquote>
<p>ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>æ˜“æ‰©å±•ï¼šå½“æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½ä»£ç çš„æ—¶å€™ï¼ŒåŸæœ‰çš„ä»£ç å·²ç»é¢„ç•™å¥½äº†æ‰©å±•ç‚¹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œåªè¦åœ¨æ‰©å±•ç‚¹ä¸Šæ·»åŠ æ–°çš„ä»£ç å³å¯ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥è¯´ä»£ç æ˜“æ‰©å±•ï¼Œè¿˜å¯ä»¥è¯´ä»£ç å†™å¾—å¥½çµæ´»ã€‚</p>
</li>
<li>
<p>æ˜“å¤ç”¨ï¼šå½“æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼Œå‘ç°åŸæœ‰ä»£ç ä¸­ï¼Œå·²ç»æŠ½è±¡å‡ºäº†å¾ˆå¤šåº•å±‚å¯ä»¥å¤ç”¨çš„æ¨¡å—ã€ç±»ç­‰ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿æ¥ç›´æ¥ä½¿ç”¨ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥è¯´ä»£ç æ˜“å¤ç”¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¯´ä»£ç å†™å¾—å¥½çµæ´»ã€‚</p>
</li>
<li>
<p>æ˜“ç”¨ï¼šå½“æˆ‘ä»¬ä½¿ç”¨æŸç»„æ¥å£çš„æ—¶å€™ï¼Œå¦‚æœè¿™ç»„æ¥å£å¯ä»¥åº”å¯¹å„ç§ä½¿ç”¨åœºæ™¯ï¼Œæ»¡è¶³å„ç§ä¸åŒçš„éœ€æ±‚ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥è¯´æ¥å£æ˜“ç”¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¯´è¿™ä¸ªæ¥å£è®¾è®¡å¾—å¥½çµæ´»æˆ–è€…ä»£ç å†™å¾—å¥½çµæ´»ã€‚</p>
</li>
</ul>
<h3>ç®€æ´æ€§ï¼ˆsimplicityï¼‰</h3>
<blockquote>
<p>ç®€æ´ï¼šä»£ç ç®€å•ã€é€»è¾‘æ¸…æ™°</p>
</blockquote>
<p><strong>KISSåŸåˆ™ï¼šâ€œKeep it Simple,Stupidâ€</strong>
æ€ä¹ˆè¯„åˆ¤å‘¢ï¼Ÿæ¯ä¸ªäººçš„æ ‡å‡†éƒ½ä¸ä¸€æ ·ï¼Œæˆ‘è§‰å¾—èƒ½å¤Ÿå¿«é€Ÿç†è§£ä¸šåŠ¡é€»è¾‘å°±æ˜¯ç®€å•çš„ã€‚"æ€ä»æ·±è€Œè¡Œä»ç®€ï¼ŒçœŸæ­£çš„é«˜æ‰‹èƒ½äº‘æ·¡é£è½»åœ°ç”¨æœ€ç®€å•çš„æ–¹æ³•è§£å†³æœ€å¤æ‚çš„é—®é¢˜ã€‚"</p>
<h3>å¯å¤ç”¨æ€§ï¼ˆreusabilityï¼‰</h3>
<blockquote>
<p>å¯å¤ç”¨ï¼šå°½é‡å‡å°‘é‡å¤ä»£ç çš„ç¼–å†™ï¼Œå¤ç”¨å·²æœ‰çš„ä»£ç ã€‚</p>
</blockquote>
<p><strong>DRYåŸåˆ™ï¼šâ€œDon't Repeat Yourselfâ€</strong>
ä½¿ç”¨æŠ€å·§ï¼š</p>
<ul>
<li>é¢å‘å¯¹è±¡ç‰¹æ€§ï¼šç»§æ‰¿å’Œå¤šæ€å°±æ˜¯ä¸ºäº†æé«˜å¯å¤ç”¨æ€§ï¼›</li>
<li>è§£è€¦ã€é«˜å†…èšã€æ¨¡å—åŒ–ç­‰æ€æƒ³éƒ½èƒ½æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ï¼›</li>
<li>å•ä¸€èŒè´£åŸåˆ™ä¸å¯å¤ç”¨æ€§ç›¸å…³ï¼›</li>
</ul>
<h3>å¯æµ‹è¯•æ€§ï¼ˆtestabilityï¼‰</h3>
<blockquote>
<p>å¯æµ‹è¯•ï¼šèƒ½å¦æ–¹ä¾¿åœ°æµ‹è¯•ä»£ç é€»è¾‘</p>
</blockquote>
<p>è¯„åˆ¤æ ‡å‡†ï¼š</p>
<ul>
<li>å³ä¾¿æœ‰å­˜å‚¨å’Œç¬¬ä¸‰æ–¹æœåŠ¡ä¹Ÿèƒ½æµ‹è¯•ï¼›</li>
<li>ä¸ä¾èµ–å„ä¸ªç¯å¢ƒï¼›</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>å¦‚ä½•ä¸é è¿æ°”å˜å¾—å¯Œæœ‰</title>
      <link>http://blog.cjhe.top/other/how-to-get-rich-without-getting-lucky.html</link>
      <guid>http://blog.cjhe.top/other/how-to-get-rich-without-getting-lucky.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å¦‚ä½•ä¸é è¿æ°”å˜å¾—å¯Œæœ‰</source>
      <description>ã€è½¬ã€‘åŸæ–‡é“¾æ¥</description>
      <category>è½¬è½½</category>
      <pubDate>Tue, 11 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ã€è½¬ã€‘<a href="https://github.com/fat-garage/how-to-get-rich-without-getting-lucky" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a></p>
<!-- more -->
<p>å¦‚ä½•ä¸é è¿æ°”å˜å¾—å¯Œæœ‰</p>
<blockquote>
<p>Naval æ˜¯ç¾å›½é£é™©æŠ•èµ„å®¶ï¼Œè¿™æ˜¯ä»–çš„3å°æ—¶é•¿æ’­å®¢ã€Šå¦‚ä½•ä¸é è¿æ°”å˜å¾—å¯Œæœ‰ã€‹çš„ä¸­æ–‡ç¿»è¯‘ï¼Œä»‹ç»äº†ä»–çš„è´¢å¯Œè§‚ï¼Œéå¸¸å€¼å¾—ä¸€è¯»ã€‚</p>
</blockquote>
<h2>ç„ä¸€ç„è¿™ğŸ‘‡</h2>
<ol>
<li>æœ¬æ–‡æ¬è¿è‡ªã€èƒ–è½¦åº“ã€‘å…¬ä¼—å·ï¼Œè¯‘è€…<a href="https://www.notion.so/918aecdf7acc476f9cbba7836996c3fe" target="_blank" rel="noopener noreferrer">Jessie</a>&amp;<a href="https://github.com/wangmingyue123" target="_blank" rel="noopener noreferrer">æ˜æœˆ</a>ã€‚èƒ–è½¦åº“æ˜¯ä¸€ä¸ªæœ‰æ„æ€äººç±»çš„æ”¶é›†è®¡åˆ’ï¼ˆå¼€å‘è€…ã€åˆ›ä¸šè€…ã€è‡ªç”±èŒä¸šè€…ï¼Œè¿˜æœ‰ä½ ï¼‰å’ŒDAOå»ä¸­å¿ƒåŒ–åä½œå®éªŒå®¤ï¼Œçœ‹çœ‹å¤§å®¶éƒ½åœ¨ä¸åŒé¢†åŸŸåšç€ä»€ä¹ˆæ ·æ–°çš„å°è¯•ï¼Œå¸Œæœ›ç»™ä½ æœªæ¥çš„å¯èƒ½æ€§æä¾›ä¸€äº›æƒ³è±¡åŠ›ã€‚<strong>æ°è¥¿å’Œå¥¹çš„æœ‹å‹ä»¬ä¹Ÿä¼šåœ¨èƒ–è½¦åº“ç¬¬ä¸€æ—¶é—´æ›´æ–°<a href="https://mp.weixin.qq.com/s/c-yx-WfWcld1Z2tNpYJxlQ" target="_blank" rel="noopener noreferrer">â€œå¦‚ä½•ä¸é è¿æ°”å˜å¾—å¯Œæœ‰â€ç³»åˆ—</a></strong>ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·æ¥ç©è€ ğŸ¤ã€‚</li>
</ol>
<figure><img src="https://i.imgur.com/WubW2ud.jpg" alt="èƒ–è½¦åº“" tabindex="0" loading="lazy"><figcaption>èƒ–è½¦åº“</figcaption></figure>
<ol start="2">
<li>å“ˆå“ˆå“ˆï¼ŒğŸ˜ å…¶å®æˆ‘è¿˜æ•´ç†å‡º<a href="https://www.notion.so/taosu/Updating-faf1fa3dbcc34e60b443506e76a9c1ab" target="_blank" rel="noopener noreferrer">notionç‰ˆ</a>å’Œ<a href="https://cdn.jsdelivr.net/gh/taosue/how-to-get-rich-without-getting-lucky@master/%E5%A6%82%E4%BD%95%E4%B8%8D%E9%9D%A0%E8%BF%90%E6%B0%94%E5%8F%98%E5%BE%97%E5%AF%8C%E6%9C%89(%E4%B8%8A)_Naval%20%EF%BC%88%E8%91%97%EF%BC%89%26Jessie%EF%BC%88%E8%AF%91%EF%BC%89.pdf" target="_blank" rel="noopener noreferrer">PDFç‰ˆ</a>(æˆ‘å°±æŠŠPDFå¯¼è¿›å»iPadï¼Œåœ¨iPadä¸Šçœ‹ä¹¦ğŸ“š)ï¼Œå¤§å®¶æˆ³æˆ³é“¾æ¥å°±å¯ä»¥çœ‹åˆ°äº†ã€‚</li>
</ol>
<h2>ç¬¬ä¸€æ¡ï¼šè¿½æ±‚è´¢å¯Œï¼Œè€Œä¸æ˜¯é‡‘é’±æˆ–åœ°ä½</h2>
<p>Niviï¼šä½ å¯èƒ½å¬è¯´è¿‡Navalåœ¨æ¨ç‰¹ä¸Šè¿›è¡Œçš„é‚£ä¸€æ³¢ä¸»é¢˜ä¸ºâ€œå¦‚ä½•åœ¨ä¸åªä¾é è¿æ°”çš„æƒ…å†µä¸‹è‡´å¯Œâ€çš„æ¨ç‰¹é£æš´ï¼ˆtweetstormï¼‰ã€‚æˆ‘ä»¬å€ŸåŠ©è¿™ä¸ªæ’­å®¢å›é¡¾å¤§éƒ¨åˆ†çš„æ¨æ–‡ï¼Œç»™Navalä¸€ä¸ªæœºä¼šè¯¦ç»†èŠèŠè¿™äº›è¯é¢˜ã€‚ä»–å¯èƒ½ä¼šæå‡ºä¸€äº›ä»¥å‰æ²¡æœ‰å‘è¡¨è¿‡çš„æƒ³æ³•ã€‚</p>
<p>Navalæ˜¯AngelListåˆ›å§‹äººå’ŒEpinionsçš„è”åˆåˆ›å§‹äººã€‚ä»–æ˜¯ä¸€ä½çœ¼å…‰ç‹¬åˆ°çš„ç§‘æŠ€æŠ•èµ„äººï¼ŒæŠ•å‡ºäº†åƒTwitterã€Uberè¿™æ ·çš„ç§‘æŠ€å…¬å¸ã€‚</p>
<p>ä¸åªæ˜¯ç§‘æŠ€è¡Œä¸šçš„äººï¼Œå„è¡Œå„ä¸šçš„äººéƒ½æƒ³çŸ¥é“<strong>å¦‚ä½•è§£å†³ä»–ä»¬ã€Œé’±çš„é—®é¢˜ã€</strong>ã€‚æ¯ä¸ªäººéƒ½éšçº¦åœ°æ„è¯†åˆ°è‡ªå·±æƒ³è¦å˜å¾—å¯Œæœ‰ï¼Œä½†æ˜¯ä»–ä»¬æ²¡æœ‰ä¸€å¥—å¥½çš„åŸåˆ™æ¥éµå®ˆå’Œè·µè¡Œã€‚</p>
<h3>è´¢å¯Œæ˜¯ä½ ç¡è§‰æ—¶è¿˜èƒ½äº§ç”Ÿæ”¶å…¥çš„èµ„äº§</h3>
<p>Niviï¼šè´¢å¯Œã€é‡‘é’±å’Œåœ°ä½æœ‰ä»€ä¹ˆåŒºåˆ«?</p>
<p>Navalï¼šè´¢å¯Œæ˜¯ä½ æ¸´æœ›çš„ä¸œè¥¿ï¼Œæ˜¯ä½ ç¡è§‰æ—¶è¿˜åœ¨äº§ç”Ÿæ”¶å…¥çš„è´¢äº§ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œè´¢å¯Œæ˜¯åœ¨å¤œé—´è¿˜èƒ½è¿è¡Œçš„ä¸ºå…¶ä»–å®¢æˆ·æœåŠ¡çš„è®¡ç®—æœºç¨‹åºã€‚è´¢å¯Œæ˜¯ä½ å­˜åœ¨é“¶è¡Œé‡Œçš„é’±ï¼Œç”¨äºå†æŠ•èµ„å…¶ä»–èµ„äº§å’Œä¸šåŠ¡ã€‚</p>
<p>æˆ¿å­æ˜¯è´¢å¯Œçš„ä¸€ç§å½¢å¼ï¼Œå› ä¸ºä½ å¯ä»¥æŠŠå®ƒç§Ÿå‡ºå»ï¼Œæ”¶å¾—ç§Ÿé‡‘ï¼Œå°½ç®¡è¿™æ˜¯ä¸€ç§æ¯”ç»è¥å•†ä¸šä¼ä¸šæ›´ä½æ•ˆçš„åœŸåœ°ä½¿ç”¨æ–¹å¼ã€‚</p>
<p>æˆ‘å¯¹è´¢å¯Œçš„å®šä¹‰æ˜¯æŒ‡é‚£äº›å¯ä»¥åœ¨<strong>ä½ ç¡è§‰æ—¶ä¾ç„¶å¯ä»¥ä¸ºä½ èµšé’±çš„ä¼ä¸šå’Œèµ„äº§</strong>ã€‚</p>
<h3>è´¢å¯Œçš„ç»ˆæç›®æ ‡æ˜¯è‡ªç”±</h3>
<p>ä½ æ¸´æœ›è´¢å¯Œï¼Œæ˜¯å› ä¸ºå®ƒèƒ½ç»™ä½ å¸¦æ¥è‡ªç”±ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸å¿…åƒç™½é¢†é‚£æ ·ä¸€ä¸ä¸è‹Ÿçš„ç³»é¢†å¸¦ï¼›ä½ ä¸å¿…æ—©ä¸Š6ç‚¹å°±èµ·åºŠã€996æŒ¤åœ°é“ä¸Šä¸‹ç­ï¼›ä½ ä¸å¿…æŠŠæ—¶é—´æµªè´¹åœ¨ä¸€ä»½æ²¡æœ‰çµé­‚ï¼Œä½ ä¸å–œæ¬¢çš„å·¥ä½œä¸Šã€‚</p>
<p><strong>æˆ‘ä»¬åˆ›é€ è´¢å¯Œå°±æ˜¯ä¸ºäº†è‡ªç”±ï¼Œä»…æ­¤è€Œå·²</strong>ã€‚è€Œä¸æ˜¯å»ä¹°æ¯›çš®å¤§è¡£ï¼Œä¸æ˜¯å»å¼€æ³•æ‹‰åˆ©ï¼Œä¸æ˜¯å»é©¾é©¶æ¸¸è‰‡ï¼Œä¹Ÿä¸æ˜¯å»ä¹˜åæ¹¾æµé£æœºç¯æ¸¸ä¸–ç•Œã€‚é‚£äº›ä¸œè¥¿å¾ˆå¿«å°±ä¼šå˜å¾—æ— èŠå’Œæ„šè ¢ã€‚å®ƒï¼ˆè´¢å¯Œï¼‰æ˜¯å…³äº<strong>ä½ å¦‚ä½•æˆä¸ºä½ è‡ªå·±çš„äº‹</strong>ã€‚</p>
<p>é™¤éä½ çœŸçš„æƒ³è¦è´¢å¯Œï¼Œå¦åˆ™ä½ ä¸ä¼šå¾—åˆ°å®ƒã€‚å…¨ä¸–ç•Œéƒ½æƒ³è¦å®ƒï¼Œå…¨ä¸–ç•Œéƒ½åœ¨ä¸ºæ­¤åŠªåŠ›ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œå®ƒæ˜¯æœ‰ç«äº‰åŠ›çš„ã€‚è¿™æ˜¯ä¸€ä¸ªæ­£å’Œåšå¼ˆï¼Œä½†å…¶ä¸­ä¹Ÿæœ‰ç«äº‰å› ç´ ï¼Œå› ä¸ºç°åœ¨ç¤¾ä¼šä¸Šçš„èµ„æºæ˜¯æœ‰é™çš„ã€‚ä¸ºäº†è·å¾—èµ„æºå»åšä½ æƒ³åšçš„ï¼Œä½ å¿…é¡»è„±é¢–è€Œå‡ºã€‚</p>
<h3>é‡‘é’±æ˜¯æˆ‘ä»¬è½¬ç§»è´¢å¯Œçš„æ–¹å¼</h3>
<p>é‡‘é’±æ˜¯ç¤¾ä¼šä¿¡ç”¨ï¼Œå®ƒæ˜¯ä¸€ç§ä»åˆ«äººçš„æ—¶é—´ä¸­è·å¾—ä¿¡ç”¨å’Œå€ºåŠ¡çš„èƒ½åŠ›ã€‚å¦‚æœæˆ‘åšå¯¹äº†å·¥ä½œï¼Œä¸ºç¤¾ä¼šåˆ›é€ äº†ä»·å€¼ï¼Œç¤¾ä¼šä¼šè¯´ï¼šâ€œå“¦ï¼Œè°¢è°¢ä½ ã€‚æˆ‘ä»¬æ¬ ä½ ä¸€äº›ä¸œè¥¿ï¼Œå°†æ¥ä¼šè¡¥å¿ä½ ã€‚è¿™æ˜¯æˆ‘çš„å€Ÿæ¡ï¼Œæˆ‘ä»¬æŠŠå®ƒå«åšé’±å§ã€‚â€</p>
<p>é’±ä¼šè´¬å€¼æ˜¯å› ä¸º,</p>
<ul>
<li>äººä»¬å·äº†å€Ÿæ®</li>
<li>æ”¿åºœå¢å‘è´§å¸</li>
<li>äººä»¬è¿èƒŒIOU</li>
</ul>
<p>ä½†æ˜¯é‡‘é’±è¯•å›¾æˆä¸ºç¤¾ä¼šçš„ä¸€ä¸ªå¯é çš„æ¬ æ¡ï¼Œå› ä¸ºä½ åœ¨ä¸ºè‡ªå·±çš„ä»˜å‡ºè€Œè¢«ä»–äººäºæ¬ ã€‚æˆ‘ä»¬æŠŠè¿™äº›æ¬ æ¡åˆ°å¤„ä¼ é€’ï¼Œé‡‘é’±æ˜¯æˆ‘ä»¬è½¬ç§»è´¢å¯Œçš„æ–¹å¼ã€‚</p>
<h3>åœ°ä½æ˜¯ä½ åœ¨ç¤¾ä¼šç­‰çº§ä¸­çš„åœ°ä½</h3>
<p>äººç”ŸåŸºæœ¬ä¸Šæœ‰ä¸¤å¤§æ¸¸æˆã€‚ä¸€ä¸ªæ˜¯é‡‘é’±æ¸¸æˆã€‚é’±å¹¶ä¸èƒ½è§£å†³ä½ æ‰€æœ‰çš„é—®é¢˜ï¼Œä½†å®ƒä¼šè§£å†³ä½ æ‰€æœ‰çš„å’Œé’±ç›¸å…³çš„é—®é¢˜ã€‚æˆ‘æƒ³å¤§å®¶éƒ½èƒ½æ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥æ‰æƒ³èµšé’±ã€‚åŒæ—¶ï¼Œåœ¨å†…å¿ƒæ·±å¤„ï¼Œè®¸å¤šäººè®¤ä¸ºä»–ä»¬åšä¸åˆ°ï¼Œæ‰€ä»¥ä»–ä»¬ä¸å¸Œæœ›ä»»ä½•è´¢å¯Œåˆ›é€ å‘ç”Ÿã€‚ä»–ä»¬æ”»å‡»é‚£äº›èµšé’±çš„ä¼ä¸šå’Œä¼ä¸šå®¶ä»¬ï¼Œè¯´ä»–ä»¬ï¼šâ€œèµšé’±æ˜¯ç½ªæ¶çš„ã€‚ä½ ä¸åº”è¯¥è¿™ä¹ˆåšã€‚â€ä½†ä»–ä»¬å®é™…ä¸Šåœ¨ç©å¦ä¸€ä¸ªæ¸¸æˆï¼Œé‚£å°±æ˜¯åœ°ä½æ¸¸æˆã€‚ä»–ä»¬è¯•å›¾ä¼ é€’ä¸€ç§ä¿¡æ¯â€œæˆ‘ä¸éœ€è¦é’±ï¼Œæˆ‘ä»¬ä¸è¦é’±ã€‚â€</p>
<p>åœ°ä½æŒ‡çš„æ˜¯ä½ åœ¨ç¤¾ä¼šç­‰çº§ä¸­çš„åœ°ä½ã€‚</p>
<p><strong>è´¢å¯Œä¸æ˜¯é›¶å’Œæ¸¸æˆ</strong>ã€‚ä¸–ç•Œä¸Šæ¯ä¸ªäººéƒ½å¯ä»¥æ‹¥æœ‰ä¸€æ‰€æˆ¿å­ï¼Œä½ æœ‰æˆ¿å­å¹¶ä¸ä¼šå½±å“æˆ‘æœ‰æˆ¿å­çš„èƒ½åŠ›ã€‚å¦‚æœæœ‰ä»€ä¹ˆåŒºåˆ«çš„è¯ï¼Œå»ºé€ çš„æˆ¿å±‹è¶Šå¤šï¼Œå»ºé€ æˆ¿å±‹å°±è¶Šå®¹æ˜“ï¼Œæˆ‘ä»¬å¯¹å»ºé€ æˆ¿å±‹çš„äº†è§£å°±è¶Šå¤šï¼Œå°±ä¼šæœ‰æ›´å¤šçš„äººæ‹¥æœ‰æˆ¿å±‹ã€‚</p>
<p><strong>è´¢å¯Œæ˜¯ä¸€ä¸ªæ­£å’Œæ¸¸æˆ</strong>ã€‚æˆ‘ä»¬ä¸€èµ·åˆ›é€ ï¼ŒåŠªåŠ›åˆ›é€ ç€å¯„æ‰˜ç€æˆ‘ä»¬ç¾å¥½æœŸå¾…çš„â€œè‰ºæœ¯å“â€æ¥è§£é‡Šæˆ‘ä»¬æ­£åœ¨åšçš„äº‹æƒ…ã€‚æœ€ç»ˆï¼Œä¸€äº›å…¨æ–°çš„ä¸œè¥¿å°†è¢«åˆ›é€ å‡ºæ¥ã€‚è¿™æ˜¯ä¸€ä¸ªæ­£å’Œæ¸¸æˆã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œ<strong>åœ°ä½æ˜¯ä¸€ä¸ªé›¶å’Œæ¸¸æˆ</strong>ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å¤è€çš„æ¸¸æˆã€‚æˆ‘ä»¬ä»åŸå§‹äººéƒ¨è½å¼€å§‹å°±ç©è¿™ä¸ªæ¸¸æˆäº†ã€‚ä¹Ÿå°±æ˜¯ç­‰çº§åˆ¶åº¦ã€‚è€å¤§æ˜¯è°ï¼Ÿè€äºŒæ˜¯è°ï¼Ÿè€ä¸‰æ˜¯è°ï¼Ÿè€ä¸‰æ‰“è´¥äº†è€äºŒï¼Œè€äºŒå°±å¿…é¡»è®©ä½ã€‚æ‰€ä»¥ï¼Œåœ°ä½æ˜¯ä¸€ä¸ªé›¶å’Œæ¸¸æˆã€‚</p>
<h2>ç¬¬äºŒæ¡ï¼šä¸ºä¸–ç•Œåˆ›é€ æ›´å¤š</h2>
<p><strong>è´¢å¯Œä¸æ˜¯ä»åˆ«äººé‚£é‡Œæ‹¿èµ°ä»€ä¹ˆï¼Œè€Œæ˜¯ä¸ºè¿™ä¸ªä¸–ç•Œåˆ›é€ æ›´å¤š</strong></p>
<h3>è´¢å¯Œåˆ›é€ å¸¦æ¥äº†ä¸–ç•Œçš„ä¸°å¯Œ</h3>
<p>Navalï¼šæœ‰ä¸€ç§è§‚ç‚¹è®¤ä¸ºèµšé’±æ˜¯é‚ªæ¶çš„ï¼Œè¿™ä¸ªè¯´æ³•å¥½åƒèµ·æºäºâ€œé‡‘é’±æ˜¯ä¸‡æ¶ä¹‹æºâ€ã€‚äººä»¬è®¤ä¸ºé“¶è¡Œå®¶å·èµ°äº†æˆ‘ä»¬çš„é’±ï¼Œè¿™åœ¨æŸç§ç¨‹åº¦ä¸Šæ˜¯æ­£ç¡®çš„ï¼Œåœ¨ä¸–ç•Œä¸Šçš„å¾ˆå¤šåœ°æ–¹ï¼Œæœ‰å¾ˆå¤šå·çªƒè¡Œä¸ºä¸€ç›´åœ¨å‘ç”Ÿã€‚</p>
<p>ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œä¸–ç•Œçš„å†å²å°±æ˜¯åˆ›é€ è€…å’Œç´¢å–è€…ä¹‹é—´çš„æ•é£Ÿè€…/è¢«æ•é£Ÿè€…å…³ç³»ã€‚æœ‰äº›äººèµ°å‡ºå»åˆ›é€ ä¸œè¥¿ï¼Œå»ºé€ ä¸œè¥¿ï¼ŒåŠªåŠ›åˆ›é€ æœºä¼šã€‚æœ‰äº›äººå¸¦ç€å‰‘ã€æªï¼Œæˆ–è€…ç»æµä¸Šæˆ‘ä»¬è¯´ç¨æ”¶ã€è£™å¸¦èµ„æœ¬ä¸»ä¹‰ï¼Œå…±äº§ä¸»ä¹‰ç­‰ç­‰å½¢å¼ï¼Œè¿›è¡Œç€ä¸åŒå½¢å¼çš„å·çªƒã€‚å³ä½¿åœ¨è‡ªç„¶ç•Œï¼Œå¯„ç”Ÿç”Ÿç‰©ä¹Ÿæ¯”éå¯„ç”Ÿç”Ÿç‰©å¤šã€‚ä½ èº«ä¸Šæœ‰å¾ˆå¤šå¯„ç”Ÿè™«ï¼Œå®ƒä»¬é ä½ ç”Ÿå­˜ã€‚å¥½çš„æƒ…å†µæ˜¯å…±ç”Ÿï¼Œä»–ä»¬ä¼šå›é¦ˆä¸€äº›ä¸œè¥¿ã€‚ä½†ä¹Ÿæœ‰å¾ˆå¤šåªæ˜¯ç´¢å–ã€‚è¿™å°±æ˜¯ä»»ä½•å¤æ‚ç³»ç»Ÿçš„æœ¬è´¨ã€‚</p>
<p>æˆ‘å…³æ³¨çš„æ˜¯çœŸæ­£çš„è´¢å¯Œåˆ›é€ ã€‚è¿™ä¸æ˜¯ä»…ä¸ºäº†èµšé’±ï¼Œä¸æ˜¯å•çº¯ä»åˆ«äººé‚£é‡Œæ‹¿ä¸œè¥¿ã€‚</p>
<p>æ˜¾è€Œæ˜“è§çš„æ˜¯ï¼Œå·¥ä½œä¸æ˜¯æœ‰é™çš„ï¼Œè´¢å¯Œä¹Ÿä¸æ˜¯æœ‰é™çš„ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬è¿˜ä¼šååœ¨æ´ç©´é‡Œï¼Œç¢ç£¨ç€å¦‚ä½•ç“œåˆ†æŸ´ç«ï¼Œæˆ–è€…å¶å°”è¿æ°”å¥½æ—¶æ•é£Ÿåˆ°çš„ä¸€äº›æ­»é¹¿ã€‚</p>
<p>äººç±»æ–‡æ˜ä¸­çš„å¤§éƒ¨åˆ†è´¢å¯Œï¼Œäº‹å®ä¸Šæ˜¯å…¨éƒ¨è´¢å¯Œï¼Œéƒ½æ˜¯è¢«åˆ›é€ å‡ºæ¥çš„ã€‚å®ƒæ˜¯ä»æŸå¤„äº§ç”Ÿçš„ã€‚å®ƒæ˜¯ç”±äººåˆ›é€ ï¼Œç”±ç§‘æŠ€åˆ›é€ ï¼Œç”±ç”Ÿäº§åŠ›åˆ›é€ çš„ã€‚å®ƒæ˜¯é€šè¿‡åŠªåŠ›åˆ›é€ å‡ºæ¥çš„ã€‚è¿™ç§è¢«çªƒå–çš„æƒ³æ³•æ˜¯ä¸€ç§å¯æ€•çš„é›¶å’Œæ¸¸æˆï¼Œäººä»¬è¯•å›¾è·å¾—åœ°ä½çš„æ¸¸æˆã€‚</p>
<h3>æ¯ä¸ªäººéƒ½å¯ä»¥å˜å¾—å¯Œæœ‰</h3>
<p>ä½†ç°å®æ˜¯ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥å˜å¾—å¯Œæœ‰ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç¬¬ä¸€ä¸–ç•Œå›½å®¶ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªäººéƒ½æ¯”200å¹´å‰æ´»ç€çš„äººå¯Œæœ‰ã€‚200å¹´å‰ï¼Œæ²¡æœ‰äººä½¿ç”¨æŠ—ç”Ÿç´ ï¼Œæ²¡æœ‰äººæœ‰æ±½è½¦ï¼Œæ²¡æœ‰äººèƒ½ç”¨ç”µï¼Œæ²¡æœ‰äººæœ‰iPhoneã€‚æ‰€æœ‰è¿™äº›éƒ½æ˜¯ä½¿æˆ‘ä»¬ä½œä¸ºä¸€ä¸ªç‰©ç§å˜å¾—æ›´å¯Œæœ‰çš„å‘æ˜ã€‚ä»Šå¤©ï¼Œæˆ‘å®æ„¿åœ¨ç¬¬ä¸€ä¸–ç•Œå›½å®¶åšä¸€ä¸ªç©·äººï¼Œä¹Ÿä¸æ„¿åœ¨è·¯æ˜“åå››çš„æ³•å›½åšä¸€ä¸ªå¯Œäººã€‚è¿™æ˜¯å› ä¸ºè´¢å¯Œçš„åˆ›é€ ã€‚</p>
<p>æŠ€æœ¯çš„å¼•æ“æ˜¯ç§‘å­¦ï¼Œå…¶ç›®çš„æ˜¯åˆ›é€ ä¸°å¯Œæ€§ã€‚æ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºä»æ ¹æœ¬ä¸Šæ¥è¯´ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥å˜å¾—å¯Œæœ‰ã€‚</p>
<p>æˆ‘æƒ³è®©ä½ ä»¬æƒ³è±¡è¿™æ ·ä¸€ç§æƒ…å½¢ã€‚å¦‚æœæ¯ä¸ªäººéƒ½æŒæ¡ä¸€ä¸ªå¥½çš„è½¯ä»¶å·¥ç¨‹å¸ˆå’Œä¸€ä¸ªå¥½çš„ç¡¬ä»¶å·¥ç¨‹å¸ˆçš„æŠ€èƒ½ï¼Œä½ å¯ä»¥è‡ªå·±é€ æœºå™¨äººï¼Œå¼€å‘ç¨‹åºï¼Œè‡ªå·±å»ºæ¡¥ï¼Œå¹¶ä¸ºå®ƒä»¬ç¼–ç¨‹ã€‚å‡è®¾æ¯ä¸ªäººéƒ½çŸ¥é“æ€ä¹ˆåšã€‚</p>
<p>é‚£ä½ è®¤ä¸º20å¹´åçš„ç¤¾ä¼šä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿæˆ‘çš„çŒœæµ‹æ˜¯ï¼Œæˆ‘ä»¬ä¼šé€ å‡ºå„ç§å„æ ·çš„æœºå™¨äººã€æœºå™¨ã€è½¯ä»¶å’Œç¡¬ä»¶æ¥åšä»»ä½•äº‹æƒ…ã€‚æˆ‘ä»¬éƒ½ä¼šç”Ÿæ´»å¾—éå¸¸å¯Œè¶³ã€‚æˆ‘ä»¬åŸºæœ¬ä¸Šå°±é€€ä¼‘äº†ï¼Œå› ä¸ºæˆ‘ä»¬éƒ½ä¸ç”¨ä¸ºä»»ä½•åŸºæœ¬çš„ä¸œè¥¿å·¥ä½œã€‚æˆ‘ä»¬ç”šè‡³ä¼šæœ‰æœºå™¨äººæŠ¤å£«ï¼Œä¼šæœ‰æœºå™¨é©±åŠ¨çš„åŒ»é™¢ï¼Œä¼šæœ‰è‡ªåŠ¨é©¾é©¶æ±½è½¦ã€‚æˆ‘ä»¬ä¼šæœ‰100%è‡ªåŠ¨åŒ–çš„å†œåœºï¼Œä¼šæœ‰æ¸…æ´èƒ½æºã€‚é‚£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æŠ€æœ¯ä¸Šçš„çªç ´æ¥å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¸€åˆ‡ã€‚å¦‚æœæœ‰äººè¿˜åœ¨å·¥ä½œï¼Œé‚£ä¹ˆä»–ä»¬æ˜¯åœ¨ç”¨å·¥ä½œæ¥è¡¨è¾¾ä»–ä»¬çš„åˆ›é€ åŠ›ã€‚</p>
<p>æˆ‘ä¸è®¤ä¸ºèµ„æœ¬ä¸»ä¹‰æ˜¯é‚ªæ¶çš„ã€‚èµ„æœ¬ä¸»ä¹‰å®é™…ä¸Šæ˜¯å¥½çš„ï¼Œå®ƒåªæ˜¯è¢«åŠ«æŒäº†ï¼Œè¢«ä¸å½“çš„å¤–éƒ¨æˆæœ¬å®šä»·æ‰€åŠ«æŒã€‚å®ƒè¢«ä¸æ­£å½“çš„æ”¶ç›Šæ‰€åŠ«æŒï¼Œåœ¨é‚£é‡Œæœ‰è…è´¥ï¼Œæˆ–è€…æœ‰å„æ–­ã€‚</p>
<h2>ç¬¬ä¸‰æ¡ï¼šè‡ªç”±å¸‚åœºæ˜¯äººç±»å›ºæœ‰</h2>
<p><strong>æˆ‘ä»¬æ˜¯å”¯ä¸€è·¨è¶ŠåŸºå› ç•Œé™è¿›è¡Œåˆä½œçš„åŠ¨ç‰©ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥åœ¨è‡ªæ„¿çš„äº¤æ¢ä¸­è¿½è¸ªä¿¡ç”¨(credit)å’Œå€ºåŠ¡(debt)</strong></p>
<h3>è‡ªç”±å¸‚åœºæ˜¯äººç±»ç¤¾ä¼šå›ºæœ‰çš„</h3>
<p>Navalï¼šå…¨é¢çš„èµ„æœ¬ä¸»ä¹‰(æ„å‘³ç€è‡ªç”±å¸‚åœº)æ˜¯äººç±»ç¤¾ä¼šå›ºæœ‰çš„ã€‚èµ„æœ¬ä¸»ä¹‰ä¸æ˜¯æˆ‘ä»¬å‘æ˜çš„ï¼Œç”šè‡³ä¸æ˜¯æˆ‘ä»¬å‘ç°çš„ä¸œè¥¿ã€‚å®ƒå¤©ç„¶å­˜åœ¨äºæˆ‘ä»¬çš„æ¯ä¸€æ¬¡äº¤æ¢ä¸­ã€‚å½“ä½ å’Œæˆ‘äº¤æ¢ä¿¡æ¯æ—¶ï¼Œä½ ä¸€å®šæƒ³ä»æˆ‘è¿™é‡Œå¾—åˆ°ä¸€äº›ä¿¡æ¯ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰è‰¯å¥½çš„ä¿¡æ¯äº¤æµï¼Œä½ ä¼šå»æ‰¾åˆ«äººã€‚æ‰€ä»¥ï¼Œäº¤æ¢å°±æ˜¯åœ¨è®°å½•ä¿¡ç”¨å’Œå€ºåŠ¡ï¼Œè¿™æ˜¯æˆ‘ä»¬ä½œä¸ºçµæ´»çš„ç¤¾ä¼šåŠ¨ç‰©ä¸ç”Ÿä¿±æ¥çš„æœ¬é¢†ã€‚</p>
<p>æˆ‘ä»¬æ˜¯åŠ¨ç‰©ç‹å›½ä¸­å”¯ä¸€è·¨è¶Šç§ç¾¤è¿›è¡Œåˆä½œï¼ˆåä½œï¼‰çš„åŠ¨ç‰©ã€‚å¤§å¤šæ•°åŠ¨ç‰©åªä¼šæˆç¾¤åˆä½œï¼Œå…±åŒè¿›åŒ–ï¼Œå®ƒä»¬è¡€æ¶²ç›¸è¿ï¼Œæ‰€ä»¥å®ƒä»¬æœ‰ä¸€äº›å…±åŒçš„å…´è¶£ã€‚äººç±»æ²¡æœ‰è¿™ç§æˆç¾¤åˆä½œçš„èƒ½åŠ›ï¼Œä¹Ÿä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦ã€‚å°±ç®—ä½ æ˜¯å¡å°”ç»´äºšäººï¼Œä»–æ˜¯æ³¢æ–¯äººï¼Œæˆ‘æ˜¯å°åº¦äººï¼Œæ²¡æœ‰ä»»ä½•è¡€ç¼˜å…³ç³»ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥åˆä½œã€‚</p>
<p>ä»€ä¹ˆè®©æˆ‘ä»¬åˆä½œï¼Ÿå› ä¸ºæˆ‘ä»¬å¯ä»¥è®°å½•å€Ÿæ–¹å’Œè´·æ–¹ã€‚è°æŠ•å…¥äº†å¤šå°‘å·¥ä½œï¼Ÿè°è´¡çŒ®äº†å¤šå°‘ï¼Ÿè¿™å°±æ˜¯è‡ªç”±å¸‚åœºèµ„æœ¬ä¸»ä¹‰ã€‚å› æ­¤ï¼Œæˆ‘åšä¿¡è¿™æ˜¯äººç±»ä¸ç”Ÿä¿±æ¥çš„ï¼Œæˆ‘ä»¬å°†ä¸ºæ¯ä¸ªäººåˆ›é€ è¶Šæ¥è¶Šå¤šçš„è´¢å¯Œã€‚</p>
<p>æ¯ä¸ªäººéƒ½å¯ä»¥å˜å¾—å¯Œæœ‰ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥é€€ä¼‘ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥æˆåŠŸã€‚è¿™åªæ˜¯ä¸€ä¸ª<strong>æ•™è‚²å’Œæ¬²æœ›</strong>çš„é—®é¢˜ã€‚å‰ææ˜¯ä½ å¿…é¡»æƒ³è¦å®ƒã€‚å¦‚æœä½ ä¸æƒ³è¦ï¼Œæ²¡å…³ç³»ï¼Œæ²¡äººå¼ºè¿«ä½ å‚ä¸æ¸¸æˆã€‚ä½†æ˜¯ä¸è¦è¯•å›¾è´¬ä½é‚£äº›ç§¯æå‚ä¸æ¸¸æˆçš„äººã€‚ä»–ä»¬æ²¡å‡†å„¿å°±æ˜¯é‚£äº›èƒ½è®©ä½ æ™šä¸Šç¡åœ¨æ¸©æš–èˆ’é€‚çš„åºŠä¸Šï¼Œè®©ä½ èƒ½æ›´æ–¹ä¾¿çš„ä¹°åˆ°å…¨ä¸–ç•Œçš„ä¸œè¥¿ï¼Œè®©ä½ èƒ½æ‹¿ç€å—¡å—¡ä½œå“çš„iPhoneå¼€å¿ƒåˆ·æŠ–éŸ³çš„äººã€‚å› æ­¤ï¼Œè¿™æ˜¯ä¸€åœºç¾å¦™çš„æ¯”èµ›ï¼Œå€¼å¾—æˆ‘ä»¬ä»ä¼¦ç†ä¸Šã€ç†æ€§ä¸Šã€é“å¾·ä¸Šå»æŒ‘æˆ˜ä¸€æ¬¡ã€‚å®ƒå°†ç»§ç»­ä½¿æˆ‘ä»¬æ‰€æœ‰äººè¶Šæ¥è¶Šå¯Œæœ‰ï¼Œç›´åˆ°æˆ‘ä»¬ä¸ºä»»ä½•æƒ³è¦çš„äººåˆ›é€ å¤§é‡è´¢å¯Œã€‚</p>
<h3>å¤ªå¤šçš„ç´¢å–è€…è€Œæ²¡æœ‰è¶³å¤Ÿçš„åˆ›é€ è€…å°†ä½¿ä¸€ä¸ªç¤¾ä¼šé™·å…¥æ¯ç­</h3>
<p>Niviï¼šä¸åªæ˜¯ä¸ªäººåœ¨æš—åœ°é‡Œé„™è§†è´¢å¯Œï¼Œå¯¹å§ï¼Ÿæœ‰äº›å›½å®¶ã€å›¢ä½“å’Œæ”¿å…šå…¬ç„¶è”‘è§†è´¢å¯Œã€‚è‡³å°‘çœ‹èµ·æ¥æ˜¯è¿™æ ·ã€‚</p>
<p>Navalï¼šæ²¡é”™ã€‚è¿™äº›å›½å®¶ã€æ”¿å…šå’Œå›¢ä½“æ­£åœ¨æ²¦ä¸ºä¸€åœºé›¶å’Œåšå¼ˆã€‚åœ¨æ‘§æ¯è´¢å¯Œåˆ›é€ çš„è¿‡ç¨‹ä¸­ï¼Œä»–ä»¬æŠŠæ¯ä¸ªäººéƒ½æ‹‰ä½åˆ°å’Œä»–ä»¬ä¸€æ ·çš„æ°´å¹³ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¾å›½æ˜¯ä¸€ä¸ªéå¸¸å—ç§»æ°‘æ¬¢è¿çš„å›½å®¶ï¼Œå› ä¸ºç¾å›½æ¢¦ã€‚æ˜¾ç„¶ï¼Œä¸åŒçš„äººå¯¹è´¢å¯Œçš„å®šä¹‰æ˜¯ä¸åŒçš„ã€‚ç¬¬ä¸€ä¸–ç•Œå…¬æ°‘å¯¹è´¢å¯Œçš„å®šä¹‰å¯èƒ½æ˜¯ï¼Œâ€œæˆ‘ä¸€å®šè¦èµšåˆ°æ•°ç™¾ä¸‡ç¾å…ƒã€‚è€Œå¯¹äºç¬¬ä¸‰ä¸–ç•Œçš„è´«ç©·ç§»æ°‘æ¥è¯´ï¼Œå½“åˆšè¿›å…¥è¿™ä¸ªå›½å®¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªæ˜¯è´«ç©·çš„ç§»æ°‘ï¼Œå¯¹è´¢å¯Œçš„é¢„æœŸå€¼ä¼šæ›´ä½ã€‚å®ƒå¯èƒ½åªæ˜¯ï¼Œâ€œæˆ‘ä¸éœ€è¦åœ¨æˆ‘çš„ä½™ç”Ÿåšæˆ‘ä¸æƒ³åšçš„ä½“åŠ›åŠ³åŠ¨ã€‚â€</p>
<p>ä½†æ˜¯é„™è§†å®ƒçš„ç¾¤ä½“ä¼šæŠŠæ•´ä¸ªç¾¤ä½“å¸¦åˆ°å’Œä»–ä»¬ä¸€æ ·çš„æ°´å¹³ã€‚å¦‚æœæœ‰å¤ªå¤šçš„ç´¢å–è€…ï¼Œè€Œæ²¡æœ‰è¶³å¤Ÿçš„åˆ›é€ è€…ï¼Œç¤¾ä¼šå°±ä¼šåˆ†å´©ç¦»æã€‚ä½ æœ€ç»ˆä¼šå˜æˆä¸€ä¸ªå…±äº§ä¸»ä¹‰å›½å®¶ã€‚çœ‹çœ‹å§”å†…ç‘æ‹‰å°±çŸ¥é“ï¼Œä»–ä»¬ä¸åœçš„å¿™äºè·å–ã€åˆ†å‰²å’Œé‡æ–°åˆ†é…ï¼Œäººä»¬åœ¨è¡—ä¸ŠæŒ¨é¥¿ï¼Œæ¯å¹´éƒ½å› ä¸ºé¥¥é¥¿è€Œå¤±å»å‡ å…¬æ–¤çš„ä½“é‡ã€‚</p>
<p>å¦ä¸€ç§æ€è€ƒæ–¹å¼æ˜¯æƒ³è±¡ä¸€ä¸ªæœ‰å¤ªå¤šå¯„ç”Ÿè™«çš„æœ‰æœºä½“ã€‚ä½ éœ€è¦å°‘é‡çš„å¯„ç”Ÿè™«æ¥ä¿æŒå¥åº·ã€‚ä½ éœ€è¦å¾ˆå¤šçš„å…±ç”Ÿä½“ã€‚æ‰€æœ‰ç»†èƒä¸­å¸®åŠ©æˆ‘ä»¬å‘¼å¸å’Œç‡ƒçƒ§æ°§æ°”çš„çº¿ç²’ä½“ã€‚è¿™äº›æ˜¯å¸®åŠ©æˆ‘ä»¬ç”Ÿå­˜çš„å…±ç”Ÿä½“ã€‚æ²¡æœ‰ä»–ä»¬æˆ‘ä»¬æ— æ³•ç”Ÿå­˜ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œä»–ä»¬ï¼ˆå…±ç”Ÿä½“ï¼‰æ˜¯ä¸€èµ·åˆ›é€ è´¢å¯Œçš„ä¼™ä¼´ï¼Œå…±åŒåˆ›é€ äº†äººç±»çš„èº«ä½“ã€‚ä½†æ˜¯å¦‚æœä½ ä½“å†…å……æ»¡äº†å¯„ç”Ÿè™«ï¼Œå¦‚æœä½ æ„ŸæŸ“äº†è •è™«ï¼Œæˆ–è€…ç—…æ¯’ï¼Œæˆ–è€…ç»†èŒï¼Œè€Œè¿™äº›éƒ½æ˜¯å•çº¯çš„å¯„ç”Ÿï¼Œä½ å°±ä¼šæ­»äº¡ã€‚æ‰€ä»¥ï¼Œä»»ä½•ç”Ÿç‰©éƒ½åªèƒ½æŠµæŠ—å°‘é‡çš„å¯„ç”Ÿè™«ã€‚å½“å¯„ç”Ÿå…ƒç´ å¤±å»æ§åˆ¶æ—¶ï¼Œä½ å°±æ­»å®šäº†ã€‚</p>
<p>æˆ‘è¯´çš„è¿˜æ˜¯é“å¾·è´¢å¯Œåˆ›é€ ï¼Œä¸æ˜¯å„æ–­ï¼Œä¹Ÿä¸æ˜¯è£™å¸¦èµ„æœ¬ä¸»ä¹‰ã€‚æˆ‘è¯´çš„æ˜¯è‡ªç”±æ€æƒ³ï¼Œè‡ªç”±å¸‚åœºã€‚äººä¸äººä¹‹é—´çš„å°è§„æ¨¡äº¤æµæ˜¯è‡ªæ„¿çš„ï¼Œä¸ä¼šå¯¹ä»–äººäº§ç”Ÿå¤ªå¤§çš„å½±å“ã€‚æˆ‘è®¤ä¸ºè¿™ç§è´¢å¯Œåˆ›é€ ï¼Œå¦‚æœä¸€ä¸ªç¤¾ä¼šä¸å°Šé‡å®ƒï¼Œå¦‚æœä¸€ä¸ªç¾¤ä½“ä¸å°Šé‡å®ƒï¼Œé‚£ä¹ˆè¿™ä¸ªç¤¾ä¼šå°±ä¼šé™·å…¥æ¯ç­å’Œé»‘æš—ã€‚</p>
<h2>ç¬¬å››æ¡ï¼šè‡´å¯Œä¸è¿æ°”æ— å…³</h2>
<h3>è‡´å¯Œä¸è¿æ°”æ— å…³ï¼Œè¦æŒæ¡è‡´å¯Œçš„æŠ€èƒ½</h3>
<p>Navalï¼šå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨è¿™ä¸€ç”Ÿä¸­ä¸åªä¾é è¿æ°”å˜å¾—å¯Œæœ‰ã€‚å¾ˆå¤šäººè®¤ä¸ºèµšé’±æ˜¯é è¿æ°”ã€‚å®ƒä¸æ˜¯ï¼Œå…³é”®æ˜¯ä½ è¦æˆä¸ºé‚£ç§èƒ½èµšé’±çš„äººã€‚æ¯”å¦‚ï¼Œå‡è®¾æˆ‘è¾“å…‰äº†æ‰€æœ‰çš„è´¢äº§ï¼Œä½ æŠŠæˆ‘éšä¾¿æ‰”åˆ°ä»»ä½•ä¸€ä¸ªè¯´è‹±è¯­çš„å›½å®¶çš„å¤§è¡—ä¸Šï¼Œä¸å‡º5åˆ°10å¹´ï¼Œæˆ‘å°±ä¼šå†æ¬¡å˜å¾—å¯Œæœ‰ï¼ˆç¬‘ï¼‰ã€‚å› ä¸ºè¿™æ˜¯ä¸€ç§æŠ€èƒ½ï¼Œè€Œä¸”æˆ‘è®¤ä¸ºæ¯ä¸ªäººéƒ½å¯ä»¥æ‹¥æœ‰è¿™ç§æŠ€èƒ½ã€‚åœ¨1000ä¸ªå¹³è¡Œå®‡å®™ä¸­ï¼Œä½ æƒ³åœ¨å…¶ä¸­999ä¸ªé‡Œå˜å¾—å¯Œæœ‰ã€‚ä½ ä¸æƒ³åªåœ¨é è¿æ°”æˆåˆ†çš„50ä¸ªé‡Œé¢å˜å¾—å¯Œæœ‰å¯¹å§ï¼Ÿ</p>
<p>æˆ‘ä»¬åœ¨è¿™è®²çš„è¿æ°”æœ‰å››ç§ã€‚è¿™ä¸ªåˆ†ç±»æ¥äºä¸€æœ¬ä¹¦ï¼Œa16zçš„é©¬å…‹Â·å®‰å¾·æ£®(Marc Andreessen)åœ¨Pmarca.comè¿™ä¸ªåšå®¢ä¸­æ›¾ç»æåˆ°è¿‡ã€‚</p>
<ol>
<li>ç‹—å±è¿</li>
</ol>
<p>ç¬¬ä¸€ç§å°±æ˜¯ç‹—å±è¿ã€‚ä½ å®Œå…¨æ— æ³•æ§åˆ¶è¿™ç§èµ°è¿ï¼Œä¿—è¯è¯´è¿™å°±æ˜¯å‘½å¥½ã€‚</p>
<ol start="2">
<li>åšæŒä¸æ‡ˆçš„å®å¹²è¿</li>
</ol>
<p>è¿™ç§å¹¸è¿æ¥è‡ªäºåšæŒã€åŠªåŠ›ã€ä¸åœçš„å°è¯•å’Œè¡ŒåŠ¨ã€‚å½“ä½ å››å¤„å¥”æ³¢åˆ›é€ äº†å„ç§å„æ ·çš„æœºä¼šï¼Œè¿™æœŸé—´ä½ è¾“å‡ºäº†å¾ˆå¤šèƒ½é‡ï¼Œä½ åšäº†å¾ˆå¤šäº‹æƒ…ï¼Œä¼šæœ‰å¤§é‡çš„èƒ½é‡äº¤æ¢ã€‚</p>
<p>ä½ å¯èƒ½ä¼šè¯´ï¼Œäººä»¬åªæœ‰å¿—è¶£ç›¸æŠ•æ‰èƒ½èšåœ¨ä¸€èµ·ã€‚é‚£æˆ‘ä¸¾å¦å¤–ä¸€ä¸ªä¾‹å­ï¼ŒNenadæŠŠä»–åšçš„å¾ˆæ£’çš„åŠ¨ç”»è§†é¢‘æ”¾åˆ°äº†ç½‘ä¸Šï¼Œæˆ‘åœ¨Twitterä¸Šçœ‹åˆ°äº†å®ƒä»¬ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œä»–é€šè¿‡åˆ¶ä½œè§†é¢‘åˆ›é€ äº†è‡ªå·±çš„è¿æ°”ï¼Œç›´åˆ°åƒæˆ‘è¿™æ ·çš„äººæºæºä¸æ–­æ‰¾åˆ°ä»–ã€‚</p>
<ol start="3">
<li>æ—©æœ‰é¢„å¤‡çš„è¿æ°”</li>
</ol>
<p>ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯ä½ å˜å¾—éå¸¸å–„äºå‘ç°è¿æ°”ã€‚å¦‚æœä½ åœ¨æŸä¸ªé¢†åŸŸéå¸¸ç²¾é€šï¼Œä½ ä¼šæ³¨æ„åˆ°åœ¨é‚£ä¸ªé¢†åŸŸå¹¸è¿çš„äº‹ä»¶æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚å½“å…¶ä»–äººæ²¡æœ‰æ³¨æ„åˆ°å®ƒçš„æ—¶å€™ï¼Œä½ ä¼šå˜å¾—å¯¹è¿æ°”æ•æ„Ÿï¼Œè¿™æ˜¯é€šè¿‡æŠ€èƒ½ã€çŸ¥è¯†å’Œå·¥ä½œç»éªŒçš„ç§¯ç´¯è¾¾æˆçš„ã€‚</p>
<p>4.ç‹¬ç‰¹çš„äººæ ¼ç»™ä½ å¸¦æ¥çš„å¥½è¿</p>
<p>æœ€åä¸€ç§è¿æ°”æ˜¯æœ€å¥‡æ€ªã€æœ€è‰°éš¾çš„ä¸€ç§ï¼Œä½†è¿™å°±æ˜¯æˆ‘ä»¬è¦è®¨è®ºçš„ã€‚åœ¨è¿™é‡Œï¼Œä½ å»ºç«‹äº†ä¸€ä¸ªç‹¬ç‰¹çš„äººæ ¼ï¼Œä¸€ä¸ªç‹¬ç‰¹çš„å“ç‰Œï¼Œä¸€ä¸ªç‹¬ç‰¹çš„å¿ƒæ€ï¼Œç„¶åå¥½è¿ä¼šæ‰¾åˆ°ä½ ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå‡è®¾ä½ æ˜¯ä¸–ç•Œä¸Šæœ€æ“…é•¿æ·±æµ·æ½œæ°´çš„äººã€‚å¤§å®¶éƒ½çŸ¥é“ï¼Œä½ ä¼šè¿›è¡Œåˆ«äººéƒ½ä¸æ•¢å°è¯•çš„æ·±æµ·æ½œæ°´ã€‚ç„¶åï¼Œæœ‰äººå¹¸è¿çš„åœ¨æµ·å²¸å¤–å‘ç°äº†ä¸€è‰˜æ²‰æ²¡çš„å®è—èˆ¹ã€‚ä»–ä»¬æ²¡åŠæ³•æ‹¿åˆ°ï¼Œåªèƒ½è·‘æ¥æ‰¾ä½ æ±‚åŠ©ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬çš„è¿æ°”åŒæ—¶å˜æˆäº†ä½ çš„è¿æ°”ï¼Œä½ ä¼šå› æ­¤å¾—åˆ°éå¸¸ä¸°åšçš„æŠ¥é…¬ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæç«¯çš„ä¾‹å­ã€‚é‚£ä¸ªæ‰¾åˆ°å®è—çš„å¹¸è¿å„¿ä»¬ï¼Œèµ°çš„æ˜¯ç‹—å±è¿ã€‚ä½†ä»–ä»¬ä¸å¾—ä¸æ¥æ‰¾ä½ å¸®å¿™æŠŠå®è—æ‹¿å‡ºæ¥ï¼Œæœ€ç»ˆä½ ä¼šå¾—åˆ°ä¸€éƒ¨åˆ†è¿™é‡Œé¢çš„è´¢å¯Œï¼Œè¿™ä¸æ˜¯è¿æ°”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶è¿™ä¸ªå¥½è¿çš„èµ·å§‹ä¸æ˜¯ä½ ï¼Œä½†æ˜¯ä½ èƒ½è®©é‚£äº›å‘ç°å¥½è¿çš„äººåœ¨å…³é”®æ—¶åˆ»æƒ³èµ·ä½ ï¼Œå¾ˆæ˜æ˜¾ä½ å¯ä»¥åœ¨å…¶ä¸­èµ·åˆ°ä¸å¯æ›¿ä»£çš„ä½œç”¨ã€‚è¿™ç§æƒ…å†µä¸‹ä½ æ—¢æˆå°±äº†åˆ«äººï¼Œåˆåˆ†äº«äº†ä»–äººçš„å¥½è¿ï¼Œè¿™å°±æ˜¯ä½ ä¸ºä»€ä¹ˆè¦æ‰“é€ è‡ªå·±ç‹¬ç‰¹çš„ä¸ªæ€§å’Œå“ç‰Œã€‚</p>
<h3>åœ¨1000ä¸ªå¹³è¡Œå®‡å®™ä¸­ï¼Œä½ æƒ³åœ¨å…¶ä¸­999ä¸ªé‡Œå˜å¾—å¯Œæœ‰</h3>
<p>Niviï¼šä½ åˆšåˆšæåˆ°ï¼Œåœ¨1000ä¸ªå¹³è¡Œå®‡å®™ä¸­ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­çš„999ä¸ªå˜å¾—å¯Œæœ‰ï¼Ÿæˆ‘æƒ³æœ‰äº›äººçœ‹åˆ°åä¼šè¯´ï¼šâ€œè¿™å¬èµ·æ¥ä¸å¤ªå¯èƒ½ï¼Œå¤ªå¤¸å¼ äº†å§ã€‚â€</p>
<p>Navalï¼šä¸ï¼Œæˆ‘ä¸è®¤ä¸ºè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚è€ƒè™‘åˆ°ä½ çš„èµ·æ­¥æ¡ä»¶ï¼Œæˆ‘è®¤ä¸ºä½ å¯èƒ½å¾—å†åŠªåŠ›ä¸€ç‚¹ã€‚æˆ‘åœ¨å°åº¦çš„æ—¶å€™æ˜¯ä¸ªç©·å­©å­ï¼Œæ‰€ä»¥å¦‚æœæˆ‘èƒ½æˆåŠŸï¼Œä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œä»»ä½•äººéƒ½èƒ½ã€‚å¾ˆæ˜æ˜¾ï¼Œæˆ‘å››è‚¢å¥å…¨ï¼Œæ™ºåŠ›æ­£å¸¸ï¼Œå½“ç„¶æˆ‘ä¹Ÿç¡®å®æ¥å—äº†æ•™è‚²ã€‚ä¹Ÿè®¸æœ‰ä¸€äº›å‰ææ¡ä»¶ä¸ä¸€æ ·ï¼Œä½†å¦‚æœä½ åœ¨å¬è¿™ä¸ªè§†é¢‘æˆ–æ’­å®¢ï¼Œè¯´æ˜ä½ å·²ç»æŒæ¡äº†åŸºæœ¬çš„æŠ€èƒ½ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªåŠŸèƒ½å¥å…¨çš„èº«ä½“å’Œä¼šæ€è€ƒå¤§è„‘ã€‚</p>
<p>äº‹å®ä¸Šï¼Œä¸€è·¯ä¸Šæˆ‘å…¶å®é‡åˆ°äº†å¾ˆå¤šå€’éœ‰äº‹ã€‚æˆ‘èµšçš„ç¬¬ä¸€ç¬”é’±ï¼Œç«‹åˆ»å°±åœ¨è‚¡ç¥¨å¸‚åœºä¸Šèµ”äº†ä¸ªç²¾å…‰ã€‚æˆ‘èµšçš„ç¬¬äºŒç¬”é’±ï¼Œæˆ–è€…è¯´æˆ‘åº”è¯¥èµšçš„ç¬¬äºŒç¬”é’±ï¼ŒåŸºæœ¬ä¸Šéƒ½è¢«æˆ‘çš„å•†ä¸šä¼™ä¼´éª—èµ°äº†ã€‚è¿™æ¬¡ï¼ˆæˆåŠŸï¼‰å·²ç»æ˜¯ç¬¬ä¸‰æ¬¡äº†ã€‚</p>
<p>å³ä¾¿å¦‚æ­¤ï¼Œè´¢å¯Œçš„ç§¯ç´¯ä»å¤„äºç¼“æ…¢è€Œç¨³å®šçš„æŒ£æ‰ä¹‹ä¸­ã€‚æˆ‘è¿™è¾ˆå­è¿˜æ²¡ä¸€æ¬¡æ€§èµšè¿‡ä¸€å¤§ç¬”é’±ï¼Œæ€»æ˜¯ä¸€å¤§å †å°äº‹å †ç§¯åœ¨ä¸€èµ·ã€‚å®ƒæ›´å¤šçš„æ˜¯é€šè¿‡æŒç»­çš„æ„å»ºå•†ä¸šï¼ˆåšåˆ›ä¸šå…¬å¸ï¼‰ã€å¯»æ‰¾æŠ•èµ„æœºä¼šæ¥æŒç»­åˆ›é€ è´¢å¯Œã€‚è¿™ç»å¯¹ä¸æ˜¯ä¸€æ­¥ç™»å¤©çš„äº‹ã€‚</p>
<h3>è´¢å¯Œä¸æ˜¯ä¸€æ­¥ç™»å¤©</h3>
<p>æˆ‘çš„ä¸ªäººè´¢å¯Œä¸æ˜¯åœ¨æŸä¸€å¹´äº§ç”Ÿçš„ï¼Œå®ƒæ˜¯ä¸€ç‚¹ç‚¹å †ç§¯èµ·æ¥çš„ï¼Œæ¯ä¸€ä¸ªé˜¶æ®µç§¯ç´¯ä¸€ç‚¹ã€‚æ›´å¤šçš„é€‰æ‹©ï¼Œæ›´å¤šçš„ç”Ÿæ„ï¼Œæ›´å¤šçš„æŠ•èµ„ï¼Œæ‰èƒ½æ’¬å¼€æ›´å¤šè‡ªå·±èƒ½åšçš„äº‹æƒ…ã€‚å’ŒNenadçš„illacertusä¸€æ ·ï¼Œä»–åœ¨æ²¹ç®¡ä¸Šåšäº†ä¸€ç³»åˆ—è§†é¢‘ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªè§†é¢‘ä¼šåœ¨ä¸€å¤œä¹‹é—´è®©ä»–ä¸€å¤œæš´å¯Œï¼Œè¿™ç»å¯¹æ˜¯ä¸€ä¸ªæ¼«é•¿çš„è¿‡ç¨‹ï¼Œå­¦ä¹ ï¼Œé˜…è¯»ï¼Œåˆ›é€ ï¼Œè¿™æœŸé—´ä¼šäº§ç”Ÿå¤åˆ©æ•ˆåº”ã€‚</p>
<p>æˆ‘ä»¬è°ˆè®ºçš„æ˜¯å˜å¾—å¯Œæœ‰ï¼Œè¿™æ ·ä½ å°±å¯ä»¥é€€ä¼‘ï¼Œä½ å°±æœ‰æ›´å¤šçš„è‡ªç”±ã€‚é€€ä¼‘ä¸æ˜¯è¯´ä»€ä¹ˆéƒ½ä¸åšã€‚è€Œæ˜¯è¯´ä½ ä¸å¿…å»ä»»ä½•ä½ ä¸æƒ³å»çš„åœ°æ–¹ï¼Œä½ ä¸å¿…åšä»»ä½•ä½ ä¸æƒ³åšçš„äº‹ï¼Œä½ æƒ³ä»€ä¹ˆæ—¶å€™é†’æ¥å°±ä»€ä¹ˆæ—¶å€™é†’æ¥ï¼Œä½ æƒ³ä»€ä¹ˆæ—¶å€™ç¡è§‰å°±ä»€ä¹ˆæ—¶å€™ç¡è§‰ï¼Œæ²¡æœ‰è€æ¿å¯¹ä½ æŒ‡æ‰‹ç”»è„šã€‚è¿™å°±æ˜¯è‡ªç”±ã€‚æˆ‘ä»¬è°ˆè®ºçš„æ˜¯è¶³å¤Ÿçš„è´¢å¯Œæ¥è·å¾—è‡ªç”±ã€‚ç‰¹åˆ«æ˜¯ç”±äºäº’è”ç½‘çš„æ™®åŠï¼Œæœºä¼šåˆ°å¤„éƒ½æ˜¯ã€‚å¦ç™½è®²ï¼Œæˆ‘æœ‰å¤ªå¤šçš„æ–¹æ³•æ¥èµšé’±ï¼Œæˆ‘æ»¡è„‘å­éƒ½æ˜¯æƒ³æ³•ï¼Œå”¯ä¸€ç¼ºçš„å°±æ˜¯æ—¶é—´ã€‚åˆ›é€ è´¢å¯Œã€åˆ›é€ äº§å“ã€åˆ›é€ ä¼ä¸šã€åˆ›é€ æœºä¼šï¼Œä»ç¤¾ä¼šè·å¾—æŠ¥é…¬çš„æ–¹å¼å¤ªå¤šäº†ã€‚</p>
<h2>ç¬¬äº”æ¡ï¼šä½ å¿…é¡»æœ‰ç‚¹å¼‚ä¹å¯»å¸¸ï¼Œæ‰èƒ½ç‹¬è‡ªèµ°åœ¨å‰æ²¿</h2>
<p>Navalåœ¨ä»–çš„åšå®¢ä¸­è¿˜æåˆ°äº†ä¸€äº›å…³äºç¬¬å››ç§è¿æ°”çš„æœ‰è¶£ä¾‹å­ï¼Œä½†æˆ‘æƒ³è®©è¯»è€…äº†è§£çš„ä¸€ç‚¹æ˜¯ï¼Œç¬¬å››ç§è¿æ°”å…¶å®æ˜¯æ¥è‡ªäºä½ å¼‚ä¹å¯»å¸¸ï¼ˆè¿™é‡Œç”¨äº†eccentricè¿™ä¸ªè¯ï¼‰çš„è¡Œä¸ºï¼Œæ‰€ä»¥æœ‰æ—¶å€™å¼‚ä¹å¯»å¸¸å¯èƒ½å¹¶ä¸æ˜¯ä¸€ä»¶åäº‹ã€‚</p>
<p>Navalï¼šæ²¡é”™ï¼Œå› ä¸ºè¿™ä¸ªä¸–ç•Œéå¸¸è®²æ±‚æ•ˆç‡ï¼Œæ¯ä¸ªäººéƒ½åœ¨æ˜æ˜¾çš„åœ°æ–¹æŒ–æ˜ç€æ–°å¥‡çš„ã€æœªè¢«å‘ç°çš„ä¸œè¥¿ï¼Œè¿™ä¼šå¸®åŠ©ä½ å»ºç«‹ä¼˜åŠ¿ã€‚ç‹¬è‡ªèµ°åœ¨å‰æ²¿å¯èƒ½éœ€è¦ä½ æœ‰ç‚¹å¼‚ä¹å¯»å¸¸ï¼Œè€Œä¸”æ„¿æ„æ¯”ä¸€èˆ¬äººæŒ–æ˜å¾—æ›´æ·±ï¼ŒæŒ–æ˜çš„æ›´æ·±ä»…ä»…å› ä¸ºä½ æ„Ÿå…´è¶£ã€‚</p>
<p>Niviï¼šå¯¹ï¼Œé™¤äº†æœ¬æ°æ˜Â·è¿ªæ–¯é›·åˆ©çš„é‚£å¥è¯å¤–ï¼Œæˆ‘çœ‹è¿‡çš„ä¸¤å¥è¡¨è¾¾è¿™ç§è¿æ°”çš„è¯ï¼Œä¸€ä¸ªæ˜¯å±±å§†Â·é˜¿å°”ç‰¹æ›¼ï¼ˆSamuel Altmanï¼‰è¯´çš„ï¼Œâ€œæç«¯çš„äººæ‰èƒ½å¾—åˆ°æç«¯çš„ç»“æœã€‚â€â€œæˆ‘è®¤ä¸ºè¿™å¥è¯å¾ˆå¥½ã€‚è¿˜æœ‰å¦ä¸€ä¸ªæ¥è‡ªæ–¯å¦ç¦å¤§å­¦æ•™æˆæ°å¼—é‡ŒÂ·æ™®è´¹å¼—ï¼ˆJeffrey Pfefferï¼‰çš„è§‚ç‚¹ï¼Œâ€œä½ ä¸å¯èƒ½æ—¢æ­£å¸¸åˆæœŸå¾…å¼‚å¸¸å›æŠ¥ã€‚â€</p>
<p>Navalï¼šæ˜¯çš„ã€‚æˆ‘å–œæ¬¢çš„ä¸€å¥ä¸ä¹‹å®Œå…¨ç›¸åçš„è¯æ˜¯ï¼Œâ€œç©æ„šè ¢çš„æ¸¸æˆçš„äººèµ¢æ„šè ¢çš„å¥–å“ã€‚â€â€œå¾ˆå¤šäººèŠ±å¾ˆå¤šæ—¶é—´åœ¨ç¤¾äº¤åª’ä½“ä¸Šï¼Œæ¯”å¦‚ä½ è¯•å›¾åœ¨Twitterä¸Šæé«˜ä½ çš„ç¤¾ä¼šåœ°ä½ï¼Œä½†ä½ åŸºæœ¬ä¸Šèµ¢å¾—äº†æ„šè ¢çš„ã€ä»·å€¼ä¸å¤§çš„ç¤¾äº¤å¥–é¡¹ã€‚</p>
<p>Niviï¼šæˆ‘æƒ³æˆ‘ä»è¿™ç¯‡åšå®¢æ–‡ç« ä¸­å¾—åˆ°çš„æœ€åä¸€ä¸ªè§‚ç‚¹æ˜¯ï¼Œé™¤äº†ç‹—å±è¿ï¼Œä½ åº”è¯¥å»è¿½æ±‚è¿™å‡ ç§è¿æ°”ï¼ˆå°¤å…¶æ˜¯æœ€åä¸€ä¸ªï¼‰ï¼Œè¿™ä¼šè®©ä½ å˜å¾—è¶Šæ¥è¶Šå¹¸è¿ã€‚</p>
<p>Navalï¼šæ˜¯çš„ï¼Œèµ·ç èƒ½å›å½’å‡å€¼ï¼ˆç¬‘ï¼‰ã€‚æ‰€ä»¥ï¼Œä½ è‡³å°‘è¦ä¸­å’Œè¿æ°”ï¼Œè¿™æ ·æ‰èƒ½æ›´å¥½çš„å‘æŒ¥ä½ è‡ªå·±çš„æ‰èƒ½ã€‚</p>
<h2>ç¬¬å…­æ¡ï¼šå‡ºç§Ÿæ—¶é—´ä¸ä¼šè®©ä½ å˜å¾—å¯Œæœ‰</h2>
<h3>å‡ºç§Ÿæ—¶é—´ä¸ä¼šè®©ä½ å˜å¾—å¯Œæœ‰ï¼Œå› ä¸ºä½ ä¸èƒ½éçº¿æ€§åœ°èµšé’±</h3>
<p>Niviï¼šæ¥ä¸‹æ¥ä½ ä¼šè¯¦ç»†ä»‹ç»å¦‚ä½•è‡´å¯Œï¼Œä»¥åŠä»€ä¹ˆä¸ä¼šæœ‰åŠ©äºè‡´å¯Œã€‚ç¬¬ä¸€ç‚¹æ˜¯ï¼šâ€œå‡ºç§Ÿä½ çš„æ—¶é—´ä¸ä¼šè®©ä½ å˜å¾—å¯Œæœ‰ã€‚<strong>ä½ å¿…é¡»æ‹¥æœ‰å…¬å¸çš„è‚¡æƒï¼Œæ‰èƒ½è·å¾—è´¢åŠ¡è‡ªç”±ã€‚</strong>â€</p>
<p>Navalï¼šè¿™å¯èƒ½æ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ã€‚äººä»¬ä¼¼ä¹è®¤ä¸ºä½ å¯ä»¥åˆ›é€ è´¢å¯Œï¼Œé€šè¿‡å·¥ä½œè‡´å¯Œã€‚è¿™å¯èƒ½è¡Œä¸é€šï¼ŒåŸå› æœ‰å¾ˆå¤šã€‚æœ€æ ¹æœ¬çš„åŸå› æ˜¯ï¼Œä½ çš„æŠ•å…¥å’Œäº§å‡ºç›¸å…³æ€§å¤ªå¼ºã€‚å‡ ä¹åœ¨ä»»ä½•æœ‰è–ªæ°´çš„å·¥ä½œä¸­ï¼Œå³ä½¿æ˜¯åƒå¾‹å¸ˆæˆ–åŒ»ç”Ÿè¿™æ ·æ¯å°æ—¶æŠ¥é…¬å¾ˆé«˜çš„å·¥ä½œï¼Œä½ ä»ç„¶åœ¨æŠ•å…¥æ—¶é—´ï¼Œä½ çš„æŠ¥é…¬æ˜¯æŒ‰æ¯å°æ—¶æˆ–å·¥ä½œé‡è®¡ä»·ã€‚å› æ­¤ï¼Œè¿™æ„å‘³ç€å½“ä½ ç¡è§‰çš„æ—¶å€™ï¼Œåœ¨åº¦å‡çš„æ—¶å€™ï¼Œä½ æ²¡æœ‰åœ¨åˆ›é€ è´¢å¯Œï¼›ä¸€æ—¦ä½ é€€ä¼‘äº†ï¼Œä½ å°±æ²¡æœ‰æ”¶å…¥äº†ï¼ˆé€€ä¼‘é‡‘å¦å½“åˆ«è®ºï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸å¯èƒ½å¾—åˆ°éçº¿æ€§çš„æ”¶å…¥ã€‚</p>
<p>å¦‚æœä½ çœ‹åˆ°ä¸€äº›åŒ»ç”Ÿéå¸¸å¯Œæœ‰ï¼Œé‚£æ˜¯å› ä¸ºä»–ä»¬æˆç«‹äº†å…¬å¸ï¼Œå¼€äº†ç§äººè¯Šæ‰€ã€‚ä»–ä»¬é€šè¿‡ç§äººè¯Šæ‰€å»ºç«‹äº†ä¸€ä¸ªå“ç‰Œï¼Œä¸ºä»–ä»¬å¸¦æ¥æŒç»­çš„å£ç¢‘å’Œå®¢æˆ·ã€‚æˆ–è€…ä»–ä»¬åˆ¶é€ äº†æŸç§åŒ»ç–—è®¾å¤‡æˆ–ä¸€ä¸ªç¨‹åºï¼Œä¸”æ‹¥æœ‰è¿™äº›ä¸œè¥¿çš„çŸ¥è¯†äº§æƒã€‚</p>
<p>å› æ­¤ï¼Œæœ¬è´¨ä¸Šä½ æ˜¯åœ¨ä¸ºåˆ«äººå·¥ä½œï¼Œè€Œé‚£ä¸ªäººæ‰¿æ‹…äº†é£é™©å’Œè´£ä»»ï¼ŒæŒæ¡ç€çŸ¥è¯†äº§æƒï¼Œæœ‰å“ç‰Œã€‚æ‰€ä»¥ï¼Œä»–ä»¬ä¸ä¼šç»™ä½ è¶³å¤Ÿçš„å·¥èµ„ï¼Œä»–ä»¬ä¼šä»˜ç»™ä½ æœ€ä½å·¥èµ„ï¼Œè®©ä½ åšä»–ä»¬éœ€è¦çš„å·¥ä½œã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆé«˜çš„æœ€ä½é™åº¦ï¼Œä½†ä»ç„¶ä¸æ˜¯ä½ æƒ³è±¡çš„é€€ä¼‘åçœŸæ­£çš„è´¢å¯Œã€‚</p>
<h3>å‡ºç§Ÿæ—¶é—´èµšé’±æ„å‘³ç€ä½ å¾ˆå®¹æ˜“è¢«æ›¿ä»£</h3>
<p>æœ€åï¼Œä½ ç”šè‡³æ²¡æœ‰ä¸ºç¤¾ä¼šåˆ›é€ å‡ºé‚£ä¹ˆå¤šåŸåˆ›çš„ä¸œè¥¿ã€‚æ­£å¦‚æˆ‘æ‰€è¯´ï¼Œè¿™åœºæ¨ç‰¹é£æš´åº”è¯¥è¢«ç§°ä¸ºâ€œå¦‚ä½•åˆ›é€ è´¢å¯Œâ€ï¼Œåªä¸è¿‡â€œå¦‚ä½•è‡´å¯Œâ€æ˜¯ä¸€ä¸ªæ›´å¸å¼•äººçš„æ ‡é¢˜ç½¢äº†ã€‚å› ä¸ºä½ ç°åœ¨æ‰®æ¼”çš„æ˜¯å›ºå®šçš„è§’è‰²ï¼Œè€Œå¤§å¤šæ•°å›ºå®šè§’è‰²çš„ä»»åŠ¡æ˜¯å¯ä»¥æ•™ä¼šçš„ã€‚å¦‚æœä»–ä»¬èƒ½åƒåœ¨å­¦æ ¡é‚£æ ·è¢«æ•™æˆï¼Œé‚£ä¹ˆæœ€ç»ˆä½ å°†ä¼šå’Œä¸€ä¸ªæ›´å¹´è½»çš„ã€æ‹¥æœ‰æœ€æ–°çŸ¥è¯†çš„äººç«äº‰ï¼Œè¿™ä¸ªäººæ³¨å®šæ˜¯è¦å–ä»£ä½ çš„ã€‚</p>
<p>æ›´å¯èƒ½çš„æ˜¯ï¼Œä½ åšçš„å·¥ä½œæœ€ç»ˆä¼šè¢«æœºå™¨äººæˆ–äººå·¥æ™ºèƒ½å–ä»£ã€‚å®ƒç”šè‡³ä¸éœ€è¦ä¸€å¤œä¹‹é—´å–ä»£ï¼Œå®ƒå¯ä»¥ä¸€æ¬¡æ›¿æ¢ä¸€ç‚¹ã€‚æ‰€ä»¥ï¼ŒåŸºæœ¬ä¸Šåœ¨å‡ºç§Ÿæ—¶é—´çš„æ¨¡å¼ä¸‹ï¼ˆä¹Ÿå°±æ˜¯æ‰“å·¥ï¼‰ï¼ŒæŠ•å…¥å’Œäº§å‡ºæ˜¯åŒ¹é…çš„ï¼Œä½†æˆ‘ä¸è®¤ä¸ºè¿™æ˜¯çœŸæ­£åˆ›é€ è´¢å¯Œçš„æ–¹å¼ã€‚</p>
<h3>ä½ å¿…é¡»æ‹¥æœ‰è‚¡æƒæ‰èƒ½è·å¾—è´¢åŠ¡è‡ªç”±</h3>
<p>æ‰€ä»¥æ¯ä¸ªçœŸæ­£æƒ³è¦è‡´å¯Œçš„äººåœ¨æŸç§ç¨‹åº¦ä¸Šéƒ½æ‹¥æœ‰ä¸€ä¸ªäº§å“ï¼Œä¸€ä¸ªä¼ä¸šï¼Œæˆ–è€…æŸç§çŸ¥è¯†äº§æƒã€‚å®ƒå¯ä»¥æ˜¯è‚¡ç¥¨æˆ–è€…æœŸæƒï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šäººé€‰æ‹©åœ¨æ—©æœŸç§‘æŠ€å…¬å¸å·¥ä½œã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹æ–¹å¼ã€‚</p>
<p>ä½†é€šå¸¸çœŸæ­£çš„è´¢å¯Œæ˜¯é€šè¿‡åˆ›åŠè‡ªå·±çš„å…¬å¸ï¼Œç”šè‡³æ˜¯é€šè¿‡æŠ•èµ„æ¥åˆ›é€ çš„ã€‚æŠ•èµ„ä¸€å®¶å…¬å¸æˆ–è€…è¯´å…¥è‚¡ï¼Œå…¶å®æœ‰å¾ˆå¤šé€šå¾€è´¢å¯Œçš„è·¯å¾„å¹¶ä¸æŒ‰ç…§å°æ—¶è®¡æ•°ã€‚</p>
<h3>è¿½æ±‚ä¸€ä»½æŠ•å…¥ä¸äº§å‡ºâ€œä¸åŒ¹é…â€çš„å·¥ä½œ</h3>
<p>ä¸ºä»€ä¹ˆä½ çœŸçš„éœ€è¦è¿½æ±‚ä¸€ä»½æŠ•å…¥å’Œäº§å‡ºâ€œä¸åŒ¹é…â€çš„å·¥ä½œæˆ–è€…èŒä¸šï¼Œè¿™å°†ä¼šåœ¨ä¹‹åçš„æ¨ç‰¹é£æš´ä¸­æåˆ°ã€‚æ‹¥æœ‰é«˜åˆ›é€ åŠ›å’Œé«˜å½±å“åŠ›çš„ä¼ä¸šå¾€å¾€æ˜¯é‚£äº›ä½ å¯ä»¥å·¥ä½œä¸€å°æ—¶çš„ä¼ä¸šï¼Œè¿™ä¸€å°æ—¶å¯èƒ½ä¼šäº§ç”Ÿå·¨å¤§çš„å½±å“ï¼›æˆ–è€…ä½ åšäº†1000ä¸ªå°æ—¶çš„å·¥ä½œï¼Œä½†æ˜¯æ²¡æœ‰æ•ˆæœã€‚</p>
<p>æˆ‘ä»¬æ‹¿è½¯ä»¶è¡Œä¸šä¸ºä¾‹ã€‚ä¸€æ–¹é¢ï¼Œä¸€ä¸ªä¼Ÿå¤§çš„å·¥ç¨‹å¸ˆå¯ä»¥åˆ›é€ æ¯”ç‰¹å¸ï¼Œåˆ›é€ æ•°åäº¿ç¾å…ƒçš„ä»·å€¼ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä¸€ä¸ªå·¥ç¨‹å¸ˆä¸€ç›´åœ¨é”™è¯¯çš„æ–¹å‘ä¸‹åŠŸå¤«ï¼Œæˆ–è€…åšå¾—ä¸å¤Ÿå¥½ã€ä¸å¤Ÿæœ‰åˆ›æ„ã€æ·±æ€ç†Ÿè™‘ç­‰ç­‰ã€‚å°±ç®—ä»–è¾›å‹¤å·¥ä½œæ•´æ•´ä¸€å¹´ï¼Œä»–ä»¬å‘å¸ƒçš„æ¯ä¸€æ®µä»£ç æœ€ç»ˆéƒ½ä¸ä¼šè¢«ä½¿ç”¨ï¼Œä»–éƒ½ä¸ä¼šæœ‰ç”¨æˆ·ã€‚è¿™æ˜¯ä¸€ä¸ªæŠ•å…¥å’Œäº§å‡ºé«˜åº¦åˆ†ç¦»çš„è¡Œä¸šçš„ä¾‹å­ï¼Œå®ƒä¸æ˜¯ä»¥ä½ æŠ•å…¥çš„æ—¶é—´å¤šå°‘æ¥è¡¡é‡äº§å‡ºçš„ã€‚</p>
<p>å†ä¸¾ä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼Œå‡è®¾ä½ æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„ä¼æœ¨å·¥äººï¼Œå¦‚æœä½ ä¸ç”¨å·¥å…·ï¼Œæˆ–ç”¨æœ€ç®€å•çš„å·¥å…·ï¼ˆæ¯”å¦‚ä¸€æŠŠæ–§å­æˆ–è€…ä¸€æŠŠé”¯å­ï¼‰ä¼æœ¨ï¼Œä½ ä¹Ÿåªä¼šæ¯”æœ€å·®çš„ä¼æœ¨å·¥äººå¼ºä¸‰å€ï¼Œå› ä¸ºæŠ•å…¥å’Œäº§å‡ºæ˜¯æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§çš„ï¼Œä¸ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</p>
<p>å› æ­¤ï¼Œä½ è¦å¯»æ‰¾æŠ•å…¥å’Œäº§å‡ºé«˜åº¦ä¸ç›¸å…³çš„èŒä¸šã€‚è¿™æ˜¯å¦ä¸€ç§å¯ä»¥äº§ç”Ÿæ æ†æ•ˆåº”çš„æ–¹å¼ã€‚æˆ‘è¯´çš„æ æ†å¹¶ä¸æ˜¯æŒ‡åå°”è¡—è®²çš„é‡‘èæ æ†ï¼Œè¿™ä¸ªâ€œæ æ†â€åå£°ä¸å¥½ã€‚æˆ‘è¯´çš„æ æ†æ˜¯æŒ‡å·¥å…·ï¼Œäººç±»æ“…é•¿ä½¿ç”¨çš„å·¥å…·ã€‚è®¡ç®—æœºæ˜¯è½¯ä»¶å·¥ç¨‹å¸ˆä½¿ç”¨çš„å·¥å…·ã€‚å¯¹äºä¸€ä¸ªä¼æœ¨å·¥äººï¼Œå¦‚æœæœ‰æ¨åœŸæœºã€è‡ªåŠ¨æœºæ¢°è½´å’Œé”¯å­ï¼Œä»–å°±ä¼šä½¿ç”¨è¿™äº›å·¥å…·ï¼Œæ¯”é‚£äº›å¾’æ‰‹æƒ³è¦æŠŠæ ‘è¿æ ¹æ‹”èµ·çš„äººæ›´æœ‰å½±å“åŠ›ã€‚</p>
<p>å·¥å…·å’Œæ æ†æ˜¯é€ æˆæŠ•å…¥å’Œäº§å‡ºä¹‹é—´ä¸åŒ¹é…çš„åŸå› ã€‚ä¸€ä¸ªèŒä¸šçš„åˆ›é€ åŠ›æˆåˆ†è¶Šé«˜ï¼Œå®ƒå°±è¶Šæœ‰å¯èƒ½æœ‰ä¸åŒ¹é…çš„æŠ•å…¥å’Œäº§å‡ºã€‚å› æ­¤ï¼Œæˆ‘è®¤ä¸ºï¼Œå¦‚æœä½ è€ƒè™‘ä»äº‹æŠ•å…¥å’Œäº§å‡ºé«˜åº¦ç›¸å…³çš„èŒä¸šï¼Œé‚£åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å¾ˆéš¾ç»™ç¤¾ä¼šåˆ›é€ è´¢å¯Œï¼Œä¹Ÿå¾ˆéš¾ä¸ºè‡ªå·±åˆ›é€ è´¢å¯Œã€‚</p>
<h2>ç¬¬ä¸ƒæ¡ï¼šæˆ‘ä»¬åº”è¯¥å‡çº§è‡ªå·±çš„è‡ªç”±ï¼Œè€Œä¸æ˜¯ç”Ÿæ´»æ–¹å¼</h2>
<p><strong>ç”Ÿæ´»æ°´å¹³è¿œä½äºå…¶æ”¶å…¥æ°´å¹³çš„äººä»¬äº«å—ç€ä¸€ç§è‡ªç”±ï¼Œè¿™ç§è‡ªç”±æ˜¯é‚£äº›å¿™äºæ”¹å–„ç”Ÿæ´»æ–¹å¼çš„äººä»¬æ— æ³•ç†è§£çš„</strong>
Niviï¼šé™¤äº†æŠŠæ—¶é—´ç§Ÿå‡ºå»ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–æ— åŠ©äºè‡´å¯Œçš„äº‹æƒ…å—?</p>
<p>Navalï¼šæœ‰ï¼Œæˆ‘ä¹‹å‰æåˆ°è¿‡ä¸¤æ¡ç›¸å…³çš„æ¨æ–‡ã€‚æˆ‘è¯´çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä½ çš„ç”Ÿæ´»æ–¹å¼åº”è¯¥å‡çº§ï¼Œä½†ä¸åº”è¯¥å‡çº§å¾—å¤ªå¿«ã€‚è¿™å¥è¯çš„å¤§æ„æ˜¯è¯´ï¼Œ<strong>ç”Ÿæ´»æ°´å¹³è¿œè¿œä½äºå…¶æ”¶å…¥æ°´å¹³çš„äººäº«å—ç€ä¸€ç§è‡ªç”±</strong>ï¼Œè€Œé‚£äº›å¿™äºæå‡ç”Ÿæ´»æ–¹å¼çš„äººæ ¹æœ¬æ— æ³•ä½“ä¼šè¿™ç§è‡ªç”±ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯éå¸¸é‡è¦çš„ï¼Œä¸è¦æ€»æ˜¯å¿™äºå‡çº§ä½ çš„ç”Ÿæ´»æ°´å¹³ã€‚äº‹å®ä¸Šï¼Œå¦‚æœä½ èƒ½åœ¨èµšè¶Šæ¥è¶Šå¤šçš„é’±æ—¶ï¼Œä¿æŒç¨³å®šçš„ç”Ÿæ´»æ°´å¹³å’ŒæœŸæœ›ï¼Œå°±ä¸ä¼šæœ‰å¤ªå¤šçƒ¦æ¼ã€‚æ‰€ä»¥ï¼Œä¸è¦æ€»æƒ³ç€ä½æ›´å¤§çš„æˆ¿å­ï¼Œè¿‡æ›´å¥¢ä¾ˆçš„ç”Ÿæ´»ï¼Œä»¥åŠæ‰€æœ‰ç±»ä¼¼çš„è´ªå¿ƒã€‚</p>
<h3>ä¸–ç•Œä¸Šæœ€å±é™©çš„ä¸œè¥¿æ˜¯æµ·æ´›å› å’Œæœˆè–ª</h3>
<p>å‡è®¾ä½ ç°åœ¨çš„å·¥èµ„æ˜¯æ¯å°æ—¶1000ç¾å…ƒï¼Œä½ è‚¯å®šä¸æ˜¯ä»20ç¾å…ƒæ¯å°æ—¶çš„æœˆè–ªç«‹é©¬æ¶¨åˆ°1000ç¾å…ƒï¼Œè¿™ä¸€å®šæ˜¯ä¸ªæ¼«é•¿èŒä¸šç”Ÿæ¶¯çš„ç§¯ç´¯è¿‡ç¨‹ã€‚è¿™é‡Œé¢ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜æ˜¯ï¼Œä½ çš„ç”Ÿæ´»æ°´å¹³ä¼šéšç€ä½ èµšçš„é’±è¶Šæ¥è¶Šå¤šè€Œå‡çº§ã€‚ä½ ä¼šæƒ³å½“ç„¶çš„è®¤ä¸ºè‡ªå·±èµšäº†é’±ï¼Œå°±è¯¥é©¬ä¸Šå»æå‡ç”Ÿæ´»æ°´å¹³ï¼Œä½†è¿™ä¼šä½¿ä½ æ·±é™·åœ¨å·¥èµ„å¥´éš¶çš„é™·é˜±é‡Œã€‚æˆ‘å¿˜äº†æ˜¯è°ï¼Œå¯èƒ½æ˜¯çº³è¥¿å§†Â·å¡”å‹’å¸ƒè¯´çš„ï¼Œâ€œ<strong>ä¸–ç•Œä¸Šæœ€å±é™©çš„ä¸œè¥¿æ˜¯æµ·æ´›å› å’Œæœˆè–ªã€‚</strong>â€æ²¡é”™ï¼Œå› ä¸ºå®ƒä»¬å¾ˆå®¹æ˜“ä¸Šç˜¾ã€‚ä½ æƒ³è¦å˜å¾—å¯Œæœ‰çš„æ–¹å¼æ°æ°æ˜¯ä½ æƒ³è¦å˜ç©·ï¼Œé‚£æ—¶ä½ èƒ½åšï¼ˆæƒ³åšï¼‰çš„äº‹æƒ…åªæœ‰å·¥ä½œï¼Œå·¥ä½œï¼Œå†å·¥ä½œã€‚</p>
<h3>ç†æƒ³çš„æƒ…å†µæ˜¯ï¼Œä½ çš„èµšé’±è·¯å¾„æ˜¯ç¦»æ•£çš„</h3>
<p>è¿™å°±æ˜¯ç§‘æŠ€äº§ä¸šçš„è¿ä½œæ–¹å¼ã€‚ä½ åå¹´æ²¡èµšåˆ°é’±ï¼Œç„¶åçªç„¶åœ¨ç¬¬11å¹´ï¼Œä½ ä¼šèµšå¾—ç›†æ»¡é’µç›ˆã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›æ‰€è°“çš„å¯Œäººçš„é«˜è¾¹é™…ç¨ç‡æ˜¯æœ‰ç¼ºé™·çš„ï¼Œå› ä¸ºé£é™©æœ€é«˜ï¼Œæœ€å…·åˆ›é€ åŠ›çš„èŒä¸šä¸€å®šæ˜¯ï¼Œå‰åå¹´éƒ½åœ¨èµ”é’±ã€‚åœ¨å†’ç€å·¨å¤§çš„é£é™©æ—¶ï¼Œä½ ä¼šä¸åœçš„æµè¡€ï¼Œæµè¡€ï¼Œå†æµè¡€ã€‚ç„¶ååœ¨ç¬¬11å¹´ï¼Œæˆ–ç¬¬15å¹´ï¼Œä½ å¯èƒ½çªç„¶èµšåˆ°ä¸€å¤§ç¬”é’±ã€‚æ­¤æ—¶å±±å§†å¤§å”ï¼ˆè¿™é‡ŒæŒ‡æ”¿åºœï¼‰å‡ºç°äº†ï¼Œè¯´ï¼šâ€œå˜¿ï¼Œä½ çŸ¥é“å—ï¼Œä½ ä»Šå¹´èµšäº†å¾ˆå¤šé’±ã€‚å› æ­¤ï¼Œä½ æ˜¯é‚ªæ¶çš„ï¼Œä½ å¿…é¡»æŠŠä¸€åˆ‡éƒ½äº¤ç»™æˆ‘ä»¬ã€‚â€å› æ­¤ï¼Œå®ƒåªæ˜¯æ‘§æ¯äº†é‚£äº›åˆ›é€ æ€§çš„å†’é™©èŒä¸šã€‚ä½†ç†æƒ³çš„æƒ…å†µæ˜¯ï¼Œä½ çš„è‡´å¯Œè·¯å¾„æ˜¯ç¦»æ•£çš„ï¼Œå¾ªåºæ¸è¿›çš„ã€‚è¿™æ ·ä½ ä¸ä¼šæœŸå¾…ä½ çš„ç”Ÿæ´»æ°´å¹³æ›´æ–°çš„é‚£ä¹ˆå¿«ã€‚ä¸€æ—¦ä½ è‡´å¯Œä¹‹åï¼Œä½ è¿˜ä¼šé€‰æ‹©å·¥ä½œï¼Œä½†ä½ åªä¼šåœ¨ä½ æƒ³åšçš„æ—¶å€™åšä½ æƒ³åšçš„äº‹ï¼Œè¿™æ‰æ˜¯çœŸæ­£çš„è‡ªç”±ã€‚å› æ­¤ï¼Œä½ ä¼šåšæ›´å¤šåˆ›é€ æ€§çš„äº‹æƒ…ï¼Œè€Œå‡å°‘å¯¹é’±ï¼Œå¯¹å¥¢ä¾ˆç”Ÿæ´»çš„å…³æ³¨ã€‚</p>
<h2>ç¬¬å…«æ¡ï¼šç»™ç¤¾ä¼šæä¾›å®ƒä¸çŸ¥é“å¦‚ä½•è·å¾—çš„ä¸œè¥¿</h2>
<p><strong>ç¤¾ä¼šä¼šå› ä¸ºä½ åˆ›é€ äº†å®ƒæƒ³è¦ã€å´ä¸çŸ¥é“å¦‚ä½•å¤§è§„æ¨¡è·å–çš„ä¸œè¥¿ï¼Œè€Œç»™ä½ ä¸°åšçš„å›æŠ¥</strong></p>
<h3>ç»™ç¤¾ä¼šå®ƒéœ€è¦çš„ï¼Œä½†ä¸çŸ¥é“å¦‚ä½•è§„æ¨¡åŒ–è·å–çš„ä¸œè¥¿</h3>
<p>Niviï¼šä½ ä¸ä¼šå› ä¸ºå‡ºç§Ÿæ—¶é—´è€Œå‘è´¢çš„ã€‚ä½†ä½ è¯´ï¼Œâ€œä½ ä¼šé€šè¿‡ç»™ç¤¾ä¼šå®ƒæƒ³è¦ï¼Œä½†ä¸çŸ¥é“å¦‚ä½•è§„æ¨¡åŒ–è·å–çš„ä¸œè¥¿è€Œè‡´å¯Œã€‚â€</p>
<p>Navalï¼šæ²¡é”™ã€‚æ‰€ä»¥æœ¬è´¨ä¸Šï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰è¯´çš„ï¼Œé’±æ˜¯ç¤¾ä¼šç»™ä½ çš„æ¬ æ¡ï¼Œä½ åœ¨è¿‡å»åšäº†ä¸€äº›å¥½äº‹ï¼Œç¤¾ä¼šä¼šä¸ºä½ åˆ›é€ å®ƒæƒ³è¦çš„ä¸œè¥¿è€Œä»˜é’±ã€‚ä½†ç¤¾ä¼šè¿˜ä¸çŸ¥é“å¦‚ä½•åˆ›é€ è¿™äº›ä¸œè¥¿ï¼Œå› ä¸ºå¦‚æœå·²ç»è¢«åˆ›é€ äº†ï¼Œä»–ä»¬å°±ä¸éœ€è¦ä½ äº†ã€‚
å‡ ä¹æ‰€æœ‰åœ¨ä½ å®¶é‡Œã€å·¥ä½œåœºæ‰€å’Œè¡—é“ä¸Šçš„ä¸œè¥¿æ›¾ç»éƒ½æ˜¯ç§‘æŠ€äº§å“ã€‚æœ‰ä¸€æ®µæ—¶é—´çŸ³æ²¹æ˜¯ä¸€ç§ç§‘æŠ€äº§å“ï¼Œè¿™è®©æ´›å…‹è²å‹’å¾ˆå¯Œæœ‰ï¼›æœ‰æ®µæ—¶é—´æ±½è½¦æ˜¯ç§‘æŠ€äº§å“ï¼Œè¿™ä½¿äº¨åˆ©Â·ç¦ç‰¹å¯Œæœ‰ã€‚å› æ­¤ï¼Œæ­£å¦‚ä¸¹å°¼â€¢å¸Œåˆ©æ–¯(Danny Hillis)æ‰€è¯´ï¼ŒæŠ€æœ¯åªæ˜¯ä¸€å¥—è¿˜ä¸å¤ªç®¡ç”¨çš„ä¸œè¥¿ã€‚ä¸€æ—¦æŸæ ·ä¸œè¥¿æˆåŠŸäº†ï¼Œå®ƒå°±ä¸å†æ˜¯æŠ€æœ¯äº†ã€‚æ‰€ä»¥ï¼Œç¤¾ä¼šæ€»æ˜¯æƒ³è¦æ–°äº‹ç‰©ã€‚</p>
<h3>æƒ³æ¸…æ¥šä½ èƒ½æä¾›çš„äº§å“ï¼Œç„¶åè€ƒè™‘å¦‚ä½•æ‰©å¤§è§„æ¨¡</h3>
<p>å¦‚æœä½ æƒ³è¦å˜å¾—å¯Œæœ‰ï¼Œå¼„æ¸…æ¥šä½ å¯ä»¥ä¸ºç¤¾ä¼šæä¾›å“ªäº›å®ƒæƒ³è¦ã€ä½†è¿˜ä¸çŸ¥é“å¦‚ä½•è·å–çš„ä¸œè¥¿ã€‚å¹¶ä¸”æ˜¯ä½ æ„Ÿå…´è¶£ã€åœ¨ä½ çš„èƒ½åŠ›èŒƒå›´å†…èƒ½æä¾›çš„ä¸œè¥¿ã€‚æƒ³æ¸…æ¥šä¹‹åï¼Œä¸‹ä¸€æ­¥ä½ è¦è€ƒè™‘å¦‚ä½•è§„æ¨¡åŒ–ã€‚å› ä¸ºå¦‚æœä½ åªé€ ä¸€ä¸ªï¼Œé‚£æ˜¯ä¸å¤Ÿçš„ã€‚ä½ å¿…é¡»å»ºé€ æˆåƒä¸Šä¸‡ä¸ªï¼Œä¸Šç™¾ä¸‡ä¸ªï¼Œç”šè‡³æ•°åäº¿ä¸ªã€‚æœ€å¥½çš„æƒ…å†µæ˜¯ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥æœ‰ä¸€ä¸ªã€‚å²è’‚å¤«Â·ä¹”å¸ƒæ–¯å’Œä»–çš„å›¢é˜Ÿå½“ç„¶çŸ¥é“ç¤¾ä¼šéœ€è¦æ™ºèƒ½æ‰‹æœºã€‚ä»–ä»¬å£è¢‹é‡Œçš„ç”µè„‘æ‹¥æœ‰æ‰€æœ‰ç”µè¯åŠŸèƒ½çš„100å€ï¼Œè€Œä¸”ä½¿ç”¨æ–¹ä¾¿ã€‚æ‰€ä»¥ï¼Œä»–ä»¬æƒ³å‡ºäº†å¦‚ä½•å»ºé€ å®ƒï¼Œç„¶åä»–ä»¬æƒ³å‡ºäº†å¦‚ä½•æ‰©å±•å®ƒã€‚ä»–ä»¬æƒ³å‡ºäº†å¦‚ä½•è®©æ¯ä¸ªç¬¬ä¸€ä¸–ç•Œå›½å®¶çš„å…¬æ°‘ï¼Œæœ€ç»ˆä¹Ÿè®©æ¯ä¸ªç¬¬ä¸‰ä¸–ç•Œå›½å®¶çš„å…¬æ°‘ï¼Œéƒ½èƒ½æ‹¥æœ‰ä¸€ä¸ªã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œä»–ä»¬è·å¾—äº†ä¸°åšçš„å›æŠ¥ï¼Œè‹¹æœæ˜¯ä¸–ç•Œä¸Šæœ€æœ‰ä»·å€¼çš„å…¬å¸ã€‚</p>
<p>Niviï¼šæˆ‘æƒ³è¯´çš„æ˜¯ï¼Œä¼ä¸šå®¶çš„å·¥ä½œæ˜¯ä¸ºå¤§ä¼—å¸‚åœºå¸¦æ¥é«˜ç«¯äº§å“ã€‚</p>
<p>Navalï¼šå®ƒä»¥é«˜ç«¯å¼€å§‹ã€‚é¦–å…ˆï¼Œè¿™æ˜¯ä¸€ç§åˆ›é€ æ€§çš„è¡Œä¸ºï¼Œ<strong>ä½ åˆ›é€ å®ƒåªæ˜¯å› ä¸ºä½ æƒ³è¦å®ƒ</strong>ã€‚ä½ æƒ³è¦å®ƒï¼Œéœ€è¦å®ƒï¼Œæ‰€ä»¥ä½ çŸ¥é“å¦‚ä½•å»ºé€ å®ƒã€‚å…¶å®ä¸€å¼€å§‹<strong>ä½ æ˜¯ä¸ºè‡ªå·±å»ºé€ å®ƒ</strong>ã€‚ç„¶åä½ è¦æƒ³åŠæ³•æŠŠå®ƒå¸¦ç»™å…¶ä»–äººã€‚ç„¶åæœ‰ä¸€æ®µæ—¶é—´ï¼Œå¯Œäººæ‹¥æœ‰å®ƒã€‚æ¯”å¦‚ï¼Œå¯Œäººæœ‰ç§äººå¸æœºï¼Œä»–ä»¬æœ‰é»‘è‰²é«˜æ¡£æ±½è½¦ã€‚ç„¶åä¼˜æ­¥ï¼ˆUberï¼‰å‡ºç°äº†ï¼Œå®ƒè®©æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç§äººå¸æœºã€‚ç°åœ¨ä½ ç”šè‡³å¯ä»¥çœ‹åˆ°Uber poolæ­£åœ¨å–ä»£ç©¿æ¢­å·´å£«ï¼Œå› ä¸ºå®ƒæ›´æ–¹ä¾¿ã€‚ç„¶åscooterå…±äº«ç”µåŠ¨æ»‘æ¿è½¦å‡ºç°äº†ï¼Œå¸‚åœºè¿›ä¸€æ­¥ä¸‹æ²‰ã€‚æ‰€ä»¥è§„æ¨¡åŒ–éœ€è¦è€ƒè™‘çš„æ˜¯ï¼Œ<strong>å¦‚ä½•æŠŠæ›¾ç»åªæ˜¯å¯Œäººæ‹¥æœ‰çš„ä¸œè¥¿ç»™åˆ°ç»™æ¯ä¸ªäºº</strong>ã€‚</p>
<h2>ç¬¬ä¹æ¡ï¼šäº’è”ç½‘æå¤§åœ°ä¸°å¯Œäº†èŒä¸šå‘å±•çš„å¯èƒ½æ€§</h2>
<p><strong>äº’è”ç½‘ä¼šç»™ä½ çš„å°ä¼—å…´è¶£æ‰¾åˆ°ä¹°å•çš„äºº</strong></p>
<h3>äº’è”ç½‘æå¤§æ‰©å±•äº†èŒä¸šå‘å±•çš„å¯èƒ½æ€§</h3>
<p>Niviï¼šè®©æˆ‘ä»¬çœ‹çœ‹ä¸‹ä¸€æ¡æ¨æ–‡ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘è§‰å¾—å¯¹äºä½ å°†ä»äº‹ä»€ä¹ˆå·¥ä½œæˆ–è€…èŒä¸šéå¸¸éšç§˜å’Œè¶…çº§æœ‰è¶£çš„æ¨æ–‡ã€‚ä½ è¯´ï¼šâ€œäº’è”ç½‘æå¤§æ‹“å®½äº†èŒä¸šå‘å±•çš„å¯èƒ½æ€§ï¼Œä½†æ˜¯å¤§å¤šæ•°äººç›®å‰å¹¶æ²¡æœ‰å¯Ÿè§‰åˆ°ã€‚â€</p>
<p>Navalï¼šäº’è”ç½‘æœ€æ ¹æœ¬çš„é¢ è¦†æ€§æ˜¯ï¼Œå®ƒä½¿è¿™ä¸ªæ˜Ÿçƒä¸Šçš„äººä»¬èƒ½å½¼æ­¤è”ç³»ï¼Œä»»ä½•ä¸€ä¸ªäººåªè¦ä½ æƒ³è”ç³»æ€»æœ‰æ–¹æ³•ã€‚ä¸è®ºæ˜¯ç»™ä»–ä»¬å‘é‚®ä»¶ï¼Œåœ¨Twitterä¸Šå‘é€æ¨æ–‡ï¼Œè¿˜æ˜¯åœ¨Facebookä¸Šå‘å¸ƒä¸€ç‚¹ä»–ä»¬èƒ½çœ‹åˆ°çš„åŠ¨æ€ï¼Œæˆ–è€…å»ºç«‹ä¸€ä¸ªä»–ä»¬èƒ½æ¥è®¿é—®çš„ç½‘ç«™ã€‚äº’è”ç½‘å°†æ¯ä¸€ä¸ªäººéƒ½è”ç³»åœ¨äº†ä¸€èµ·ã€‚å› æ­¤äº’è”ç½‘æ˜¯ä¸€ä¸ªå°†å„ä¸ªç½‘ç»œè¿æ¥èµ·æ¥çš„å·¥å…·ï¼Œè¿™å°±æ˜¯å®ƒçš„è¶…èƒ½åŠ›ã€‚å› æ­¤ï¼Œå·¥å…·ç»™ä½ äº†ï¼Œä½ è¦æ€è€ƒæ€ä¹ˆå»æ›´å¥½çš„åˆ©ç”¨å®ƒã€‚ä½ è¦æ˜ç™½ï¼Œå€ŸåŠ©äº’è”ç½‘ï¼Œä½ å°±æ€»èƒ½ä¸ºä½ çš„äº§å“ã€ä½ çš„æ‰èƒ½ã€ä½ çš„æŠ€è‰ºæ‰¾åˆ°è§‚ä¼—ï¼Œä¸è®ºä»–ä»¬æ¥è‡ªå“ªé‡Œã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼ŒNenadåˆ¶ä½œäº†IIIacertusï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ æ˜¯åœ¨äº’è”ç½‘å‡ºç°ä¹‹å‰çœ‹åˆ°çš„ä»–çš„è§†é¢‘ï¼Œé‚£ä¹ˆä»–éœ€è¦æ€ä¹ˆåšæ‰èƒ½è®©ä½ çœ‹åˆ°å‘¢ï¼Ÿä»–å¯èƒ½æŠ±ç€ç”µè„‘æŒ¨å®¶æŒ¨æˆ·å±•ç¤ºç»™ä»–çš„é‚»å±…ä»¬çœ‹ï¼Ÿæˆ–è€…è·‘åˆ°å½“åœ°çš„ç”µå½±é™¢æ’­æ”¾ï¼Ÿè¿™éƒ½æ˜¯ä¸å¯èƒ½çš„ï¼Œä»–åªæœ‰æŠŠè§†é¢‘æ”¾åˆ°äº’è”ç½‘ä¸Šæ‰èƒ½è¾¾åˆ°è¿™ä¸ªæ•ˆæœã€‚ç„¶ååœ¨è¿™ä¸ªä¸–ç•Œä¸Šåˆæœ‰å¤šå°‘äººå¯¹å®ƒçœŸæ­£çš„æ„Ÿå…´è¶£å‘¢ï¼Ÿæˆ–è€…åªæ˜¯å¯¹æˆ‘ä»¬æ­£åœ¨è®¨è®ºçš„ä¸œè¥¿æ„Ÿå…´è¶£ï¼ŒçœŸæ­£çš„å¸æ”¶ï¼Ÿç»“æœä¼šå‘ç°åªæœ‰å¾ˆå°‘ä¸€éƒ¨åˆ†äººï¼Œæ‰€ä»¥å…³é”®å°±åœ¨èƒ½è§¦åŠ¨<strong>è¿™äº›äºº</strong>ã€‚</p>
<h3>äº’è”ç½‘èƒ½è®©ä½ çš„å°ä¼—å…´è¶£æ‰¾åˆ°è§‚ä¼—</h3>
<p>äº’è”ç½‘æœ€æ€ªå¼‚çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒå…è®¸å„ç§å°ä¼—å…´è¶£å­˜åœ¨ã€‚è¿™å°±å¥½åƒå…»è›‡çš„äººã€å–œæ¬¢åçƒ­æ°”çƒçš„äººã€å–œæ¬¢ä¸€äººç‹¬å¶å­¤èˆŸèˆªæ¸¸ä¸–ç•Œçš„äººï¼Œäº¦æˆ–æ˜¯ç—´è¿·äºå¾®å‹çƒ¹é¥ªçš„äººã€‚å°±åƒæ•´ä¸ªæ—¥æœ¬çš„å¾®å‹çƒ¹é¥ªç°è±¡ä¸€æ ·ï¼ˆå“ˆå“ˆä»Šå¤©åˆšåˆšçœ‹äº†ä¸€æœ¬æ—¥æœ¬çƒ¹é¥ªä¹¦å«é¸¡è›‹æ–™ç†ï¼‰ï¼Œæˆ–è€…åƒæœ‰ä¸€ä¸ªèŠ‚ç›®æ˜¯å…³äºå¥³äººå¸®äººæ”¶æ‹¾å®¶åŠ¡çš„èŠ‚ç›®ï¼Œå¯¹å§ï¼Ÿ</p>
<p>å› æ­¤ï¼Œæ— è®ºä½ æ‹¥æœ‰å¤šä¹ˆå°ä¼—åŒ–çš„å…´è¶£ï¼Œäº’è”ç½‘éƒ½èƒ½æä¾›ç»™ä½ ä¸€ä¸ªå¾ˆå¥½çš„å¹³å°å»æŠŠå®ƒè§„æ¨¡åŒ–ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿä¸æ˜¯è¯´ä½ æ‰€åšçš„å°±æ˜¯ä¸‹ä¸€ä¸ªFacebookï¼Œæˆ–è€…ä½ èƒ½è·å¾—æ•°ä»¥åäº¿è®¡çš„ç”¨æˆ·ï¼Œä½†æ˜¯ï¼Œå¦‚æœä½ ä»…ä»…æƒ³æ‰¾åˆ°5ä¸‡ä¸ªå’Œä½ ä¸€æ ·æ»¡æ€€çƒ­æƒ…çš„äººï¼Œäº’è”ç½‘ä¸­å°±æœ‰è¿™æ ·ä¸€ç¾¤è§‚ä¼—ç­‰å¾…ç€ä½ ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜çš„ç»å¦™ä¹‹å¤„å°±åœ¨äºï¼Œæˆ‘ä»¬ç”Ÿæ´»çš„æ˜Ÿçƒä¸Šæœ‰70äº¿çš„äººã€‚äººç±»DNAçš„ç»„åˆæ–¹å¼è¾¾åˆ°äº†éš¾ä»¥æƒ³åƒçš„ç¨‹åº¦ã€‚æ¯ä¸ªäººéƒ½æ˜¯ä¸€ä¸ªå®Œå…¨ä¸åŒçš„ä¸ªä½“ï¼Œä½ ä¸å¯èƒ½é‡åˆ°å¦ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„ä½ ã€‚</p>
<p>è¿™ä¸åƒä½ å¯ä»¥è¯´ï¼Œâ€œæ©...ï¼ŒNiviï¼Œç¦»å¼€æˆ‘çš„ç”Ÿæ´»å§ã€‚è¿™æ ·æˆ‘å¯ä»¥è®©Navalè¿›å…¥æˆ‘çš„ç”Ÿå‘½ä¸­ï¼Œæˆ‘å°±å¯ä»¥æœ‰å’Œä»–åŒæ ·çš„æ„Ÿå—ï¼Œå¾—åˆ°åŒæ ·çš„èµè®¸ï¼Œæœ‰åŒæ ·çš„æƒ³æ³•ã€‚â€ä½†äº‹å®ä¸æ˜¯è¿™æ ·çš„ï¼Œä»»ä½•äººä¸æ˜¯åˆ«äººçš„æ›¿ä»£å“ï¼Œäººä¸äººå®Œå…¨ä¸åŒçš„ã€‚å› æ­¤ï¼Œæ­£æ˜¯å› ä¸ºæ¯ä¸ªäººæœ‰ä¸åŒçš„æŠ€èƒ½ã€å…´è¶£ï¼Œæ‰å¯ä»¥åœ¨è‡ªå·±ç‹¬ç‰¹çš„äº‹ç‰©ä¸Šå‘æŒ¥åˆ›é€ åŠ›ã€‚</p>
<p>ä½†æ˜¯ï¼ˆåœ¨äº’è”ç½‘ï¼‰ä¹‹å‰è¿™äº›å¹¶ä¸é‡è¦ï¼Œåœ¨å‰äº’è”ç½‘æ—¶ä»£ï¼Œå¦‚æœä½ ä½åœ¨æ„å¤§åˆ©çš„ä¸€ä¸ªå°æ¸”æ‘ï¼Œä½ çš„æ¸”æ‘å¹¶ä¸ä¸€å®šéœ€è¦å®Œå…¨ç‹¬ç‰¹çš„æŠ€èƒ½ï¼Œé‚£ä¹ˆä½ å°±å¿…é¡»éµä»ç°å®ï¼Œä»äº‹ä»…æœ‰çš„å·¥ä½œã€‚ä½†æ˜¯ä»Šå¤©ï¼Œä½ å¯ä»¥å˜å¾—å®Œå…¨ç‹¬ç‰¹å’Œç‹¬ç«‹ã€‚</p>
<p>äº’è”ç½‘å¯ä»¥è®©ä½ ä½æˆæœ¬çš„ã€Œèµ°å‡ºå»ã€ï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„è§‚ä¼—ã€‚ç„¶åä½ é€šè¿‡åˆ›å»ºä¸šåŠ¡ã€åˆ›é€ äº§å“ã€ç§¯ç´¯è´¢å¯Œï¼Œä½ é€šè¿‡åœ¨äº’è”ç½‘ä¸Šå±•ç°ç‹¬ç‰¹çš„ä½ è®©å¤§ä¼—è·å¾—å¿«ä¹ã€‚ä½ äº‹ä¸šçš„å‘å±•ç©ºé—´å°±ä¼šå› äº’è”ç½‘è€Œæ‰©å¤§ï¼Œç”µå­ç«æŠ€ç©å®¶ï¼Œåœ¨Fortniteä¸Šèµšäº†æ•°ç™¾ä¸‡ç¾å…ƒã€‚YouTubeå¹¿æ’­å…¬å¸ã€ åšå®¢ã€æ’­å®¢ï¼Œè®©äººä»¬èƒ½å¤Ÿåˆ›å»ºå†…å®¹å’Œä¸Šä¼ è§†é¢‘ã€‚æˆ‘å¬è¯´ä¹”Â·ç½—æ ¹ï¼ˆJoe Roganï¼‰ï¼Œä»–çš„æ’­å®¢æœ‰20äº¿æ¬¡ä¸‹è½½ï¼Œè¿™ä¸ºä»–æ¯å¹´å¸¦æ¥çº¦1äº¿ç¾å…ƒçš„æ”¶å…¥ã€‚</p>
<p>å†ä¸¾ä¸€ä¸ªPewDiePieçš„ä¾‹å­ï¼Œå‰å‡ å¤©ï¼Œæˆ‘è½¬å‘äº†ä¸€æ¡æœ‰è¶£çš„æ¨æ–‡ã€‚PewDiePieåœ¨æ–°é—»åª’ä½“ä¸­ç®€ç›´å°±æ˜¯ä¿¡ä»»çš„ä»£åè¯ã€‚è¿™ä¸ªæ¥è‡ªç‘å…¸çš„å°å­©ï¼Œä»–çš„çƒ­é—¨æ–°é—»é¢‘é“çš„æµé‡æ˜¯ä¸»æµæœ‰çº¿ç½‘ç»œæµé‡çš„ä¸‰å€ã€‚è€Œä¸”è¿™ä»…ä»…æ˜¯åœ¨ä»–çš„æ–°é—»é¢‘é“ä¸Šï¼Œ è¿˜ä¸ç®—ä»–çš„å¨±ä¹é¢‘é“ã€‚</p>
<p>å¯ä»¥è¯´äº’è”ç½‘ä¸ºå„ç§å°ä¼—å…´è¶£æä¾›äº†æ²ƒåœŸï¼Œä½†å‰ææ˜¯ä½ è¦æ“…äºå°†å…¶å£®å¤§å‘å±•èµ·æ¥ã€‚å½“ç„¶ï¼Œå¥½æ¶ˆæ¯å°±æ˜¯æ¯ä¸ªäººç”Ÿè€Œä¸åŒï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±æ“…é•¿çš„ä¸œè¥¿ã€‚æ‰€ä»¥è¦çœŸå®åšè‡ªå·±ã€‚</p>
<h3>é€šè¿‡åšè‡ªå·±æ¥è§„é¿æ— æ„ä¹‰çš„ç«äº‰</h3>
<p>è¿˜æœ‰ä¸€æ¡å€¼å¾—ä¸€æçš„æ¨æ–‡ï¼Œå®ƒæ²¡æœ‰è¢«æ”¶å½•åˆ°è¿™ä¸ªæ¨æ–‡é£æš´ä¸­ã€‚é‚£æ¡æ˜¯â€œé€šè¿‡åšè‡ªå·±æ¥è§„é¿æ— æ„ä¹‰çš„ç«äº‰â€ã€‚äº‹å®ä¸Šï¼Œå½“ä½ åœ¨ä¸äººç«äº‰æ—¶ï¼Œå¾€å¾€æ˜¯å› ä¸ºä½ åœ¨å¤åˆ¶åˆ«äººï¼Œå› ä¸ºä½ åœ¨åŠªåŠ›å¹²ç€åŒæ ·çš„äº‹æƒ…ã€‚ä½†æ˜¯å…¶å®æ¯ä¸ªäººç”Ÿè€Œä¸åŒï¼Œä¸è¦æ€»æ˜¯å¿™ç€å¤åˆ¶åˆ«äººã€‚</p>
<p>å¾ˆæ˜æ˜¾ï¼Œäººç±»å–œæ¬¢æ¨¡ä»¿ï¼ŒRenÃ© Girardæœ‰ä¸€å¥—å®Œæ•´çš„æ¨¡ä»¿ç†è®ºå¾ˆæœ‰è¶£ã€‚å¤§å®¶éƒ½è§‰å¾—æ¨¡ä»¿ç®€å•ï¼Œä½†å…¶å®æ¨¡ä»¿è¿œæ¯”ä½ åšè‡ªå·±è¦éš¾ã€‚æ‰€ä»¥ä¸è¦çº¯æ¨¡ä»¿ï¼Œä¸è¦çº¯å¤åˆ¶ï¼Œä¸“æ³¨äºåšè‡ªå·±çš„äº‹æƒ…ï¼Œå½“ä½ çœŸæ­£åœ¨åšè‡ªå·±æ—¶ï¼Œä½ å°±ä¼šå‘ç°æ²¡æœ‰äººèƒ½å’Œä½ ç«äº‰ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
<p>å› æ­¤ï¼Œä½ å¯¹ä½ è‡ªå·±æ˜¯è°å’Œä½ å–œæ¬¢åšä»€ä¹ˆè®¤è¯†çš„è¶Šæ·±å…¥ï¼Œä½ å°±ä¼šé¢ä¸´è¶Šå°‘çš„ç«äº‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ æ„è¯†åˆ°çœŸå®åšè‡ªå·±æ²¡äººèƒ½å’Œä½ ç«äº‰åï¼Œä½ å°±èƒ½å¤Ÿé€šè¿‡çœŸå®æ€§é€ƒç¦»ç«äº‰é™·é˜±ã€‚ä½†æ˜¯ï¼Œè¿™åœ¨å‰äº’è”ç½‘æ—¶ä»£æ˜¯æ²¡ç”¨çš„å»ºè®®ï¼Œè€Œåäº’è”ç½‘æ—¶ä»£ä½ èƒ½å°†è¿™äº›å˜æˆç°å®ã€‚</p>
<h2>ç¬¬åæ¡ï¼šå¯»æ‰¾è´¢å¯Œæ¸¸æˆä¸­çš„é•¿æœŸæˆ˜å‹</h2>
<p><em>é€‰æ‹©ä¸€ä¸ªä½ å¯ä»¥å’Œé•¿æœŸä¼™ä¼´ç©é•¿æœŸæ¸¸æˆçš„è¡Œä¸šï¼Œæ‰€æœ‰çš„å›æŠ¥éƒ½æ¥è‡ªäºå¤šæ¬¡æ¸¸æˆçš„å¤åˆ©ã€‚</em></p>
<h3>å¯»æ‰¾è´¢å¯Œæ¸¸æˆä¸­çš„é•¿æœŸæˆ˜å‹</h3>
<p>Niviï¼šæˆ‘ä»¬æ¥èŠèŠåº”è¯¥è€ƒè™‘åœ¨å“ªäº›è¡Œä¸šå·¥ä½œï¼Ÿåº”è¯¥åšä»€ä¹ˆæ ·çš„å·¥ä½œï¼Ÿæœ€å¥½å’Œä»€ä¹ˆæ ·çš„äººä¸€èµ·å·¥ä½œï¼Ÿè¿™äº›è¯é¢˜ã€‚ä½ è¯´è¿‡ï¼Œâ€œä½ åº”è¯¥é€‰æ‹©çš„è¡Œä¸šæ˜¯ï¼Œåœ¨è¿™é‡Œä½ æœ‰é•¿æœŸæˆ˜å‹å’Œä½ ç©é•¿æœŸçš„æ¸¸æˆã€‚â€</p>
<p>Navalï¼šæ˜¯çš„ï¼Œ<strong>è¿™æ˜¯è§£é‡Šä¸ºä»€ä¹ˆç¡…è°·ä¼šæˆåŠŸï¼Œä¹Ÿæ˜¯å¯¹é«˜ä¿¡ä»»åº¦ç¤¾ä¼šèƒ½å¤ŸæˆåŠŸçš„æ·±åˆ»ç†è§£</strong>ã€‚äº‹å®ä¸Šï¼Œç”Ÿæ´»ä¸­æ‰€æœ‰çš„æ”¶ç›Šéƒ½æ¥è‡ªäºå¤åˆ©ã€‚æ— è®ºæ˜¯åœ¨äººé™…å…³ç³»ä¸­ï¼Œåˆ›é€ è´¢å¯Œä¸­ï¼Œæˆ–æ˜¯åœ¨å­¦ä¹ ä¸­ã€‚å› æ­¤ï¼Œå¤åˆ©æ˜¯ä¸€ç§ç¥å¥‡çš„åŠ›é‡ï¼Œå¦‚æœä½ ä»¥1å€çš„ä»·æ ¼å¼€å§‹ï¼Œç„¶åå¦‚æœæ¯å¹´å¢é•¿20%ï¼Œå¹¶ä¸”æŒç»­30å¹´ï¼Œä½ å¾—åˆ°çš„ä¸åªæ˜¯é¢å¤–çš„30å¹´ä¹˜ä»¥20%ã€‚å®ƒæœ‰å¤åˆ©æ•ˆåº”ï¼Œæ‰€ä»¥å®ƒä¼šå¢é•¿ï¼Œå¢é•¿ï¼Œå¢é•¿ï¼Œæœ€åä½ å¾—åˆ°çš„å›æŠ¥å°†ä¼šä¸å¯æ€è®®ã€‚ä¸ç®¡æ˜¯å–„æ„ã€çˆ±æƒ…ã€äººé™…å…³ç³»è¿˜æ˜¯é‡‘é’±ã€‚æ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºå¤åˆ©æ˜¯ä¸€ç§éå¸¸é‡è¦çš„åŠ›é‡ã€‚</p>
<p>ä¸ºä»€ä¹ˆè‡´å¯Œæ˜¯ä¸€åœºæŒä¹…æˆ˜ï¼Ÿé•¿æœŸåšå¼ˆä¸ä»…å¯¹å¤åˆ©æœ‰åˆ©ï¼Œå¯¹ä¿¡ä»»ä¹Ÿæœ‰åˆ©ã€‚å¦‚æœä½ çœ‹ä¸€ä¸‹å›šå¾’å›°å¢ƒç±»å‹çš„æ¸¸æˆï¼Œå›šå¾’å›°å¢ƒçš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ä»¥ç‰™è¿˜ç‰™ï¼Œä¹Ÿå°±æ˜¯æˆ‘å°†å¯¹ä½ åšä½ ä¸Šæ¬¡å¯¹æˆ‘åšè¿‡çš„äº‹ï¼Œå¦‚æœä½ çŠ¯äº†é”™ï¼Œæˆ‘ä¼šåŸè°…ä½ ã€‚ä½†è¿™åªé€‚ç”¨äºé‡å¤çš„å›šå¾’å›°å¢ƒçš„ç¯å¢ƒä¸­ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬é‡å¤ç©ä¸€ä¸ªæ¸¸æˆå¤šæ¬¡ã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœä½ å¤„åœ¨è¿™æ ·ä¸€ç§æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä½ åœ¨ç¡…è°·ï¼Œäººä»¬åœ¨é‚£é‡Œäº’ç›¸åšç”Ÿæ„ã€‚ä»–ä»¬å½¼æ­¤äº†è§£ï¼Œç›¸äº’ä¿¡ä»»ï¼Œäº’ç›¸å¸®åŠ©ï¼Œå› ä¸ºä»–ä»¬çŸ¥é“è¿™ä¸ªäººä¼šåœ¨ä¸‹ä¸€åœºæ¯”èµ›çš„å›åˆä¸­å‡ºç°ï¼Œä½ è¿Ÿæ—©ä¼šé‡åˆ°è¿™äº›äººã€‚</p>
<p>å½“ç„¶ï¼Œè¿™å¹¶ä¸æ€»æ˜¯å¥æ•ˆã€‚ä¹Ÿæœ‰æƒ…å†µæ˜¯ï¼Œæœ‰çš„äººåœ¨ç¡…è°·ä¸€ä¸¾æˆåï¼Œèµšåˆ°å¾ˆå¤šé’±ï¼Œä½†äººä»¬ä¼šèƒŒå›å½¼æ­¤ï¼Œå› ä¸ºä»–ä»¬åªæ˜¯æƒ³ï¼Œâ€œæˆ‘è¦é è¿™ä¸ªå‘è´¢ï¼Œæˆ‘ä¸åœ¨ä¹ã€‚â€æ‰€ä»¥ï¼Œæ‰€æœ‰è¿™äº›æƒ…å†µéƒ½æœ‰ä¾‹å¤–ã€‚</p>
<p>ä½†æœ¬è´¨ä¸Šï¼Œå¦‚æœä½ æƒ³æˆåŠŸï¼Œä½ å¿…é¡»ä¸ä»–äººåˆä½œã€‚ä½ å¿…é¡»çŸ¥é“è°å¯ä»¥ä¿¡ä»»ï¼Œè°å¯ä»¥é•¿æœŸä¿¡ä»»ï¼Œå’Œä½ ä¸€èµ·åœ¨æ¸¸æˆä¸­èµ°ä¸‹å»ã€‚æ‰€ä»¥ã€Œå¤åˆ©æ•ˆåº”ã€å’Œã€Œé«˜åº¦ä¿¡ä»»çš„åœˆå­ã€å°±æ˜¯ä½ åœ¨æ¸¸æˆä¸­ç”Ÿå­˜çš„æ­¦å™¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åœ¨æ¸¸æˆçš„å‘¨æœŸç»“æŸæ—¶ï¼Œè®©ä½ è·åˆ©çš„ä¸»è¦åŸå› ã€‚ä¾‹å¦‚ï¼Œæ²ƒä¼¦å·´è²ç‰¹ä½œä¸ºç¾å›½è‚¡ç¥¨å¸‚åœºçš„æŠ•èµ„è€…åšå¾—éå¸¸å¥½ï¼Œä½†ä»–èƒ½åšåˆ°è¿™ä¸€ç‚¹çš„é‡è¦åŸå› æ˜¯å› ä¸ºç¾å›½è‚¡å¸‚ä¸€ç›´ä¿æŒç¨³å®šï¼Œå¹¶ä¸”æ²¡æœ‰ç¢°åˆ°ç¾å›½æ”¿åºœæ”¿å±€éå¸¸å·®çš„æ—¶æœŸï¼Œæˆ–è€…æ˜¯æˆ˜äº‰æ—¶æœŸã€‚æ€»ä¹‹åº•å±‚åŸºç¡€è®¾æ–½æ²¡æœ‰è¢«ç ´åã€‚å› æ­¤ï¼Œå¯¹äºä»–æ¥è¯´ï¼Œä»–æ­£åœ¨ç©ä¸€åœºé•¿æœŸæ¯”èµ›ã€‚è¿™ç§ä¿¡ä»»æ¥è‡ªäºç¾å›½è‚¡å¸‚çš„ç¨³å®šã€‚</p>
<h3>å½“ä½ è½¬è¡Œæ—¶ï¼Œä½ æ˜¯åœ¨ä»é›¶å¼€å§‹</h3>
<p>åœ¨ç¡…è°·ï¼Œä¿¡ä»»æ¥è‡ªäºå°èŒƒå›´å†…çš„äººé™…ç½‘ç»œï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œä½ ä¼šå‘ç°å“ªäº›äººæ˜¯ä½ å¯ä»¥åˆä½œçš„ï¼Œå“ªäº›äººæ˜¯ä½ ä¸èƒ½åˆä½œçš„ã€‚</p>
<p>å¦‚æœä½ ä¸åœåœ°æ›´æ¢åœ°ç‚¹ï¼Œä½ å°±ä¸åœåœ°æ›´æ¢å›¢é˜Ÿâ€¦â€¦å‡è®¾ä½ ä»æœ¨å·¥è¡Œä¸šèµ·æ­¥ï¼Œå¹¶åœ¨é‚£é‡Œå»ºç«‹äº†ä¸€ä¸ªç½‘ç»œã€‚ä½ åŠªåŠ›å·¥ä½œï¼Œä½ è¯•å›¾åœ¨æœ¨å·¥è¡Œä¸šåˆ¶é€ äº§å“ã€‚ç„¶åçªç„¶å‡ºç°äº†å¦ä¸€ä¸ªç›¸é‚»ä½†åˆä¸åŒçš„è¡Œä¸šï¼Œä½†ä½ çœŸçš„å¹¶ä¸äº†è§£å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªäººï¼Œä½ æƒ³è¦æŠ•èº«å…¶ä¸­ï¼Œåœ¨é‚£é‡Œèµšé’±ã€‚å¦‚æœä½ æŒç»­åœ¨å·¥ä¸šç•Œè·³æ¥è·³å»â€”â€”ä¸ï¼Œå®é™…ä¸Šæˆ‘éœ€è¦æ‰“å¼€ä¸€ç³»åˆ—ç”µåŠ¨æ±½è½¦åŠ æ²¹ç«™ã€‚â€”â€”è¿™æˆ–è®¸æœ‰é“ç†ã€‚è¿™å¯èƒ½æ˜¯æœ€å¥½çš„æœºä¼šã€‚ä½†æ˜¯æ¯æ¬¡ä½ é‡ç½®æ—¶ï¼Œæ¯æ¬¡ä½ è·³å‡ºåŸæ¥çš„ç½‘ç»œåœˆæ—¶ï¼Œä½ éƒ½å°†ä»é›¶å¼€å§‹ã€‚ä½ ä¸çŸ¥é“è¯¥ç›¸ä¿¡è°ï¼Œè€Œä¸”ä»–ä»¬ä¹Ÿä¸ä¼šå¾ˆå®¹æ˜“ç›¸ä¿¡ä½ ã€‚</p>
<p>å½“ç„¶ä¹Ÿå­˜åœ¨çŸ­æš‚çš„è¡Œä¸šã€‚ä»–ä»¬æ€»æ˜¯è¿›è¿›å‡ºå‡ºã€‚æ”¿æ²»å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå¯¹å§ï¼Ÿåœ¨æ”¿æ²»ä¸Šï¼Œæ–°äººæ­£åœ¨å½“é€‰ã€‚ä½ åœ¨æ”¿æ²»ä¸Šä¼šçœ‹åˆ°ï¼Œæœ‰å¾ˆå¤šè€å‰è¾ˆçš„åœ°æ–¹ï¼Œæ¯”å¦‚å‚è®®é™¢ï¼Œè¿™é‡Œæœ‰åœ¨è¿™ä¸ªè¡Œä¸šä¸­å·²ç»ç”Ÿå­˜å¾ˆé•¿æ—¶é—´çš„äººï¼Œä»–ä»¬éƒ½æ˜¯èŒä¸šæ”¿æ²»å®¶ã€‚å¯¹äºèŒä¸šæ”¿æ²»å®¶æœ‰å¾ˆå¤šä¸åˆ©å› ç´ æ¯”å¦‚è…è´¥ã€‚ä½†å¥½å¤„æ˜¯ä»–ä»¬å®é™…ä¸Šå·²ç»å®Œæˆäº†å½¼æ­¤çš„äº¤æ˜“ï¼Œå› ä¸ºä»–ä»¬çŸ¥é“å¦ä¸€ä¸ªäººå°†åœ¨åå¹´ä¹‹åå¤„äºç›¸åŒçš„ä½ç½®ï¼Œä»–ä»¬å°†ä¸å¾—ä¸ç»§ç»­ä¸è¿™äº›è€å‰è¾ˆæ‰“äº¤é“ï¼Œæ‰€ä»¥ä»–ä»¬æœ€å¥½å­¦ä¼šå¦‚ä½•åˆä½œã€‚ä¼—è®®é™¢æ¯ä¸¤å¹´éƒ½è¦ä¸¾è¡Œä¸€æ¬¡å¤§å‹é€‰ä¸¾ï¼Œé€‰å‡ºä¸€æ‰¹æ–°çš„ä¼—è®®å‘˜ï¼Œç”±äºä¸€ç›´åœ¨ç›¸äº’ç«äº‰ï¼Œå‡ ä¹ä»»ä½•äº‹æƒ…éƒ½æ²¡æ³•å®Œæˆã€‚â€œå› ä¸ºæˆ‘åˆšæ¥åˆ°è¿™é‡Œï¼Œæˆ‘ä¸è®¤è¯†ä½ ï¼Œæˆ‘ä¸çŸ¥é“ä½ æ˜¯å¦ä¼šç»§ç»­åœ¨èº«è¾¹ï¼Œæˆ‘ä¸ºä»€ä¹ˆè¦å’Œä½ åˆä½œï¼Œè€Œä¸æ˜¯åªæ˜¯å°è¯•åšæˆ‘è®¤ä¸ºæ­£ç¡®çš„äº‹æƒ…ï¼Ÿâ€</p>
<p>å› æ­¤é€‰æ‹©ä¸€ä¸ªä½ èƒ½é•¿æœŸä»äº‹çš„è¡Œä¸šã€ä»¥åŠé•¿æœŸä¼™ä¼´æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™äº›äººä¼šè¡¨æ˜ä»–ä»¬ä¼šåœ¨ä½ èº«è¾¹å­˜åœ¨å¾ˆä¹…ï¼Œä»–ä»¬æ˜¯æœ‰é“å¾·çš„ï¼Œä»–ä»¬çš„é“å¾·ä¿¡æ¡èƒ½ä»ä»–ä»¬çš„è¡ŒåŠ¨ä¸Šä½“ç°å‡ºæ¥ã€‚</p>
<h3>é•¿æœŸæ¸¸æˆä¸­ï¼Œæ¯ä¸ªäººéƒ½åœ¨è®©å½¼æ­¤æ›´å¯Œæœ‰</h3>
<p><strong>Niviï¼šåœ¨é•¿æœŸæ¸¸æˆä¸­ï¼Œä¼¼ä¹æ¯ä¸ªäººéƒ½åœ¨è®©å½¼æ­¤æ›´å¯Œæœ‰ã€‚è€Œåœ¨çŸ­æœŸæ¸¸æˆä¸­ï¼Œä¼¼ä¹æ¯ä¸ªäººéƒ½åœ¨è®©è‡ªå·±æ›´å¯Œæœ‰</strong>ã€‚</p>
<p>Navalï¼šæˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„å½¢å®¹ã€‚åœ¨é•¿æœŸæ¸¸æˆä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªæ­£å’Œç°è±¡ã€‚å°±å¥½åƒå¤§å®¶åœ¨ä¸€èµ·çƒ¤ä¸€ä¸ªè‹¹æœæ´¾ï¼Œå¤§å®¶éƒ½åœ¨åŠªåŠ›å°½å¯èƒ½å°†å®ƒåšå¾—è¶Šå¤§è¶Šå¥½ã€‚åœ¨çŸ­æœŸæ¸¸æˆä¸­ï¼Œæˆ‘ä»¬æ˜¯åœ¨æƒ³æ–¹è®¾æ³•åˆ†è¿™ä¸ªæ´¾ã€‚</p>
<p>ç°åœ¨è¿™ä¸æ˜¯åœ¨ä¸ºç¤¾ä¼šä¸»ä¹‰è€…è¾©è§£ï¼Œå¯¹å—ï¼Ÿè¿™äº›ç¤¾ä¼šä¸»ä¹‰è€…ä¸æ˜¯å‚ä¸çƒ˜ç„™æ´¾çš„äººï¼Œä»–ä»¬æœ€åå‡ºç°ï¼Œè¯´â€æˆ‘æƒ³è¦ä¸€ç‰‡ï¼Œæˆ–è€…æ•´ä¸ªæ´¾ã€‚â€œä»–ä»¬å‡ºç°æ—¶æ˜¯å¸¦ç€æªçš„ã€‚ä½†æ˜¯æˆ‘è®¤ä¸ºä¸€ä¸ªå¥½çš„é¢†å¯¼è€…å¹¶ä¸èƒ½èµ¢å¾—è£èª‰ã€‚ä¸€ä¸ªå¥½çš„é¢†å¯¼è€…åŸºæœ¬ä¸Šéƒ½åœ¨åŠªåŠ›æ¿€åŠ±å‘˜å·¥ï¼Œè¿™æ ·å›¢é˜Ÿæ‰èƒ½å°†å·¥ä½œå®Œæˆã€‚ç„¶åï¼Œå¥–åŠ±å°†æŒ‰ç…§å…¬å¹³åŸåˆ™è¿›è¡Œåˆ’åˆ†ï¼Œè°è´¡çŒ®äº†å¤šå°‘ï¼ˆæˆ–å°½å¯èƒ½æ¥è¿‘ï¼‰å¹¶æ‰¿æ‹…äº†é£é™©ï¼Œè€Œä¸æ˜¯è°æ‹¥æœ‰æœ€é•¿çš„åˆ€â€¦è°æœ‰æœ€é”‹åˆ©çš„åˆ€ã€‚</p>
<h3>æ”¶ç›Šæ¥è‡ªé‡å¤æ¸¸æˆçš„å¤åˆ©</h3>
<p>Niviï¼šå› æ­¤ï¼Œæ¥ä¸‹æ¥çš„ä¸¤ä¸ªæ¨æ–‡æ˜¯ï¼Œâ€œç©è¿­ä»£æ¸¸æˆã€‚ç”Ÿæ´»ä¸­çš„æ‰€æœ‰çš„å›æŠ¥ï¼Œä¸è®ºæ˜¯è´¢å¯Œä¸Šçš„ï¼Œè¿˜æ˜¯äººé™…å…³ç³»ä¸Šçš„ï¼Œæˆ–è€…æ˜¯çŸ¥è¯†ä¸Šçš„éƒ½æ¥è‡ªå¤åˆ©æ•ˆåº”ã€‚â€</p>
<p>Navalï¼šå½“ä½ ä¸ä¸€ä¸ªç›¸å¤„äº†åå¹´ï¼ŒäºŒåå¹´ï¼Œä¸‰åå¹´çš„è€å‹åšç”Ÿæ„æ—¶ï¼Œä½ æ ¹æœ¬ä¸éœ€è¦ä¿¡ä»»ä»–ï¼Œäº‹æƒ…ä¹Ÿå¯ä»¥åšå¾—è¶Šæ¥è¶Šå¥½ã€‚å› ä¸ºåœ¨ç›¸å¤„è¿‡ç¨‹ä¸­æ‘©æ“¦é€æ¸å‡å¼±ï¼Œä½ ä»¬å¯ä»¥ä¸€èµ·åšè¶Šæ¥è¶Šå¤§çš„äº‹æƒ…ã€‚</p>
<p>ä¸¾ä¸ªæç«¯çš„ä¾‹å­ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä¸æŸäººç»“å©šï¼Œç”Ÿå­©å­ç„¶åå…»å­©å­ï¼Œè¿™å°±æ˜¯å¤åˆ©ï¼ˆç¬‘ï¼‰ã€‚æŠ•èµ„äºè¿™äº›é•¿æœŸçš„å…³ç³»ï¼Œä¸æ›´éšæ„çš„å…³ç³»ç›¸æ¯”ï¼Œè¿™äº›å…³ç³»æœ€ç»ˆæ˜¯æ— ä»·çš„ã€‚</p>
<p>åœ¨å¥åº·å’Œå¥èº«æ–¹é¢ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ ä½ çš„èº«ä½“è¶Šå¥åº·ï¼Œä¿æŒå¥åº·å°±è¶Šå®¹æ˜“ã€‚ è€Œä½ çš„èº«ä½“æ¶åŒ–çš„è¶Šå¤šï¼Œå°±è¶Šéš¾å›åˆ°æ­£å¸¸çš„æ°´å¹³ã€‚</p>
<h2>ç¬¬åä¸€æ¡ï¼š é€‰æ‹©æ™ºæ…§ã€ç²¾åŠ›å……æ²›å’Œæ­£ç›´çš„åˆä½œä¼™ä¼´</h2>
<p><strong>é€‰æ‹©é«˜æ™ºå•†ã€ç²¾åŠ›å……æ²›ã€ä¸ºäººæ­£ç›´çš„ä¼™ä¼´æ˜¯ä½ ä¸èƒ½å¦¥åçš„ä¸‰è¦ç´ </strong></p>
<h3>é€‰æ‹©é«˜æ™ºå•†ã€ç²¾åŠ›å’Œæ­£ç›´çš„å•†ä¸šä¼™ä¼´</h3>
<p>Navalï¼šåœ¨æŒ‘é€‰åŒäº‹æ–¹é¢ï¼Œé€‰æ‹©é‚£äº›é«˜æ™ºå•†ã€ç²¾åŠ›å……æ²›ã€æ­£ç›´çš„äººï¼Œè¿™æ˜¯ä½ ä¸èƒ½å¦¥åçš„ä¸‰ä¸ªè¦ç´ ã€‚</p>
<p>ä½ éœ€è¦å’Œèªæ˜çš„äººå…±äº‹ï¼Œè‡³å°‘ä»–ä»¬ä¸æ˜¯åœ¨é”™è¯¯çš„æ–¹å‘ä¸Šä¸€è·¯å‘è¥¿ã€‚ä½ éœ€è¦ä¸ç²¾åŠ›å……æ²›çš„äººå…±äº‹ï¼Œå› ä¸ºä¸–ç•Œä¸Šåˆ°å¤„éƒ½æ˜¯èªæ˜å´æ‡’æƒ°ï¼Œå…‰æƒ³ä¸å¹²çš„äººã€‚åœ¨ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬éƒ½è®¤è¯†ä¸€äº›éå¸¸èªæ˜çš„äººï¼Œä»–ä»¬å¯ä»¥ä¸èµ·åºŠï¼Œæˆ–è€…åŠ¨ä¸€åŠ¨æ‰‹æŒ‡å°±å®Œæˆå¾ˆå¤šäº‹æƒ…ã€‚æˆ‘ä»¬ä¹ŸçŸ¥é“æœ‰äº›äººç²¾åŠ›å¾ˆæ—ºç››ï¼Œä½†å¹¶ä¸èªæ˜ï¼Œä»–ä»¬å·¥ä½œéå¸¸éå¸¸åŠªåŠ›ï¼Œä½†æœ‰æ—¶åœ¨æœç€é”™è¯¯çš„æ–¹å‘åŸ‹å¤´è‹¦å¹²ã€‚smartä¸æ˜¯ä¸€ä¸ªè´¬ä¹‰è¯ã€‚è¿™å¹¶ä¸æ˜¯è¯´æœ‰äººèªæ˜ï¼Œæœ‰äººæ„šè ¢ã€‚æˆ‘æƒ³è¡¨è¾¾çš„æ„æ€æ˜¯ï¼Œæ¯ä¸ªäººåœ¨ä¸åŒçš„äº‹æƒ…ä¸Šä¼šè¡¨ç°å‡ºå¾ˆèªæ˜çš„ä¸€é¢ã€‚å› æ­¤ï¼Œå–å†³äºä½ æƒ³åšä»€ä¹ˆï¼Œä½ æ‰å¯ä»¥æ‰¾åˆ°åœ¨è¿™æ–¹é¢å¾ˆèªæ˜çš„äººæ¥å¸®ä½ ã€‚</p>
<p>ç„¶åå…³äºç²¾åŠ›ï¼Œå¾ˆå¤šæ—¶å€™äººä»¬å¯¹ç‰¹å®šçš„äº‹æƒ…æ²¡æœ‰åŠ¨åŠ›ï¼Œä½†å¯¹å…¶ä»–äº‹æƒ…æœ‰åŠ¨åŠ›ã€‚ä¾‹å¦‚ï¼Œæœ‰äººå¯èƒ½çœŸçš„æ²¡æœ‰åŠ¨åŠ›ä¸€å¤©éƒ½ååœ¨åŠå…¬å®¤é‡Œå·¥ä½œã€‚ä½†ä»–ä»¬å¯èƒ½çœŸçš„æœ‰åŠ¨åŠ›å»ç”»ç”»ï¼Œå¯¹å§?</p>
<p>å—¯ï¼Œé‚£æ ·çš„è¯ï¼Œä»–ä»¬åº”è¯¥æ˜¯ç”»å®¶ã€‚ä»–ä»¬åº”è¯¥æŠŠè‡ªå·±çš„è‰ºæœ¯æ”¾åˆ°ç½‘ä¸Šï¼Œè¯•ç€æ¢ç´¢å¦‚ä½•ä»¥æ­¤ä¸ºåŸºç¡€å»ºç«‹è‡ªå·±çš„äº‹ä¸šï¼Œè€Œä¸æ˜¯è®¤å‘½äº†ï¼Œæˆ´ç€é¡¹åœˆï¼Œå»åšä¸€ä»½ä¹å‘³çš„å·¥ä½œã€‚è¿™ä¸€å®šæ˜¯ä¸€ä¸ªé•¿æœŸçš„äº‹æƒ…ï¼Œå¾ˆå¤šäººåœ¨å…´è‡´å‹ƒå‹ƒçš„å‘å¸ƒç¬¬ä¸€ä¸ªä½œå“åï¼Œå‘ç°æ²¡æœ‰ç«‹é©¬æ”¶è·1w+ç²‰ä¸çš„å…³æ³¨è€Œå¯¹è‡ªå·±å¤§å¤±æ‰€æœ›ï¼Œç„¶åä»¥æ­¤ä¸ºç”±å¤±å»åŠ¨åŠ›å°±æ”¾å¼ƒäº†ã€‚æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œ<strong>åšä¸€ä»¶äº‹æƒ…çš„åŠ¨åŠ›ç»ˆç©¶æ¥è‡ªäºä½ è‡ªå·±åˆ°åº•æƒ³åšä»€ä¹ˆï¼Œè§‰å¾—ä»€ä¹ˆæœ‰æ„ä¹‰ï¼Œè€Œä¸æ˜¯ä¸ºäº†è®¨å¥½åˆ«äºº</strong>ã€‚</p>
<p>æœ€åä¸€ç‚¹æ˜¯æ­£ç›´ï¼Œæ­£ç›´æ˜¯æœ€é‡è¦çš„ï¼Œå¦‚æœåªæœ‰å¦å¤–ä¸¤ä¸ªå“è´¨ï¼Œä½ å°±é€‰æ‹©äº†ä¸€ä¸ªèªæ˜ã€å‹¤å¥‹çš„éª—å­ï¼Œä»–æœ€ç»ˆä¼šæ¬ºéª—ä½ ã€‚æ‰€ä»¥ï¼Œä½ å¿…é¡»å¼„æ¸…æ¥šè¿™ä¸ªäººæ˜¯å¦æ­£ç›´ã€‚</p>
<p>æˆ‘ä¹‹å‰è¯´è¿‡ï¼Œä½ è¦é€šè¿‡ä¿¡å·åˆ¤æ–­ã€‚ä¿¡å·æ˜¯ä»–ä»¬åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯ä»–ä»¬è¯´ä»€ä¹ˆã€‚å½“ä»–ä»¬è®¤ä¸ºæ²¡æœ‰äººåœ¨çœ‹ä»–ä»¬æ—¶ï¼Œä»–ä»¬ä¼šåšä¸€äº›éè¯­è¨€çš„äº‹æƒ…ã€‚</p>
<h3>åŠ¨æœºå¿…é¡»æ˜¯å†…åœ¨çš„</h3>
<p>Niviï¼šSam Altmanä¹‹å‰æœ‰ä¸ªæœ‰è¶£çš„è§‚ç‚¹ï¼Œå½“è°ˆåˆ°å§”ä»»æ—¶ï¼Œä»–è¯´ï¼šâ€œå§”ä»»çš„å…³é”®åœ¨äºï¼Œè®©äººä»¬åšä»–ä»¬<strong>æ“…é•¿åŒæ—¶æ˜¯ä½ æƒ³è®©ä»–ä»¬åšçš„äº‹æƒ…</strong>ã€‚â€è¿™ä¸ªé“ç†æ˜¾è€Œæ˜“è§ï¼Œä½ ä¼šå’Œé‚£äº›è‡ªç„¶ä¼šåšä½ æƒ³è®©ä»–ä»¬åšçš„äº‹æƒ…çš„äººåˆä½œã€‚</p>
<p>Navalï¼šæ˜¯çš„ã€‚å¦‚æœæˆ‘è®¤ä¸ºä»–ä»¬ä¸å–œæ¬¢æˆ‘æƒ³è®©ä»–ä»¬åšçš„äº‹æƒ…ï¼Œæˆ‘å‡ ä¹ä¸ä¼šåˆ›åŠå…¬å¸ï¼Œä¸ä¼šé›‡äººï¼Œä¹Ÿä¸ä¼šå’Œåˆ«äººä¸€èµ·å·¥ä½œã€‚</p>
<p>å½“æˆ‘å¹´è½»çš„æ—¶å€™ï¼Œæˆ‘å¸¸å¸¸è¯•ç€è¯´æœåˆ«äººã€‚ä½†äº‹å®è¯æ˜ï¼Œä½ å¯ä»¥è¯´æœæŸäººå¸®ä½ åšä¸€ä»¶äº‹ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä½ ä¸èƒ½ã€‚ä½ æ— æ³•è®©ä»–ä»¬ä¿æŒåŠ¨åŠ›ã€‚ä½ å¯ä»¥åœ¨ä¸€å¼€å§‹å°±ç»™ä»–ä»¬çµæ„Ÿï¼Œä½†é™¤éä½ æ˜¯åƒäº¨åˆ©äº”ä¸–é‚£æ ·çš„å›½ç‹ï¼Œæ‹¥æœ‰é‚£æ ·çš„æƒåŠ›æŒ‡ä½¿åˆ«äººåšäº‹æƒ…ã€‚ä½†å¦‚æœä½ æƒ³è®©äººä»¬é•¿æœŸä¿æŒåŠ¨åŠ›ï¼Œè¿™ç§åŠ¨åŠ›å¿…é¡»æ˜¯å†…åœ¨çš„ã€‚ä½ ä¸èƒ½åªæ˜¯åˆ›é€ å®ƒï¼Œå¦‚æœä»–ä»¬æ²¡æœ‰å†…åœ¨çš„åŠ¨åŠ›ï¼Œä½ ä¹Ÿä¸èƒ½æˆä¸ºä»–ä»¬çš„æ‹æ–ã€‚æ‰€ä»¥ï¼Œä½ å¿…é¡»ç¡®ä¿å‘˜å·¥ç²¾åŠ›å……æ²›ï¼Œæ„¿æ„åšä½ å¸Œæœ›ä»–ä»¬åšçš„äº‹ï¼Œæ„¿æ„å’Œä½ ä¸€èµ·å·¥ä½œï¼Œä¸€èµ·åˆ›é€ ã€‚</p>
<h3>è¯šä¿¡åæ˜ åœ¨ä¸€ä¸ªäººçš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯ä»–è¯´äº†ä»€ä¹ˆ</h3>
<p>è§£è¯»ä¿¡å·éå¸¸éå¸¸é‡è¦ã€‚ä¿¡å·ä¸æ˜¯äººä»¬è¯´ä»€ä¹ˆï¼Œè€Œæ˜¯ä»–ä»¬åšäº†ä»€ä¹ˆã€‚å› æ­¤ï¼Œæ³¨æ„ç»†å¾®çš„ä¿¡å·æ˜¯å¾ˆé‡è¦çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚åœ¨å…¬ä¼—åœºåˆï¼Œå¦‚æœæœ‰äººå¯¹æœåŠ¡å‘˜æ€åº¦éå¸¸ä¸å¥½ï¼Œé‚£ä¹ˆä»–ä»¬å¯¹ä½ ä¸å¥½åªæ˜¯æ—¶é—´é—®é¢˜ã€‚å¦‚æœæœ‰äººå‹åˆ¶äº†ä¸€ä¸ªæ•Œäººï¼Œå¹¶å¯¹ä»–ä»¬æ€€æ¨åœ¨å¿ƒï¼Œé‚£ä¹ˆä»–ä»¬æŠŠä½ ä»æœ‹å‹é‡æ–°å®šä¹‰ä¸ºæ•Œäººåªæ˜¯æ—¶é—´é—®é¢˜ï¼Œä½ ä¼šæ„Ÿå—åˆ°ä»–ä»¬çš„æ„¤æ€’ã€‚æ‰€ä»¥ï¼Œæ„¤æ€’ï¼Œæ„¤æ€’ï¼ŒæŠ¥å¤ï¼ŒçŸ­è§†çš„äººåœ¨ç°å®ç”Ÿæ´»ä¸­çš„å¾ˆå¤šäº’åŠ¨ä¸­éƒ½æ˜¯è¿™æ ·çš„ã€‚äººä»¬å¥‡æ€ªåœ°ä¸€è‡´ï¼Œè‡³å°‘èº«ä½“å¾ˆè¯šå®ã€‚æ‰€ä»¥ï¼Œä½ æƒ³æ‰¾åˆ°é•¿æœŸåˆä½œçš„ä¼™ä¼´ï¼Œä½ è¦æ‰¾çš„æ˜¯é‚£äº›ä¼¼ä¹æ²¡æœ‰ç†æ€§é“å¾·çš„äººã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘æœ‰ä¸€ä¸ªæœ‹å‹ï¼Œä»–çš„å…¬å¸æ˜¯æˆ‘æŠ•èµ„çš„ï¼Œä½†æ˜¯å…¬å¸æ¥è¿‘å€’é—­ï¼Œä»–æœ¬å¯ä»¥æŠŠæ‰€æœ‰çš„æŠ•èµ„è€…éƒ½é¸½äº†ã€‚ä½†ä»–ä¸æ–­åœ°æŠ•å…¥è¶Šæ¥è¶Šå¤šçš„ä¸ªäººèµ„é‡‘ï¼Œç›´åˆ°å…¬å¸æœ€ç»ˆåˆç«™èµ·æ¥ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä»–ä»æœªè®©æŠ•èµ„è€…è¡€æœ¬æ— å½’ã€‚ä¸ºæ­¤æˆ‘ä¸€ç›´å¾ˆæ„Ÿæ¿€ä»–ã€‚æˆ‘è¯´ï¼Œâ€œå“‡ï¼Œä½ å¯¹æŠ•èµ„äººè¿™ä¹ˆå¥½çœŸæ˜¯å¤ªæ£’äº†ï¼Œä½ æ²¡æœ‰å‘ä»–ä»¬ã€‚ä»–è§‰å¾—è¢«å†’çŠ¯äº†ã€‚ä»–è¯´ï¼šâ€œæˆ‘è¿™æ ·åšä¸æ˜¯ä¸ºäº†ä½ ï¼ˆæŠ•èµ„äººï¼‰ï¼Œæ˜¯ä¸ºäº†æˆ‘è‡ªå·±ã€‚è¿™å…³ä¹æˆ‘çš„è‡ªå°Šï¼Œæ˜¯æˆ‘çœŸæ­£å…³å¿ƒçš„ä¸œè¥¿ã€‚â€è¿™ç§äººæ‰æ˜¯ä½ æƒ³è¦å…±äº‹çš„äººã€‚</p>
<p>å¦ä¸€ä¸ªæˆ‘å–œæ¬¢çš„å¼•ç”¨ï¼Œæ˜¯æˆ‘å¦ä¸€æ¡ç›¸å…³çš„æ¨ç‰¹ã€‚æˆ‘æ˜¯åœ¨åˆ«çš„åœ°æ–¹è¯»åˆ°å®ƒï¼Œä½†æ˜¯æˆ‘ç¨å¾®ä¿®æ”¹äº†ä¸€ä¸‹ã€‚</p>
<p>â€œ<strong>è‡ªå°Šæ˜¯ä½ å¯¹è‡ªå·±çš„è¯„ä»·</strong>â€ã€‚</p>
<p>å¥½äººï¼Œæœ‰é“å¾·çš„äººï¼Œå®¹æ˜“å…±äº‹çš„äººï¼Œå¯é çš„äººï¼Œå¾€å¾€æœ‰å¾ˆé«˜çš„è‡ªå°Šï¼Œå› ä¸ºä»–ä»¬å¯¹è‡ªå·±çš„å£°èª‰éå¸¸åœ¨æ„ï¼Œä»–ä»¬æ·±åˆ»çš„æ˜ç™½å£°èª‰çš„é‡è¦æ€§ã€‚</p>
<h2>ç¬¬åäºŒæ¡ï¼šä¸ç†æ€§çš„ä¹è§‚ä¸»ä¹‰è€…åˆä½œ</h2>
<p><strong>ä¸è¦ä¸æ„¤ä¸–å«‰ä¿—è€…å’Œæ‚²è§‚ä¸»ä¹‰è€…ä¸ºä¼´ï¼šä»–ä»¬æ€»æ˜¯ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒ</strong></p>
<h3>ä¸è¦ä¸æ‚²è§‚ä¸»ä¹‰è€…ä¸ºä¼</h3>
<p>Niviï¼šæœ€åä¸€æ¡æ¨æ–‡ã€‚ä½ è¯´ï¼šâ€œä¸è¦ä¸æ„¤ä¸–å«‰ä¿—è€…å’Œæ‚²è§‚ä¸»ä¹‰è€…ä¸ºä¼ã€‚ä»–ä»¬æ€»æ˜¯è‡ªä»¥ä¸ºæ˜¯ã€‚</p>
<p>Navalï¼šæ˜¯çš„ã€‚æœ¬è´¨ä¸Šï¼Œè¦åˆ›é€ äº‹ç‰©ï¼Œä½ å¿…é¡»æ˜¯ä¸€ä¸ªç†æ€§çš„ä¹è§‚ä¸»ä¹‰è€…ã€‚ç†æ€§çš„æ„æ€æ˜¯ä½ å¿…é¡»çœ‹æ¸…ä¸–ç•Œçš„çœŸç›¸ã€‚<strong>ä½†ä½ å¿…é¡»å¯¹è‡ªå·±çš„èƒ½åŠ›ä¿æŒä¹è§‚</strong>ï¼Œå¯¹è‡ªå·±æƒ³è¦å®Œæˆçš„ä½¿å‘½ä¿æŒä¹è§‚ã€‚</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“æœ‰äº›äººæ€»æ˜¯å¾ˆæ‚²è§‚ï¼Œä»–ä»¬ä¼šå¦å®šä¸€åˆ‡ã€‚æ¯ä¸ªäººçš„ç”Ÿæ´»ä¸­éƒ½æœ‰ä¹äºåŠ©äººçš„æ‰¹åˆ¤è€…ï¼Œå¯¹å§ï¼Ÿä»–è®¤ä¸ºä»–æ˜¯åœ¨å¸®å¿™ï¼Œä½†å®é™…ä¸Šä»–åªæ˜¯åœ¨æ‰¹è¯„ï¼ˆå°±åƒæˆ‘æ‰€è¯´çš„ä¸“ä¸šçš„è¯„è®ºå®¶ï¼‰ï¼Œè€Œä¸”ä»–å¯¹æ¯ä»¶äº‹éƒ½å¾ˆå¤±æœ›ã€‚è¿™æ ·çš„äººä¸ä»…åœ¨ä»–çš„ç”Ÿæ´»ä¸­ä¸ä¼šæˆå°±ä»»ä½•ä¼Ÿå¤§çš„äº‹æƒ…ï¼Œä»–ä»¬è¿˜ä¼šé˜»æ­¢å‘¨å›´çš„äººåšä¸€äº›ä¼Ÿå¤§çš„äº‹æƒ…æˆ–æœ‰å¤§èƒ†çš„æƒ³æ³•ã€‚ä»–ä»¬å¾€å¾€äº«å—æŒ‘åˆºå„¿çš„å¿«æ„Ÿï¼Œä½†ä»æœªæƒ³è¿‡æä¾›æ›´å¥½çš„è§£å†³é—®é¢˜çš„æ–¹æ¡ˆï¼Œå¯¹ï¼Œä»–ä»¬å°±æ˜¯åªè¯´ä¸åšã€‚æœ‰ä¸€å¥ç»å…¸çš„å†›äº‹å°è¯ï¼šâ€œè¦ä¹ˆå½“å¤´å„¿ï¼Œè¦ä¹ˆæœä»ï¼Œè¦ä¹ˆæ»šã€‚â€è¿™äº›äººæƒ³è¦ç¬¬å››ç§é€‰æ‹©ï¼Œä»–ä»¬ä¸æƒ³å½“é¢†å¯¼ï¼Œä¸æƒ³è·Ÿéšï¼Œä½†åˆä¸æƒ³è®©è·¯ã€‚ä»–ä»¬å°±æ˜¯æƒ³æ–¹è®¾æ³•å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆè¿™äº‹å„¿è¡Œä¸é€šã€‚</p>
<p>æˆ‘è®¤è¯†çš„æ‰€æœ‰çœŸæ­£æˆåŠŸçš„äººéƒ½æœ‰å¾ˆå¼ºçš„è¡ŒåŠ¨åŠ›ï¼Œ<strong>ä»–ä»¬åªæ˜¯åšäº‹ã€‚åˆ¤æ–­ä¸€ä»¶äº‹æ˜¯å¦å¯è¡Œçš„æœ€ç®€å•æ–¹æ³•å°±æ˜¯å»åš</strong>ï¼Œè‡³å°‘åšç¬¬ä¸€æ­¥ï¼Œç¬¬äºŒæ­¥ï¼Œç¬¬ä¸‰æ­¥ï¼Œç„¶åå†å†³å®šä¸‹ä¸€æ­¥ã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœä½ æƒ³åœ¨ç”Ÿæ´»ä¸­å–å¾—æˆåŠŸï¼Œåˆ›é€ è´¢å¯Œï¼Œæˆ–è€…æ‹¥æœ‰è‰¯å¥½çš„äººé™…å…³ç³»ï¼Œæˆ–è€…ä¿æŒå¥åº·ï¼Œç”šè‡³æ˜¯å¿«ä¹ï¼Œä½ éœ€è¦æœ‰ä¸€ç§è¶…å¼ºçš„è¡ŒåŠ¨åŠ›ï¼Œè¿™æ ·æ‰èƒ½è·å¾—ä½ æƒ³è¦çš„ã€‚</p>
<h3>ä¸ç†æ€§çš„ä¹è§‚ä¸»ä¹‰è€…åˆä½œ</h3>
<p>ä½ è¦å¯¹åˆç†çš„ä¸œè¥¿ä¿æŒä¹è§‚ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¯”ä¸€ä¸ªé²è½çš„äººå»è¿½æ±‚ä¸å€¼å¾—çš„ä¸œè¥¿æ›´ç³Ÿç³•çš„äº†ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘è¯´â€œç†æ€§â€çš„ä¹è§‚ä¸»ä¹‰è€…ã€‚ä½ éœ€è¦åœ¨äº†è§£æ‰€æœ‰çš„é™·é˜±ï¼ŒçŸ¥é“äº‹ç‰©ä¸åˆ©çš„ä¸€é¢çš„æƒ…å†µä¸‹ï¼Œä¾æ—§ä¿æŒä¹è§‚ã€‚</p>
<p>æ¯ä¸ªäººåªåœ¨è¿™ä¸ªæ˜Ÿçƒä¸Šæ´»ä¸€æ¬¡ï¼Œä¸ºä»€ä¹ˆä¸è¯•ç€åšç‚¹å¤§äº‹å‘¢ï¼Ÿè¿™å°±æ˜¯åŸƒéš†Â·é©¬æ–¯å…‹è¿™ç§äººçš„ç‰›é€¼ä¹‹å¤„ï¼Œæˆ‘è®¤ä¸ºä»–ä¹‹æ‰€ä»¥èƒ½æ¿€åŠ±è¿™ä¹ˆå¤šäººï¼Œæ˜¯å› ä¸ºä»–æ‰¿æ‹…äº†éå¸¸ã€éå¸¸å¤§èƒ†çš„è´£ä»»å’Œä½¿å‘½ã€‚ä»–ä¸ºäººä»¬æ ‘ç«‹äº†ä¸€ä¸ªæ ‘ç«‹è¿œå¤§ç†æƒ³çš„æ¦œæ ·ã€‚å³ä½¿æ˜¯åšä¸€äº›å°ä¸œè¥¿ä¹Ÿè¦èŠ±å¾ˆå¤šåŠŸå¤«ã€‚æˆ‘ä¸è®¤ä¸ºè¡—è§’æ‚è´§åº—è€æ¿çš„å·¥ä½œå¼ºåº¦æ¯”åŸƒéš†Â·é©¬æ–¯å…‹(Elon Musk)ä½ï¼Œä¹Ÿä¸è®¤ä¸ºä»–ä»˜å‡ºçš„æ±—æ°´å’Œè¾›åŠ³æ¯”é©¬æ–¯å…‹å°‘ï¼Œç”šè‡³æ›´å¤šã€‚æ— è®ºæ˜¯æ•™è‚²æ°´å¹³è¿˜æ˜¯æ‰€å¤„ç¯å¢ƒï¼Œä¸ç®¡ä»€ä¹ˆåŸå› ï¼Œä»–ä»¬æ²¡æœ‰æœºä¼šå»æƒ³é‚£ä¹ˆå¤šï¼Œæ‰€ä»¥å½±å“åŠ›å°±ä¸é‚£ä¹ˆå¤§ã€‚å› æ­¤ï¼Œæœ€å¥½è¿˜æ˜¯æƒ³å¾—è¿œä¸€ç‚¹ã€‚å½“ç„¶è¿˜æ˜¯è¦ç†æ€§åœ°ï¼Œåœ¨ä½ çš„èƒ½åŠ›èŒƒå›´å†…ä¿æŒä¹è§‚ã€‚</p>
<p>æ„¤ä¸–å«‰ä¿—è€…å’Œæ‚²è§‚ä¸»ä¹‰è€…ï¼Œä»–ä»¬çœŸæ­£æƒ³è¯´çš„æ˜¯ï¼Œè¿™å¾ˆä¸å¹¸ï¼Œä½†ä»–ä»¬åŸºæœ¬ä¸Šæ˜¯åœ¨è¯´ï¼Œâ€œæˆ‘æ”¾å¼ƒäº†ã€‚æˆ‘æƒ³æˆ‘ä»€ä¹ˆéƒ½åšä¸äº†ã€‚æ‰€ä»¥å¯¹æˆ‘æ¥è¯´ï¼Œè¿™ä¸ªä¸–ç•Œå°±åƒä¸€ä¸ªæ²¡æœ‰äººèƒ½åšä»»ä½•äº‹çš„ä¸–ç•Œã€‚â€æ‰€ä»¥ä»–ä»¬ä¸ç†è§£åˆ«äººä¸ºä»€ä¹ˆè´¹åŠ²å„¿åœ°è¦å»åšä¸€äº›äº‹æƒ…ã€‚</p>
<h3>æˆ‘ä»¬æ˜¯æ‚²è§‚ä¸»ä¹‰è€…çš„åä»£</h3>
<p>Niviï¼šä¹Ÿè®¸åšä¸€ä¸ªä¸ç†æ€§çš„ä¹è§‚ä¸»ä¹‰è€…æˆ–åšä¸€ä¸ªç†æ€§çš„æ„¤ä¸–å«‰ä¿—è€…å¯èƒ½æ›´å¥½ã€‚</p>
<p>Navalï¼šå¯¹äºä¸ºä»€ä¹ˆä½ åº”è¯¥æˆä¸ºä¸€ä¸ªä¹è§‚ä¸»ä¹‰è€…ï¼Œæœ‰ä¸€ä¸ªå®Œå…¨ç†æ€§çš„æ¡†æ¶ã€‚å†å²ä¸Šï¼Œå¦‚æœä½ å›åˆ°2000å¹´ï¼Œ5000å¹´ï¼Œ10000å¹´ï¼Œä¸¤ä¸ªäººåœ¨ä¸›æ—ä¸­æ¼«æ­¥ï¼Œä»–ä»¬å¬åˆ°äº†è€è™çš„å£°éŸ³ã€‚ä¸€ä¸ªæ˜¯ä¹è§‚ä¸»ä¹‰è€…ï¼Œè¯´ï¼Œâ€œå“¦ï¼Œå®ƒä¸æ˜¯æœæˆ‘ä»¬è¿™è¾¹æ¥çš„ã€‚å¦ä¸€ä¸ªè¯´ï¼šâ€œæˆ‘æ˜¯ä¸ªæ‚²è§‚ä¸»ä¹‰è€…ï¼Œæˆ‘è¦ç¦»å¼€è¿™é‡Œã€‚â€æ‚²è§‚çš„äººè·‘äº†ï¼Œæ´»äº†ä¸‹æ¥ï¼Œä¹è§‚çš„äººè¢«åƒæ‰äº†ã€‚</p>
<p>æˆ‘ä»¬æ˜¯æ‚²è§‚ä¸»ä¹‰è€…çš„åä»£ï¼Œæˆ‘ä»¬å¤©ç”Ÿå°±æ˜¯æ‚²è§‚ä¸»ä¹‰è€…ã€‚ä½†ç°ä»£ç¤¾ä¼šè¦å®‰å…¨å¾—å¤šï¼Œæ²¡æœ‰è€è™åœ¨è¡—ä¸Šæ¸¸è¡ï¼Œè™½ç„¶ä½ åº”è¯¥é¿å…å½»åº•ç ´äº§ï¼Œä½†ä½ æœ€ç»ˆä¸å¤ªå¯èƒ½ä¸€æ— æ‰€æœ‰ã€‚</p>
<p>æˆ‘æƒ³åˆ†äº«çš„ç†å¿µæ˜¯ï¼Œå¯¹äºä¸€ä¸ªäººæ¥è¯´ï¼Œ<strong>ä»–çš„å¢ƒé‡æ˜¯æœ‰ä¸‹é™çš„ï¼Œä½†ä¸Šé™å´å¾ˆéš¾è¯´</strong>ï¼ˆç™½è¯è¯´æ˜¯ä½ å¾ˆéš¾é¥¿æ­»ï¼Œä½†æ˜¯æˆåŠŸå´ä¸å¯é™é‡ï¼‰ã€‚å› æ­¤ï¼Œé€‚åº”ç°ä»£ç¤¾ä¼šæ„å‘³ç€è¦å…‹æœä½ çš„æ‚²è§‚æƒ…ç»ªï¼Œåšå‡ºç¨å¾®ä¸ç†æ€§çš„ä¹è§‚æŠ¼æ³¨ï¼Œå› ä¸ºå¦‚æœä½ åˆ›åŠä¸‹ä¸€ä¸ªSpaceXã€ç‰¹æ–¯æ‹‰(Tesla)æˆ–ä¼˜æ­¥(Uber)ï¼Œä½ å¯ä»¥ä¸ºç¤¾ä¼šå’Œè‡ªå·±åˆ›é€ æ•°åäº¿ç¾å…ƒçš„ä»·å€¼ï¼Œå¹¶æ”¹å˜ä¸–ç•Œã€‚</p>
<p>â€œ<strong>å¦‚æœä½ å¤±è´¥äº†ï¼Œæœ‰ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Ÿä½ æŸå¤±äº†å‡ ç™¾ä¸‡ç¾å…ƒçš„æŠ•èµ„äººï¼ˆVCï¼‰çš„é’±ï¼Œè€Œä»–ä»¬è¿˜æœ‰æ›´å¤šé’±ï¼Œè¿™å°±æ˜¯ä»–ä»¬å¯¹ä½ æˆåŠŸçš„èµŒæ³¨ã€‚</strong>â€</p>
<p>å¯¹è¿‡å»æ‚²è§‚æ˜¯æœ‰é“ç†çš„ï¼Œå¯¹ä»Šå¤©ä¿æŒä¹è§‚æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå°¤å…¶å¯¹äºè¿™ä¹ˆå¤šå—è¿‡é«˜ç­‰æ•™è‚²ä¸”ç”Ÿæ´»åœ¨ç¬¬ä¸€ä¸–ç•Œå›½å®¶çš„äººï¼Œç”šè‡³æ˜¯ç¬¬ä¸‰ä¸–ç•Œå›½å®¶çš„äººã€‚æˆ‘åè€Œè®¤ä¸ºç¬¬ä¸‰ä¸–ç•Œå›½å®¶çš„ç»æµæœºä¼šè¦å¤§å¾—å¤šã€‚</p>
<p>å½“ç„¶ï¼Œä½ å¿…é¡»æ³¨æ„çš„ä¸€ä»¶äº‹å°±æ˜¯ï¼Œä¸è¦åšä»»ä½•è¿æ³•çš„äº‹æƒ…ï¼Œè¿œç¦»å¯èƒ½ä¼šå¸¦æ¥ç¾éš¾æ€§çš„æŸå¤±çš„äº‹ã€‚å°½å¯èƒ½ä¸åšå¯¹èº«ä½“æœ‰å®³çš„äº‹æƒ…ï¼Œæ³¨æ„ä½ çš„å¥åº·ã€‚è¿œç¦»é‚£äº›ä¼šè®©ä½ å¤±å»æ‰€æœ‰èµ„æœ¬å’Œå‚¨è“„çš„äº‹æƒ…ã€‚</p>
<p>å› æ­¤ï¼Œä¸è¦å­¤æ³¨ä¸€æ·ã€‚ä½†ç†æ€§ä¹è§‚çš„æŠ¼æ³¨ä¼šå¸¦æ¥å·¨å¤§çš„å¥½å¤„ã€‚</p>
<h2>ç¬¬åä¸‰æ¡ï¼šç”¨ç‰¹æ®ŠæŠ€èƒ½ï¼ˆSpecific knowledgeï¼‰æ­¦è£…è‡ªå·±</h2>
<p>Navalï¼šå¦‚æœä½ æƒ³å˜å¾—å¯Œæœ‰ï¼Œä½ éœ€è¦æƒ³åŠæ³•è·å¾—â€œè§„æ¨¡åŒ–â€çš„æ”¶å…¥ï¼Œè€Œä¸æ˜¯ä»…ä»…æœŸç›¼æ¯ä¸ªæœˆçš„å·¥èµ„ã€‚è´£ä»»æ„Ÿå†³å®šäº†ä½ çš„å®¢æˆ·ä¸ºä»€ä¹ˆé€‰æ‹©ä½ ï¼Œæ æ†æ•ˆåº”å†³å®šäº†å®ƒå¯ä»¥è¢«è§„æ¨¡åŒ–ã€‚ä¸ºä»€ä¹ˆå¤§å®¶è¦ä»˜ç»™ä½ é’±è€Œä¸æ˜¯ç»™åˆ«äººï¼Œè¿™éœ€è¦<strong>ç‰¹æ®Šçš„æŠ€èƒ½</strong>ã€‚è¿™é‡Œæåˆ°çš„ç‰¹æ®ŠæŠ€èƒ½å¯èƒ½æ˜¯æ•´ä¸ªæ¨ç‰¹é£æš´ä¸­æœ€éš¾ä¼ è¾¾çš„ä¸œè¥¿ï¼Œä¹Ÿæ˜¯äººä»¬å¯èƒ½æœ€å›°æƒ‘çš„éƒ¨åˆ†ã€‚</p>
<p>äººä»¬æ™®éæŒæœ‰ä¸€ç§è§‚ç‚¹æ˜¯ï¼Œä»»ä½•äº‹æƒ…éƒ½å¯ä»¥ä»å­¦æ ¡å­¦æ¥ï¼Œéƒ½å¯ä»¥â€œè¢«ä¼ æˆâ€ï¼Œä½†äº‹å®ä¸Šæœ€æœ‰ä»·å€¼çš„äº‹æƒ…ä¸æ˜¯æ•™æ¥çš„ã€‚ä½†å¥½åœ¨ä»»ä½•äº‹æƒ…éƒ½å¯ä»¥å­¦ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½ æƒ³å­¦çš„ä¸œï¼Œè¦ä¹ˆæ¥æºäºä½ çš„å…´è¶£æˆ–DNAï¼Œè¦ä¹ˆæ˜¯æºäºä½ ä»å°å…»æˆçš„ä¸€äº›ä¹ æƒ¯ï¼Œè¿™äº›åœ¨ä¹‹åéå¸¸éš¾è¢«â€œæ•™â€ä¼šï¼›å½“ç„¶ä¹Ÿå¯èƒ½æ˜¯ä¸€äº›å…¨æ–°çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æ²¡æœ‰äººçŸ¥é“æ€ä¹ˆåšï¼›æˆ–è€…åœ¨å·¥ä½œåŸ¹è®­ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä½ åœ¨é«˜åº¦å¤æ‚çš„ç¯å¢ƒä¸­è¿›è¡Œå„ç§å°è¯•ï¼Œåœ¨ä¸€ä¸ªç‰¹å®šçš„é¢†åŸŸå»ºç«‹åˆ¤æ–­ã€‚å…¸å‹çš„ä¾‹å­å°±æ˜¯æŠ•èµ„ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–æ–¹é¢ã€‚å¯ä»¥æ˜¯å¼€æ‹–æ‹‰æœºçš„æŠ€å·§ï¼Œä¹Ÿå¯ä»¥æ˜¯é¢„æµ‹å¤©æ°”çš„èƒ½åŠ›ã€‚</p>
<p>å› æ­¤ç‰¹æ®ŠæŠ€èƒ½å°±æ˜¯ä½ ç‰¹åˆ«å…³æ³¨çš„æŠ€èƒ½ï¼Œå°¤å…¶æ˜¯ä½ å·²ç»åˆ°äº†20ã€21ã€22ä¹‹åï¼Œä½ å‡ ä¹å°±ä¸ç”¨å»é€‰ä½ éœ€è¦ä»€ä¹ˆæ ·çš„ç‰¹æ®ŠæŠ€èƒ½äº†ã€‚ä½ éœ€è¦åšçš„å°±æ˜¯å›é¡¾ä¹‹å‰çš„äººç”Ÿç»å†ä¸­ï¼Œä½ å»ºç«‹äº†ä»€ä¹ˆæ ·çš„æŠ€èƒ½æ˜¯ä½ è§‰å¾—å¯ä»¥ç€é‡è¢«å‘å±•çš„ã€‚</p>
<h3>ç‰¹æ®ŠæŠ€èƒ½æ— æ³•è¢«è®­ç»ƒå‡ºæ¥</h3>
<p>ç‰¹æ®ŠæŠ€èƒ½ä¸æ˜¯æ•™å‡ºæ¥çš„ã€‚å¦‚æœå­¦æ ¡å¯ä»¥æ•™è¿™äº›ä¸œè¥¿ï¼Œé‚£ä¹ˆå…¶ä»–äººä¹Ÿå¯ä»¥æ¥å—åŸ¹è®­ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥å¤§è§„æ¨¡ç”Ÿäº§å’Œå¤§è§„æ¨¡åŸ¹è®­äººå‘˜ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥ç¼–ç¨‹è®©ç”µè„‘æ¥åšï¼Œè®©æœºå™¨äººæ¥åšã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œä½ å°±å¾ˆå®¹æ˜“è¢«æ›¿ä»£ã€‚å½“æœ‰æ— æ•°çš„äººå¯ä»¥ç»è¿‡åŸ¹è®­åšè¿™ä»¶äº‹çš„æ—¶å€™ï¼Œé›‡ä¸»æ”¯ä»˜ç»™ä½ çš„åªæ˜¯æœ€ä½å·¥èµ„ï¼Œä¸ºçš„å°±æ˜¯è®©ä½ åšâ€œè¿™ä»¶äº‹â€ã€‚<strong>ä½ è·å¾—çš„æ”¶å…¥=æŠ•èµ„åŸ¹è®­æ‰€äº§ç”Ÿçš„å›æŠ¥-åŸ¹è®­ä½ çš„æˆæœ¬</strong>ã€‚</p>
<h3>ç‰¹æ®ŠæŠ€èƒ½ä¸ä½ çš„å…´è¶£é«˜åº¦ç›¸å…³</h3>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªäººæ‹¿åˆ°äº†å¿ƒç†å­¦å­¦ä½åï¼Œæˆä¸ºäº†ä¸€åé”€å”®äººå‘˜ã€‚å¦‚æœä»–å·²ç»æ‹¥æœ‰æ¯”è¾ƒå¥½çš„é”€å”®æŠ€å·§ï¼Œé‚£ä¹ˆå¿ƒç†å­¦å°±å¯ä»¥ä½œä¸ºä¸€ç§æ æ†ï¼Œä½¿ä»–åœ¨é”€å”®ä¸Šåšå¾—æ›´å¥½ã€‚ä½†å¦‚æœä»–ä¸€ç›´æ˜¯ä¸€ä¸ªå†…å‘çš„äººï¼Œä»æ¥éƒ½ä¸æ“…é•¿é”€å”®ï¼Œä»–ä»¬è¯•å›¾ç”¨å¿ƒç†å­¦æ¥å­¦ä¹ é”€å”®ï¼Œä»–ä»¬ä¸ä¼šåšå¾—å¾ˆå¥½ã€‚å› æ­¤ï¼Œä½ ä¼šå‘ç°æ›´å¤šçš„ç‰¹æ®ŠæŠ€èƒ½æ˜¯é€šè¿‡è®¤è¯†åˆ°ä½ çš„å¤©èµ‹ã€ä½ çœŸæ­£çš„å¥½å¥‡å¿ƒå’Œä½ çš„çƒ­æƒ…è€Œå»ºç«‹èµ·æ¥çš„ã€‚ä¸æ˜¯ä¸ºäº†æœ€çƒ­é—¨çš„å·¥ä½œå»ä¸Šå­¦ï¼Œä¹Ÿä¸æ˜¯ç›²ç›®è¿›å…¥æŠ•èµ„äººè®¤ä¸ºçš„æœ€çƒ­é—¨çš„é¢†åŸŸåˆ›ä¸šã€‚</p>
<h3>ç‰¹æ®ŠæŠ€èƒ½å¾€å¾€å¤„äºçŸ¥è¯†çš„è¾¹ç¼˜</h3>
<p>å®ƒä¹Ÿæ˜¯ä¸€äº›åˆšåˆšè¢«å‘ç°æˆ–è€…å¾ˆéš¾è¢«å‘ç°çš„ä¸œè¥¿ã€‚å› æ­¤ï¼Œå¦‚æœä½ ä¸æ˜¯100%çš„æŠ•å…¥ï¼Œå…¶ä»–äººä¼šæ¯”ä½ åšå¾—æ›´å¥½ã€‚ä»–ä»¬ä¸ä¼šæ¯”ä½ å¥½ä¸€ç‚¹ç‚¹ï¼Œä»–ä»¬ä¼šæ¯”ä½ å¥½å¾ˆå¤šï¼Œå› ä¸ºç°åœ¨æˆ‘ä»¬æ­£åœ¨è¿è¥åˆ›æ„é¢†åŸŸï¼Œéå¸¸é€‚ç”¨äºå¤åˆ©ï¼Œé€‚ç”¨äºæ æ†ã€‚å¦‚æœä½ çš„æ æ†ç‡ä¸º1000å€ï¼Œæœ‰äººåœ¨80ï¼…çš„æ—¶é—´éƒ½æ˜¯æ­£ç¡®çš„ï¼Œè€Œå…¶ä»–äººåœ¨90ï¼…çš„æ—¶é—´éƒ½æ˜¯æ­£ç¡®çš„ï¼Œé‚£ä¹ˆ90ï¼…çš„æ—¶é—´æ­£ç¡®çš„äººå°†å› ä¸ºå¸‚åœºçš„æ æ†ä½œç”¨å’Œå¤åˆ©è·å¾—æ•°ç™¾å€çš„æŠ¥é…¬ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³ç¡®ä¿è‡ªå·±åœ¨è¿™æ–¹é¢å…·æœ‰ä¼˜åŠ¿ï¼ŒçœŸæ­£å…·æœ‰å¥½å¥‡å¿ƒéå¸¸é‡è¦ã€‚</p>
<h3>å»ºç«‹ç‰¹æ®ŠæŠ€èƒ½å¯¹ä½ æ¥è¯´å°±åƒæ¸¸æˆ</h3>
<p>å¾ˆå¤šæ—¶å€™ï¼Œå®ƒä¸æ˜¯ä½ åä¸‹æ¥ç„¶åæ¨ç†çš„ä¸œè¥¿ï¼Œå®ƒæ›´å¤šçš„æ˜¯é€šè¿‡è§‚å¯Ÿå‘ç°çš„ã€‚ä½ å‡ ä¹ä¸å¾—ä¸å›é¡¾è‡ªå·±çš„ç”Ÿæ´»ï¼Œçœ‹çœ‹è‡ªå·±åˆ°åº•æ“…é•¿ä»€ä¹ˆã€‚ä¾‹å¦‚ï¼Œæˆ‘æƒ³æˆä¸ºä¸€åç§‘å­¦å®¶ï¼Œæ‰€ä»¥æˆ‘æ‰€åšæŒçš„ä»·å€¼è§‚éƒ½æ˜¯å›´ç»•ç€ã€Œç§‘å­¦å®¶ã€æ¥å»ºç«‹çš„ã€‚æˆ‘è®¤ä¸ºçœŸæ­£çš„ç§‘å­¦å®¶å¤„äºäººç±»ç”Ÿäº§é“¾æ¡çš„é¡¶ç«¯ï¼Œä»–ä»¬åšå‡ºäº†çœŸæ­£çš„çªç ´å’Œè´¡çŒ®ï¼Œå¯¹äººç±»ç¤¾ä¼šçš„è´¡çŒ®å¯èƒ½æ¯”ä»»ä½•å…¶ä»–é˜¶å±‚çš„äººéƒ½è¦å¤§ã€‚å½“ç„¶ï¼Œæˆ‘å¹¶ä¸æ˜¯è¯´è‰ºæœ¯ã€æ”¿æ²»ã€å·¥ç¨‹æˆ–å•†ä¸šç­‰è´¡çŒ®å°ï¼Œä½†å¦‚æœæ²¡æœ‰ç§‘å­¦ï¼Œæˆ‘ä»¬ä»ç„¶ä¼šåœ¨æ³¥åœŸä¸­æŒ£æ‰ï¼Œç”¨æ£å­æ‰“æ¶ï¼Œæ¯å¤©å¿™ç€ç”Ÿç«ã€‚æˆ‘çš„æ•´ä¸ªä»·å€¼ä½“ç³»éƒ½æ˜¯å›´ç»•ç€ç§‘å­¦å®¶å»ºç«‹çš„ï¼Œæˆ‘æƒ³æˆä¸ºä¸€åä¼Ÿå¤§çš„ç§‘å­¦å®¶ã€‚</p>
<p>ä½†å½“æˆ‘çœŸæ­£å›å¤´çœ‹æˆ‘æ“…é•¿çš„ä¸œè¥¿ï¼Œä»¥åŠæˆ‘æœ€ç»ˆæŠŠæ—¶é—´èŠ±åœ¨äº†ä»€ä¹ˆäº‹æƒ…ä¸Šæ—¶ï¼Œæˆ‘å‘ç°æ›´å¤šçš„æ˜¯å›´ç»•ç€èµšé’±ï¼Œé’»ç ”æŠ€æœ¯ï¼Œå–ä¸œè¥¿ï¼ˆæ€æƒ³ï¼‰ï¼Œè§£é‡Šäº‹æƒ…ï¼Œå’Œäººä»¬äº¤è°ˆã€‚æ‰€ä»¥ï¼Œæˆ‘æœ‰ä¸€äº›é”€å”®æŠ€å·§ï¼Œè¿™æ˜¯ä¸€ç§å½¢å¼çš„å…·ä½“çŸ¥è¯†ï¼›æˆ‘æœ‰ä¸€äº›å…³äºå¦‚ä½•èµšé’±çš„åˆ†ææŠ€å·§ï¼›æˆ‘å¯¹æ•°æ®è¶³å¤Ÿæ•æ„Ÿï¼Œæœ‰æ”¶é›†æ•°æ®ï¼Œæ•´ç†å¹¶åˆ†ææ•°æ®çš„èƒ½åŠ›ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘çš„ä¸€ä¸ªç‰¹æ®ŠæŠ€èƒ½ã€‚å½“ç„¶æˆ‘ä¹Ÿå–œæ¬¢æ‘†å¼„æŠ€æœ¯ã€‚æ‰€æœ‰è¿™äº›å¯¹æˆ‘æ¥è¯´éƒ½åƒæ˜¯æ¸¸æˆï¼Œä½†å¯¹å…¶ä»–äººæ¥è¯´å´æ˜¯å·¥ä½œã€‚</p>
<p>æœ‰äº›äººä¼šè§‰å¾—è¿™äº›äº‹æƒ…å¾ˆéš¾ï¼Œä»–ä»¬ä¼šè¯´ï¼Œâ€œå¥½å§ï¼Œæˆ‘æ€ä¹ˆæ‰èƒ½å˜å¾—å–„äºè¡¨è¾¾å’Œæ¨é”€æƒ³æ³•å‘¢?â€å¦‚æœä½ ä¸æ˜¯å¾ˆæ“…é•¿ï¼Œæˆ–è€…ä½ ä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œä¹Ÿè®¸è¿™ä¸æ˜¯ä½ çš„ä¸“é•¿ï¼Œä¸“æ³¨äºä½ çœŸæ­£å–œæ¬¢çš„äº‹æƒ…ã€‚</p>
<p>æœ‰ç‚¹è®½åˆºçš„æ˜¯ï¼Œç¬¬ä¸€ä¸ªæŒ‡å‡ºæˆ‘çœŸæ­£æ“…é•¿ä»€ä¹ˆçš„äººæ˜¯æˆ‘çš„æ¯äº²ã€‚å¥¹æ˜¯åœ¨å¨æˆ¿é‡Œè¯´è¿™äº›è¯çš„ï¼Œå½“æ—¶æˆ‘å¤§æ¦‚15ã€16å²ã€‚å½“æˆ‘åœ¨å’Œä¸€ä¸ªæœ‹å‹è¯´æˆ‘æƒ³æˆä¸ºä¸€åå¤©ä½“ç‰©ç†å­¦å®¶ï¼Œå¥¹è¯´ï¼šâ€œä¸ï¼Œä½ æ›´é€‚åˆå»ç»å•†ã€‚â€</p>
<p>æˆ‘ä¸€è„¸æ‡µé€¼ï¼Œâ€œå•¥ï¼Ÿæˆ‘å¦ˆå¦ˆä¸çŸ¥é“å¥¹åœ¨è¯´ä»€ä¹ˆå§ã€‚â€</p>
<p><strong>ä½†äº‹å®ä¸Šï¼Œå¦ˆå¦ˆå½“ç„¶çŸ¥é“å¥¹åœ¨è¯´ä»€ä¹ˆ</strong>ã€‚å¥¹å·²ç»æ³¨æ„åˆ°ï¼Œæ¯æ¬¡æˆ‘ä»¬èµ°åœ¨è¡—ä¸Šï¼Œæˆ‘éƒ½ä¼šæ‰¹è¯„å½“åœ°çš„æŠ«è¨åº—ï¼Œä¸ºä»€ä¹ˆä»–ä»¬è¦ç”¨ç‰¹å®šçš„é…æ–™å’Œç‰¹å®šçš„æ–¹å¼å‡ºå”®æŠ«è¨ï¼Œä¸ºä»€ä¹ˆä»–ä»¬ç‚¹æŠ«è¨çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼Œè€Œå®é™…ä¸Šåº”è¯¥æ˜¯é‚£æ ·çš„ã€‚å› æ­¤ï¼Œå¥¹çŸ¥é“æˆ‘å¯¹å•†ä¸šæ›´æœ‰å¥½å¥‡å¿ƒï¼Œåˆ°åæ¥ä¸æˆ‘å¯¹ç§‘å­¦çš„ç—´è¿·ç»“åˆèµ·æ¥ï¼Œåˆ›é€ äº†æŠ€æœ¯å’Œç§‘æŠ€ä¼ä¸šï¼Œæˆ‘æ‰å‘ç°äº†çœŸæ­£çš„è‡ªå·±ã€‚å› æ­¤ï¼Œä½ çš„ç‰¹æ®ŠæŠ€èƒ½å¯èƒ½æ˜¯ç”±é‚£äº›äº†è§£ä½ çš„äººè§‚å¯Ÿåˆ°çš„ï¼Œè€Œä¸”ç»å¸¸æ˜¯ç”±é‚£äº›äº†è§£ä½ çš„äººè§‚å¯Ÿåˆ°çš„ã€‚</p>
<h2>ç¬¬åå››æ¡ï¼šç‰¹æ®ŠæŠ€èƒ½ï¼ˆspecific knowledgeï¼‰æå¯Œåˆ›é€ æ€§æˆ–æŠ€æœ¯æ€§</h2>
<h3>ç‰¹æ®ŠæŠ€èƒ½èƒ½é€šè¿‡è¯¾ç¨‹ä¼ æˆè·å¾—</h3>
<p>Naval: å¦‚æœè¯´ç‰¹æ®ŠæŠ€èƒ½å¯ä»¥è¢«ä¼ æˆï¼Œé‚£å°±æ˜¯åœ¨å·¥ä½œä¸­ï¼Œé€šè¿‡å­¦å¾’åˆ¶ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ€å¥½çš„ä¼ä¸šã€æœ€å¥½çš„èŒä¸šæ˜¯å­¦å¾’æˆ–è‡ªå­¦çš„èŒä¸šï¼Œå› ä¸ºè¿™äº›éƒ½æ˜¯ç¤¾ä¼šè¿˜æ²¡æœ‰å¼„æ¸…æ¥šå¦‚ä½•åŸ¹è®­ä»¥åŠä½¿å…¶æ‰¹é‡è‡ªåŠ¨ç”Ÿäº§çš„äº‹æƒ…ã€‚è¿™æ–¹é¢çš„ç»å…¸ä¾‹å­æ˜¯æ²ƒä¼¦Â·å·´è²ç‰¹ä»å­¦æ ¡æ¯•ä¸šåå»æ‰¾äº†æœ¬æ°æ˜Â·æ ¼é›·å„å§†ã€‚æœ¬æ°æ˜Â·æ ¼é›·å„å§†ï¼ˆBenjamin Grahamï¼‰æ˜¯ã€Šèªæ˜çš„æŠ•èµ„è€…ã€‹ï¼ˆIntelligent Investorï¼‰ä¸€ä¹¦çš„ä½œè€…ï¼Œå¯ä»¥è¯´ä»–å°†ä»·å€¼æŠ•èµ„å‘å±•æˆäº†ä¸€å¥—ç†è®ºå¹¶å°†å…¶å‘æ‰¬å…‰å¤§ã€‚å·´è²ç‰¹å»æ‰¾äº†æœ¬æ°æ˜Â·æ ¼é›·å„å§†ï¼Œå¹¶ä¸»åŠ¨æå‡º<strong>å…è´¹</strong>ä¸ºä»–å·¥ä½œã€‚</p>
<p>ä½†æ ¼é›·å„å§†è¯´ï¼šâ€œä½ å¼€çš„ä»·æ ¼å¤ªé«˜äº†ï¼Œå…è´¹æ°æ°æ˜¯ä¸€ç§é«˜ä»·æ ¼ã€‚â€æ ¼é›·å„å§†è¯´å¾—æ²¡é”™ã€‚å°±åƒåæ¥1954å¹´æ—¶æ ¼é›·å„å§†å†³å®šè¦ä¸å·´è²ç‰¹å…±äº‹æ—¶ï¼ˆç»™äºˆä»–å­¦å¾’æœºä¼šï¼‰ï¼Œå·´è²ç‰¹ç»™ä»–å¤šå°‘é’±éƒ½ä¸ä¸ºè¿‡ã€‚</p>
<h3>ç‰¹æ®Šçš„æŠ€èƒ½å…·æœ‰é«˜åº¦çš„åˆ›é€ æ€§æˆ–è€…æŠ€æœ¯æ€§</h3>
<p>ç‰¹å®šçš„æŠ€èƒ½ä¹Ÿå¾€å¾€å…·æœ‰æŠ€æœ¯æ€§å’Œåˆ›é€ æ€§ã€‚å®ƒåœ¨æŠ€æœ¯çš„å‰æ²¿ï¼Œè‰ºæœ¯çš„å‰æ²¿ï¼Œäº¤æµçš„å‰æ²¿ã€‚å†ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä»Šå¤©ï¼Œäº’è”ç½‘ä¸Šæœ‰ä¸€äº›æ¢—ç‹èƒ½å¤Ÿåˆ›é€ å‡ºä»¤äººéš¾ä»¥ç½®ä¿¡çš„æ¢—ï¼Œå¹¶å°†è¿™ä¸€æƒ³æ³•ä¼ æ’­ç»™æ•°ç™¾ä¸‡äººã€‚æ–¯ç§‘ç‰¹Â·äºšå½“æ–¯ï¼ˆScott Adamsï¼‰å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œä»–é€šè¿‡æœ‰è¯´æœåŠ›çš„æ–‡å­—å’Œè§†é¢‘åšå‡ºå‡†ç¡®çš„é¢„æµ‹ï¼ŒåŸºæœ¬ä¸Šæ­£åœ¨æˆä¸ºä¸–ç•Œä¸Šæœ€å¯ä¿¡çš„äººä¹‹ä¸€ã€‚</p>
<p>è¿™æ˜¯ä»–å¤šå¹´æ¥ç§¯ç´¯èµ·æ¥çš„ç‰¹æ®ŠæŠ€èƒ½ï¼Œå› ä¸ºä»–å¹´è½»æ—¶å°±æ²‰è¿·äºå‚¬çœ ï¼Œä»–é€šè¿‡æ¼«ç”»å­¦ä¼šäº†å¦‚ä½•æ²Ÿé€šï¼Œå¹¶å¾ˆæ—©å°±å¼€å§‹ç”¨ç›´æ’­å¹³å°Periscopeï¼Œæ‰€ä»¥ä»–ä¸€ç›´åœ¨ç»ƒä¹ å’Œäººå¯¹è¯ï¼Œä»–è¯»è¿‡æ‰€æœ‰å…³äºè¿™ä¸ªè¯é¢˜çš„ä¹¦ï¼Œä»–å°†å·¥ä½œèå…¥åˆ°ç”Ÿæ´»çš„ç‚¹ç‚¹æ»´æ»´ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªåœ¨èŒä¸šç”Ÿæ¶¯ä¸­ç§¯ç´¯äº†ç‰¹æ®ŠæŠ€èƒ½çš„äººçš„ä¾‹å­ã€‚å®ƒå…·æœ‰é«˜åº¦çš„åˆ›é€ æ€§ï¼Œå®ƒå…·æœ‰æŠ€æœ¯æ€§çš„å…ƒç´ ï¼Œè€Œä¸”å®ƒæ°¸è¿œä¸ä¼šè¢«æœºå™¨è‡ªåŠ¨åŒ–æ‰€å–ä»£ã€‚
æ²¡æœ‰äººä¼šæŠŠè¿™ä¸€ç‚¹ä»ä»–èº«ä¸Šå¤ºèµ°ï¼Œå› ä¸ºæ–¯ç§‘ç‰¹Â·äºšå½“æ–¯ï¼ˆScott Adamsï¼‰ä¸ºäº†å‘å±•è‡ªå·±çš„å“ç‰Œä¹Ÿå°½å¿ƒå°½åŠ›ã€‚ä»–ç§¯æåœ°åˆ›ä½œDilbertç³»åˆ—å¡é€šç”»ã€å†™ä¹¦ï¼Œå¹¶æ‡‚å¾—å€ŸåŠ©Periscopeç›´æ’­å¹³å°çš„åª’ä½“ä¼˜åŠ¿è¿ä½œã€‚ä»–åœ¨è¿™ä¸ªå“ç‰Œä¸Šæ‹¥æœ‰å·¨å¤§çš„å½±å“åŠ›ï¼Œå¦‚æœä»–æƒ³åœ¨ç°æœ‰çš„åŸºç¡€ä¸Šåˆ›é€ æ›´å¤šçš„è´¢å¯Œï¼Œä»–ç°åœ¨ç§¯ç´¯çš„ä¸œè¥¿å°±ä»–çš„æ æ†ã€‚</p>
<h3>ç‰¹æ®Šçš„æŠ€èƒ½ç‰¹å®šäºä¸ªä½“å’Œæƒ…å¢ƒ</h3>
<p>Niviï¼šæˆ‘ä»¬åº”è¯¥ç§°ä¹‹ä¸ºç‹¬ç‰¹çš„çŸ¥è¯†è¿˜æ˜¯ç‰¹æ®Šçš„æŠ€èƒ½æ›´è´´åˆ‡ï¼Ÿ</p>
<p>Navalï¼š æˆ‘å¾ˆå°çš„æ—¶å€™å°±æå‡ºäº†è¿™ä¸ªæ¡†æ¶ï¼Œå½“æ—¶ç‰¹æ®Šçš„æŠ€èƒ½å°±ä¸€ç›´ä¼´éšç€æˆ‘ï¼Œæˆ‘æ²¡æœ‰å°è¯•æ”¹å˜å®ƒæ˜¯å› ä¸ºæˆ‘æ‰€å‘ç°çš„æ¯ä¸€ä¸ªæœ¯è¯­éƒ½ä»¥ä¸åŒçš„æ–¹å¼å¤¸å¤§å…¶è¯ã€‚è‡³å°‘ç‰¹æ®Šçš„æŠ€èƒ½ï¼ˆspecific knowledgeï¼‰è¿™ä¸ªè¯æ²¡è¢«è¿‡åº¦æ¶ˆè´¹ï¼Œå› æ­¤æˆ‘å¯ä»¥èµ‹äºˆä»–æ–°çš„å«ä¹‰ã€‚ç‹¬ç‰¹çŸ¥è¯†çš„é—®é¢˜æ˜¯ï¼Œæ˜¯çš„ï¼Œä¹Ÿè®¸å®ƒæ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»åˆ«äººé‚£é‡Œå­¦åˆ°å®ƒï¼Œå®ƒå°±ä¸å†æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œé‚£ä¹ˆå°±æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“çš„ä¸œè¥¿äº†ã€‚æ‰€ä»¥ï¼Œä¸å…¶è¯´å®ƒæ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸å¦‚è¯´å®ƒæ˜¯é«˜åº¦ä¾é™„äºç°å®çš„ï¼Œæ ¹æ®ä¸ªä½“çš„å®é™…æƒ…å†µï¼Œæ ¹æ®å…·ä½“é—®é¢˜å­˜åœ¨çš„ï¼Œå®ƒåªèƒ½ä¾èµ–äºåœ¨è¿™ä¸ªé¢†åŸŸä¸­æåº¦çš„ç—´è¿·ã€å…´è¶£å’Œæ‰€èŠ±åœ¨è¿™ä¸ªé¢†åŸŸçš„æ—¶é—´æ¥è·å¾—ã€‚å®ƒä¸èƒ½ä»…ä»…ä»ä¸€æœ¬ä¹¦ä¸­ç›´æ¥è¯»å‡ºï¼Œä¹Ÿä¸èƒ½åœ¨åªåœ¨ä¸€é—¨è¯¾ç¨‹ä¸­è·å¾—ï¼Œä¹Ÿä¸èƒ½è¢«è®¾è®¡æˆä¸€ä¸ªç®—æ³•ã€‚</p>
<h3>ç‰¹æ®ŠæŠ€èƒ½ä¸èƒ½åˆ»æ„è·å¾—</h3>
<p>Niviï¼šè¯´åˆ°æ–¯ç§‘ç‰¹Â·äºšå½“æ–¯ï¼Œä»–åœ¨åšå®¢ä¸Šå‘è¡¨è¿‡ä¸€ç¯‡æ–‡ç« å«åšã€ŒåŠªåŠ›åœ¨2ä¸ªæˆ–ä»¥ä¸Šçš„é¢†åŸŸåšåˆ°å‰25%ã€çš„æ–‡ç« ã€‚åœ¨æ­¤æ‘˜å½•ä¸€æ®µï¼š</p>
<blockquote>
<p>å¦‚æœä½ æƒ³è¦ä¸€ä¸ªæ™®é€šçš„æˆåŠŸçš„ç”Ÿæ´»ï¼Œä¸éœ€è¦å¤ªå¤šçš„è®¡åˆ’ã€‚åªè¦è¿œç¦»éº»çƒ¦ï¼Œå»ä¸Šå­¦ï¼Œç”³è¯·ä½ å¯èƒ½å–œæ¬¢çš„å·¥ä½œã€‚ä½†å¦‚æœä½ æƒ³è¦ä¸ä¼—ä¸åŒçš„ä¸œè¥¿ï¼Œä½ æœ‰ä¸¤æ¡è·¯:</p>
<ol>
<li>æˆä¸ºæŸæ–¹é¢çš„æœ€ç‰›é€¼çš„äººï¼ˆä¸–ç•Œç¬¬ä¸€æ¢¯é˜Ÿï¼‰</li>
<li>åœ¨ä¸¤ä»¶æˆ–ä¸¤ä»¶ä»¥ä¸Šçš„äº‹æƒ…ä¸Šå˜å¾—éå¸¸ä¼˜ç§€(å‰25%)ã€‚</li>
</ol>
<p>ç¬¬ä¸€ç§ç­–ç•¥å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚å¾ˆå°‘æœ‰äººèƒ½åœ¨NBAæ‰“çƒï¼Œä¹Ÿå¾ˆå°‘æœ‰äººèƒ½å‡ºä¸€å¼ ç™½é‡‘å”±ç‰‡ã€‚çœŸçš„å¾ˆéš¾ï¼Œæˆ‘ä¸å»ºè®®ä»»ä½•äººå»å°è¯•ã€‚</p>
<p>ç¬¬äºŒç§ç­–ç•¥ç›¸å½“ç®€å•ã€‚æ¯ä¸ªäººéƒ½è‡³å°‘æœ‰å‡ ä¸ªé¢†åŸŸæ˜¯ä»–ä»¬å¯ä»¥åŠªåŠ›è¿›å…¥å‰25%çš„ã€‚å°±æˆ‘è€Œè¨€ï¼Œæˆ‘æ¯”å¤§å¤šæ•°äººç”»å¾—éƒ½å¥½ï¼Œä½†æˆ‘ç®—ä¸ä¸Šè‰ºæœ¯å®¶ã€‚æˆ‘å¹¶ä¸æ¯”ä¸€èˆ¬çš„å•å£ç›¸å£°æ¼”å‘˜æ›´å¹½é»˜ï¼Œè™½ç„¶æˆ‘ä»æ¥æ²¡æœ‰æˆåŠŸè¿‡ï¼Œä½†æˆ‘æ¯”å¤§å¤šæ•°äººéƒ½æ›´å¹½é»˜ã€‚ç¥å¥‡çš„æ˜¯ï¼Œå¾ˆå°‘æœ‰äººèƒ½ç”»å¾—å¾ˆå¥½ï¼Œä¹Ÿå¾ˆå°‘æœ‰äººèƒ½å†™ç¬‘è¯ã€‚æ­£æ˜¯è¿™ä¸¤è€…çš„ç»“åˆï¼Œè®©æˆ‘çš„ä½œå“å˜å¾—å¦‚æ­¤ç½•è§ã€‚å½“ä½ å†åŠ ä¸Šæˆ‘çš„å•†ä¸šèƒŒæ™¯ï¼Œæˆ‘çªç„¶æœ‰äº†ä¸€ä¸ªå¾ˆå°‘æœ‰æ¼«ç”»å®¶ä¸äº²èº«ç»å†å°±èƒ½ç†è§£çš„è¯é¢˜ã€‚</p>
<p>æˆ‘æ€»æ˜¯å»ºè®®å¹´è½»äººæˆä¸ºä¼˜ç§€çš„æ¼”è¯´å®¶(å‰25%)ã€‚ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡ç»ƒä¹ æ¥åšè¿™ä»¶äº‹ã€‚å¦‚æœä½ æŠŠè¿™ç§æ‰èƒ½åŠ åˆ°å…¶ä»–ä»»ä½•ä¸€ç§æ‰èƒ½ä¸Šï¼Œä½ å°±ä¼šçªç„¶æˆä¸ºé‚£äº›åªæœ‰ä¸€ç§æ‰èƒ½çš„äººçš„è€æ¿ã€‚æˆ–è€…åœ¨ä½ çš„å·¥ç¨‹å­¦ä½ã€æ³•å¾‹å­¦ä½ã€åŒ»å­¦å­¦ä½ã€ç§‘å­¦å­¦ä½æˆ–å…¶ä»–ä»»ä½•å­¦ä½çš„åŸºç¡€ä¸Šå†è·å¾—ä¸€ä¸ªå•†å­¦å­¦ä½ã€‚çªç„¶ä¹‹é—´ï¼Œä½ æŒæ¡äº†ä¸»åŠ¨æƒï¼Œæˆ–è€…ä½ æ­£åœ¨åˆ©ç”¨è‡ªå·±çš„ç»¼åˆçŸ¥è¯†åˆ›åŠè‡ªå·±çš„å…¬å¸ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œä¸è¦è¯•å›¾åœ¨ä¸€ä»¶äº‹æƒ…ä¸Šåšåˆ°æœ€å¥½ï¼Œè¿™å¤ªéš¾äº†ã€‚ä½ éœ€è¦å°è¯•åœ¨ä¸‰ä»¶æˆ–æ›´å¤šçš„äº‹æƒ…ä¸Šåšåˆ°éå¸¸ä¼˜ç§€ã€‚è¿™æ˜¯ä¸€ç§è·å¾—ç‰¹æ®ŠæŠ€èƒ½çš„æ–¹å¼å—ï¼Ÿ</p>
<p>Navalï¼šæˆ‘è®¤ä¸ºæœ€å¥½çš„æ–¹æ³•å°±æ˜¯è¿½éšè‡ªå·±çš„å†…å¿ƒçœŸæ­£å–œæ¬¢çš„äº‹ç‰©ã€‚åœ¨ä½ è„‘æµ·çš„æŸä¸ªè§’è½ï¼Œä½ ä¼šæ„è¯†åˆ°ï¼Œäº‹å®ä¸Šï¼Œè¿™ä¸ªæ–¹é¢æˆ‘å–œæ¬¢ï¼Œæˆ‘ä¼šç•™æ„å®ƒçš„å•†ä¸šæ–¹é¢çš„å¯èƒ½æ€§ã€‚</p>
<p>ä½†æˆ‘è®¤ä¸ºï¼Œå¦‚æœä½ å•å•ä¸ºäº†è·å¾—ã€Œç‰¹æ®ŠæŠ€èƒ½ã€æ— ç—…ä¹±æŠ•åŒ»ï¼Œæˆ–è¿‡äºä»¥ç›®æ ‡ä¸ºå¯¼å‘åœ°å…³æ³¨é’±ï¼Œé‚£ä¹ˆä½ ä¸ä¼šé€‰æ‹©åšæ­£ç¡®çš„äº‹æƒ…ï¼Œä¸ä¼šé€‰æ‹©ä½ å–œæ¬¢åšçš„äº‹ï¼Œæ‰€ä»¥ä½ ä¸ä¼šçœŸæ­£æ·±å…¥è¿›å»ã€‚æ ¹æ®ç»Ÿè®¡æ•°æ®ï¼Œæ–¯ç§‘ç‰¹ãƒ»äºšå½“æ–¯çš„è§‚å¯Ÿç»“æœå¾ˆå‡†ã€‚å°±çŸ¥è¯†è€Œè¨€ï¼Œä»Šå¤©æœ‰ 10,000 ä¸ªå¯¹äººç±»æœ‰ä»·å€¼çš„åŒºåŸŸï¼Œè¿™ 10,000 ä¸ªåŒºåŸŸä¸­æ’åç¬¬ä¸€é‚£äº›ä½ç½®å·²ç»è¢«æŠ¢å äº†ã€‚é™¤éä½ ç¢°å·§æˆä¸ºå„ç§é¢†åŸŸæœ€ç—´è¿·çš„ä¸€ä¸‡äººä¹‹ä¸€ï¼Œå¦åˆ™å…¶ä»–äººå¯èƒ½ä¼šæˆä¸ºè¿™ä¸‡äººä¸­çš„ç¬¬ä¸€äººã€‚</p>
<p>å½“ä½ å¼€å§‹æŠŠ3728ç§ä¸€æµçš„é”€å”®æŠ€å·§å’Œå¾ˆå¥½çš„å†™ä½œæŠ€å·§ä»¥åŠä¸€ä¸ªéå¸¸äº†è§£ä¼šè®¡å’Œè´¢åŠ¡çš„äººç»“åˆèµ·æ¥ï¼Œå½“è¿™ä¸ªäº¤å‰ç‚¹çš„éœ€æ±‚åˆ°æ¥æ—¶ï¼Œä½ å·²ç»é€šè¿‡ç»„åˆæ•°å­¦ä»10000æ‰©å±•åˆ°äº†æ•°ç™¾ä¸‡æˆ–æ•°åƒä¸‡ã€‚æ‰€ä»¥ï¼Œå®ƒåªæ˜¯å˜å¾—æ²¡æœ‰ç«äº‰åŠ›ã€‚æ­¤å¤–ï¼Œæ”¶ç›Šåœ¨é€’å‡ã€‚å› æ­¤ï¼Œåœ¨ä¸‰å››ä»¶äº‹ä¸Šæˆä¸ºå‰25%è¦æ¯”åœ¨æŸä»¶äº‹ä¸Šæˆä¸ºä¸–ç•Œç¬¬ä¸€å®¹æ˜“å¾—å¤šã€‚</p>
<h3>åœ¨ä½ æ“…é•¿å¾—é¢†åŸŸå»ºç«‹è‡ªå·±çš„ç‰¹æ®ŠæŠ€èƒ½</h3>
<p>naturalæ˜¯å¤©ç”Ÿçš„ã€æœ¬æ¥çš„æ„æ€ï¼Œè¿™é‡Œç¿»è¯‘æˆæ“…é•¿çš„ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸åŠ¡å®çš„æ–¹æ³•ã€‚ä½†æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘è®¤ä¸ºä¸€ä¸ªäººä¸è¦å¤ªåˆ»æ„åœ°å¼€å§‹ç§¯ç´¯ï¼Œå› ä¸ºä½ å†…å¿ƒå…¶å®æ˜¯æƒ³æŒ‘é€‰ä½ æœ€æ“…é•¿çš„ä¸œè¥¿ã€‚æ¯ä¸ªäººéƒ½æœ‰ä¸ç”Ÿä¿±æ¥çš„æ“…é•¿çš„ä¸œè¥¿ã€‚</p>
<p>æˆ‘ä»¬éƒ½å¾ˆç†Ÿæ‚‰è¿™å¥è¯ï¼Œä¸€ä¸ªæœ‰å¤©èµ‹çš„äººã€‚â€œå“¦ï¼Œè¿™ä¸ªäººæ˜¯å¤©ç”Ÿçš„ä¸äººä¸ºå–„çš„äººï¼Œè¿™ä¸ªäººå°±æ˜¯ç¤¾äº¤ååª›çš„æ–™ï¼Œè¿™ä¸ªäººæ˜¯å¤©ç”Ÿçš„ç¨‹åºå‘˜ï¼Œè¿™ä¸ªäººæ˜¯å¤©ç”Ÿçš„è¯»è€…ã€‚â€æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯å¹²ä»€ä¹ˆçš„æ–™ï¼Œä½ éƒ½ä¼šæƒ³ç€åœ¨è¿™æ–¹é¢åŠ å€åŠªåŠ›ã€‚</p>
<p>å› ä¸ºäººç±»çš„ä¸ªæ€§éå¸¸å¤æ‚ï¼Œä½ å¯èƒ½åœ¨å¾ˆå¤šæ–¹é¢éƒ½å¾ˆæœ‰å¤©èµ‹ã€‚å¦‚æœæŠŠä½ åœ¨è¿™äº›æ–¹é¢çš„å¤©èµ‹ç»“åˆèµ·æ¥ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è‡ªåŠ¨åœ°ï¼Œä»…ä»…é€šè¿‡çº¯ç²¹çš„å…´è¶£å’Œäº«å—ï¼Œåœ¨å¾ˆå¤šäº‹æƒ…ä¸Šï¼Œæœ€ç»ˆè¾¾åˆ°25%ï¼Œ10%ç”šè‡³5%çš„æœ€é«˜æ°´å¹³ã€‚</p>
<h2>ç¬¬åäº”æ¡ï¼šå­¦ä¼šé”€å”®ï¼Œå­¦ä¼šå»ºé€ </h2>
<p><strong>å¦‚æœä½ ä¸¤è€…éƒ½èƒ½åšåˆ°ï¼Œä½ å°†åŠ¿ä¸å¯æŒ¡</strong></p>
<h3>å­¦ä¼šé”€å”®ï¼Œå­¦ä¼šå»ºé€ </h3>
<p>Niviï¼šè°ˆåˆ°æŠ€èƒ½ç»„åˆï¼Œä½ è¯´è¿‡ä½ åº”è¯¥â€œå­¦ä¼šé”€å”®ï¼ˆSaleï¼‰ï¼Œå­¦ä¼šå»ºé€ ï¼ˆBuildï¼‰ï¼Œå¦‚æœä½ ä¸¤è€…éƒ½èƒ½åšåˆ°ï¼Œä½ å°†åŠ¿ä¸å¯æŒ¡ã€‚â€</p>
<p>Navalï¼šè¿™æ˜¯ä¸€ä¸ªéå¸¸å¹¿æ³›çš„èŒƒç•´ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯å¼€å‘äº§å“ï¼Œå³å»ºé€ ã€‚è¿™å¾ˆéš¾ï¼Œè€Œä¸”å®šä¹‰å¾ˆå¤šå…ƒã€‚å®ƒå¯ä»¥åŒ…æ‹¬è®¾è®¡ï¼Œå¼€å‘ï¼Œå¯ä»¥åŒ…æ‹¬åˆ¶é€ ï¼Œç‰©æµï¼Œé‡‡è´­ï¼Œç”šè‡³æ˜¯è®¾è®¡å’Œå®Œæˆä¸€æ•´å¥—æœåŠ¡ã€‚åœ¨æ¯ä¸ªè¡Œä¸šï¼Œéƒ½æœ‰ä¸€ä¸ªå»ºé€ è€…çš„å®šä¹‰ã€‚åœ¨æˆ‘ä»¬æ‰€å¤„çš„ç§‘æŠ€è¡Œä¸šï¼Œå°±æ˜¯é¦–å¸­æŠ€æœ¯å®˜CTOï¼Œç¨‹åºå‘˜ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œç¡¬ä»¶å·¥ç¨‹å¸ˆã€‚ä½†å³ä½¿åœ¨æ´—è¡£è¡Œä¸šï¼Œä¹Ÿå¯èƒ½æ˜¯åˆ›ç«‹æ´—è¡£æœåŠ¡çš„äººï¼Œè®©ç‰©æµå‡†æ—¶åˆ°è¾¾çš„äººï¼Œç¡®ä¿æ‰€æœ‰çš„è¡£æœåœ¨æ­£ç¡®çš„æ—¶é—´å‡ºç°åœ¨æ­£ç¡®çš„åœ°æ–¹çš„äººï¼Œç­‰ç­‰ã€‚å¦ä¸€æ–¹é¢æ˜¯é”€å”®ã€‚åŒæ ·ï¼Œé”€å”®ä¹Ÿæœ‰ä¸€ä¸ªéå¸¸å®½æ³›çš„å®šä¹‰ã€‚é”€å”®ä¸ä¸€å®šåªæ„å‘³ç€å–ä¸œè¥¿ç»™ä¸ªäººï¼Œå®ƒå¯ä»¥æ„å‘³ç€è¥é”€ï¼Œæ„å‘³ç€æ²Ÿé€šï¼Œæ„å‘³ç€æ‹›è˜ã€‚å®ƒä¹Ÿå¯ä»¥æ„å‘³ç€ç­¹é›†èµ„é‡‘ï¼Œæ„å‘³ç€é¼“èˆäººå¿ƒï¼Œæ„å‘³ç€åšå…¬å…³ï¼Œç­‰ç­‰ã€‚</p>
<h3>ç¡…è°·æ¨¡å¼ï¼šå»ºé€ è€…+é”€å”®è€…=æœ€ä½³æ‹æ¡£</h3>
<p>æ€»çš„æ¥è¯´ï¼Œç¡…è°·çš„åˆ›ä¸šæ¨¡å¼æ˜¯æœ€å¥½çš„ã€‚æœ€å¸¸è§çš„å½¢å¼æ˜¯æœ‰ä¸¤ä¸ªåˆ›å§‹äººï¼Œå…¶ä¸­ä¸€ä¸ªæ“…é•¿é”€å”®ï¼ˆSaleï¼‰ï¼Œå¦ä¸€ä¸ªæ“…é•¿æ­å»ºï¼ˆBuildï¼‰ã€‚ä¸¾å‡ ä¸ªç»å…¸ä¾‹å­ï¼Œæ¯”å¦‚è‹¹æœåˆ›å§‹äººå²è’‚å¤«Â·ä¹”å¸ƒæ–¯å’Œå²è’‚å¤«Â·æ²ƒå…¹å°¼äºšå…‹ï¼›å¾®è½¯çš„ç›–èŒ¨å’Œè‰¾ä¼¦åœ¨æ—©æœŸå¯èƒ½æœ‰ç±»ä¼¼çš„åˆ†å·¥ï¼›è°·æ­Œçš„æ‹‰é‡Œå’Œè°¢å°”ç›–å¯èƒ½ç¨å¾®æœ‰ç‚¹ä¸åŒï¼Œå¯èƒ½æ˜¯å› ä¸ºè°·æ­Œæ—©æœŸäº¤ä»˜çš„æ˜¯ä¸€ä¸ªéå¸¸æŠ€æœ¯æ€§çš„äº§å“â€”â€”æœç´¢ï¼Œé€šè¿‡ä¸€ä¸ªç®€å•çš„UIç›´è¾¾ç»ˆç«¯ç”¨æˆ·ã€‚</p>
<p>åœ¨ç¡…è°·ï¼Œä½ ä¼šçœ‹åˆ°è¿™ç§æ¨¡å¼åå¤å‡ºç°ã€‚ä¸€ä¸ªå»ºé€ è€…å’Œä¸€ä¸ªé”€å”®è€…çš„ç»„åˆï¼šCTOå’ŒCEOçš„ç»„åˆã€‚é£é™©æŠ•èµ„è€…å’ŒæŠ€æœ¯æŠ•èµ„è€…å‡ ä¹å¿ƒç…§ä¸å®£çš„å°½å¯èƒ½åœ°å¯»æ‰¾è¿™ç§ç»„åˆï¼Œè¿™å°±æ˜¯ç¥å¥‡çš„ç»„åˆå®šå¾‹ã€‚</p>
<h3>å¦‚æœä½ ä¸¤è€…éƒ½èƒ½åšåˆ°ï¼Œä½ å°†åŠ¿ä¸å¯æŒ¡</h3>
<p>å¦‚æœä¸€ä¸ªäººå¯ä»¥åŒæ—¶åšåˆ°è¿™ä¸¤è€…ï¼Œè¿™æ‰æ˜¯çœŸæ­£çš„è¶…èƒ½åŠ›ã€‚é‚£æ—¶ä½ å°±æ˜¯å¯ä»¥åˆ›é€ æ•´ä¸ªè¡Œä¸šçš„äººã€‚é©¬ä¸€é¾™(Elon Musk)å°±æ˜¯ä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„ä¾‹å­ã€‚ä»–ä¸ä¸€å®šæ˜¯è‡ªå·±é€ ç«ç®­ï¼Œä½†ä»–å®é™…ä¸Šåšå‡ºäº†æŠ€æœ¯ä¸Šçš„è´¡çŒ®ã€‚ä»–ä½¿è‡ªå·±æˆä¸ºæœ€äº†è§£è¿™é¡¹æŠ€æœ¯çš„äººï¼Œæ²¡äººä¼šå¯¹ä»–è¯´ä¸‰é“å››ï¼Œä»–ä¹Ÿä¸ä¼šè¯´ä¸€äº›è‡ªå·±åšä¸åˆ°çš„äº‹ï¼ˆæ„æ€æ˜¯è¯´åˆ°å°±ä¼šåšåˆ°ï¼‰ã€‚ä»–è§†æ—¶é—´ä¸ºæœ‹å‹ï¼Œå¹¶æƒ³å°½åŠæ³•è¿ç”¨å®ƒã€‚å³ä½¿æ˜¯å²è’‚å¤«Â·ä¹”å¸ƒæ–¯ï¼ˆSteve Jobsï¼‰ä¹Ÿæ‹¥æœ‰è¶³å¤Ÿçš„äº§å“æŠ€èƒ½ï¼Œå¹¶ä¸”å¯¹äº§å“çš„å‚ä¸åº¦ä¹Ÿå¾ˆé«˜ï¼Œå®é™…ä¸Šä»–ä¹ŸåŒæ—¶å…·å¤‡è¿™ä¸¤ç§èƒ½åŠ›ã€‚æ‹‰é‡ŒÂ·åŸƒé‡Œæ£®ï¼ˆLarry Ellisonï¼‰æœ€åˆæ˜¯ä¸€åç¨‹åºå‘˜ï¼Œä»–ç¼–å†™äº†Oracleçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œæˆ–è€…è¯´ä»–æ·±åº¦å‚ä¸å…¶ä¸­ã€‚é©¬å…‹Â·å®‰å¾·æ£®ï¼ˆMarc Andreessenï¼‰ä¹Ÿå±äºè¿™ä¸€ç±»ã€‚ä»–å¯èƒ½å¯¹è‡ªå·±çš„é”€å”®æŠ€èƒ½æ²¡æœ‰è¶³å¤Ÿçš„ä¿¡å¿ƒï¼Œä½†æ˜¯ä»–å¯æ˜¯å†™å‡ºNetscape Navigatorçš„ç¨‹åºå‘˜ï¼Œæˆ–è€…è‡³å°‘æ˜¯å…¶ä¸­å¾ˆå¤§çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œæˆ‘è®¤ä¸ºåœ¨ä»»ä½•é¢†åŸŸä¸­çœŸæ­£çš„å·¨äººå°±æ˜¯å¯ä»¥ã€Œè‡ªäº§è‡ªé”€ã€çš„äººã€‚</p>
<h3>å®æ„¿æ•™å·¥ç¨‹å¸ˆé”€å”®ï¼Œä¹Ÿä¸æ„¿æ•™è¥é”€äººå‘˜å·¥ç¨‹ï¼Ÿ</h3>
<p>æˆ‘è®¤ä¸ºä½ å¯ä»¥ä»å»ºé€ æŠ€èƒ½å¼€å§‹å…¥æ‰‹ï¼Œå¹¶åœ¨ä½ äººç”Ÿçš„æ—©æœŸå°½é‡æŒæ¡ä¸€å®šçš„å»ºé€ æŠ€èƒ½ã€‚æˆ–è€…ä½ æœ‰è¶³å¤Ÿçš„æ—¶é—´å¯ä»¥ä¸“å¿ƒåœ°å­¦ä¹ é”€å”®ï¼Œè€Œä¸”ä½ æ­£å¥½æœ‰ä¸€å®šçš„å¤©èµ‹å’Œäº²å’ŒåŠ›ä¿ƒä½¿ä½ æˆä¸ºä¸€ä¸ªå¥½çš„é”€å”®è€…ã€‚è¿™æ ·ä½ åšäº‹çš„æ•ˆæœå¯ä»¥ç¿»ç•ªã€‚
ç°åœ¨æˆ‘ä»¬è°ˆåˆ°çš„é”€å”®æŠ€èƒ½å¯èƒ½ä¸åŒäºä¼ ç»Ÿæ¦‚å¿µä¸­çš„ï¼Œå–ä¸œè¥¿ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„å·¥ç¨‹å¸ˆï¼Œç„¶åäººä»¬ä¼šè¯´ï¼Œä½ éœ€è¦æ“…é•¿é”€å”®ã€‚ä½ å¯èƒ½ä¸æ“…é•¿ä¸Šé—¨æ¨é”€ä¸œè¥¿ï¼Œä½†ä½ å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä½œå®¶ã€‚å†™ä½œæ˜¯ä¸€ç§æ¯”é¢å¯¹é¢é”€å”®é—¨æ§›æ›´ä½çš„æŠ€èƒ½ï¼Œæ‰€ä»¥ä½ å¯ä»¥åŸ¹å…»å†™ä½œæŠ€èƒ½ï¼Œç›´åˆ°ä½ æˆä¸ºä¸€ä¸ªè‰¯å¥½çš„åœ¨çº¿äº¤æµè€…ï¼Œç„¶åå°†å…¶è¿ç”¨åœ¨ä½ çš„é”€å”®ä¸Šã€‚å¦ä¸€ç§æƒ…å†µï¼Œä½ å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å»ºé€ è€…ï¼Œä½†ä½ ä¸æ“…é•¿å†™ä½œï¼Œä½ ä¸å–œæ¬¢ä¸å¤§ä¼—æ²Ÿé€šï¼Œä½†ä½ æ“…é•¿ä¸€å¯¹ä¸€è¯´æœï¼Œæ‰€ä»¥ä½ å¯èƒ½ä¼šç”¨ä½ çš„é”€å”®æŠ€èƒ½æ¥æ‹›è˜æˆ–å‹Ÿèµ„ï¼Œè¿™éœ€è¦æ›´å¤šä¸€å¯¹ä¸€æ–¹å‘çš„åŠªåŠ›ã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœä½ åœ¨è¿™ä¸¤ä¸ªé¢†åŸŸçš„åå­—è·¯å£ï¼Œåƒä¸‡ä¸è¦ç»æœ›ã€‚å› ä¸ºä½ ä¸å¯èƒ½æˆä¸ºæœ€å¥½çš„æŠ€æœ¯ï¼Œä¹Ÿä¸ä¼šæ˜¯æœ€å¥½çš„é”€å”®äººå‘˜ã€‚ä½†ç¥å¥‡çš„æ˜¯ï¼Œæˆ‘ä»¬å†å›åˆ°æ–¯ç§‘ç‰¹Â·äºšå½“æ–¯ï¼ˆScott Adamsï¼‰çš„æŠ€èƒ½ç»„åˆç†è®ºï¼Œå°†ä¸¤ä¸ªæŠ€èƒ½æ˜¯ç»“åˆå°†æ˜¯ä¸å¯é˜»æŒ¡çš„ã€‚</p>
<p>ä»é•¿è¿œæ¥çœ‹ï¼Œé‚£äº›äº†è§£æ½œåœ¨éœ€æ±‚äº§å“çš„äººï¼ŒçŸ¥é“å¦‚ä½•å»ºé€ å’Œé”€å”®å®ƒçš„äººï¼Œæœ€èƒ½å—åˆ°é¡¶å°–æŠ•èµ„è€…çš„é’çã€‚å¦‚æœä»–ä»¬æœ‰è¶³å¤Ÿçš„ç²¾åŠ›ï¼Œä»–ä»¬å¯ä»¥çªç ´ä»»ä½•éšœç¢ï¼Œåšæˆä»»ä½•äº‹æƒ…ã€‚</p>
<p>Niviï¼šå¦‚æœä½ åªèƒ½é€‰ä¸€ä¸ªæ“…é•¿çš„ï¼Œä½ ä¼šé€‰å“ªä¸€ä¸ª?</p>
<p>Navalï¼šæŠ›å¼€å™ªéŸ³æ¥è¯´ï¼Œå»ºé€ çš„æŠ€èƒ½å®é™…ä¸Šæ˜¯æ›´å¥½çš„ï¼Œå› ä¸ºå¸‚åœºä¸Šå……æ–¥ç€å¤ªå¤šçš„éª—å­å’Œæ²¡æœ‰ä»»ä½•å†…æ ¸çš„é”€å”®äººå‘˜ã€‚å½“ä½ åˆšèµ·æ­¥ã€æƒ³è¦è¢«è®¤å¯çš„æ—¶å€™ï¼Œå»ºé€ æŠ€èƒ½ä¼šæ›´å¥½ã€‚ä½†æ˜¯ä¹‹åçš„å»ºé€ ä¼šå¾ˆç´¯ï¼Œå› ä¸ºè¿™æ˜¯ä¸€é¡¹ä¸“æ³¨çš„å·¥ä½œï¼Œå¾ˆéš¾ä¿æŒä¸æ—¶ä¿±è¿›ï¼Œå› ä¸ºæ€»æ˜¯ä¼šæœ‰æ–°äººå‡ºç°ï¼Œæœ‰æ–°äº§å“ï¼Œæœ‰æ›´æ–°çš„å·¥å…·ã€‚</p>
<p>å› æ­¤ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œé”€å”®æŠ€å·§å®é™…ä¸Šæ›´å®¹æ˜“äº§ç”Ÿè§„æ¨¡æ•ˆåº”ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ åœ¨æ„å»ºäº§å“ä¸Šäº«æœ‰å£°èª‰ï¼Œè¿™æ˜¯å¥½çš„ï¼Œä½†å½“ä½ æ¨å‡ºä½ çš„æ–°äº§å“æ—¶ï¼Œæˆ‘å°†å»éªŒè¯çš„æ˜¯äº§å“æœ¬èº«ï¼ˆæ„æ€æ˜¯å’Œå»ºé€ çš„åå£°å…³ç³»ä¸å¤§ï¼‰ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ åœ¨å¤§å®¶çš„çœ¼ä¸­æ˜¯ä¸€ä¸ªå€¼å¾—ä¿¡èµ–çš„ç”Ÿæ„ä¼™ä¼´ï¼Œå¹¶ä¸”ä½ å¾ˆæœ‰è¯´æœåŠ›ï¼Œå–„äºæ²Ÿé€šï¼Œé‚£ä¹ˆè¿™ä¸ªåå£°ä¼šè®©å¾ˆå¤šäº‹å˜å¾—å®¹æ˜“å¾ˆå¤šã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘è®¤ä¸ºå¦‚æœä½ éœ€è¦é€‰ä¸€ä¸ªï¼Œ<strong>ä½ å¯ä»¥ä»å»ºé€ å¼€å§‹ï¼Œç„¶åè¿‡æ¸¡åˆ°é”€å”®</strong>ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¸­åº¸çš„ç­”æ¡ˆï¼Œä½†æˆ‘è§‰å¾—è¿™å¥æ˜¯å¤§å®è¯ã€‚</p>
<h2>ç¬¬åå…­æ¡ï¼šé˜…è¯»ä½ æ‰€çƒ­çˆ±çš„å†…å®¹ ç›´åˆ°ä½ çˆ±ä¸Šé˜…è¯»</h2>
<p><strong>ä½ åº”è¯¥å¯ä»¥åœ¨å›¾ä¹¦é¦†ä¸­æ‹¿èµ·ä»»ä½•ä¸€æœ¬ä¹¦é˜…è¯»</strong></p>
<h3>é˜…è¯»ä½ æ‰€çƒ­çˆ±çš„å†…å®¹ ç›´åˆ°ä½ çˆ±ä¸Šé˜…è¯»</h3>
<p>Niviï¼šåœ¨æˆ‘ä»¬è®¨è®ºè´£ä»»ã€å½±å“åŠ›å’Œåˆ¤æ–­ä¹‹å‰ï¼Œä½ å·²ç»æœ‰äº†ä¸€äº›ç›¸å…³çš„æ¨ç‰¹ï¼Œæˆ‘ä¼šæŠŠå®ƒä»¬æ”¾åœ¨æŒç»­å­¦ä¹ çš„èŒƒç•´ã€‚è¿™äº›æ¨æ–‡æœ¬è´¨ä¸Šæ˜¯åœ¨è¯´ï¼Œâ€œæ²¡æœ‰æ‰€è°“çš„å•†ä¸šæŠ€èƒ½ã€‚å°‘è¯»å•†ä¸šæ‚å¿—å’Œå•†ä¸šè¯¾ç¨‹ï¼Œå­¦ä¹ å¾®è§‚ç»æµå­¦ã€åšå¼ˆè®ºã€å¿ƒç†å­¦ã€è¯´æœåŠ›ã€ä¼¦ç†å­¦ã€æ•°å­¦å’Œè®¡ç®—æœºâ€ã€‚ä½ åœ¨Periscopeä¸Šè¿˜å‘è¡¨äº†å¦ä¸€æ¡è¯„è®ºâ€œä½ åº”è¯¥å¯ä»¥ä»å®¹çš„æ‹¿èµ·å›¾ä¹¦é¦†é‡Œçš„ä»»ä½•ä¸€æœ¬ä¹¦æ¥è¯»ã€‚â€è¿™ä¸€ç±»çš„æœ€åä¸€æ¡æ¨ç‰¹æ˜¯ï¼Œâ€œé˜…è¯»æ¯”å¬å¿«ï¼Œåšæ¯”çœ‹å¿«â€ã€‚</p>
<p>Navalï¼šæ˜¯çš„ï¼Œè¿™æ˜¯æœ€é‡è¦çš„ä¸€æ¡ï¼Œå› ä¸ºå­¦ä¹ çš„åŸºç¡€æ˜¯é˜…è¯»ã€‚æˆ‘è®¤è¯†çš„èªæ˜äººï¼Œä»–ä»¬éƒ½ç»å¸¸è¯»ä¹¦ã€‚</p>
<p>é—®é¢˜æ˜¯ï¼Œ<strong>æˆ‘è¯»ä»€ä¹ˆï¼Ÿæˆ‘æ€ä¹ˆè¯»</strong>ï¼Ÿå› ä¸ºå¯¹å¤§å¤šæ•°äººæ¥è¯´ï¼Œè¿™æ˜¯ä¸€åœºæ–—äº‰ï¼Œæ˜¯ä¸€ä»¶å®¶åŠ¡æ´»å„¿ã€‚ä½†æ˜¯ï¼Œè¯»ä¹¦ä¸æ˜¯ç›®çš„ï¼Œé‡è¦çš„æ˜¯å­¦ä¼šå¦‚ä½•æ•™è‚²è‡ªå·±ï¼Œæ•™è‚²è‡ªå·±çš„æ–¹æ³•å°±æ˜¯åŸ¹å…»å¯¹é˜…è¯»çš„çƒ­çˆ±ã€‚æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œâ€œ<strong>è¯»ä½ å–œæ¬¢çš„å†…å®¹ï¼Œç›´åˆ°ä½ çˆ±ä¸Šé˜…è¯»</strong>ã€‚â€å°±è¿™ä¹ˆç®€å•ã€‚</p>
<p>æˆ‘è®¤è¯†çš„æ¯ä¸€ä¸ªç»å¸¸è¯»ä¹¦çš„äººéƒ½â€œçˆ±â€é˜…è¯»ï¼Œä»–ä»¬çˆ±è¯»ä¹¦æ˜¯å› ä¸ºä»–ä»¬è¯»è‡ªå·±å–œæ¬¢çš„ä¹¦ã€‚è¿™æœ‰ç‚¹åƒç¬¬äºŒåäºŒæ¡ï¼Œé˜…è¯»æ˜¯æ²¡æœ‰é—¨æ§›çš„ï¼Œä½ å¯ä»¥éšæ—¶å¼€å§‹ï¼Œç„¶åä¸æ–­ç§¯ç´¯ï¼Œç›´åˆ°å®ƒæˆä¸ºä¸€ç§ä¹ æƒ¯ã€‚æ¥ç€ï¼Œä½ å¼€å§‹ä¸æ»¡è¶³äºåªæ¶‰çŒå•ä¸€çš„é¢†åŸŸã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ä»è¯»å°è¯´å¼€å§‹ï¼Œæ¥ç€ä½ å¯ä»¥è¯»ç§‘å¹»å°è¯´ï¼Œä½ å¯ä»¥è¯»éå°è¯´ï¼Œç„¶åä½ å¯ä»¥è¯»ç§‘å­¦ï¼Œå“²å­¦ï¼Œæ•°å­¦ç”šè‡³æ›´å¤šã€‚ä½†æ˜¯é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯é¡ºå…¶è‡ªç„¶éå¼ºè¿«çš„ï¼Œè¯»ä½ æ„Ÿå…´è¶£çš„ä¸œè¥¿ï¼Œç›´åˆ°ä½ ç†è§£å®ƒä»¬ã€‚ç„¶åä½ å°±ä¼šè‡ªç„¶è€Œç„¶åœ°è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå†ä¸‹ä¸€æ­¥ã€‚</p>
<h3>é˜…è¯»æŸä¸€é¢†åŸŸçš„ç§‘å­¦åŸè‘—</h3>
<p>ä½†æ˜¯ï¼Œä½ ä¼šå‘ç°åœ¨ä½ çœŸæ­£æƒ³å­¦çš„ä¸œè¥¿ä¸­ï¼Œæœ‰å¤ªå¤šä¸œè¥¿è¦è¯»ã€‚æˆ‘è¦æé†’çš„æ˜¯ï¼Œå³ä½¿æ˜¯é˜…è¯»ä¹Ÿå……æ»¡äº†åƒåœ¾ã€‚å®é™…ä¸Šæœ‰äº›ä¸œè¥¿ä½ å¯ä»¥é˜…è¯»ï¼Œç‰¹åˆ«æ˜¯åœ¨æ—©æœŸï¼Œ<strong>å®ƒä¼šä»¥æŸç§æ–¹å¼å¯¹ä½ çš„å¤§è„‘è¿›è¡Œç¼–ç¨‹</strong>ï¼Œç„¶ååœ¨ä½ é˜…è¯»çš„åæœŸï¼Œä½ ä¼šæ ¹æ®ä¹‹å‰çš„ä¸œè¥¿æ¥åˆ†è¾¨è¿™äº›ä¸œè¥¿æ˜¯çœŸæ˜¯å‡ã€‚å› æ­¤ï¼Œé˜…è¯»åŸºç¡€æ€§çš„ä¸œè¥¿æ˜¯å¾ˆé‡è¦çš„ã€‚åŸºç¡€æ€§çš„ä¸œè¥¿ï¼Œæ˜¯åœ¨ç‰¹å®šé¢†åŸŸæœ€åŸå§‹ï¼ˆfundamentalï¼‰ä¹¦ç±ï¼Œåœ¨æœ¬è´¨ä¸Šæ˜¯ç»è¿‡æ—¶é—´å’Œå†å²çš„æ£€éªŒï¼Œç§‘å­¦çš„ä¸œè¥¿ã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸å…¶è¯»ä¸€æœ¬å•†ä¸šç•…é”€ä¹¦ï¼Œä¸å¦‚è¯»äºšå½“Â·æ–¯å¯†çš„ã€Šå›½å¯Œè®ºã€‹ã€‚ä¸å…¶è¯»ä»Šå¤©è°å†™çš„ä¸€æœ¬å…³äºç”Ÿç‰©å­¦æˆ–è¿›åŒ–è®ºçš„ä¹¦ï¼Œæˆ‘æ›´æ„¿æ„è¯»è¾¾å°”æ–‡ã€Šç‰©ç§èµ·æºã€‹ã€‚ä¸å…¶ç°åœ¨è¯»ä¸€æœ¬å¯èƒ½éå¸¸å…ˆè¿›çš„ç”Ÿç‰©æŠ€æœ¯æ–¹é¢çš„ä¹¦ï¼Œæˆ‘åªæƒ³å­¦ä¹ Horace F. Judsonçš„ã€Šåˆ›ä¸–ç¬¬å…«å¤©ã€‹(The Eighth Day of Creation)ã€‚ä½ ä¸å¿…æ­»ç£•å…³äºå®‡å®™å­¦å’Œå°¼å°”Â·å¾·æ ¼æ‹‰æ–¯Â·æ³°æ£®å’Œæ–¯è’‚èŠ¬Â·éœé‡‘ä¸€ç›´åœ¨è¯´ä»€ä¹ˆçš„é«˜çº§ä¹¦ç±ï¼Œä½ éœ€è¦çš„æ˜¯æ‹¿èµ·ç†æŸ¥å¾·Â·è´¹æ›¼çš„ã€Šè´¹æ›¼è®²ç‰©ç†ï¼šå…¥é—¨ã€‹ï¼Œä»åŸºç¡€ç‰©ç†å­¦å¼€å§‹ã€‚</p>
<h3>ä¸è¦å®³æ€•ä»»ä½•ä¹¦</h3>
<p>å¦‚æœä½ åŸºç¡€æ‰“çš„å¥½ï¼Œç‰¹åˆ«æ˜¯æ•°å­¦ã€ç‰©ç†å’Œç§‘å­¦ï¼Œé‚£ä¹ˆä½ å°±ä¸ä¼šå®³æ€•ä»»ä½•ä¸€æœ¬ä¹¦ã€‚æˆ‘ä»¬æ‰€æœ‰äººéƒ½æœ‰é‚£ç§ååœ¨æ•™å®¤é‡Œå­¦æ•°å­¦çš„è®°å¿†ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯åˆä¹é€»è¾‘çš„ï¼Œè€Œä¸”éƒ½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œç›´åˆ°æœ‰ä¸€æ¬¡ï¼Œè¯¾ç¨‹è¿›åº¦å¤ªå¿«ï¼Œæˆ‘ä»¬è·Ÿä¸ä¸Šäº†ã€‚
åœ¨é‚£ä¹‹åï¼Œæˆ‘ä»¬è¢«ç•™ä¸‹æ¥èƒŒæ–¹ç¨‹å¼ï¼Œè®°å¿†æ¦‚å¿µï¼Œå´æ— æ³•ä»ç¬¬ä¸€åŸç†ä¸­æ¨å¯¼å‡ºå®ƒä»¬ã€‚åœ¨é‚£ä¸€åˆ»ï¼Œæˆ‘ä»¬è¿·å¤±äº†ï¼Œå› ä¸ºé™¤éä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ•°å­¦å®¶ï¼Œå¦åˆ™ä½ ä¸ä¼šè®°å¾—è¿™äº›ä¸œè¥¿ã€‚ä½ è¦è®°ä½çš„æ˜¯æŠ€æœ¯ï¼ŒåŸºç¡€ã€‚</p>
<p>å› æ­¤ï¼Œä½ å¿…é¡»ç¡®ä¿é˜…è¯»æ˜¯å»ºç«‹åœ¨ä¸€ä¸ªç†è§£çš„æ¡†æ¶ä¸Šï¼Œå› ä¸ºä½ æ­£åœ¨ä¸ºå»ºæ‘©å¤©å¤§æ¥¼æ‰“åœ°åŸºï¼Œè€Œä¸åªæ˜¯åœ¨åå¤è®°å¿†ä½ ä¸æ–­åœ¨ä¸¢å¤±çš„ä¸œè¥¿ã€‚æ‰€ä»¥åŸºç¡€éå¸¸é‡è¦ã€‚</p>
<p>æœ€åï¼Œé˜…è¯»çš„ç»ˆææ˜¯å½“ä½ èµ°è¿›ä¸€ä¸ªå›¾ä¹¦é¦†ï¼Œä½ ä¸Šä¸‹æ‰“é‡ï¼Œä½ ä¸å®³æ€•è¿™é‡Œçš„ä»»ä½•ä¸€æœ¬ä¹¦ã€‚å› ä¸ºä½ çŸ¥é“ä½ å¯ä»¥æŠŠä»»ä½•ä¸€æœ¬ä¹¦ä»ä¹¦æ¶ä¸Šæ‹¿ä¸‹æ¥ï¼Œä½ å°±èƒ½é˜…è¯»å®ƒï¼Œç†è§£å®ƒï¼Œä½ å¯ä»¥æ¥æ”¶ä»€ä¹ˆæ˜¯çœŸçš„ï¼Œæ‹’ç»ä»€ä¹ˆæ˜¯å‡çš„ã€‚ä½ æœ‰ä¸€å¥—è‡ªå·±çš„æ–¹æ³•è®ºï¼Œåˆ†è¾¨å“ªäº›æ˜¯é€»è¾‘å’Œç§‘å­¦çš„ï¼Œè€Œä¸ä»…ä»…æ˜¯åŸºäºå¤§å­—æŠ¥å’Œæ„è§ï¼ˆopinionsï¼‰ã€‚</p>
<h3>å­¦ä¹ çš„æ‰‹æ®µæ˜¯ä¸°å¯Œçš„ï¼Œå­¦ä¹ çš„æ¬²æœ›æ˜¯ç¨€ç¼ºçš„</h3>
<p>äº’è”ç½‘çš„ç¾ä¸½æ˜¯æ•´ä¸ªäºšå†å±±å¤§å›¾ä¹¦é¦†çš„åå€ï¼Œå¹¶ä¸”æ—¶åˆ»åœ¨ä½ çš„æŒ‡å°–ï¼Œä¸ºä½ æ‰€ç”¨ã€‚ä¸æ˜¯æ•™è‚²æ‰‹æ®µæˆ–å­¦ä¹ æ‰‹æ®µç¨€ç¼ºï¼Œç›¸åç¨€ç¼ºçš„æ˜¯å­¦ä¹ çš„æ¬²æœ›ã€‚æ‰€ä»¥ï¼Œä½ çœŸçš„è¦åŸ¹å…»æ¬²æœ›ã€‚</p>
<p>æ¬²æœ›æ„å‘³ç€æˆ‘ä¸å…è®¸è¿™ç§èƒ½åŠ›çš„ä¸§å¤±ã€‚å­©å­ä»¬å¤©ç”Ÿå°±æœ‰å¥½å¥‡å¿ƒã€‚å¦‚æœä½ å»æ‰¾ä¸€ä¸ªç¬¬ä¸€æ¬¡å­¦è¯­è¨€çš„å°å­©ï¼Œä»–ä»¬æ€»æ˜¯é—®ï¼šè¿™æ˜¯ä»€ä¹ˆï¼Ÿé‚£æ˜¯ä»€ä¹ˆï¼Ÿè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿé‚£æ˜¯è°ï¼Ÿä»–ä»¬æ€»æ˜¯é—®é—®é¢˜ã€‚</p>
<p>ä½†é—®é¢˜ä¹‹ä¸€æ˜¯ï¼Œå­¦æ ¡å’Œæˆ‘ä»¬çš„æ•™è‚²ç³»ç»Ÿï¼Œç”šè‡³æˆ‘ä»¬åŸ¹å…»å­©å­çš„æ–¹å¼ï¼Œéƒ½ç”¨é¡ºä»å–ä»£äº†å¥½å¥‡ã€‚<strong>ä¸€æ—¦ä½ ç”¨é¡ºä»å–ä»£å¥½å¥‡å¿ƒï¼Œä½ å°±ä¼šæˆä¸ºä¸€ä¸ªé¡ºä»çš„å·¥å‚å·¥äººï¼Œè€Œä¸å†æ˜¯ä¸€ä¸ªåˆ›é€ æ€§çš„æ€è€ƒè€…ã€‚ä½ éœ€è¦åˆ›é€ åŠ›ï¼Œä½ éœ€è¦æœ‰æ¿€åŠ±è‡ªå·±çš„å¤§è„‘å»å­¦ä¹ ä½ æƒ³è¦çš„ä¸œè¥¿çš„èƒ½åŠ›</strong>ã€‚</p>
<h2>ç¬¬åä¸ƒæ¡ï¼šæ•°å­¦å’Œé€»è¾‘æ‰æ˜¯ä¸€åˆ‡äº‹ç‰©çš„åŸºç¡€</h2>
<p><strong>æ•°å­¦å’Œé€»è¾‘æ˜¯ç†è§£å…¶ä»–ä¸€åˆ‡äº‹ç‰©çš„åŸºç¡€</strong></p>
<h3>ç»ˆæåŸºç¡€æ˜¯æ•°å­¦å’Œé€»è¾‘</h3>
<p>Navalï¼šæœ€åŸºæœ¬çš„ä¸œè¥¿æ˜¯åŸåˆ™æ€§çš„ï¼Œå¯ä»¥æ˜¯ç®—æ³•ï¼Œæ˜¯æ ¹æ·±è’‚å›ºçš„é€»è¾‘ç†è§£ï¼Œä½ å¯ä»¥ä»ä»»ä½•è§’åº¦ä¿æŠ¤å®ƒæˆ–æ”»å‡»å®ƒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¾®è§‚ç»æµå­¦å¾ˆé‡è¦ï¼Œè€Œå®è§‚ç»æµå­¦å°±æ˜¯å¤§é‡çš„è®°å¿†å †ç Œï¼Œå¤§é‡çš„å®è§‚åºŸè¯ã€‚</p>
<p>æ­£å¦‚çº³è¥¿å§†â€¢å¡”å‹’å¸ƒ(Nassim Taleb)æ‰€è¯´ï¼Œ<strong>å®è§‚ä¸Šçš„æ‰¯æ·¡æ¯”å¾®è§‚ä¸Šçš„æ‰¯æ·¡æ›´å®¹æ˜“</strong>ã€‚å› ä¸ºå®è§‚ç»æµå­¦æ˜¯å·«æœ¯â€”å¤æ‚â€”ç§‘å­¦ä¸æ”¿æ²»çš„ç»“åˆã€‚å¦‚ä»Šï¼Œä½ æ‰¾ä¸åˆ°ä¸¤ä¸ªå®è§‚ç»æµå­¦å®¶åœ¨ä»»ä½•äº‹æƒ…ä¸Šè¾¾æˆä¸€è‡´ï¼Œä¸åŒçš„æ”¿æ²»å®¶ä¼šç”¨ä¸åŒçš„å®è§‚ç»æµå­¦å®¶æ¥å…œå”®ä»–ä»¬å„è‡ªåçˆ±çš„ç†è®ºã€‚</p>
<p>ç°åœ¨ç”šè‡³æœ‰å®è§‚ç»æµå­¦å®¶åœ¨å…œå”®æ‰€è°“çš„ç°ä»£è´§å¸ç†è®ºï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯ï¼Œæœ‰ä¸ªè®¨åŒçš„ä¸œè¥¿å«åšé€šè´§è†¨èƒ€ï¼Œæˆ‘ä»¬å¯ä»¥å°æ‰€æœ‰æˆ‘ä»¬æƒ³è¦çš„é’±ã€‚è¿™å°±åƒè¯´ï¼Œæœ‰äº†æ— é™çš„èƒ½é‡ï¼Œæˆ‘ä»¬å¯ä»¥å‘å°„ç«ç®­è¿›å…¥å¤ªç©ºä¸€æ•´å¤©ã€‚è¿™ç®€ç›´æ˜¯ä¸€æ´¾èƒ¡è¨€ã€‚ç°å®æ˜¯ï¼Œæœ‰äº›äººæ‰“ç€â€œå®è§‚ç»æµå­¦å®¶â€çš„æ——å·ï¼Œå…œå”®ä»€ä¹ˆç°ä»£è´§å¸ç†è®ºï¼Œè¿™åªèƒ½è¯´æ˜ï¼Œå®è§‚ç»æµå­¦ä½œä¸ºä¸€é—¨â€œæ‰€è°“çš„ç§‘å­¦â€å·²ç»è…è´¥ã€‚å®ƒç°åœ¨æ˜¯æ”¿æ²»çš„ä¸€ä¸ªåˆ†æ”¯ã€‚</p>
<p>å› æ­¤ï¼Œä½ è¦æŠŠé‡ç‚¹æ”¾åœ¨åŸºç¡€ä¸Šã€‚<strong>æœ€ç»ˆä¸€åˆ‡äº‹ç‰©çš„åŸºç¡€æ˜¯æ•°å­¦å’Œé€»è¾‘</strong>ã€‚å¦‚æœä½ æ‡‚é€»è¾‘å’Œæ•°å­¦ï¼Œé‚£ä¹ˆä½ å°±æœ‰äº†ç†è§£ç§‘å­¦æ–¹æ³•çš„åŸºç¡€ã€‚ä¸€æ—¦ä½ ç†è§£äº†ç§‘å­¦æ–¹æ³•ï¼Œä½ å°±èƒ½ç†è§£å¦‚ä½•åœ¨å…¶ä»–é¢†åŸŸå’Œå…¶ä»–ä½ æ­£åœ¨é˜…è¯»çš„ä¸œè¥¿ä¸­åŒºåˆ†çœŸç†å’Œè°¬è¯¯ã€‚</p>
<h3>é€Ÿé£Ÿä¸€ç™¾æœ¬ä¹¦æ¯«æ— æ„ä¹‰</h3>
<p>åœ¨é˜…è¯»åˆ«äººçš„è§‚ç‚¹ï¼ˆopinionï¼‰æ—¶è¦éå¸¸å°å¿ƒï¼Œç”šè‡³åœ¨é˜…è¯»äº‹å®ï¼ˆfactsï¼‰æ—¶ä¹Ÿè¦å°å¿ƒï¼Œå› ä¸ºæ‰€è°“çš„äº‹å®å¾€å¾€åªæ˜¯è¡¨é¢ä¸Šçš„(ä¼ªç§‘å­¦)è§‚ç‚¹ã€‚ä½ çœŸæ­£éœ€è¦çš„æ˜¯ç®—æ³•ï¼ˆalgorithmï¼‰ï¼Œæ˜¯ç†è§£ï¼ˆunderstandingï¼‰ã€‚æœ€å¥½æ˜¯æ…¢æ…¢åœ°å•ƒå®Œä¸€æœ¬ä¹¦ï¼Œç„¶åæŒ£æ‰ã€ç»Šå€’ã€å€’å¸¦ï¼Œè€Œä¸æ˜¯å¿«é€Ÿåœ°æµè§ˆä¸€éï¼Œç„¶åè²Œä¼¼å¾ˆæœ‰æˆå°±æ„Ÿï¼šâ€œæˆ‘å·²ç»è¯»äº†20æœ¬ä¹¦ï¼Œæˆ‘å·²ç»è¯»äº†30æœ¬ä¹¦ï¼Œæˆ‘å·²ç»è¯»äº†50æœ¬è¿™ä¸ªé¢†åŸŸçš„ä¹¦...â€å°±åƒæå°é¾™è¯´çš„ï¼Œâ€œæˆ‘ä¸å®³æ€•é‚£äº›çŸ¥é“ä¸€åƒç§è¸¢è…¿æ‹›å¼çš„äººï¼Œæˆ‘å®³æ€•é‚£äº›ç»ƒä¹ äº†ä¸€ä¸‡æ¬¡å‡ºæ‹³æˆ–ä¸€ä¸‡è¸¢è…¿çš„äººã€‚â€é€šè¿‡ä¸æ–­é‡å¤å’Œè¿ç”¨ï¼Œä¸æ–­æ·±å…¥ç†è§£é€»è¾‘å’ŒåŸºç¡€ï¼Œä½ æ‰èƒ½æˆä¸ºä¸€ä¸ªèªæ˜çš„æ€è€ƒè€…ã€‚</p>
<h3>å­¦ä¹ è®²æ•…äº‹å’Œç¼–ç¨‹</h3>
<p>Niviï¼šè¦ä¸ºä½ ä»¥åçš„å­¦ä¹ æ‰“ä¸‹åŸºç¡€ï¼Œæˆ‘è®¤ä¸ºä½ éœ€è¦ä¸¤æ ·ä¸œè¥¿ï¼Œæ€»ç»“æ¥è¯´ã€‚ç¬¬ä¸€ï¼Œç»ƒä¹ è¯´æœåˆ«äººï¼Œä¸æ–­å®è·µæ€ä¹ˆè®²å¥½ä¸€ä¸ªæ•…äº‹ã€‚ç¬¬äºŒï¼Œæ·±å…¥äº†è§£ä¸€äº›æŠ€æœ¯èŒƒç•´çš„ä¸œè¥¿ï¼Œæ— è®ºæ˜¯å­¦ä¹ æŠ½è±¡æ•°å­¦ï¼Œè¿˜æ˜¯è¯»å”çº³å¾·Â·å…‹åŠªæ–¯å…³äºç®—æ³•çš„ä¹¦ï¼Œæˆ–è€…å¬è´¹æ›¼å…³äºç‰©ç†å­¦çš„è®²åº§ã€‚å¦‚æœä½ æœ‰å®é™…çš„è¯´æœåŠ›ï¼Œå¯¹ä¸€äº›å¤æ‚çš„è¯é¢˜æœ‰æ·±åˆ»çš„ç†è§£ï¼Œæˆ‘è®¤ä¸ºä½ çš„ä½™ç”Ÿå°†æœ‰ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ åŸºç¡€ã€‚</p>
<p>Navalï¼šæ˜¯çš„ã€‚æˆ‘æŠŠå®ƒå±•å¼€ä¸€ä¸‹ã€‚æˆ‘è®¤ä¸ºäº”ä¸ªæœ€é‡è¦çš„æŠ€èƒ½æ˜¯ï¼Œé˜…è¯»ï¼Œå†™ä½œï¼Œç®—æœ¯ï¼Œç„¶ååŠ ä¸Šè¯´æœçš„æŠ€å·§ï¼Œä¹Ÿå°±æ˜¯ä¼šè®²æ•…äº‹ï¼ˆstorytellingï¼‰è®©åˆ«äººä¿¡æœã€‚æœ€åï¼Œæˆ‘è¿˜è¦åŠ ä¸Šè®¡ç®—æœºç¼–ç¨‹ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§åº”ç”¨å½¢å¼çš„è¿ç®—å®ƒèƒ½è®©ä½ åœ¨ä»»ä½•é¢†åŸŸéƒ½èƒ½è‡ªç”±çš„å»ºé€ ã€‚å¦‚æœä½ æ“…é•¿ç”µè„‘ï¼Œæ“…é•¿åŸºç¡€æ•°å­¦ï¼Œæ“…é•¿å†™ä½œï¼Œæ“…é•¿è¯´æœï¼Œå¦‚æœä½ å–œæ¬¢é˜…è¯»ï¼Œä½ å°±å·²ç»ä¸ºç”Ÿæ´»åšå¥½äº†å‡†å¤‡ã€‚</p>
<h2>ç¬¬åå…«æ¡ï¼šæ²¡æœ‰è¢«ç§°ä¸ºâ€œå•†ä¸šâ€çš„æŠ€èƒ½</h2>
<p><strong>é¿å¼€å•†å­¦é™¢å’Œæ‚å¿—</strong></p>
<h3>æ²¡æœ‰è¢«ç§°ä¸ºâ€œå•†ä¸šâ€çš„å®é™…æŠ€èƒ½</h3>
<p>Navalï¼šæ²¡æœ‰æ‰€è°“å•†ä¸šçš„å®é™…æŠ€èƒ½ï¼Œå®ƒå¤ªæ™®é€šäº†ã€‚è¿™å°±åƒä¸€ç§å«åšâ€œå…³è”â€çš„æŠ€èƒ½ï¼Œå®šä¹‰ä¸ºâ€œä¸äººç›¸å…³â€ã€‚è¿™éƒ½ä¸èƒ½ç§°ä½œä¸€ç§æŠ€èƒ½ï¼Œå®ƒå¤ªå®½æ³›äº†ã€‚</p>
<p>æˆ‘å¹¶ä¸æƒ³å®Œå…¨è´¬ä½å•†å­¦é™¢ä¼ æˆçš„ä¸œè¥¿çš„ä»·å€¼ï¼Œä»–ä»¬ä¼šä¼ æˆéå¸¸èªæ˜çš„ä¸œè¥¿â€”ä¸€äº›æˆåŠŸçš„æ¡ˆä¾‹/è½¶äº‹ï¼Œå¹¶ç§°ä¹‹ä¸ºâ€œæ¡ˆä¾‹åˆ†æâ€ï¼ˆcase studyï¼‰ã€‚ä½†å®ƒä»¬åªæ˜¯ä¸€äº›è¶£é—»è½¶äº‹ï¼Œå®ƒä»¬è¯•å›¾é€šè¿‡å‘ä½ æŠ›å‡ºå¤§é‡æ•°æ®ç‚¹æ¥å¸®åŠ©ä½ è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼Œä½†äº‹å®æ˜¯ï¼Œåœ¨ä½ è®¾èº«å¤„åœ°æ€è€ƒä¹‹å‰ï¼Œä½ æ°¸è¿œä¸èƒ½å®Œå…¨ç†è§£å®ƒä»¬ï¼Œå°±åƒä½ æ— æ³•é‡å¤æ‰“é€ ä¸€ä¸ªå¯å£å¯ä¹ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œä½ ä¼šå‘ç°åšå¼ˆè®ºã€å¿ƒç†å­¦ã€ä¼¦ç†å­¦ã€æ•°å­¦ã€è®¡ç®—æœºå’Œé€»è¾‘å­¦ä¸­çš„è¿™äº›åŸºæœ¬æ¦‚å¿µæ‰ä¼šæ›´å¥½åœ°å¸®åˆ°ä½ ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºä»€ä¹ˆä¼šæ›´ä¸“æ³¨äºåŸºç¡€ç§‘å­¦ã€åŸºç¡€é€»è¾‘çš„åŸå› ã€‚æˆ‘ä¼šåŸ¹å…»å¯¹é˜…è¯»çš„çƒ­çˆ±ï¼ŒåŒ…æ‹¬é˜…è¯»é‚£äº›æˆ‘ä»¬æ˜çŸ¥é“ä¸åº”è¯¥é˜…è¯»çš„æ‰€è°“åƒåœ¾ã€‚ä½ ä¸å¿…ï¼ˆåªï¼‰è¯»ç»å…¸ã€‚é˜…è¯»æ˜¯ä½ è¿›è¡Œè‡ªæˆ‘æ•™è‚²çš„åŸºç¡€ã€‚</p>
<p>ç€æ‰‹åšæ¯”å…‰æƒ³è¦å¿«å¾—å¤š</p>
<p>Niviï¼šä½ ä¹‹å‰æ‰€è¯´çš„â€œåšæ¯”çœ‹å¿«â€æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p>
<p>Navalï¼šè¿™æ¶‰åŠåˆ°å­¦ä¹ æ›²çº¿çš„è¯é¢˜ï¼Œäººä»¬æ€»æ˜¯æƒ³æ–¹è®¾æ³•çš„ä¼˜åŒ–è‡ªå·±çš„å­¦ä¹ æ›²çº¿ã€‚å°½ç®¡æˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªæ’­å®¢åšä¸»ï¼Œä½†æˆ‘ä¸å–œæ¬¢æ’­å®¢çš„åŸå› ä¹‹ä¸€æ˜¯ï¼Œæ’­å®¢æ— æ³•è®©æˆ‘æœ€å¿«çš„è·å–çŸ¥è¯†å’Œä¿¡æ¯ã€‚æˆ‘æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¯»è€…ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªå¾ˆå¿«çš„è¯»è€…ï¼Œæˆ‘èƒ½è¯»å¾—å¾ˆå¿«ï¼Œä½†æˆ‘åªèƒ½ä»¥ä¸€å®šçš„é€Ÿåº¦å¬ã€‚æˆ‘çŸ¥é“äººä»¬å¬çš„æ—¶å€™éƒ½æ˜¯äºŒå€é€Ÿï¼Œä¸‰å€é€Ÿï¼Œä½†é‚£æ—¶æ¯ä¸ªäººå¬èµ·æ¥éƒ½åƒä¸€åªèŠ±æ —é¼ ï¼Œå¾ˆéš¾å†å›å¤´çœ‹ï¼ŒæŠ“é‡ç‚¹ï¼Œå¾ˆéš¾ç²¾ç¡®å®šä½ç‰‡æ®µå¹¶è®°ç¬”è®°ï¼Œç­‰ç­‰ã€‚</p>
<p>åŒæ ·åœ°ï¼Œå¾ˆå¤šäººè®¤ä¸ºä»–ä»¬å¯ä»¥é€šè¿‡è§‚å¯Ÿåˆ«äººåšçš„äº‹æƒ…ï¼Œç”šè‡³é€šè¿‡é˜…è¯»åˆ«äººåšçš„äº‹æƒ…ï¼Œå˜å¾—éå¸¸ç†Ÿç»ƒã€‚æ¯”å¦‚åˆšæåˆ°çš„å•†å­¦é™¢çš„æ¡ˆä¾‹ç ”ç©¶ï¼Œå°±æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„ä¾‹å­ã€‚ä»–ä»¬ç ”ç©¶å…¶ä»–äººçš„ç”Ÿæ„ï¼Œä½†å®é™…ä¸Šï¼Œä½ å¼€ä¸€ä¸ªè‡ªå·±çš„æŸ æª¬æ±½æ°´æ‘Šï¼Œç”šè‡³åœ¨è¡—ä¸Šå¼€ä¸€å®¶å°æ‚è´§åº—ï¼Œéƒ½ä¼šå­¦åˆ°æ¯”ä¹¦æœ¬ä¸Šå¤šå¾—å¤šçš„ç»è¥ç”Ÿæ„çš„çŸ¥è¯†ã€‚è¿™å°±æ˜¯ä½ åœ¨å·¥ä½œä¸­è¦å­¦ä¹ çš„æ–¹æ³•ï¼Œ<strong>å› ä¸ºå¾ˆå¤šå¾®å¦™çš„ä¸œè¥¿åœ¨ä½ çœŸæ­£è¿›å…¥è¿™ä¸ªè¡Œä¸šä¹‹å‰æ˜¯ä¸ä¼šçœŸæ­£æ‡‚å¾—çš„</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç°åœ¨äººäººéƒ½å–œæ¬¢ç ”ç©¶å¿ƒç†å­¦ã€‚ä½ å»çœ‹çœ‹Farnam Streetï¼Œè¯»è¯»Poor Charlieâ€™s Almanack*ï¼Œä½ å¯ä»¥å­¦ä¹ æ‰€æœ‰ä¸åŒçš„å¿ƒç†æ¨¡å¼ã€‚ä½†å“ªä¸ªæ›´é‡è¦ï¼Ÿä½ æ›´å¸¸åº”ç”¨å“ªäº›ï¼Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹å“ªä¸€ä¸ªæ›´é‡è¦ï¼Ÿè¿™å…¶å®æ˜¯æœ€éš¾çš„éƒ¨åˆ†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»å¿ƒç†å­¦ç ”ç©¶ä¸­æœ€å¤§çš„æ”¶è·æ˜¯ï¼Œå§”æ‰˜-ä»£ç†é—®é¢˜åœ¨ç°å®ä¸–ç•Œä¸­çš„é©±åŠ¨åŠ›å¤ªå¼ºå¤§äº†ï¼Œè¿™æœ¬è´¨æ˜¯ä¸€ä¸ªæ¿€åŠ±é—®é¢˜ã€‚å®ƒè®©æˆ‘æ˜ç™½ï¼Œé’ˆé”‹ç›¸å¯¹çš„é‡å¤å›šå¾’å›°å¢ƒæ˜¯æœ€å€¼å¾—äº†è§£çš„åšå¼ˆè®ºã€‚åœ¨é‚£ä¹‹åä½ å‡ ä¹å¯ä»¥æŠŠåšå¼ˆè®ºç†è®ºä¹¦æŸä¹‹é«˜é˜äº†ã€‚</p>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œ<strong>å­¦ä¹ åšå¼ˆè®ºçš„æœ€å¥½æ–¹æ³•æ˜¯è‡ªå·±è®¾è®¡æ¸¸æˆ</strong>ï¼Œè‡ªå·±äº²èº«ä½“éªŒã€‚è™½ç„¶æˆ‘ä»æ²¡è¯»è¿‡åšå¼ˆè®ºçš„ä¹¦ï¼Œä½†æˆ‘è®¤ä¸ºè‡ªå·±éå¸¸æ“…é•¿åšå¼ˆè®ºå®è·µã€‚æˆ‘ä»æ¥æ²¡æœ‰æ‰“å¼€è¿‡ä¸€æœ¬åšå¼ˆè®ºçš„ä¹¦ï¼Œä»æœªå°è¯•åœ¨é‡Œé¢å‘ç°ä»»ä½•ä¸€ä¸ªæˆ‘æ²¡æƒ³åˆ°çš„ç»“æœã€‚åŸå› æ˜¯æˆ‘ä»å°ç©å„ç§æ¸¸æˆï¼Œå’Œå„ç§å„æ ·çš„æœ‹å‹åœ¨æ¸¸æˆä¸­ç¢°åˆ°å„ç§å„æ ·çš„å®é™…æƒ…å†µï¼Œæ‰€ä»¥è¿™å¯¹æˆ‘æ¥è¯´åªæ˜¯ç¬¬äºŒå¤©æ€§ã€‚å®è·µä¼šå‘Šè¯‰ä½ ä¸€åˆ‡ä½ æƒ³çŸ¥é“çš„ç­”æ¡ˆã€‚</p>
<h3>â€œæ‰§è¡Œâ€è¿­ä»£çš„æ¬¡æ•°å†³å®šç€ä½ çš„å­¦ä¹ æ›²çº¿</h3>
<p>æ‰§è¡Œæœ¬èº«æ˜¯ä¸€ä»¶å¾ˆå¾®å¦™çš„äº‹è¯·ï¼Œå®ƒåŒ…å«ç€å¾ˆå¤šä¸œè¥¿ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘æƒ³å­¦ä¹ å¦‚ä½•ç»è¥ä¸€å®¶ä¼ä¸šã€‚å¦‚æœæˆ‘åœ¨æ¯å¤©ä¸Šç­çš„åœ°æ–¹é‡å¤åšåŒæ ·çš„äº‹æƒ…ï¼Œæ¯”å¦‚è¯´æˆ‘åœ¨è¡—ä¸Šå¼€äº†ä¸€å®¶é›¶å”®åº—ï¼Œæ¯å¤©çš„ä»»åŠ¡å°±æ˜¯åœ¨è´§æ¶ä¸Šæ‘†æ»¡é£Ÿç‰©å’Œé…’ï¼Œæˆ‘ä¸ä¼šå­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œå› ä¸ºæˆ‘æ¯å¤©åªæ˜¯åœ¨ä¸æ–­é‡å¤ã€‚å› æ­¤ï¼Œå³ä½¿æˆ‘èŠ±äº†å‡ åƒä¸ªå°æ—¶ï¼Œä½†æˆ‘ä¹Ÿåªæ˜¯èŠ±äº†å‡ åƒä¸ªå°æ—¶åšåŒæ ·çš„äº‹æƒ…ã€‚è€Œå¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘è¿›è¡Œäº†æ•°åƒæ¬¡è¿­ä»£ï¼Œé‚£ç»“æœå°±ä¼šä¸ä¸€æ ·äº†ã€‚å› æ­¤ï¼Œå­¦ä¹ æ›²çº¿æ˜¯éœ€è¦è¿­ä»£çš„ï¼Œè€Œä¸æ˜¯é‡å¤ã€‚</p>
<p>ä½†å¦‚æœæˆ‘åœ¨å•†åº—é‡Œæ¯å¤©å°è¯•æ–°çš„è¥é”€å®éªŒï¼Œæˆ‘ä¸æ–­åœ°æ”¹å˜åº“å­˜ï¼Œä¸æ–­åœ°æ”¹å–„å“ç‰Œç­–ç•¥ï¼Œä¸æ–­å°è¯•æ–°çš„è®²æ•…äº‹çš„æ–¹æ³•ï¼Œä¸æ–­åœ°æ‹“å±•å¢å¤§å®¢æµé‡çš„åœ¨çº¿æ¸ é“ï¼Œæˆ‘è¯•ç€åœ¨ä¸åŒçš„æ—¶é—´è¥ä¸šï¼Œå¹¶ä¸”ç»å¸¸æœ‰ç›®çš„åœ°å››å¤„èµ°èµ°ï¼Œå’Œå…¶ä»–åº—ä¸»äº¤è°ˆï¼Œæ‹¿åˆ°ä»–ä»¬çš„ä¹¦ï¼Œå¼„æ¸…æ¥šä»–ä»¬æ˜¯å¦‚ä½•ç»è¥è‡ªå·±çš„ç”Ÿæ„çš„ã€‚<strong>çœŸæ­£å½±å“å­¦ä¹ æ›²çº¿çš„æ˜¯è¿­ä»£æ¬¡æ•°</strong>ã€‚è¿­ä»£æ¬¡æ•°è¶Šå¤šï¼Œæ”¶è·çš„å°±è¶Šå¤šï¼Œå­¦ä¹ é€Ÿåº¦å°±è¶Šå¿«ã€‚è€Œä¸ä»…ä»…æ˜¯æŠ•å…¥çš„æ—¶é—´é•¿çŸ­çš„é—®é¢˜ã€‚</p>
<h3>å¦‚æœä½ æ„¿æ„æ¯å¤©æµä¸€ç‚¹è¡€ï¼Œä½ å¯èƒ½åœ¨æœªæ¥çš„äººç”Ÿè·¯ä¸Šèµ¢å¾—å¾ˆå¤š</h3>
<p>è™½ç„¶ä¸–ç•Œä¸ºæˆ‘ä»¬æä¾›ç€ä¸€æ¬¡åˆä¸€æ¬¡åšåŒæ ·äº‹æƒ…çš„æœºä¼šï¼Œä½†äº‹å®ä¸Šï¼Œå¦‚æœæˆ‘ä»¬èƒ½ä»é›¶å¼€å§‹å¯»æ‰¾æ–°çš„æ–¹æ³•ï¼Œä¸–ç•Œä¼šå‘ˆç°å‡ºä¸ä¸€æ ·çš„ç²¾å½©ã€‚</p>
<p>ç¬¬ä¸€æ¬¡å°è¯•æ–°äº‹ç‰©æ˜¯å¾ˆç—›è‹¦çš„ï¼Œå› ä¸ºä½ æ­£å¾˜å¾Šåœ¨ä¸ç¡®å®šçš„é¢†åŸŸï¼Œå¾ˆæœ‰å¯èƒ½ä½ ä¼šå¤±è´¥ã€‚å› æ­¤ä½ åªéœ€è¦ä¸æ–­è®©è‡ªå·±<strong>é€‚åº”é¢‘ç¹çš„å°å¤±è´¥ï¼ˆbleed a littleï¼‰</strong>ã€‚</p>
<p>Nassim Talebä¹Ÿè°ˆåˆ°äº†è¿™ä¸€ç‚¹ã€‚ä»–é åšä¸€ä¸ªåŸºæœ¬ä¸Šä¾èµ–é»‘å¤©é¹…çš„å•†äººçš„ç”Ÿæ„å‘å®¶è‡´å¯Œã€‚Nassim Talebé€šè¿‡æ¯å¤©æŸå¤±ä¸€ç‚¹ç‚¹é’±æ¥èµšé’±ï¼Œç„¶ååœ¨ä¸€ä¸ªå¶ç„¶çš„æ—¶æœºï¼Œå½“ä¸€ä»¶è¢«å¸¸è¯†å®šä¹‰ä¸ºä¸å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…å‘ç”Ÿåœ¨å…¶ä»–äººèº«ä¸Šæ—¶ï¼Œä»–ä¼šèµšå¾ˆå¤šé’±ã€‚</p>
<p>è™½ç„¶å¤§å¤šæ•°äººæ¯å¤©éƒ½æƒ³ä¸€å¤œæš´å¯Œï¼Œä½†ç›¸åº”çš„ï¼Œä»–ä»¬éœ€è¦æ‰¿æ‹…çˆ†ç‚¸å¼çš„é£é™©ï¼Œåšå¥½ç ´äº§çš„å¿ƒç†å‡†å¤‡ã€‚</p>
<p>å¦‚æœè¯´ä½ åœ¨è‡ªç„¶ç•Œé‡Œå‰²ä¼¤äº†ï¼Œç„¶åæ¯å¤©éƒ½åœ¨æµè¡€ï¼Œä½ æœ€ç»ˆä¼šå› å¤±è¡€è€Œæ­»äº¡ï¼Œä½ å¿…é¡»æƒ³åŠæ³•åŠåŠæ—¶æƒ³åŠæ³•æŒ½æ•‘ç”Ÿå‘½ã€‚ä½†å…¶å®ç°å®ç”Ÿæ´»æ²¡é‚£ä¹ˆå¤¸å¼ ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯æ¯å¤©éƒ½åœ¨æµè¡€ï¼Œæµè¡€åœ¨è¿™é‡Œåªæ˜¯ä¸€ä¸ªæ¯”å–»ï¼Œæ¯å¤©è®©è‡ªå·±æŸå¤±ä¸€ç‚¹ç‚¹ã€‚</p>
<p>ä½†ç°å®æ˜¯ï¼Œå¤§éƒ¨åˆ†äººéƒ½ä¸è¿™ä¹ˆåšï¼Œç›¸åä»–ä»¬æ¯å¤©éƒ½åœ¨è¿½æ±‚ç€å°çš„èƒœåˆ©ï¼Œè¿™æœ€ç»ˆä¼šè¢«è¯æ˜æ˜¯ä¸åˆç®—çš„ã€‚æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œå¦‚æœä½ æ„¿æ„æ¯å¤©éƒ½æµä¸€ç‚¹ç‚¹è¡€ï¼Œå°†æ¥ä½ ä¼šèµ¢ä¸€ç¬”å¤§çš„ã€‚</p>
<p>å…¶å®ï¼Œè¿™å°±æ˜¯åˆ›ä¸šç²¾ç¥ï¼Œä¼ä¸šå®¶ä»¬æ¯å¤©éƒ½åœ¨æµè¡€ï¼ˆbleed a littleï¼‰ã€‚ä»–ä»¬ä¸æ˜¯åœ¨èµšé’±ï¼Œä»–ä»¬æ˜¯åœ¨èµ”é’±ï¼Œè€Œä¸”ä»–ä»¬æ€»æ˜¯äºšå†å±±å¤§ï¼Œå› ä¸ºæ‰€æœ‰çš„è´£ä»»éƒ½åœ¨ä»–ä»¬èº«ä¸Šï¼Œä½†æ˜¯å½“ä»–ä»¬èµ¢äº†ï¼Œä»–ä»¬å°±ä¼šå¤§èµšä¸€ç¬”ï¼Œæ‰€ä»¥æ€»ä½“ä¸Šæ¥çœ‹ä»–ä»¬ä¼šèµšå¾—æ›´å¤šã€‚</p>
<h2>ç¬¬åä¹æ¡ï¼šå‹‡æ•¢æ‰¿æ‹…è´£ä»»æ‰èƒ½è·å¾—å½±å“åŠ›</h2>
<p><strong>å‹‡æ•¢å†’é™©ä½ å°±ä¼šåœ¨ç¤¾ä¼šä¸Šè·å¾—å½±å“åŠ›</strong></p>
<h3>ä½ éœ€è¦é€šè¿‡è´£ä»»è·å¾—å½±å“åŠ›</h3>
<p>Nivi: æˆ‘ä»¬ä½•ä¸è°ˆè°ˆè´£ä»»å‘¢ï¼Œæˆ‘è§‰å¾—è¿™å¾ˆæœ‰è¶£ï¼Œæˆ‘ä¼°è®¡ä½ å¯¹æ­¤æœ‰è‡ªå·±ç‹¬ç‰¹çš„çœ‹æ³•ã€‚å› æ­¤ï¼Œä½ çš„å…³äºè´£ä»»çš„ç¬¬ä¸€æ¡æ¨æ–‡æ˜¯ï¼Œâ€œæ‹¥æŠ±è´£ä»»ï¼Œä»¥è‡ªå·±çš„åä¹‰æ‰¿æ‹…å•†ä¸šé£é™©ã€‚ç¤¾ä¼šå°†ä»¥è´£ä»»ã€å…¬å¹³å’Œå½±å“åŠ›æ¥å›æŠ¥ä½ ã€‚â€</p>
<p>Naval: æ˜¯å•Šï¼Œæ‰€ä»¥è¦æƒ³å‘è´¢ï¼Œä½ éœ€è¦æ æ†ã€‚æ æ†æ¥è‡ªäºåŠ³åŠ¨åŠ›ã€èµ„æœ¬ï¼Œä¹Ÿå¯èƒ½æ˜¯é€šè¿‡ä»£ç å’Œåª’ä½“ã€‚ä½†å…¶ä¸­çš„å¤§å¤šæ•°ï¼Œæ¯”å¦‚<strong>åŠ³åŠ¨åŠ›å’Œèµ„æœ¬ï¼Œå¿…é¡»æ¥è‡ªäºä»–äººçš„ç»™äºˆ</strong>ã€‚å¯¹äºåŠ³åŠ¨åŠ›ï¼Œå¿…é¡»æ˜¯æœ‰äººæ„¿æ„è·Ÿéšä½ ï¼›å¯¹äºèµ„æœ¬ï¼Œå¿…é¡»æœ‰äººç»™ä½ é’±æˆ–èµ„äº§æ¥è®©ä½ ç®¡ç†å’Œä½¿ç”¨ã€‚</p>
<p>æ‰€ä»¥è¦å¾—åˆ°è¿™äº›ï¼Œä½ å¿…é¡»å»ºç«‹ä¿¡èª‰ï¼Œè€Œä¸”ä½ å¿…é¡»å°½å¯èƒ½ä»¥è‡ªå·±çš„åä¹‰å»åšï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯æœ‰é£é™©çš„ã€‚æ‰€ä»¥è´£ä»»æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚å®ƒèƒ½è®©ä½ åœ¨äº‹æƒ…é¡ºåˆ©çš„æ—¶å€™æ”¶è·ä¿¡èª‰ï¼Œåœ¨äº‹æƒ…ç³Ÿç³•çš„æ—¶å€™æ‰¿å—å¤±è´¥çš„å†²å‡»ã€‚</p>
<h3>ä»¥è‡ªå·±çš„åä¹‰æ‰¿æ‹…å•†ä¸šé£é™©</h3>
<p>ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œé‚£äº›åœ¨å„ç§äº‹ç‰©ä¸Šè´´ä¸Šè‡ªå·±æ ‡ç­¾çš„äººå¹¶ä¸æ„šè ¢ï¼Œä»–ä»¬åªæ˜¯å¯¹è‡ªå·±æœ‰ä¿¡å¿ƒã€‚ä¹Ÿè®¸æœ€ç»ˆç»“æœæ˜¯æ„šè ¢çš„ï¼Œä½†å¦‚æœä½ çœ‹åˆ°ä¸€ä¸ªåè€¶ã€å¥¥æ™®æ‹‰ã€ç‰¹æœ—æ™®ã€é©¬æ–¯å…‹æˆ–å…¶ä»–ç±»ä¼¼çš„äººï¼Œè¿™äº›äººä¹‹æ‰€ä»¥å¯ä»¥å‡­å€Ÿè‡ªå·±çš„åå­—è‡´å¯Œï¼Œæ˜¯å› ä¸ºä»–ä»¬çš„åå­—å°±æ˜¯å¼ºå¤§çš„æ•²é—¨ç –ã€‚</p>
<p>ä¸ç®¡ä½ å¦‚ä½•çœ‹å¾…ç‰¹æœ—æ™®ï¼Œä½ å¿…é¡»æ„è¯†åˆ°ï¼Œè¿™å®¶ä¼™çš„åå­—å°±æ˜¯ä¸–ç•Œåç‰‡ã€‚ä½ ä¸ºä»€ä¹ˆè¦å»ç‰¹æœ—æ™®èµŒåœºï¼Ÿåªæ˜¯å› ä¸ºæ˜¯ç‰¹æœ—æ™®ã€‚ä½ ä¸ºä»€ä¹ˆè¦å»ç‰¹æœ—æ™®å¤§å¦ï¼Ÿä¹Ÿæ˜¯å› ä¸ºç‰¹æœ—æ™®ã€‚</p>
<p>åˆ°äº†æŠ•ç¥¨çš„æ—¶å€™ï¼Œæˆ‘æƒ³å¾ˆå¤šé€‰æ°‘åªæ˜¯è¿›å»è¯´â€œç‰¹æœ—æ™®â€ï¼Œä»–ä»¬è®¤å‡ºäº†è¿™ä¸ªåå­—ï¼Œæ‰€ä»¥è¿™ä¸ªåå­—å¾—åˆ°äº†å›æŠ¥ï¼ˆè·å¾—é€‰ç¥¨ï¼‰ã€‚</p>
<p>å¥¥æ™®æ‹‰ä¹Ÿæ˜¯åŒæ ·çš„ï¼Œå¥¹æŠŠæŸæ ·ä¸œè¥¿æ‰“ä¸Šè‡ªå·±çš„æ ‡ç­¾ï¼Œå½“å•†å“åˆ°è¾¾äººä»¬æ‰‹ä¸­ï¼Œå¥¹çš„åå­—å°±æ˜¯è¿™äº›å•†å“çš„æ‹›ç‰Œã€‚</p>
<p>è¿™äº›äººåœ¨åšæŒæŠŠè‡ªå·±çš„åå­—æ‰“é€ æˆæ‹›ç‰Œçš„åŒæ—¶å½“ç„¶ä¹Ÿé¢ä¸´ç€ä¸€ç³»åˆ—çš„é£é™©ã€‚æ˜¾ç„¶ï¼Œç‰¹æœ—æ™®ç°åœ¨å¯èƒ½è¢«ä¸–ç•Œä¸Šçš„ä¸€å¤§éƒ¨åˆ†äººæ†æ¨ç€ï¼Œä¹ŸåŒæ ·æ˜¯å› ä¸ºç‰¹æœ—æ™®å¼çš„é£æ ¼ã€‚</p>
<p>æŠŠä½ çš„åå­—å…¬ä¹‹äºä¼—ï¼Œä½ å°±ä¼šæˆä¸ºä¸€ä¸ªåäººï¼Œè€Œåå£°ä¹Ÿæœ‰å¾ˆå¤šç¼ºç‚¹ã€‚<strong>éšå§“åŸ‹åã€æœ‰é’±æ€»æ¯”ç©·å‡ºåå¥½ï¼Œä½†å³ä¾¿æ˜¯ååˆ©åŒæ”¶ï¼Œä¹Ÿæœ‰å¾ˆå¤šä¸åˆ©å› ç´ ã€‚ä½ éœ€è¦åœ¨å…¬ä¼—çš„çœ¼çš®å­åº•ä¸‹ç”Ÿæ´»</strong>ã€‚</p>
<h3>ä¸€ä¸ªè¿ä½œè‰¯å¥½çš„å›¢é˜Ÿå¯¹æ¯ä¸ªèŒä½éƒ½æœ‰æ˜ç¡®çš„è´£ä»»åˆ†å·¥</h3>
<p>è´£ä»»æ„Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œå½“ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªäº§å“ï¼Œæˆ–è€…ä½ åœ¨ä¸€ä¸ªå›¢é˜Ÿä¸­å·¥ä½œï¼Œæˆ–è€…ä½ åœ¨ä¸€ä¸ªä¼ä¸šä¸­å·¥ä½œæ—¶ï¼Œæˆ‘ä»¬å°±ä¼šä¸æ–­åœ°æé†’è‡ªå·±æˆä¸ºä¸€ä¸ªå›¢é˜Ÿçš„ä¸€å‘˜æ˜¯å¤šä¹ˆçš„é‡è¦ã€‚è¿™çš„ç¡®æ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<p>æˆ‘ä»¬åœ¨ç¤¾äº¤æ–¹é¢çš„å¾ˆå¤šè®­ç»ƒéƒ½å‘Šè¯‰æˆ‘ä»¬ä¸è¦å¼ºå‡ºå¤´ã€‚å°±åƒä¸­å›½çš„ä¸€å¥ä¿—è¯­ï¼Œæªæ‰“å‡ºå¤´é¸Ÿï¼Œåˆ«ç´§å¼ ï¼Œä½†æ˜¯æˆ‘è¦è¯´çš„æ˜¯ï¼Œä¸€ä¸ªçœŸæ­£è¿ä½œè‰¯å¥½çš„å›¢é˜Ÿè§„æ¨¡å¾ˆå°ï¼Œå¯¹æ¯ä¸€ä¸ªä¸åŒçš„éƒ¨åˆ†éƒ½æœ‰æ˜ç¡®çš„è´£ä»»åˆ†å·¥ã€‚</p>
<p>ä½ å¯ä»¥è¯´ï¼Œâ€œå¥½å§ï¼Œè¿™ä¸ªäººè´Ÿè´£åˆ¶é€ äº§å“ï¼Œè¿™ä¸ªäººè´Ÿè´£ä¿¡æ¯å‘å¸ƒï¼Œè¿™ä¸ªäººè´Ÿè´£ç­¹æ¬¾ï¼Œè¿™ä¸ªäººè´Ÿè´£å®šä»·ç­–ç•¥ï¼Œä¹Ÿå¯èƒ½è´Ÿè´£åœ¨çº¿å¹¿å‘Šã€‚â€œæ‰€ä»¥å¦‚æœæœ‰äººæç ¸äº†ï¼Œä½ å°±çŸ¥é“åˆ°åº•æ˜¯è°è´Ÿè´£ã€‚åŒæ—¶ï¼Œå¦‚æœäº‹æƒ…è¿›å±•é¡ºåˆ©ï¼Œä½ ä¹Ÿæ¸…æ¥šåœ°çŸ¥é“æ˜¯è°åšå¾—å¾ˆå¥½ã€‚</p>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªå¾ˆå°çš„å›¢é˜Ÿï¼Œå¹¶ä¸”ä½ å·²ç»æ¸…æ¥šåœ°åˆ’åˆ†äº†è´£ä»»ï¼Œé‚£ä¹ˆä½ ä»ç„¶å¯ä»¥ä¿æŒå¾ˆé«˜çš„è´£ä»»æ„Ÿã€‚é—®è´£åˆ¶åœ¨é¢å¯¹ç»“æœæ—¶æ˜¾å¾—çœŸçš„å¾ˆé‡è¦ï¼Œä¸ç„¶å°±ä¼šå‡ºç°ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œæ¯ä¸ªäººéƒ½ä¼šäº’ç›¸æŒ‡è´£ï¼Œå¦‚æœæˆåŠŸäº†ï¼Œæ¯ä¸ªäººéƒ½ä¼šç«™å‡ºæ¥äº‰å¤ºåŠŸåŠ³ã€‚</p>
<p>æˆ‘ä»¬åœ¨å­¦æ ¡çš„æ—¶å€™éƒ½æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼Œæœ‰ä¸€ä¸ªå°ç»„ä½œä¸šè¦åšï¼Œé‡Œé¢å¯èƒ½æœ‰å‡ ä¸ªäººåšäº†å¾ˆå¤šå·¥ä½œï¼Œç„¶åæœ‰ä¸€äº›äººåªæ˜¯åšäº†å¾ˆå¤šå“—ä¼—å–å® çš„å·¥ä½œæˆ–è€…å¼ºè¡Œç»™è‡ªå·±åšçš„å·¥ä½œåŠ æˆã€‚æˆ‘ä»¬ä»å°å°±ä¹ ä»¥ä¸ºå¸¸ï¼Œä½†è¯´å‡ºæ¥éš¾å…ä¼šæ„Ÿåˆ°ä¸èˆ’æœã€‚</p>
<h3>èƒ½åœ¨å…¬ä¼—é¢å‰å¦ç„¶é¢å¯¹å¤±è´¥çš„äººéƒ½æœ‰å¾ˆå¤§çš„èƒ½é‡</h3>
<p>æ˜ç¡®è´£ä»»å¾ˆé‡è¦ã€‚æ²¡æœ‰è´£ä»»æ„Ÿï¼Œä½ å°±æ²¡æœ‰åŠ¨åŠ›ï¼›æ²¡æœ‰è´£ä»»æ„Ÿï¼Œå°±æ— æ³•å»ºç«‹ä¿¡èª‰ã€‚ä½†ä½ è¦å†’é™©ï¼Œä½ å†’ç€å¤±è´¥çš„é£é™©å†’ç€è¢«ç¾è¾±çš„å±é™©ï¼Œä½ å†’ç€ä»¥è‡ªå·±åä¹‰æ‰¿å—å¤±è´¥çš„é£é™©ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œåœ¨ç°ä»£ç¤¾ä¼šï¼Œä¸å†æœ‰å€ºåŠ¡äººçš„ç›‘ç‹±ï¼Œäººä»¬ä¹Ÿä¸ä¼šå› ä¸ºå¤±å»åˆ«äººçš„é’±è€Œåç‰¢æˆ–è¢«å¤„æ­»ï¼Œä½†ä¸ç”Ÿä¿±æ¥çš„ï¼Œæˆ‘ä»¬ä¸ä¼šä»¥è‡ªå·±çš„åä¹‰åœ¨å…¬å…±åœºåˆå¤±è´¥ã€‚é‚£äº›ä»¥è‡ªå·±çš„åä¹‰åœ¨å…¬å…±åœºåˆé¢å¯¹å¤±è´¥çš„äººï¼Œå®é™…ä¸Šæ‹¥æœ‰å¾ˆå¤§çš„èƒ½é‡ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘è®²ä¸€ä¸ªä¸ªäººè½¶äº‹ã€‚ç›´åˆ°2013å¹´ï¼Œ2014å¹´ï¼Œæˆ‘çš„å…¬ä¼—å½¢è±¡å®Œå…¨å›´ç»•ç€åˆ›ä¸šå’ŒæŠ•èµ„ã€‚ç›´åˆ°2014å¹´ã€2015å¹´å·¦å³ï¼Œæˆ‘æ‰å¼€å§‹è°ˆè®ºå“²å­¦ã€å¿ƒç†å­¦ç­‰ç­‰ã€‚</p>
<p>è¿™è®©æˆ‘æœ‰ç‚¹ç´§å¼ ï¼Œå› ä¸º<strong>æˆ‘æ˜¯ä»¥è‡ªå·±çš„åä¹‰åšçš„</strong>ã€‚è‚¯å®šæœ‰ä¸šå†…äººå£«é€šè¿‡èƒŒåæ‚„æ‚„æˆ³æˆ‘ï¼Œæ¯”å¦‚â€œä½ åœ¨å¹²ä»€ä¹ˆï¼Ÿä½ è¦ç»“æŸä½ çš„èŒä¸šç”Ÿæ¶¯äº†å—ï¼Ÿè¿™å¤ªæ„šè ¢äº†ã€‚â€</p>
<p>æˆ‘æœ‰ç‚¹åŒæ„äº†ï¼Œçš„ç¡®ï¼Œæˆ‘å†’é™©äº†ã€‚</p>
<p>å½“ä½ æŠŠä½ çš„åå­—æ”¾åœ¨é‚£é‡Œï¼Œä½ å°±è¦å†’ç€æŸäº›é£é™©ã€‚ä½†åŒæ—¶ä½ ä¹Ÿä¼šå¾—åˆ°å›æŠ¥ï¼Œä½ ä¼šå¾—åˆ°å¥½å¤„çš„ã€‚</p>
<h2>ç¬¬ä¸‰åäº”æ¡ï¼šå†·é™çš„å¤´è„‘ï¼Œå¥åº·çš„èº«ä½“ï¼Œå……æ»¡çˆ±çš„å®¶åº­</h2>
<p><strong>å½“ä½ å˜å¾—å¯Œæœ‰æ—¶ï¼Œä½ ä¼šå‘ç°è¿™äº›éƒ½ä¸æ˜¯ä½ ä¸€ç›´ä»¥æ¥è¿½æ±‚çš„</strong></p>
<p>Niviï¼šæœ€åä¸€æ¡å…³äºé•¿æœŸå·¥ä½œçš„æ¨ç‰¹æ˜¯ï¼šâ€œå½“ä½ æœ€ç»ˆå˜å¾—å¯Œæœ‰æ—¶ï¼Œä½ ä¼šæ„è¯†åˆ°è¿™äº›å¹¶ä¸æ˜¯ä½ æœ€åˆæƒ³è¦çš„ã€‚â€</p>
<p>Navalï¼šè¿™æœ¬èº«å°±æ˜¯ä¸€ä¸ªèƒ½è°ˆè®ºå¾ˆä¹…çš„è¯é¢˜ã€‚é¦–å…ˆï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸èªæ˜çš„ç»“è®ºï¼Œå®ƒè§£æ”¾äº†é‚£äº›è¯´â€œè‡´å¯Œæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿâ€çš„äººä»¬çš„æ€æƒ³æ­¦è£…ã€‚æœ‰å¾ˆå¤šäººå–œæ¬¢ä»¥å¾·æœäººï¼Œåå¯¹åˆ›é€ è´¢å¯Œæˆ–èµšé’±çš„æƒ³æ³•ã€‚è¿™å…¶å®ä¹Ÿæ²¡é”™ã€‚æ˜¯çš„ï¼Œé’±èƒ½è§£å†³ä½ æ‰€æœ‰èƒ½ç”¨é’±è§£å†³çš„é—®é¢˜ï¼Œä½†é’±ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ã€‚</p>
<p><strong>å½“ä½ èµšäº†ä¸€å¤§ç¬”é’±åï¼Œä½ é¦–å…ˆæ„è¯†åˆ°ä½ ä»ç„¶æ˜¯åŒä¸€ä¸ªäºº</strong>ã€‚å¦‚æœä½ æœ¬æ¥å¿«ä¹ï¼Œä½ å°±è¿˜æ˜¯å¿«ä¹çš„ã€‚å¦‚æœä½ æœ¬æ¥ä¸å¿«ä¹ï¼Œä½ å°±ä¼šä¸å¿«ä¹ã€‚å¦‚æœä½ å¹³é™ã€æ»¡è¶³ã€å¹³å’Œï¼Œä½ è¿˜æ˜¯é‚£ä¸ªäººã€‚æˆ‘è®¤è¯†å¾ˆå¤šéå¸¸å¯Œæœ‰çš„äººï¼Œä»–ä»¬èº«æéå¸¸ä¸å¥½ã€‚æˆ‘ä¹Ÿè®¤è¯†å¾ˆå¤šæœ‰é’±äººï¼Œä»–ä»¬çš„å®¶åº­ç”Ÿæ´»å¾ˆç³Ÿç³•ã€‚æˆ‘åŒæ—¶ä¹ŸçŸ¥é“å¾ˆå¤šæœ‰é’±äººï¼Œä»–ä»¬å†…å¿ƒå¾ˆæ··ä¹±ã€‚</p>
<h3>å¹³é™çš„å¤´è„‘ï¼Œå¥åº·çš„èº«ä½“å’Œå……æ»¡çˆ±çš„å®¶åº­å¿…é¡»è¦ç»è¥</h3>
<p>æˆ‘æƒ³åˆ°æˆ‘ä¹‹å‰å‘çš„å¦ä¸€æ¡æ¨ç‰¹ï¼Œä¹Ÿæ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€æ¡ã€‚å®ƒä¸ä¸€å®šæ˜¯æœ€æœ‰è§åœ°çš„ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯æœ€æœ‰ç”¨çš„ï¼Œè¿™ç”šè‡³ä¸æ˜¯æˆ‘æƒ³çš„æœ€æ¸…æ¥šçš„ã€‚ä½†é‚£é‡Œé¢æœ‰ä¸€ä¸ªéå¸¸ç¡®å®šçš„äº‹å®ï¼Œå®ƒå¼•èµ·äº†å…±é¸£ã€‚</p>
<p>â€œå¥åº·çš„èº«ä½“ï¼Œå¹³é™çš„å¤´è„‘ï¼Œå……æ»¡çˆ±çš„å®¶åº­ã€‚è¿™äº›ä¸œè¥¿æ˜¯ä¹°ä¸æ¥çš„ï¼Œå¿…é¡»è¦ç»è¥æ‰èƒ½å¾—åˆ°ã€‚â€</p>
<p>å³ä½¿ä½ æ‹¥æœ‰ä¸–ç•Œä¸Šæ‰€æœ‰çš„é’±ï¼Œä½ ä¹Ÿä¸ä¼šæ‹¥æœ‰è¿™ä¸‰æ ·ä¸œè¥¿ã€‚Jeff Bezosï¼ˆäºšé©¬é€Šè‘£äº‹é•¿ï¼‰è¿˜å¾—å¥èº«ï¼Œä»–ä¹Ÿå¾—ä¸ºä»–çš„å©šå§»åŠªåŠ›ï¼Œä»–çš„å†…åœ¨ç²¾ç¥çŠ¶æ€ä»ç„¶å¾ˆéš¾ä¸è¢«å¤–éƒ¨äº‹ä»¶æ‰€å½±å“ã€‚è¿™å°†å–å†³äºä»–å†…å¿ƒçš„å¹³é™ä¸å®‰å®ã€‚å› æ­¤ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸‰ä»¶äº‹â€”â€”ä½ çš„èº«ä½“å¥åº·ï¼Œä½ çš„å¿ƒç†å¥åº·å’Œä½ çš„äº²å¯†å…³ç³»æ˜¯ä½ å¿…é¡»è¦åŸ¹å…»çš„ã€‚ä»–ä»¬èƒ½ç»™ä½ å¸¦æ¥æ¯”ä»»ä½•é‡‘é’±éƒ½å¤šçš„å®‰å®å’Œå¹¸ç¦ã€‚</p>
<h3>å…³äºå¹³é™å†…å¿ƒçŠ¶æ€çš„å®ç”¨æ€§å»ºè®®</h3>
<p>å¦‚ä½•æ‰èƒ½ä¿æŒå†…å¿ƒå¹³é™ï¼Œè¿™ä¸ªè¯é¢˜æ˜¯æˆ‘ä¸€ç›´åœ¨ç ”ç©¶çš„ã€‚æˆ‘å¤§æ¦‚æœ‰100æ¡è¿™ä¸ªæ–¹é¢çš„æ¨ç‰¹ã€‚åœ¨è¿™ä¸ªè¯é¢˜ä¸Šï¼Œæœ€è¿‘ç»å¸¸ä¼šé­åˆ°è‡³å°‘50ç§ä¸åŒå½¢å¼çš„æ”»å‡»ã€‚æ‰€ä»¥æˆ‘ä¸€ç›´åœ¨çŠ¹è±«è¦ä¸è¦åšï¼Œå› ä¸ºæˆ‘æƒ³é’ˆå¯¹ä¸€ç§éå¸¸ç‰¹æ®Šçš„äººç¾¤ã€‚</p>
<p>æœ‰å¾ˆå¤šäººä¸ç›¸ä¿¡ç ”ç©¶å†…åœ¨çŠ¶æ€æ˜¯æœ‰ç”¨çš„ï¼Œä»–ä»¬å¤ªæ³¨é‡å¤–åœ¨ã€‚æ²¡å…³ç³»ï¼Œè¿™æ ·ä¹Ÿçš„ç¡®æ²¡ä»€ä¹ˆé—®é¢˜ã€‚è¿™å°±æ˜¯â€œå¦‚ä½•è‡´å¯Œâ€æ¨ç‰¹ç³»åˆ—çš„ç›®çš„ã€‚æœ‰å¾ˆå¤šäººè®¤ä¸ºå”¯ä¸€å€¼å¾—åŠªåŠ›çš„å°±æ˜¯<strong>å½»åº•è§£æ”¾(complete liberation)</strong>ï¼Œå°±åƒï¼Œä½ æˆäº†ä½›ã€‚ä»–ä»¬ä¼šæ€€ç–‘è¿‡ç¨‹ä¸­çš„ä»»ä½•ä¸œè¥¿ï¼Œè®¤ä¸ºå®ƒä»¬æ¯«æ— ç”¨å¤„ã€‚ä½†äº‹å®æ˜¯ç»å¤§å¤šæ•°äººæ²¡æ³•å„¿æˆä½›ä¸æ˜¯å—ï¼Ÿ</p>
<p><strong>æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨ç‰¹ç³»åˆ—ï¼Œæ¥ä¸ºé‚£äº›æƒ³è¦ä¸€ä¸ªæ›´å¹³é™çš„å†…åœ¨çš„äººä»¬æä¾›å®ç”¨çš„å»ºè®®</strong>ã€‚ä¸€å¥—ç†è§£ã€åˆ†è¾¨åŠçœŸåŠå‡å’ŒçœŸç†çš„ç†è®ºï¼Œå¦‚æœä½ èƒ½æ­£ç¡®åœ°å¸æ”¶å®ƒä»¬ï¼Œè¿™äº›éƒ½æ˜¯æŒ‡å‘ä½ å·²ç»æ‹¥æœ‰çš„æƒ³æ³•å’Œç»éªŒçš„æŒ‡é’ˆï¼›å¦‚æœä½ æŠŠè¿™äº›ç†è®ºæ…¢æ…¢èä¼šè´¯é€šï¼Œå®ƒå°†å¸®åŠ©ä½ ã€å¼•å¯¼ä½ è¿›å…¥ä¸€ä¸ªæ›´å¹³é™çš„å†…åœ¨çŠ¶æ€ï¼Œè¿™å°±æ˜¯æˆ‘æƒ³åšçš„ã€‚</p>
<p>å¥èº«æ˜¯å¦ä¸€ä¸ªå¤§é—®é¢˜ï¼Œæˆ‘ä¸æ˜¯è¿™æ–¹é¢çš„ä¸“å®¶ï¼Œæ¨ç‰¹ä¸Šæœ‰å¾ˆå¤šæ¯”æˆ‘æ›´æ“…é•¿å¥èº«çš„ä¸“ä¸šäººå£«ã€‚</p>
<h3>å¾ˆå¤šç¦»å©šæ¡ˆä¾‹æ˜¯ä¸ºäº†é’±ï¼Œå¾ˆå¤šäº‰åµæ˜¯å› ä¸ºå†…å¿ƒææƒ§</h3>
<p>æˆ‘è®¤ä¸ºï¼Œä¸€ä¸ªå……æ»¡çˆ±çš„å®¶åº­å’Œäººé™…å…³ç³»å®é™…ä¸Šæ˜¯è‡ªç„¶è€Œç„¶åœ°ä»å…¶ä»–äº‹æƒ…ä¸­è„±é¢–è€Œå‡ºçš„ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå†·é™çš„å¤´è„‘ï¼Œä½ å·²ç»èµšäº†é’±ï¼Œä½ åº”è¯¥æœ‰è‰¯å¥½çš„å…³ç³»ã€‚ä½ æ²¡æœ‰ç†ç”±ä¸è¿™æ ·åšï¼Œå¾ˆå¤šç¦»å©šéƒ½æ˜¯ä¸ºäº†é’±ï¼Œä¸å¹¸çš„æ˜¯ï¼Œè¿™å°±æ˜¯ç°å®ï¼Œæœ‰äº†é’±ä½†æ˜¯ä¸¢å¤±äº†å®¶åº­è¿™éƒ¨åˆ†ã€‚</p>
<p>å¾ˆå¤šå¤–åœ¨çš„çº·äº‰ä¸»è¦æ˜¯å› ä¸ºä½ çš„å†…åœ¨çŠ¶æ€ä¸å¥½ã€‚å½“ä½ å†…å¿ƒè‡ªç„¶å¹³é™çš„æ—¶å€™ï¼Œä½ ä¼šé€‰æ‹©æ›´å°‘çš„äº‰æ–—ï¼Œä½ ä¼šå˜å¾—æ›´æœ‰çˆ±å¿ƒè€Œä¸æœŸå¾…ä»»ä½•å›æŠ¥ï¼Œè¿™ä¼šè®©ä½ åº”å¯¹å¤–éƒ¨å…³ç³»æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚</p>
<p>Niviï¼šæ€»ç»“ä¸€ä¸‹ï¼Œé’±èƒ½è§£å†³ä½ çš„å…³äºé‡‘é’±çš„é—®é¢˜ï¼Œé‡‘é’±å¯ä»¥è®©ä½ åœ¨ç‰©è´¨ä¸–ç•Œä¸­è·å¾—è‡ªç”±ã€‚é‡‘é’±èƒ½ç»™ä½ ä¸å»åšä½ ä¸æƒ³åšçš„äº‹æƒ…çš„è‡ªç”±ã€‚</p>
<p>Navalï¼šæ˜¯å•Šã€‚å¯¹æˆ‘æ¥è¯´ï¼Œé‡‘é’±çš„æœ€ç»ˆç›®çš„æ˜¯è®©ä½ ä¸å¿…åœ¨æŸä¸ªç‰¹å®šçš„åœ°æ–¹çš„æŸä¸ªç‰¹å®šçš„æ—¶é—´ï¼Œåšä»»ä½•ä½ ä¸æƒ³åšçš„äº‹æƒ…ã€‚</p>
<h2>ç¬¬ä¸‰åå…­æ¡ï¼šæ²¡æœ‰ä»€ä¹ˆå¿«é€Ÿè‡´å¯Œçš„æ–¹æ³•</h2>
<p><strong>åˆ«ç›¸ä¿¡èƒ½å¿«é€Ÿè‡´å¯Œçš„é¬¼è¯ï¼Œé‚£äº›äººåªæ˜¯æƒ³ä»ä½ èº«ä¸Šèµšé’±è€Œå·²</strong></p>
<p>Niviï¼šæˆ‘ä»¬è·³è¿‡äº†ä¸€æ¡æ¨æ–‡ï¼Œå› ä¸ºæˆ‘æƒ³æ¶µç›–æ‰€æœ‰å…³äºé•¿æœŸè¯é¢˜çš„æ¨æ–‡ã€‚æˆ‘ä»¬è·³è¿‡çš„é‚£æ¡æ¨ç‰¹æ˜¯ï¼Œâ€œä¸–ç•Œä¸Šæ²¡æœ‰å¿«é€Ÿè‡´å¯Œçš„æ·å¾„ï¼Œå¦‚æœè°å‘Šè¯‰ä½ æœ‰ï¼Œé‚£ä¸è¿‡æ˜¯ä»–æƒ³ä»ä½ è¿™é‡Œå‘è´¢ç½¢äº†ã€‚â€</p>
<p>Navalï¼šæˆ‘ä»¬è¯´å›æœ‰æ•ˆç‡çš„ä¸–ç•Œã€‚å¦‚æœæœ‰ä¸€ç§ç®€å•çš„è‡´å¯Œæ–¹å¼ï¼Œé‚£å°±æ˜¯å·²ç»è¢«å¼€å‘äº†ã€‚æœ‰å¾ˆå¤šäººä¼šå‘ä½ æ¨é”€å¦‚ä½•èµšé’±çš„äº§å“ï¼Œæ¯”å¦‚ä»–ä»¬æ€»æ˜¯å–ç»™ä½ ä¸€äº›79-95ç¾å…ƒçš„è¯¾ç¨‹æˆ–ä¸€äº›æœ‰å£°è¯»ç‰©ï¼Œæˆ–ç ”è®¨ä¼šé—¨ç¥¨ã€‚è¿™æ²¡ä»€ä¹ˆå¯¹é”™ï¼Œäººä»¬æ€»æ˜¯éœ€è¦è°‹ç”Ÿã€‚ä»–ä»¬å¯èƒ½çœŸçš„æœ‰å¾ˆå¥½çš„å»ºè®®ï¼Œä½†å¦‚æœä»–ä»¬ç»™ä½ å¯è¡Œçš„ã€é«˜è´¨é‡çš„å»ºè®®ï¼Œæ‰¿è®¤è¿™ï¼ˆè‡´å¯Œï¼‰æ˜¯ä¸€ä¸ªè‰°éš¾çš„æ—…ç¨‹ï¼Œä¼šèŠ±å¾ˆå¤šæ—¶é—´ï¼Œé‚£ä¹ˆæˆ‘è®¤ä¸ºè¿™æ˜¯ç°å®çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœä»–ä»¬å–ç»™ä½ ä¸€äº›å¿«é€Ÿè‡´å¯Œçš„å„ç§çº¿ä¸Šçº¿ä¸‹çš„äº§å“ï¼Œä»–ä»¬åªæ˜¯æƒ³ä»ä½ èº«ä¸Šèµšé’±ï¼Œä½ è¦æ‚é‡ä¸€ä¸‹å®ƒçš„ä»·å€¼ã€‚</p>
<h3>æˆ‘ä»¬ä¸æ”¾å¹¿å‘Šï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“é‚£åªä¼šæŸå®³ä¿¡èª‰</h3>
<p>å…³äºæ•´ä¸ªæ¨ç‰¹é£æš´å’Œè¿™ä¸ªæ’­å®¢ï¼Œæˆ‘æƒ³å¼ºè°ƒçš„ä¸€ä»¶äº‹æ˜¯æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰å¹¿å‘Šï¼Œä¹Ÿä¸æ”¶ä»»ä½•è´¹ç”¨ã€‚æˆ‘ä»¬ä¸å–ä»»ä½•ä¸œè¥¿ã€‚ä¸æ˜¯å› ä¸ºæˆ‘ä¸æƒ³èµšæ›´å¤šçš„é’±ï¼Œèµšæ›´å¤šçš„é’±æ€»æ˜¯å¥½çš„ã€‚ä½†æ˜¯ï¼Œå®ƒä¼šå®Œå…¨ç ´åä¼ä¸šçš„ä¿¡èª‰ã€‚å¦‚æœæˆ‘è¯´ï¼Œâ€œå˜¿ï¼Œæˆ‘çŸ¥é“å¦‚ä½•è‡´å¯Œï¼Œæˆ‘è¦æŠŠå®ƒå–ç»™ä½ ã€‚â€œè¿™å°±æ¯äº†å®ƒã€‚</p>
<p>æˆ‘å¹´è½»çš„æ—¶å€™å°±å¼€å§‹æ€è€ƒè‡´å¯Œçš„è¯é¢˜ï¼Œæˆ‘æœ€å–œæ¬¢çš„ä¹¦ä¹‹ä¸€å°±æ˜¯ã€Šå¦‚ä½•è‡´å¯Œã€‹ï¼Œä½œè€…æ˜¯Felix Dennisï¼Œã€ŠMaximã€‹æ‚å¿—çš„åˆ›å§‹äººï¼Œä¸€ä½å»ä¸–çš„äº¿ä¸‡å¯Œç¿ã€‚ä»–å†™äº†å¾ˆå¤šç–¯ç‹‚çš„ä¸œè¥¿ï¼Œä½†ä»–å¯¹è´¢å¯Œçš„ç†è§£çœŸçš„å¥½ã€‚</p>
<p>ä½†æ¯å½“æˆ‘è¯»åˆ°ä»–æˆ–GoDaddyåˆ›å§‹äººé²å‹ƒÂ·å¸•æ£®æ–¯æˆ–å®‰å¾·é²Â·å¡å†…åŸºçš„ä½œå“æ—¶ï¼Œè¿™äº›å·²ç»éå¸¸å¯Œæœ‰çš„äººå†™çš„ä¸œè¥¿ï¼Œä»–ä»¬æ˜¾ç„¶æ˜¯åœ¨å…¶ä»–é¢†åŸŸå‘å®¶è‡´å¯Œçš„ï¼Œè€Œä¸æ˜¯é <strong>æ¨é”€å¦‚ä½•è‡´å¯Œçš„æ–¹æ³•</strong>ã€‚ä»–ä»¬ä¸æ˜¯æƒ³ä»ä½ èº«ä¸Šèµšé’±ã€‚ä»–ä»¬æ˜¾ç„¶æ˜¯æƒ³èµ¢å¾—ä¸€äº›åœ°ä½å’Œä¸€äº›è‡ªå°Šï¼Œå¯¹å§ï¼Œä½ æ€»æ˜¯è¦æœ‰åšæŸäº‹çš„åŠ¨æœºã€‚ä½†æ˜¯ï¼Œè‡³å°‘è¿™æ˜¯ä»–ä»¬æ²¡æœ‰æ’’è°çš„ä¸€ä¸ªæ›´æ¸…æ™°çš„ç†ç”±ã€‚</p>
<h3>æ¯ä¸ªåˆ›å§‹äººéƒ½ä¼šå¯¹ä»–çš„å‘˜å·¥æ’’è°</h3>
<p>åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œæ¯ä¸ªåˆ›å§‹äººéƒ½è¦å¯¹å…¬å¸çš„æ¯ä¸ªå‘˜å·¥æ’’è°ã€‚ä»–ä»¬å¿…é¡»è®©å‘˜å·¥è§‰å¾—ï¼Œä½ ä¸ºæˆ‘å·¥ä½œæ¯”åšä½ è‡ªå·±æƒ³åšçš„äº‹ï¼Œä¸ºä½ è‡ªå·±å·¥ä½œï¼ˆåˆ›ä¸šï¼‰è¦å¥½ã€‚åŒæ ·ä½œä¸ºä¸€ä¸ªåˆ›å§‹äººï¼Œä½†å¯¹æ­¤æˆ‘æ€»æ˜¯å¾ˆéš¾æ¥å—ã€‚</p>
<p>äºæ˜¯æˆ‘å¼€å§‹å°è¯•ä¸€äº›ä¿æŒè¯šå®çš„æ–¹æ³•ï¼Œæˆ‘æ‹›å‹Ÿäº†ä¸€äº›æœ‰ä¼ä¸šå®¶ç²¾ç¥çš„å‘˜å·¥ï¼Œç„¶åå‘Šè¯‰ä»–ä»¬ï¼Œâ€œä½ ä»¬å¯ä»¥åœ¨è¿™ä¸ªå…¬å¸æˆä¸ºä¼ä¸šå®¶ï¼Œå½“ä½ ä»¬å‡†å¤‡å¥½å¼€å§‹è‡ªå·±çš„äº‹ä¸šçš„é‚£ä¸€å¤©ï¼Œæˆ‘å°†æ”¯æŒä½ ä»¬ã€‚æˆ‘æ°¸è¿œä¸ä¼šå¦¨ç¢ä½ åˆ›ä¸šã€‚ä½†åœ¨ä½ æƒ³å¼€å§‹ä¸€äº›æ–°ä¸œè¥¿ä¹‹å‰ï¼Œè¿™é‡Œå¯èƒ½æ˜¯ä¸€ä¸ªå¥½åœ°æ–¹ï¼Œè®©ä½ å­¦ä¹ å¦‚ä½•æ„å»ºä¸€ä¸ªè‰¯å¥½çš„å›¢é˜Ÿï¼Œå»ºç«‹ä¸€ä¸ªå¥½çš„ä¼ä¸šæ–‡åŒ–ï¼Œé€šè¿‡æ‰“ç£¨è‡ªå·±çš„æŠ€èƒ½æ‰¾åˆ°é€‚åˆçš„äº§å“å¸‚åœºï¼Œè§æ›´å¤šæ›´åŠ ä¼˜ç§€çš„äººã€å’Œä»–ä»¬äº¤æµç¢°æ’ï¼Œç›´åˆ°æœ€ç»ˆæƒ³é€šè‡ªå·±åˆ°åº•æƒ³åšä»€ä¹ˆã€‚å› ä¸ºå®šä½ã€æ—¶æœºã€ä»¥åŠå¿…è¦çš„æ·±æ€ç†Ÿè™‘ï¼Œåœ¨å¼€å§‹åˆ›ä¸šæ—¶å¾ˆé‡è¦ã€‚â€</p>
<p>ä½†æˆ‘ä»æ¥ä¸ä¼šåšä¸€äº›æ— è°“çš„ç›‘ç£ï¼Œå‘Šè¯‰å‘˜å·¥â€œä½ å¿…é¡»åœ¨æ—©ä¸Š8ç‚¹ä¹‹å‰åˆ°ä½ çš„åŠå…¬æ¡Œã€‚â€å› ä¸ºæˆ‘è‡ªå·±å°±ä¸ä¼šåœ¨æ—©ä¸Š8ç‚¹ä¹‹å‰ååœ¨åŠå…¬æ¡Œå‰ï¼Œæˆ‘æƒ³è¦è‡ªç”±ã€‚è¿™å°±åƒå‘Šè¯‰ä»–ä»¬ä½ ä»Šå¤©å¾ˆæ“…é•¿åšè‘£äº‹ï¼Œæ˜å¤©ä½ å°±ä¼šæˆä¸ºå‰¯æ€»è£ã€‚è¿™ç§è¯æˆ‘è‡ªå·±éƒ½ä¸ç›¸ä¿¡ã€‚</p>
<h3>ä»»ä½•æä¾›è‡´å¯Œå»ºè®®çš„äººï¼Œå»æƒ³æƒ³åˆ«çš„èµšé’±æ–¹å¼å§</h3>
<p>å°±å¥½åƒï¼Œä½ ä¸ä¼šæƒ³ä»ä¸€ä¸ªèƒ–å­é‚£é‡Œå­¦åˆ°å¦‚ä½•ä¿æŒå¥åº·ï¼›ä¹Ÿä¸ä¼šæƒ³ä»ä¸€ä¸ªæŠ‘éƒçš„äººé‚£é‡Œå­¦åˆ°å¦‚ä½•å¿«ä¹ã€‚æ‰€ä»¥ï¼Œä½ ä¸ä¼šæƒ³ä»ä¸€ä¸ªç©·äººé‚£é‡Œå­¦ä¹ å¦‚ä½•è‡´å¯Œï¼Œä¹Ÿä¸€å®šä¸æƒ³ä»ä¸€ä¸ªé€šè¿‡å‘Šè¯‰åˆ«äººå¦‚ä½•è‡´å¯Œæ¥èµšé’±çš„äººé‚£é‡Œå­¦ä¹ å¦‚ä½•è‡´å¯Œã€‚æƒ³æƒ³éƒ½å¥‡æ€ªä¸æ˜¯å—ï¼Ÿ</p>
<p>Niviï¼šä»»ä½•æ—¶å€™ï¼Œå¦‚æœä½ çœ‹åˆ°æœ‰äººæŒ‰ç…§å¤§å¸ˆçš„å»ºè®®è‡´å¯Œäº†ï¼Œåªè¦è®°ä½ï¼Œåœ¨ä»»ä½•éšæœºäº‹ä»¶ä¸­ï¼Œå¦‚æœä½ æŒç»­è¶³å¤Ÿé•¿çš„æ—¶é—´ï¼Œå¦‚æœæœ‰è¶³å¤Ÿå¤šçš„äººå‚ä¸å…¶ä¸­ï¼Œä½ å°±ä¼šå¾—åˆ°æƒ³è¦çš„ç»“æœã€‚</p>
<p>Navalï¼šè¿™é‡Œé¢å­˜åœ¨ç€å¹¸å­˜è€…åå·®ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå½“å•†ä¸šè®°è€…å’Œç»æµå­¦å®¶è°ˆè®ºç§è¥å…¬å¸æ—¶ï¼Œä½ å¯ä»¥å®Œå…¨å¿½è§†ä»–ä»¬çš„åŸå› ã€‚</p>
<p>æˆ‘ä¸ä¼šæŒ‡åé“å§“ï¼Œä½†å½“ä¸€ä½è‘—åçš„ç»æµå­¦å®¶å¯¹æ¯”ç‰¹å¸å¤§åŠ æŠ¨å‡»ï¼Œæˆ–è€…å½“ä¸€åå•†ä¸šè®°è€…æ”»å‡»æœ€æ–°ä¸€å®¶å³å°†ä¸Šå¸‚çš„å…¬å¸æ—¶ï¼Œè¿™å®Œå…¨æ˜¯èƒ¡è¯´å…«é“ã€‚é‚£äº›äººä»€ä¹ˆéƒ½æ²¡åšï¼Œä»–ä»¬åªæ˜¯ã€Œä¸“ä¸šçš„è¯„è®ºå®¶ã€ã€‚ä»–ä»¬å¯¹èµšé’±ä¸€æ— æ‰€çŸ¥ã€‚ä»–ä»¬åªçŸ¥é“å¦‚ä½•é€šè¿‡åæ§½å’Œæ‰¹è¯„æ¥åšçœ¼çƒã€‚ä½ è¦æ˜¯ä¸åœçš„è¢«ä»–ä»¬æ´—è„‘å¯å°±å¤ªè ¢äº†ã€‚</p>
<p>æœ€åæˆ‘æƒ³å¼•ç”¨çº³è¥¿å§†Â·å¡”å‹’å¸ƒ*çš„ä¸€å¥è¯ï¼Œæˆ‘å¾ˆå–œæ¬¢ä»–è¯´çš„è¯ï¼Œâ€œå¦‚æœä½ æƒ³æˆä¸ºä¸€ä¸ªå“²å­¦å®¶ï¼Œå…ˆå½“å›½ç‹ï¼Œå†å½“å“²å­¦å®¶ã€‚â€ä¸æ˜¯å…ˆæˆä¸ºå“²å­¦å®¶ï¼Œå†æˆä¸ºå›½ç‹ã€‚â€</p>
<p>Niviï¼šæˆ‘å¾ˆé«˜å…´ä½ æåˆ°äº†å¡”å‹’å¸ƒï¼Œæˆ‘æƒ³è¯·å¤§å®¶è®°ä½ä»–æˆåä½œçš„ä¹¦åã€Šéšæœºéª—å±€ã€‹ã€‚</p>
<p>Navalï¼šæˆ‘ä»¬åœ¨è¿™æœŸæ’­å®¢ä¸­æœ‰äº›æ¨¡ç³Šçš„åŸå› ä¹‹ä¸€æ˜¯ï¼Œæˆ‘ä»¬è¯•å›¾å»è®¨è®ºå€¼å¾—é•¿æœŸéµå¾ªçš„åŸåˆ™ï¼Œè€Œä¸ä»…ä»…æ˜¯å‘Šè¯‰ä½ æ˜¨å¤©ä¸­å¥–çš„å½©ç¥¨å·ã€‚</p>
<h2>ç¬¬ä¸‰åä¸ƒæ¡ï¼šäº§å“åŒ–ä½ è‡ªå·±</h2>
<p><strong>æ‰¾å‡ºä½ æœ€æ“…é•¿çš„ï¼Œå¹¶å°½å¯èƒ½å¤šåœ°è¿ç”¨æ æ†</strong></p>
<p>Niviï¼šä½ ç”¨ä¸¤ä¸ªè¯æ¦‚æ‹¬äº†æ•´ä¸ªæ¨ç‰¹é£æš´ã€‚â€œäº§å“åŒ–ï¼ˆProductizeï¼‰ä½ è‡ªå·±ã€‚â€</p>
<p>Navalï¼šäº§å“åŒ–ä½ è‡ªå·±è¿™ä¸ªæ¦‚å¿µçš„æ„æ€æ˜¯ï¼š<strong>ä½ è‡ªå·±</strong>æ˜¯ç‹¬ç‰¹çš„ã€æœ‰è´£ä»»å¿ƒçš„ï¼Œ<strong>äº§å“åŒ–</strong>éœ€è¦ç‹¬ç‰¹çš„æŠ€èƒ½å’Œæ æ†ã€‚æ‰€ä»¥æ‰€æœ‰è¿™äº›éƒ¨åˆ†ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬åˆå¹¶æˆè¿™ä¸¤ä¸ªè¯ã€‚</p>
<p>å¦‚æœä½ æƒ³è¦é•¿æœŸè‡´å¯Œï¼Œä½ åº”è¯¥é—®è‡ªå·±ï¼šâ€œè¿™æ˜¯æˆ‘çš„çœŸå®æƒ³æ³•å—ï¼Ÿâ€æˆ‘åœ¨æ‰“é€ çš„æ˜¯æˆ‘è‡ªå·±å—ï¼Ÿç„¶åï¼Œâ€œæˆ‘åœ¨ç”Ÿäº§å®ƒå—ï¼Ÿâ€æˆ‘åœ¨è§„æ¨¡åŒ–å®ƒå—ï¼Ÿæˆ‘æ˜¯åœ¨ç”¨åŠ³åŠ¨åŠ›è¿˜æ˜¯èµ„æœ¬ï¼Œä»£ç è¿˜æ˜¯åª’ä½“æ¥è¡¡é‡ï¼Ÿæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿ã€ç®€å•çš„è®°å¿†æ–¹æ³•ã€‚</p>
<p>è¿™æ˜¯ä»€ä¹ˆæ’­å®¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå«åšNavalçš„æ’­å®¢ã€‚æˆ‘å®é™…ä¸Šæ˜¯åœ¨ç”¨æ’­å®¢åœ¨äº§å“åŒ–è‡ªå·±çš„ä¸€éƒ¨åˆ†</p>
<p>Niviï¼šä½ è¦å¼„æ¸…æ¥šä½ æœ‰ä»€ä¹ˆç‰¹åˆ«æ“…é•¿çš„ï¼Œæˆ–è€…ä½ æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œç„¶åå°½å¯èƒ½åœ°è¿ç”¨æ æ†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä½ ä¸æ˜¯åœ¨åˆ»æ„èµšé’±ï¼Œèµšé’±ç”šè‡³ä¹Ÿä¸æ˜¯ä¸€ç§æŠ€èƒ½ã€‚ä½ å°±æ˜¯åœ¨åšä½ è‡ªå·±ï¼Œæ¢ç´¢æˆåƒä¸Šç™¾ç§æ–¹å¼æ‰¾åˆ°çœŸæ­£çš„ä½ ã€‚</p>
<h2>æ‰¾åˆ°è®©ä½ å¯Œæœ‰ã€å¥åº·å’Œæœ‰åˆ›é€ åŠ›çš„çˆ±å¥½</h2>
<p>Navalï¼šèµšé’±åº”è¯¥å–å†³äºä½ æ˜¯è°å’Œä½ å–œæ¬¢åšä»€ä¹ˆã€‚å¦ä¸€æ¡æˆ‘ç‰¹åˆ«å–œæ¬¢çš„æ¨ç‰¹æ˜¯...è¿™ä¸æ˜¯æˆ‘è¯´çš„ï¼Œæ˜¯åˆ«äººå‘è¿‡çš„ã€‚ä»–ä»¬è¯´â€œæ‰¾ä¸‰ä¸ªçˆ±å¥½â€ã€‚ä¸€ä¸ªèƒ½è®©ä½ èµšé’±ï¼Œä¸€ä¸ªèƒ½è®©ä½ ä¿æŒå¥åº·ï¼Œä¸€ä¸ªèƒ½è®©ä½ å¯Œæœ‰åˆ›é€ åŠ›ã€‚â€</p>
<p>æˆ‘ä¼šç¨å¾®æ”¹å˜ä¸€ä¸‹ã€‚æˆ‘ä¼šè¯´ï¼Œæ‰¾åˆ°ä¸‰ä¸ªçˆ±å¥½ï¼Œä¸€ä¸ªè®©ä½ èµšé’±ï¼Œä¸€ä¸ªè®©ä½ å¥åº·ï¼Œä¸€ä¸ªè®©ä½ æ›´èªæ˜ã€‚å°±æˆ‘è€Œè¨€ï¼Œæˆ‘çš„çˆ±å¥½æ˜¯é˜…è¯»ï¼Œèµšé’±ï¼Œå› ä¸ºæˆ‘å–œæ¬¢ä¸åˆåˆ›å…¬å¸åˆä½œã€‚è¦ä¹ˆæŠ•èµ„ï¼Œè¦ä¹ˆé›†æ€å¹¿ç›Šï¼Œè¦ä¹ˆå¼€å§‹è¡ŒåŠ¨ã€‚æˆ‘å¾ˆå–œæ¬¢åˆ›ä¸šåˆæœŸçš„åˆ›æ„å’Œåˆ›é€ é˜¶æ®µã€‚</p>
<p>è‡³äºè®©ä½ ä¿æŒå¥åº·çš„çˆ±å¥½ï¼Œæˆ‘çœŸçš„æ²¡æœ‰ã€‚æˆ‘æœ€å–œæ¬¢çš„æ˜¯ç‘œä¼½ï¼Œä½†é‚£æ˜¯æˆ‘å´©æºƒçš„åœ°æ–¹ã€‚æˆ‘è®¤ä¸ºï¼Œé‚£äº›æ—©å¹´å‘ç°å†²æµªã€æ¸¸æ³³ã€ç½‘çƒæˆ–æŸç§ä»–ä»¬ä¸€ç”Ÿä¸­å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨åšçš„è¿åŠ¨çš„äººæ˜¯éå¸¸å¹¸è¿çš„ï¼Œå› ä¸ºä»–ä»¬å‘ç°äº†ä¸€ç§ä½¿ä»–ä»¬å¥åº·çš„çˆ±å¥½ã€‚</p>
]]></content:encoded>
      <enclosure url="https://i.imgur.com/WubW2ud.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>ç¨‹åºå‘˜å»¶å¯¿æŒ‡å—</title>
      <link>http://blog.cjhe.top/other/how-to-live-longer.html</link>
      <guid>http://blog.cjhe.top/other/how-to-live-longer.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç¨‹åºå‘˜å»¶å¯¿æŒ‡å—</source>
      <description>ã€è½¬ã€‘åŸæ–‡é“¾æ¥</description>
      <category>è½¬è½½</category>
      <pubDate>Fri, 03 Mar 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ã€è½¬ã€‘<a href="https://github.com/geekan/HowToLiveLonger" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a></p>
<!-- more -->
<h1>ç¨‹åºå‘˜å»¶å¯¿æŒ‡å—</h1>

<h2>1. æœ¯è¯­</h2>
<ul>
<li>ACM: All-Cause Mortality / å…¨å› æ­»äº¡ç‡</li>
</ul>
<h2>2. ç›®æ ‡</h2>
<ul>
<li>ç¨³å¥åœ°æ´»å¾—æ›´ä¹…</li>
</ul>
<h2>3. å…³é”®ç»“æœ</h2>
<ul>
<li>é™ä½66.67%å…¨å› æ­»äº¡ç‡</li>
<li>å¢åŠ ~20å¹´é¢„æœŸå¯¿å‘½</li>
<li><s>ç»´æŒå¤šå·´èƒºäºä¸­è½´</s></li>
</ul>
<h2>4. åˆ†æ</h2>
<ul>
<li>ä¸»è¦å‚è€ƒï¼šå¯¹ACMçš„å­¦æœ¯æ–‡çŒ®ç›¸å¯¹è¾ƒå¤šï¼Œå¯ä»¥ä½œä¸ºä¸»è¦å‚è€ƒ</li>
<li>å¢åŠ å¯¿å‘½ä¸ACMå…³ç³»éçº¿æ€§ï¼šæ˜¾ç„¶å¢åŠ å¯¿å‘½ä¸ACMå…³ç³»æ˜¯éçº¿æ€§å‡½æ•°ï¼Œè¿™é‡Œå‡è®¾ <code>DeltaLifeSpan=(1/(1+DeltaACM)-1)*10</code>ï¼ˆDeltaACMä¸ºACMå˜åŒ–å€¼ï¼›å…¬å¼æ¬¢è¿ä¼˜åŒ–ï¼‰</li>
<li>å˜é‡æ— æ³•ç®€å•å åŠ ï¼šæ˜¾ç„¶å„ä¸ªå˜é‡ä¹‹é—´å¹¶ä¸ç¬¦åˆç‹¬ç«‹åŒåˆ†å¸ƒå‡è®¾ï¼Œå˜é‡ä¹‹é—´çš„å®é™…å½±å“ä¹Ÿå¹¶ä¸æ˜ç¡®</li>
<li>å­˜åœ¨çŸ›ç›¾è§‚ç‚¹ï¼šæ‰€æœ‰çš„è¯æ®éƒ½æœ‰æ–‡çŒ®/ç ”ç©¶å¯¹åº”ï¼Œä½†æ³¨æ„åˆ°ï¼šæœ‰äº›æ–‡çŒ®ä¹‹é—´æœ‰æ˜¾è‘—çŸ›ç›¾çš„è§‚ç‚¹ï¼ˆå¦‚å¯¹äºç¢³æ°´æ‘„å…¥æ¯”ä¾‹çš„çŸ›ç›¾ï¼‰ï¼›æœ‰äº›æ–‡çŒ®å­˜åœ¨è¾ƒå¤§äº‰è®®ï¼ˆå¦‚è®¤ä¸º22ç‚¹å‰ç¡è§‰ä¼šæå‡43%å…¨å› æ­»äº¡ç‡ï¼‰</li>
<li>ç ”ç©¶ä»…è¡¨è¾¾ç›¸å…³ï¼šæ‰€æœ‰æ–‡çŒ®è¡¨æ˜çš„æ›´å¤šæ˜¯ç›¸å…³è€Œéå› æœï¼Œåœ¨é˜…è¯»æ—¶è¦è€ƒè™‘æ–‡çŒ®æ˜¯å¦å……åˆ†è¯æ˜äº†å› æœ â€”â€” å¦‚æŸæ–‡çŒ®è¡¨æ˜äº†æ—¥å‡&gt;=7000æ­¥çš„äººæœ‰æ˜¾è‘—ä½çš„å…¨å› æ­»äº¡ç‡ã€‚ä½†æ­¥æ•°å°‘çš„äººå¯èƒ½åŒ…å«æ›´å¤šé•¿æœŸç—…æ‚£ï¼Œå¦‚æœæ²¡æœ‰åˆç†çš„æ’é™¤è¿™å—æ•°æ®ï¼Œé‚£æ­¤æ–‡çŒ®è°ƒæŸ¥å¤±çœŸ</li>
</ul>
<h2>5. è¡ŒåŠ¨</h2>
<ul>
<li>è¾“å…¥
<ul>
<li>å›ºä½“ï¼šåƒç™½è‚‰ï¼ˆ-11%~-3% ACMï¼‰ã€è”¬æœä¸ºä¸»ï¼ˆ-26%~-17% ACMï¼‰ï¼Œå¤šåƒè¾£ï¼ˆ-23% ACMï¼‰ï¼Œå¤šåƒåšæœï¼ˆ-27%~-4% ACMï¼‰ï¼Œ<em>å°‘åƒè›‹é»„ï¼ˆå¦åˆ™+7% ACM/0.5é¢—/å¤©ï¼‰ï¼ˆå­˜åœ¨äº‰è®®ï¼‰</em>ï¼Œä¸­é‡ç¢³æ°´ã€å¤šåƒæ¤ç‰©è›‹ç™½ï¼ˆ-10% ACMï¼‰ï¼Œå°‘åƒè¶…åŠ å·¥é£Ÿç‰©ï¼ˆ-62%~-18%ï¼‰</li>
<li>æ¶²ä½“ï¼šå–å’–å•¡ï¼ˆ-22%~-12% ACMï¼‰ï¼Œå–ç‰›å¥¶ï¼ˆ-17%~-10% ACMï¼‰ï¼Œå–èŒ¶ï¼ˆ-15%~-8% ACMï¼‰ï¼Œå°‘å–æˆ–ä¸å–ç”œå‘³é¥®æ–™ï¼ˆå¦åˆ™æ¯å¤©ä¸€æ¯+7% ACMï¼Œ+å¤šå·´èƒºï¼‰ï¼Œæˆ’é…’æˆ–æ¯å‘¨100gï¼ˆçº¯é…’ç²¾é‡(g)=é¥®é…’é‡(ml)Ã—é…’ç²¾æµ“åº¦(%)Ã—é…’ç²¾å¯†åº¦0.8g/mlï¼‰å†…ï¼ˆå¦åˆ™+~50% ACMï¼Œæ— ä¸Šé™ï¼‰</li>
<li>æ°”ä½“ï¼šä¸å¸çƒŸï¼ˆå¦åˆ™+~50% ACMï¼Œ-12~-11å¹´å¯¿å‘½ï¼‰</li>
<li>å…‰ç…§ï¼šæ™’å¤ªé˜³ï¼ˆ-~40% ACMï¼‰</li>
<li>è¯ç‰©ï¼šäºŒç”²åŒèƒï¼ˆç³–å°¿ç—…äººç›¸æ¯”æ­£å¸¸äººå¯ä»¥+3å¹´ï¼‰ã€å¤åˆç»´ç”Ÿç´ ï¼ˆ-8%ç™Œç—‡é£é™©ï¼‰ã€äºšç²¾èƒºï¼ˆ-60%~-30% ACMï¼‰ã€è‘¡è„ç³–èƒºï¼ˆ-39% ACMï¼‰</li>
</ul>
</li>
<li>è¾“å‡º
<ul>
<li>è¿åŠ¨ï¼šæ¯å‘¨3æ¬¡45åˆ†é’ŸæŒ¥æ‹è¿åŠ¨ï¼ˆ-47% ACMï¼‰</li>
<li>æ—¥å¸¸ï¼šåˆ·ç‰™ï¼ˆ-25% ACMï¼‰</li>
<li>ç¡çœ ï¼šæ¯å¤©ç¡7å°æ—¶å…¨å› æ­»äº¡ç‡æœ€ä½ï¼›ä¸”22-24ç‚¹é—´æœ€å¥½ï¼Œ<em>æ—©ç¡+43% ACMï¼Œæ™šç¡+15% ACMï¼ˆå­˜åœ¨äº‰è®®ï¼‰</em></li>
</ul>
</li>
<li>ä¸Šä¸‹æ–‡
<ul>
<li>ä½“é‡ï¼šå‡è‚¥ï¼ˆ-54% ACMï¼‰</li>
</ul>
</li>
</ul>
<h2>6. è¯æ®</h2>
<h3>6.1. è¾“å…¥</h3>
<h4>6.1.1. å›ºä½“</h4>
<ul>
<li>ç™½è‚‰
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/268401670" target="_blank" rel="noopener noreferrer">JAMAå­åˆŠï¼šé£Ÿç”¨çº¢è‚‰å’ŒåŠ å·¥è‚‰ç±»ä¼šå¢åŠ å¿ƒè„ç—…å’Œæ­»äº¡é£é™©ï¼é±¼è‚‰å’Œå®¶ç¦½è‚‰åˆ™ä¸ä¼š</a>
<ul>
<li>å‡ºå¤„ï¼š<a href="https://jamanetwork.com/journals/jamainternalmedicine/articlepdf/2759737/jamainternal_zhong_2020_oi_190112.pdf" target="_blank" rel="noopener noreferrer">Associations of Processed Meat, Unprocessed Red Meat, Poultry, or Fish Intake With Incident Cardiovascular Disease and All-Cause Mortality</a></li>
<li>å¢åŠ çº¢è‚‰æ‘„å…¥ä¸æ­»äº¡é£é™©ç›¸å…³ã€‚å…«å¹´å†…å¹³å‡æ¯å¤©å¢åŠ è‡³å°‘åŠä»½çº¢è‚‰æ‘„å…¥ï¼ˆåŠä»½çº¢è‚‰ç›¸å½“äº14gåŠ å·¥çº¢è‚‰æˆ–40géåŠ å·¥çº¢è‚‰ï¼‰çš„è°ƒæŸ¥å¯¹è±¡ï¼Œåœ¨æ¥ä¸‹æ¥å…«å¹´å†…å…¨å› æ­»äº¡é£é™©å¢åŠ 10ï¼…ï¼ˆHR, 1.10; 95%CI, 1.04-1.17ï¼‰ï¼›æ¯å‘¨åƒä¸¤ä»½çº¢è‚‰æˆ–åŠ å·¥è‚‰ç±»ï¼ˆä½†ä¸åŒ…æ‹¬å®¶ç¦½æˆ–é±¼ç±»ï¼‰ä¼šä½¿å…¨å› æ­»äº¡é£é™©å¢åŠ 3%</li>
<li><img src="https://user-images.githubusercontent.com/2707039/163703960-6f321de5-4daa-4ea5-95b9-af9c96f1c1bc.jpg" alt="çº¢è‚‰" tabindex="0" loading="lazy"><figcaption>çº¢è‚‰</figcaption></li>
</ul>
</li>
<li><a href="https://www.zhihu.com/question/67223570/answer/809785380" target="_blank" rel="noopener noreferrer">çº¢è‚‰å’Œç™½è‚‰æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸ºå•¥è¦è¿™ä¹ˆåˆ†å‘¢ï¼Ÿ</a></li>
</ul>
</li>
<li>è”¬æœ
<ul>
<li><a href="https://www.sohu.com/a/322360740_164924" target="_blank" rel="noopener noreferrer">æ¯å¹´54ä¸‡äººæ­»äº¡ï¼Œç«Ÿæ˜¯å› ä¸ºæ°´æœåƒå¾—å°‘ï¼ï¼Ÿè¿™å·²æˆåå¤§æ­»äº¡å› ç´ ä¹‹ä¸€ï¼</a>
<ul>
<li>å‡ºå¤„ï¼š<a href="https://academic.oup.com/cdn/article-abstract/3/Supplement_1/nzz028.FS01-01-19/5516583" target="_blank" rel="noopener noreferrer">Estimated Global, Regional, and National Cardiovascular Disease Burdens Related to Fruit and Vegetable Consumption: An Analysis from the Global Dietary Database (FS01-01-19)</a></li>
<li>æ¯å¤©æ‘„å…¥200å…‹æ–°é²œæ°´æœå¯ä½¿æ­»äº¡ç‡é™ä½17%ï¼Œç³–å°¿ç—…å¤§è¡€ç®¡å¹¶å‘ç—‡ï¼ˆå¦‚ä¸­é£ã€ç¼ºè¡€æ€§å¿ƒè„ç—…ç­‰ï¼‰é£é™©é™ä½13%ï¼ŒåŠç³–å°¿ç—…å°è¡€ç®¡å¹¶å‘ç—‡ï¼ˆå¦‚ç³–å°¿ç—…è‚¾ç—…ã€ç³–å°¿ç—…çœ¼ç—…ã€ç³–å°¿ç—…è¶³ç—…ç­‰ï¼‰é£é™©é™ä½28%</li>
</ul>
</li>
<li><a href="https://mp.weixin.qq.com/s/E6BAi-Vnhr1jXBm0Pys2ZQ" target="_blank" rel="noopener noreferrer">ã€Šè‡ªç„¶ã€‹å­åˆŠï¼šæ¯å¤©äºŒä¸¤è¥¿å…°èŠ±ï¼Œå¥åº·é•¿å¯¿éƒ½æœ‰å•¦ï¼åˆ†æè¿‘6ä¸‡äºº23å¹´çš„æ•°æ®å‘ç°ï¼Œåƒå«é»„é…®ç±»é£Ÿç‰©ä¸æ­»äº¡é£é™©é™ä½20%ç›¸å…³ä¸¨ä¸´åºŠå¤§å‘ç°</a>
<ul>
<li>å‡ºå¤„ï¼š<a href="https://www.nature.com/articles/s41467-019-11622-x" target="_blank" rel="noopener noreferrer">Flavonoid intake is associated with lower mortality in the Danish Diet Cancer and Health Cohort</a></li>
<li>åƒå«é»„é…®ç±»é£Ÿç‰©ä¸æ­»äº¡é£é™©é™ä½20%ç›¸å…³</li>
<li><img src="https://user-images.githubusercontent.com/2707039/163703969-42e64f88-e727-4e7d-85f2-07a92e29b613.jpg" alt="é»„é…®" tabindex="0" loading="lazy"><figcaption>é»„é…®</figcaption></li>
<li>Bondonnoåšå£«è¯´é“â€œåƒä¸åŒè”¬èœã€æ°´æœè¡¥å……ï¼Œä¸åŒç§ç±»çš„é»„é…®ç±»åŒ–åˆç‰©æ˜¯å¾ˆé‡è¦çš„ï¼Œè¿™å¾ˆå®¹æ˜“é€šè¿‡é¥®é£Ÿå®ç°ï¼šä¸€æ¯èŒ¶ã€ä¸€ä¸ªè‹¹æœã€ä¸€ä¸ªæ©˜å­ã€100å…‹è“è“ï¼Œæˆ–100å…‹è¥¿å…°èŠ±ï¼Œå°±èƒ½æä¾›å„ç§é»„é…®ç±»åŒ–åˆç‰©ï¼Œå¹¶ä¸”æ€»å«é‡è¶…è¿‡500æ¯«å…‹ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>è¾£æ¤’
<ul>
<li><a href="https://3g.163.com/dy/article/F6Q7I1ME053228ZU.html" target="_blank" rel="noopener noreferrer">è¾£æ¤’æˆæ­»äº¡å…‹æ˜Ÿï¼Ÿæ®è°ƒç ”ï¼Œå¸¸åƒè¾£æ‚£ç—…æ­»äº¡é£é™©å¯é™ä½61%</a>
<ul>
<li>å‡ºå¤„1ï¼š<a href="https://www.sciencedirect.com/science/article/pii/S0735109719382063" target="_blank" rel="noopener noreferrer">Chili pepper consumption and mortality in Italian adults</a></li>
<li>å‡ºå¤„2ï¼š<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0169876" target="_blank" rel="noopener noreferrer">The Association of Hot Red Chili Pepper Consumption and Mortality: A Large Population-Based Cohort Study</a></li>
<li>2017å¹´Plos One çš„å¦ä¸€é¡¹æ¥è‡ªç¾å›½çš„ç ”ç©¶ä»¥16179åï¼Œå¹´é¾„åœ¨18å²ä»¥ä¸Šçš„äººç¾¤ä¸ºå¯¹è±¡ï¼Œå¹¶å¯¹å…¶è¿›è¡Œäº†é«˜è¾¾19å¹´çš„éšè®¿ï¼Œå‘ç°åœ¨4946ä¾‹æ­»äº¡æ‚£è€…ä¸­ï¼Œé£Ÿç”¨è¾£æ¤’çš„å‚ä¸è€…çš„å…¨å› æ­»äº¡ç‡ä¸º21.6ï¼…ï¼Œè€Œæœªé£Ÿç”¨è¾£æ¤’çš„å‚ä¸è€…çš„å…¨å› æ­»äº¡ç‡ä¸º33.6ï¼…ã€‚ç›¸è¾ƒäºä¸åƒè¾£æˆ–å¾ˆå°‘åƒï¼ˆå°‘äºæ¯å‘¨ä¸¤æ¬¡ï¼‰çš„äººç¾¤ï¼Œæ¯å‘¨åƒè¾£ï¼4æ¬¡çš„äººç¾¤æ€»æ­»äº¡é£é™©é™ä½23%ï¼Œå¿ƒè¡€ç®¡æ­»äº¡é£é™©é™ä½34%ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>é¸¡è›‹
<ul>
<li><a href="https://m.thepaper.cn/baijiahao_11540780" target="_blank" rel="noopener noreferrer">æ¯å¤©å¤šåƒåŠä¸ªè›‹ï¼Œå¢åŠ 7%çš„å…¨å› å’Œå¿ƒè¡€ç®¡æ­»äº¡é£é™©ï¼Ÿ</a>
<ul>
<li>å‡ºå¤„ï¼š<a href="https://dietandhealth.cancer.gov/" target="_blank" rel="noopener noreferrer">NIH-AARPå·¥ä½œä¸»é¡µ</a>ã€<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7872242/" target="_blank" rel="noopener noreferrer">Egg and cholesterol consumption and mortality from cardiovascular and different causes in the United States: A population-based cohort study</a></li>
<li>æ¯å¤©å¤šåƒåŠä¸ªè›‹ï¼Œå¢åŠ 7%çš„å…¨å› å’Œå¿ƒè¡€ç®¡æ­»äº¡é£é™©ï¼Ÿåœ¨å‡è®¾æ€§æ›¿ä»£åˆ†æä¸­ï¼Œç ”ç©¶è€…å‘ç°ï¼Œç”¨ç­‰é‡çš„è›‹æ¸…/é¸¡è›‹æ›¿ä»£ç‰©ã€å®¶ç¦½ã€é±¼ã€ä¹³åˆ¶å“ã€åšæœå’Œè±†ç±»åˆ†åˆ«æ›¿ä»£åŠåªå…¨è›‹ï¼ˆ25å…‹/å¤©ï¼‰å¯ä»¥é™ä½6%ã€8%ã€9%ã€7%ã€13%å’Œ10%çš„å…¨å› æ­»äº¡ç‡ã€‚
*<a href="https://raw.githubusercontent.com/qhy040404/Image-Resources-Repo/master/pmed.1003508.g002.jpg" target="_blank" rel="noopener noreferrer">é¸¡è›‹</a></li>
</ul>
</li>
</ul>
</li>
<li>åšæœ
<ul>
<li><a href="https://www.163.com/dy/article/GKVOMMMF05148PF4.html" target="_blank" rel="noopener noreferrer">å“ˆä½›20å¹´ç ”ç©¶ï¼šåƒæ ¸æ¡ƒçš„äººæ›´é•¿å¯¿ï¼Œæ˜¾è‘—å‡å°‘å…¨å› æ­»äº¡ï¼Œå»¶é•¿å¯¿å‘½</a>
<ul>
<li>å‡ºå¤„ï¼š<a href="https://www.mdpi.com/2072-6643/13/8/2699/pdf" target="_blank" rel="noopener noreferrer">Association of Walnut Consumption with Total and Cause-Specific Mortality and Life Expectancy in US Adults</a></li>
<li>é€šè¿‡åˆ†æå‘ç°ï¼Œç»å¸¸é£Ÿç”¨æ ¸æ¡ƒå¯ä»¥å»¶é•¿å¯¿å‘½ï¼Œé™ä½å¿ƒè¡€ç®¡ç–¾ç—…æ­»äº¡é£é™©ã€‚æ¯”èµ·ä¸åƒæ ¸æ¡ƒï¼Œæ¯å‘¨é£Ÿç”¨æ ¸æ¡ƒ5ä»½ä»¥ä¸Šï¼ˆ1ä»½28å…‹ï¼‰çš„å¥åº·é¢„æœŸå¯¿å‘½å»¶é•¿1.3å²ï¼Œå…¨å› æ­»äº¡é£é™©é™ä½14%ï¼Œå¿ƒè¡€ç®¡ç–¾ç—…æ­»äº¡ç‡é™ä½25%ã€‚</li>
</ul>
</li>
<li><a href="https://zhuanlan.zhihu.com/p/44454030" target="_blank" rel="noopener noreferrer">ç ”ç©¶ï¼šæ¯æ—¥é£Ÿç”Ÿåšæœï¼Œæ­»äº¡ç‡é™20%</a>
<ul>
<li>å‡ºå¤„1ï¼š<a href="https://www.nejm.org/doi/full/10.1056/NEJMoa1307352" target="_blank" rel="noopener noreferrer">Association of nut consumption with total and cause-specific mortality</a></li>
<li>å‡ºå¤„2ï¼š<a href="https://americanpistachios.cn/sites/china/files/inline-files/APG_Health-%26-Nutrition-Research-Brochure_DEC-19-18.pdf" target="_blank" rel="noopener noreferrer">APG_Health-&amp;-Nutrition-Research-Brochure_DEC-19-18</a></li>
<li>ç ”ç©¶äººå‘˜å‘ç°ï¼Œæ¯å‘¨åƒæ ‘åšæœä½äº1ç›å¸ä»½é‡çš„äººï¼Œæ­»äº¡ç‡é™ä½7ï¼…ã€‚è€Œæ¯å‘¨åƒäº†1ç›å¸ä»½é‡çš„äººï¼Œå‡å°‘11ï¼…çš„æ­»äº¡ç‡ï¼›æ¯å‘¨åƒ2ä»½é‡çš„äººï¼Œå‡ä½13ï¼…ï¼›æ¯å‘¨5è‡³6ä»½é‡è€…ï¼Œå‡å°‘äº†15ï¼…ï¼›ä¸€å‘¨7ä»½ä»¥ä¸Šçš„äººï¼Œæ­»äº¡ç‡åˆ™å‡å°‘20ï¼…ã€‚</li>
<li>å¦å¤–ä¸¤ç¯‡å‘è¡¨åœ¨ã€Šå…¬å…±ç§‘å­¦å›¾ä¹¦é¦†åœ¨çº¿æœŸåˆŠã€‹(Public Library of Science Online Journal)å’Œã€Šç”Ÿç‰©åŒ»å­¦ä¸­å¿ƒã€‹(BioMed Central)ä¸Šçš„åŒ»å­¦é¢„ç§‘ç ”ç©¶è®ºæ–‡ï¼Œå±•ç¤ºäº†è¯•éªŒå¼€å§‹æ—¶çš„æ¨ªæ–­é¢æ•°æ®ã€‚è¿™ä¸¤é¡¹ç ”ç©¶éƒ½è¯„ä¼°äº†7,216åå¯¹è±¡ï¼Œä»¥åŠä»–ä»¬é£Ÿç”¨åšæœçš„é¢‘ç‡å’Œæ•°é‡ä¹‹é—´çš„å…³ç³»ã€‚é‚£äº›æ¯å‘¨é£Ÿç”¨ä¸‰ä»½ä»¥ä¸Šåšæœ(åŒ…æ‹¬å¼€å¿ƒæœ)çš„ç ”ç©¶å¯¹è±¡çš„æ­»äº¡ç‡é™ä½39%ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>é’ ï¼ˆå­˜æœ‰å¤§é‡äº‰è®®ï¼‰
<ul>
<li><a href="https://nursing.medsci.cn/article/show_article.do;jsessionid=A34E8A33918A152CB55BDD2E5FB1798D?id=afe720486ee7" target="_blank" rel="noopener noreferrer">Eur Heart Jï¼šé’ æ‘„å…¥é‡ä¸é¢„æœŸå¯¿å‘½ã€å…¨å› æ­»äº¡ç‡çš„å…³ç³»</a>
<ul>
<li>å‡ºå¤„ï¼š<a href="https://europepmc.org/backend/ptpmcrender.fcgi?accid=PMC8169157&amp;blobtype=pdf" target="_blank" rel="noopener noreferrer">Messerli F H, Hofstetter L, Syrogiannouli L, et al. Sodium intake, life expectancy, and all-cause mortality[J]. European heart journal, 2021, 42(21): 2103-2112.</a></li>
<li><img src="https://user-images.githubusercontent.com/2707039/164894778-9710f18d-e055-4f62-bdcb-618687771d77.jpeg" alt="ehaa947f6" tabindex="0" loading="lazy"><figcaption>ehaa947f6</figcaption></li>
<li>åœ¨è¯¥åˆ†ææ‰€åŒ…å«çš„181ä¸ªå›½å®¶ä¸­ï¼Œç ”ç©¶äººå‘˜å‘ç°é’ æ‘„å…¥é‡ä¸å‡ºç”Ÿæ—¶çš„å¥åº·é¢„æœŸå¯¿å‘½ï¼ˆÎ²=2.6å¹´/å…‹æ¯æ—¥é’ æ‘„å…¥é‡ï¼ŒR<sup>2</sup>=0.66ï¼ŒP&lt;0.001ï¼‰å’Œ60å²æ—¶çš„å¥åº·é¢„æœŸå¯¿å‘½ï¼ˆÎ²=0.3å¹´/å…‹æ¯æ—¥é’ æ‘„å…¥é‡ï¼ŒR<sup>2</sup>=0.60ï¼ŒP=0.048ï¼‰ä¹‹é—´å­˜åœ¨æ­£ç›¸å…³å…³ç³»ï¼Œä½†ä¸éä¼ æŸ“æ€§ç–¾ç—…æ­»äº¡ï¼ˆÎ²=17æ¬¡äº‹ä»¶/å…‹æ¯æ—¥é’ æ‘„å…¥é‡ï¼ŒR<sup>2</sup>=0.43ï¼ŒP=0.100ï¼‰æ— å…³ã€‚ç›¸åï¼Œå…¨å› æ­»äº¡ç‡ä¸é’ æ‘„å…¥é‡æˆè´Ÿç›¸å…³ï¼ˆÎ²=âˆ’131æ¬¡äº‹ä»¶/å…‹æ¯æ—¥é’ æ‘„å…¥é‡ï¼ŒR<sup>2</sup>=0.60ï¼ŒP&lt;0.001ï¼‰ã€‚åœ¨ä»…é™äº46ä¸ªæ”¶å…¥æœ€é«˜å›½å®¶çš„æ•æ„Ÿæ€§åˆ†æä¸­ï¼Œé’ æ‘„å…¥é‡ä¸å‡ºç”Ÿæ—¶çš„å¥åº·é¢„æœŸå¯¿å‘½å‘ˆæ­£ç›¸å…³ï¼ˆÎ²=3.4å¹´/å…‹æ¯æ—¥é’ æ‘„å…¥é‡ï¼ŒR<sup>2</sup>=0.53ï¼ŒP&lt;0.001ï¼‰ï¼Œè€Œä¸å…¨å› æ­»äº¡ç‡ï¼ˆÎ²=âˆ’168æ¬¡äº‹ä»¶/å…‹æ¯æ—¥é’ æ‘„å…¥é‡ï¼ŒR<sup>2</sup>=0.50ï¼ŒP&lt;0.001ï¼‰å‘ˆè´Ÿç›¸å…³ã€‚</li>
<li>è¯¥ï¼ˆå¤§èŒƒå›´ï¼‰ç ”ç©¶è®¤ä¸ºæ›´å¤šçš„é’ æ‘„å…¥ä¸æ˜¾è‘—æ›´ä½çš„å…¨å› æ­»äº¡ç‡æœ‰å…³</li>
<li><a href="https://www.tctmd.com/news/fresh-foray-salt-wars-life-expectancy-higher-greater-sodium-intake" target="_blank" rel="noopener noreferrer">é’ˆå¯¹è¯¥è®ºæ–‡çš„å»¶ä¼¸è§£è¯»å’Œè®¨è®ºï¼šA Fresh Foray in the Salt Wars: Life Expectancy Higher With Greater Sodium Intake</a></li>
</ul>
</li>
<li><a href="https://ibook.antpedia.com/x/669028.html" target="_blank" rel="noopener noreferrer">NEJM/Lancetï¼šä¸è¦åƒå¤ªå¤šç›ï¼Œä¸­å›½é¥®é£Ÿæ‰€è‡´å¿ƒè¡€ç®¡ç—…å’Œç™Œç—‡æ­»äº¡å…¨çƒç¬¬ä¸€ï¼Œåƒä½é’ ç›å¯é™ä½å…¨å› æ­»äº¡ç‡</a>
<ul>
<li>ä½†ä¹Ÿæœ‰å¤šé¡¹ç ”ç©¶è®¤ä¸ºç”¨ä½é’ ç›å¯ä»¥é™ä½ä¸€ç³»åˆ—ç–¾ç—…çš„å‘ç”Ÿæ¦‚ç‡ï¼Œå¯¹å…¨å› æ­»äº¡ç‡çš„å‡å°‘æœ‰ç§¯æå½±å“</li>
</ul>
</li>
</ul>
</li>
<li>ç¢³æ°´ï¼ˆå­˜æœ‰å¤§é‡äº‰è®®ï¼‰
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/137815934" target="_blank" rel="noopener noreferrer">ä½ç¢³ç”Ÿé…®é¥®é£Ÿï¼ˆå››ï¼‰ç¢³æ°´åŒ–åˆç‰©ä¸é•¿æœŸæ­»äº¡ç‡</a>
<ul>
<li>å‡ºå¤„ï¼šThe Lancet Public Health - <a href="https://www.sciencedirect.com/science/article/pii/S246826671830135X" target="_blank" rel="noopener noreferrer">Dietary carbohydrate intake and mortality: a prospective cohort study and meta-analysis</a></li>
<li>ç¢³æ°´è¶Šä½ï¼Œå¯¿å‘½è¶ŠçŸ­ï¼›ç¢³æ°´è¶Šé«˜ï¼Œå¯¿å‘½ä¹Ÿè½»å¾®ç¼©çŸ­ï¼›ç¢³æ°´50%å·¦å³ï¼ˆå…¶å®æŒ‰ç…§ä¸€èˆ¬çš„è¯´æ³•ï¼Œè¿™ä¹Ÿç®—é«˜ç¢³æ°´ï¼‰æ˜¯æœ€é•¿å¯¿å‘½åŒºé—´</li>
<li><img src="https://user-images.githubusercontent.com/2707039/163703985-a2e2f8ac-101a-4f3c-903b-6850507f144b.jpg" alt="ç¢³æ°´" tabindex="0" loading="lazy"><figcaption>ç¢³æ°´</figcaption></li>
</ul>
</li>
<li><a href="https://www.chinacdc.cn/gwxx/202003/t20200323_214639.html" target="_blank" rel="noopener noreferrer">æœ€å¼ºè¥å…»æ­é…ï¼BMJï¼šè¿™ä¹ˆåƒï¼Œå¿ƒè¡€ç®¡ç–¾ç—…å’Œæ­»äº¡é£é™©æ›´ä½</a></li>
</ul>
</li>
<li>æ§Ÿæ¦”
<ul>
<li><a href="https://www.zhihu.com/question/312784161/answer/603370131" target="_blank" rel="noopener noreferrer">å¦‚ä½•çœ‹å¾…æ§Ÿæ¦”åš¼å‡ºæ¥çš„ç™Œç—‡ï¼Ÿæ§Ÿæ¦”è‡´ç™Œé£é™©ç©¶ç«Ÿæœ‰å¤šå¤§ï¼Ÿ - ä¸é¦™åŒ»ç”Ÿçš„å›ç­” - çŸ¥ä¹</a>
<ul>
<li>å‡ºå¤„ï¼šChewing Betel Quid and the Risk of Metabolic Disease, Cardiovascular Disease, and All-Cause Mortality: A Meta-Analysis(https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0070679)</li>
<li>åš¼æ§Ÿæ¦”ä¼šå¢åŠ 21%çš„å…¨å› æ­»äº¡ç‡</li>
</ul>
</li>
</ul>
</li>
<li>çƒ­é‡é™åˆ¶
<ul>
<li><a href="https://www.zhihu.com/question/31395511" target="_blank" rel="noopener noreferrer">æ€ä¹ˆçœ‹å¾…BBCã€Šè¿›é£Ÿã€æ–­é£Ÿä¸é•¿å¯¿ã€‹ï¼Ÿ</a>
<ul>
<li>é™åˆ¶å¡è·¯é‡ŒåŠ¨ç‰©å®éªŒï¼šCRï¼ˆçƒ­é‡é™åˆ¶ï¼Œå³å°‘åƒï¼‰å»¶è¿Ÿäº†æ’æ²³çŒ´çš„å¤šç§ç–¾ç—…å‘ç—…å’Œæ­»äº¡ç‡ï¼Œä¸CRåŠ¨ç‰©ç›¸æ¯”ï¼Œæ­£å¸¸å–‚å…»çš„çŒ´å­çš„å„ç§ç–¾ç—…æ‚£ç—…é£é™©å¢åŠ 2.9å€ï¼Œæ­»äº¡é£é™©å¢åŠ 3.0å€ã€‚</li>
<li><img src="https://user-images.githubusercontent.com/2707039/163703988-8767185b-326a-4783-b2e2-f190322bb7d6.jpg" alt="çƒ­é‡é™åˆ¶-æ’æ²³çŒ´" tabindex="0" loading="lazy"><figcaption>çƒ­é‡é™åˆ¶-æ’æ²³çŒ´</figcaption></li>
</ul>
</li>
</ul>
</li>
<li>ç»¼åˆ
<ul>
<li><a href="https://www.chinacdc.cn/gwxx/202003/t20200323_214639.html" target="_blank" rel="noopener noreferrer">æœ€å¼ºè¥å…»æ­é…ï¼BMJï¼šè¿™ä¹ˆåƒï¼Œå¿ƒè¡€ç®¡ç–¾ç—…å’Œæ­»äº¡é£é™©æ›´ä½</a></li>
<li><a href="https://doi.org/10.1136/bmj.m688" target="_blank" rel="noopener noreferrer">Associations of fat and carbohydrate intake with cardiovascular disease and mortality: prospective cohort study of UK Biobank participants</a>
<ul>
<li>é€šè¿‡å¯¹è¿™äº›å‚ä¸è€…çš„æ•°æ®è¿›è¡Œåˆ†æï¼Œç ”ç©¶äººå‘˜å‘ç°ç¢³æ°´åŒ–åˆç‰©ï¼ˆç³–ã€æ·€ç²‰å’Œçº¤ç»´ï¼‰å’Œè›‹ç™½è´¨çš„æ‘„å…¥ä¸å…¨å› æ­»äº¡ç‡å‘ˆéçº¿æ€§å…³ç³»ï¼Œè€Œè„‚è‚ªåˆ™ä¸å…¨å› æ­»äº¡ç‡å‘ˆçº¿æ€§ç›¸å…³ã€‚å…¶ä¸­ï¼Œè¾ƒé«˜çš„ç³–åˆ†æ‘„å…¥ä¸å…¨å› æ­»äº¡é£é™©å’Œæ‚£å¿ƒè¡€ç®¡ç–¾ç—…çš„é£é™©è¾ƒé«˜å‡æœ‰å…³è”ï¼Œè€Œè¾ƒé«˜çš„é¥±å’Œè„‚è‚ªé…¸æ‘„å…¥ä¸å…¨å› æ­»äº¡é£é™©è¾ƒé«˜æœ‰å…³ã€‚</li>
<li>å›¾1ï¼šå„ç§è¥å…»å…ƒç´ ä¸å…¨å› æ­»äº¡ä¹‹é—´çš„å…³ç³»</li>
<li><img src="https://user-images.githubusercontent.com/2707039/163702022-8c2bfea9-ed5d-4fe0-8ead-e8740014b92b.jpg" alt="å„ç§è¥å…»å…ƒç´ ä¸å…¨å› æ­»äº¡ä¹‹é—´çš„å…³ç³»" tabindex="0" loading="lazy"><figcaption>å„ç§è¥å…»å…ƒç´ ä¸å…¨å› æ­»äº¡ä¹‹é—´çš„å…³ç³»</figcaption></li>
<li>å›¾2ï¼šå„ç§è¥å…»å…ƒç´ ä¸å¿ƒè¡€ç®¡ç–¾ç—…ä¹‹é—´çš„å…³ç³»</li>
<li><img src="https://user-images.githubusercontent.com/2707039/163702084-97fb4a03-707c-475d-b88e-6fe2f8e87f92.jpg" alt="å„ç§è¥å…»å…ƒç´ ä¸å¿ƒè¡€ç®¡ç–¾ç—…ä¹‹é—´çš„å…³ç³»" tabindex="0" loading="lazy"><figcaption>å„ç§è¥å…»å…ƒç´ ä¸å¿ƒè¡€ç®¡ç–¾ç—…ä¹‹é—´çš„å…³ç³»</figcaption></li>
<li><strong>è¿›ä¸€æ­¥ç ”ç©¶è¡¨æ˜ï¼Œåœ¨æ‰€æœ‰çš„é¥®é£Ÿæ¨¡å¼ä¸­ï¼Œå…¨å› æ­»äº¡ç‡é£é™©æœ€ä½çš„é¥®é£Ÿæ–¹å¼ä¸ºï¼š10-30gé«˜çº¤ç»´ã€14-30%è›‹ç™½è´¨ã€10-25%å•ä¸é¥±å’Œè„‚è‚ªé…¸ã€5%-7%å¤šä¸é¥±å’Œè„‚è‚ªé…¸ä»¥åŠ20%-30%æ·€ç²‰æ‘„å…¥ã€‚</strong></li>
<li><strong>æœ€ä¼˜èƒ½é‡æ¥æºé…æ¯”ï¼š&lt;24%æ·€ç²‰ï¼Œ15%-17%è›‹ç™½è´¨ï¼Œ&gt;15%å•ä¸é¥±å’Œè„‚è‚ªé…¸ï¼Œ&lt;15%ç³–ï¼Œ6%é¥±å’Œè„‚è‚ªé…¸ï¼Œ6%å¤šä¸é¥±å’Œè„‚è‚ªé…¸ï¼Œ30g+é«˜çº¤ç»´</strong></li>
</ul>
</li>
<li><a href="https://med.ckcest.cn/details.html?id=5183272274855936&amp;classesEn=news" target="_blank" rel="noopener noreferrer">BMJ | å¸¸åƒè–¯ç‰‡æ±‰å ¡å·§å…‹åŠ›ç­‰é£Ÿå“ï¼Œå¹³å‡æ­»äº¡å¹´é¾„ä»…ä»…ä¸º58å²ï¼Œæ­»äº¡é£é™©å‰§å¢</a>
<ul>
<li><a href="https://www.bmj.com/content/365/bmj.l1949.full" target="_blank" rel="noopener noreferrer">Rico-CampÃ  A, MartÃ­nez-GonzÃ¡lez M A, Alvarez-Alvarez I, et al. Association between consumption of ultra-processed foods and all cause mortality: SUN prospective cohort study[J]. bmj, 2019, 365.</a></li>
<li><a href="https://www.bmj.com/content/365/bmj.l1451" target="_blank" rel="noopener noreferrer">Srour B, Fezeu L K, Kesse-Guyot E, et al. Ultra-processed food intake and risk of cardiovascular disease: prospective cohort study (NutriNet-SantÃ©)[J]. bmj, 2019, 365.</a></li>
<li><a href="https://www.researchgate.net/profile/Phillip-Baker-5/publication/333483796_Ultra-processed_food_and_adverse_health_outcomes/links/5f0c646ca6fdcc2f32336a95/Ultra-processed-food-and-adverse-health-outcomes.pdf" target="_blank" rel="noopener noreferrer">Lawrence M A, Baker P I. Ultra-processed food and adverse health outcomes[J]. bmj, 2019, 365.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4>6.1.2. æ¶²ä½“</h4>
<ul>
<li>ç‰›å¥¶
<ul>
<li><a href="https://www.sohu.com/a/253940257_419768" target="_blank" rel="noopener noreferrer">ã€ŠæŸ³å¶åˆ€ã€‹è°ƒç ”21ä¸ªå›½å®¶13ä¸‡äººï¼šæ¯å¤©1æ–¤ç‰›å¥¶æˆ–é…¸å¥¶ï¼Œå¿ƒè¡€ç®¡æ­»äº¡é£é™©ä¸‹é™23%</a></li>
<li>å‡ºå¤„ï¼š<a href="http://mdrf-eprints.in/1114/1/Association_of_dietary_patterns_and_dietary_diversity_with_cardiometabolic_disease_risk_factors.pdf" target="_blank" rel="noopener noreferrer">Association of dairy intake with cardiovascular disease and mortality in 21 countries from five continents (PURE): a prospective cohort study</a></li>
<li>ä¸ä¸é£Ÿç”¨ä¹³åˆ¶å“çš„äººç›¸æ¯”ï¼Œæ¯å¤©æ‘„å…¥ä¸¤ä»½ä¹³åˆ¶å“ï¼ˆä¸€ä»½æŒ‡244å…‹ç‰›å¥¶/é…¸å¥¶ï¼Œ15å…‹å¥¶é…ªæˆ–5å…‹é»„æ²¹ï¼‰çš„äººï¼Œ<strong>å…¨å› æ­»äº¡é£é™©ä¸‹é™äº†17%</strong>ï¼Œå¿ƒè¡€ç®¡æ­»äº¡é£é™©ä¸‹é™23%ï¼Œä¸­é£é£é™©ä¸‹é™33%</li>
</ul>
</li>
<li>èŒ¶
<ul>
<li><a href="https://www.jianshu.com/p/5461a205cf95?utm_campaign=hugo" target="_blank" rel="noopener noreferrer">10ä¸‡ä¸­å›½äººéšè®¿7å¹´å‘ç°ï¼Œæ¯å‘¨å–ä¸‰æ¬¡èŒ¶ä¸å…¨å› æ­»äº¡é£é™©é™ä½15%ï¼Œé¢„æœŸå¯¿å‘½å¢åŠ 1.26å¹´ç›¸å…³</a></li>
<li>å‡ºå¤„ï¼š<a href="https://www.researchgate.net/profile/Fangchao-Liu-4/publication/338483323_Tea_consumption_and_the_risk_of_atherosclerotic_cardiovascular_disease_and_all-cause_mortality_The_China-PAR_project/links/5e55e5e94585152ce8efe511/Tea-consumption-and-the-risk-of-atherosclerotic-cardiovascular-disease-and-all-cause-mortality-The-China-PAR-project.pdf" target="_blank" rel="noopener noreferrer">Tea consumption and the risk of atherosclerotic cardiovascular disease and all-cause mortality: The China-PAR project</a></li>
<li><a href="http://rs.yiigle.com/CN112338202202/1351516.htm" target="_blank" rel="noopener noreferrer">ä¸­å›½æˆå¹´äººé¥®èŒ¶ä¸æ­»äº¡é£é™©çš„å‰ç»æ€§å…³è”ç ”ç©¶</a></li>
<li>çº³å…¥åˆ†æçš„438 443ä¾‹ç ”ç©¶å¯¹è±¡éšè®¿11.1å¹´å…±å‘ç”Ÿæ­»äº¡34 661ä¾‹ã€‚ä¸ä»ä¸é¥®èŒ¶è€…ç›¸æ¯”ï¼Œå½“å‰éæ¯æ—¥é¥®èŒ¶è€…å’Œæ¯æ—¥é¥®èŒ¶è€…å…¨å› æ­»äº¡HRå€¼ï¼ˆ95%CIï¼‰ä¾æ¬¡ä¸º0.89ï¼ˆ0.86-0.91ï¼‰å’Œ0.92ï¼ˆ0.88-0.95ï¼‰ã€‚åˆ†æ€§åˆ«åˆ†ææ˜¾ç¤ºï¼Œé¥®èŒ¶å¯¹å…¨å› æ­»äº¡é£é™©çš„ä¿æŠ¤ä½œç”¨ä¸»è¦è§äºç”·æ€§ï¼ˆäº¤äº’P&lt;0.05ï¼‰</li>
</ul>
</li>
<li>æ— ç³–ï¼ˆç”œå‘³ï¼‰é¥®æ–™
<ul>
<li><a href="https://www.zhihu.com/question/418598272/answer/1450648364" target="_blank" rel="noopener noreferrer">ã€Œæ— ç³–é¥®æ–™ä½¿æ­»äº¡é£é™©å¢åŠ  26 %ã€ï¼Œæ˜¯çœŸçš„å—ï¼Ÿ</a>
<ul>
<li>ç›¸æ¯”äºè½¯é¥®æ–™æ‘„å…¥é‡ï¼œ1æ¯/æœˆçš„å‚ä¸è€…ï¼Œæ··åˆè½¯é¥®æ–™æ‘„å…¥â‰¥1æ¯/å¤©çš„å‚ä¸è€…æ­»äº¡é£é™©å¢åŠ 18%ï¼Œè€Œ<strong>æ‘„å…¥å«ç³–è½¯é¥®æ–™æˆ–æ— ç³–è½¯é¥®æ–™ä¼šä»¤æ­»äº¡é£é™©åˆ†åˆ«å¢åŠ 11%å’Œ27%ã€‚</strong></li>
<li><img src="https://user-images.githubusercontent.com/2707039/163704346-e7d92e7f-eba5-4673-8f15-3a96782c2e32.png" alt="é¥®æ–™" tabindex="0" loading="lazy"><figcaption>é¥®æ–™</figcaption></li>
</ul>
</li>
<li><a href="https://jamanetwork.com/journals/jamainternalmedicine/fullarticle/2749350" target="_blank" rel="noopener noreferrer">Association Between Soft Drink Consumption and Mortality in 10 European Countries</a></li>
</ul>
</li>
<li>æœ‰ç³–é¥®æ–™
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/400746073" target="_blank" rel="noopener noreferrer">å¯ä¹å’Œå¥¶èŒ¶ï¼Œå¢åŠ å…¨å› æ­»äº¡ç‡é«˜è¾¾62%ï¼æœæ±é™ä½å…ç–«åŠ›ï¼Œå½±å“è‚ä»£è°¢ï¼å«ç³–é¥®æ–™é‚£äº›äº‹</a>
<ul>
<li>æ¯å¤©1æ¯å«ç³–é¥®æ–™å¢åŠ 7%å…¨å› æ­»äº¡ç‡ï¼Œ2æ¯21%</li>
<li>åœ¨34å¹´çš„éšè®¿ä¸­ï¼Œç ”ç©¶äººå‘˜å‘ç°ï¼Œç›¸æ¯”é‚£äº›ä¸€ä¸ªæœˆå–1æ¯æˆ–è€…æ›´å°‘å«ç³–é¥®æ–™çš„äººï¼Œæ¯å¤©å–2æ¯çš„äººæ€»ä½“æ­»äº¡é£é™©å‡é«˜äº†21%ï¼Œå¿ƒè¡€ç®¡ç–¾ç—…æ­»äº¡é£é™©å‡é«˜äº†31%ï¼Œç™Œç—‡æ­»äº¡é£é™©ä¸Šå‡äº†16%ã€‚</li>
<li>åªè¦æ¯å¤©å¤šå–ä¸€æ¯å«ç³–é¥®æ–™ï¼Œæ€»ä½“æ­»äº¡é£é™©å°†å¢åŠ 7%ï¼Œå¿ƒè¡€ç®¡ç–¾ç—…çš„é£é™©å°†å¢åŠ 10%ï¼Œç™Œç—‡ç›¸å…³çš„æ­»äº¡é£é™©å°†16%ã€‚</li>
<li>å‘è¡¨åœ¨å›½é™…é¡¶çº§æœŸåˆŠã€ŠBMJã€‹ä¸Šçš„ä¸€ç¯‡è®ºæ–‡å°±è¯æ˜äº†å«ç³–é¥®æ–™ä¼šåœ¨å¢åŠ æ‚£ç™Œé£é™©ï¼Œå½“ç„¶è¿™ç¯‡æ–‡ç« éªŒè¯çš„ä¸ä»…ä»…æ˜¯æœæ±ï¼Œå¥¶èŒ¶ä¹Ÿæœ‰ä»½â€”â€”å’Œå«ç³–é¥®æ–™ç›¸å…³çš„æ€»ä½“æ‚£ç™Œé£é™©è¦é«˜å‡ºé€šå¸¸å€¼18%ï¼Œ100%çš„é²œæ¦¨æœæ±ä¹Ÿä¼šä½¿å¾—æ•´ä½“çš„æ‚£ç™Œé£é™©ä¸Šå‡12%ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>æœæ±
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/66513350" target="_blank" rel="noopener noreferrer">JAMAå­åˆŠï¼š100%çº¯æœæ±å¯èƒ½æ¯”å«ç³–é¥®æ–™æ›´å±é™©</a>
<ul>
<li>æ¯å¤©å¤šæ‘„å…¥ä¸€ä»½12ç›å¸çš„å«ç³–é¥®æ–™ï¼Œå…¨å› æ­»äº¡ç‡é£é™©å¢åŠ 11%ï¼›</li>
<li>æ¯å¤©å¤šæ‘„å…¥ä¸€ä»½12ç›å¸çš„æœæ±ï¼Œå…¨å› æ­»äº¡ç‡é£é™©å¢åŠ 24%ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>å’–å•¡
<ul>
<li><a href="https://news.bioon.com/article/6725420.html" target="_blank" rel="noopener noreferrer">é‡ç£…ï¼å¤šç¯‡ç ”ç©¶è¯å®å–å’–å•¡ä¸äººç¾¤å…¨å› æ­»äº¡ç‡é™ä½ç›´æ¥ç›¸å…³</a></li>
<li><a href="https://www.sohu.com/a/439412995_100003595" target="_blank" rel="noopener noreferrer">ç§‘æ™® | å–å’–å•¡åˆå¤šäº†ä¸€ä¸ªæ–°ç†ç”±ï¼šé™ä½æ­»äº¡ç‡ï¼</a></li>
<li><a href="https://fanyi.pdf365.cn/help/249" target="_blank" rel="noopener noreferrer">åœ°ä¸­æµ·æˆå¹´äººå’–å•¡æ¶ˆè€—é‡åŠå…¨å› ï¼Œå¿ƒè¡€ç®¡ç–¾ç—…å’Œç™Œç—‡çš„æ­»äº¡ç‡</a>
<ul>
<li>åœ¨æœ€è¿‘çš„èŸèƒåˆ†æä¸­ï¼Œè¯¥ç ”ç©¶åŒ…æ‹¬æ¥è‡ªä¸åŒå›½å®¶çš„40é¡¹ç ”ç©¶å’Œ3,852,651åå—è¯•è€…ã€‚åœ¨è¿™é¡¹èŸèƒåˆ†ææ˜¾ç¤ºï¼Œå’–å•¡æ‘„å…¥é‡ä¸å„ç§åŸå› çš„æ­»äº¡ç‡ï¼ŒCVDå’Œç™Œç—‡æ­»äº¡ç‡ä¹‹é—´å­˜åœ¨éçº¿æ€§å…³ç³»ï¼Œæ¯å¤©æ‘„å…¥ä¸¤æ¯å’–å•¡çš„ç™Œç—‡æ­»äº¡ç‡æœ€ä½(RR = 0.96)ï¼ŒCVDæœ€ä½çš„æ­»äº¡ç‡ï¼Œæ¯å¤©2.5æ¯(RR= 0.83)ï¼Œå…¨å¤©æœ€ä½æ­»äº¡ç‡ä¸ºæ¯å¤©3.5æ¯(RR= 0.85)ï¼Œå¹¶ä¸”éšç€å’–å•¡æ¶ˆè´¹é‡çš„å¢åŠ ï¼Œæ­»äº¡ç‡æ²¡æœ‰è¿›ä¸€æ­¥é™ä½æˆ–å¢åŠ </li>
</ul>
</li>
</ul>
</li>
<li>äºšç²¾èƒº
<ul>
<li><a href="https://www.medsci.cn/article/show_article.do?id=420d12904103" target="_blank" rel="noopener noreferrer">Scienceï¼šç§‘å­¦èƒŒä¹¦ï¼ä»ç²¾æ¶²ä¸­å‘ç°çš„äºšç²¾èƒºï¼Œç«Ÿç„¶æœ‰ç€æŠ—è¡°è€ã€æŠ—ç™Œã€ä¿æŠ¤å¿ƒè¡€ç®¡å’Œç¥ç»ã€æ”¹å–„è‚¥èƒ–å’Œ2å‹ç³–å°¿ç—…ç­‰é€†å¤©ç¥æ•ˆ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/388942219" target="_blank" rel="noopener noreferrer">é¥®é£Ÿä¸­äºšç²¾èƒºæ‘„å…¥é‡é«˜ä¼šé™ä½æ­»äº¡ç‡</a></li>
</ul>
</li>
</ul>
<h4>6.1.3. æ°”ä½“</h4>
<ul>
<li>å¸çƒŸ
<ul>
<li><a href="https://www.medsci.cn/article/show_article.do?id=02ca2083319b" target="_blank" rel="noopener noreferrer">å³ä½¿æ˜¯ä½å¼ºåº¦å¸çƒŸï¼Œä¹Ÿå¢åŠ æ­»äº¡é£é™©ï¼</a>
<ul>
<li>ç ”ç©¶å‘ç°ï¼šåœ¨42 416åç”·æ€§å’Œ86 735åå¥³æ€§ï¼ˆå¹´é¾„åœ¨35-89å²ä¹‹é—´ï¼Œä»¥å‰æ²¡æœ‰æ‚£ç—…ï¼‰ä¸­ï¼Œ18 985åç”·æ€§ï¼ˆ45%ï¼‰å’Œ18 072åå¥³æ€§ï¼ˆ21%ï¼‰ç›®å‰å¸çƒŸï¼Œå…¶ä¸­33%çš„ç”·æ€§å¸çƒŸè€…å’Œ39%çš„å¥³æ€§å¸çƒŸè€…å¹¶ä¸æ¯å¤©å¸çƒŸã€‚8866åç”·æ€§ï¼ˆ21%ï¼‰å’Œ53 912åå¥³æ€§ï¼ˆ62%ï¼‰ä»ä¸å¸çƒŸã€‚åœ¨éšè®¿æœŸé—´ï¼Œä¸ä»ä¸å¸çƒŸç›¸æ¯”ï¼Œæ¯å¤©&lt;10æ”¯çƒŸæˆ–æ¯å¤©â‰¥10æ”¯çƒŸçš„å…¨å› æ­»äº¡ç‡å±é™©æ¯”åˆ†åˆ«ä¸º1.17ï¼ˆ95%ç½®ä¿¡åŒºé—´1.10-1.25ï¼‰å’Œ1.54ï¼ˆ1.42-1.67ï¼‰ã€‚æ— è®ºå¹´é¾„æˆ–æ€§åˆ«ï¼Œå±é™©æ¯”ç›¸ä¼¼ã€‚ä¸æ¯æ—¥å¸çƒŸå…³ç³»æœ€å¯†åˆ‡çš„ç–¾ç—…æ˜¯å‘¼å¸é“ç™Œç—‡ã€æ…¢æ€§é˜»å¡æ€§è‚ºç—…å’Œèƒƒè‚ é“åŠè¡€ç®¡ç–¾ç—…ã€‚åœ¨æ‹›å‹Ÿæ—¶å·²ç»æˆ’çƒŸçš„äººçš„æ­»äº¡ç‡ä½äºç°åœ¨æ¯å¤©å¸çƒŸè€…ã€‚</li>
<li>å¸çƒŸè€…å¹³å‡å‡å°‘å¯¿å‘½11-12å¹´</li>
</ul>
</li>
<li><a href="https://www.zhihu.com/question/24846224/answer/1719798177" target="_blank" rel="noopener noreferrer">å¸çƒŸè®©äººè¿‡ç˜¾æ˜¯ä»€ä¹ˆåŸç†ï¼Ÿæœ‰èŠ‚åˆ¶çš„å¸çƒŸä¾æ—§æœ‰å®³å—ï¼Ÿ</a></li>
</ul>
</li>
</ul>
<h4>6.1.4. å…‰ç…§</h4>
<ul>
<li>æ™’å¤ªé˜³
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/76301306" target="_blank" rel="noopener noreferrer">æ™’å¤ªé˜³å’Œæ­»äº¡ç‡çš„å…³ç³»ï¼Œå¦‚ä½•ç§‘å­¦ï¼Œå®‰å…¨çš„æ™’å¤ªé˜³ï¼Ÿ
</a>
<ul>
<li>ä¸¹éº¦ä¸€é¡¹é•¿è¾¾26å¹´çš„ç ”ç©¶å‘ç°ï¼Œå¤šæ™’å¤ªé˜³èƒ½æ˜¾è‘—å»¶é•¿å¯¿å‘½ï¼Œå³ä½¿æ˜¯ç”±äºè¿‡åº¦æš´æ™’è¯±å‘çš®è‚¤ç™Œçš„æ‚£è€…ï¼Œå¹³å‡å¯¿å‘½ä¹Ÿæ¯”æ™®é€šäººé•¿äº†6å²ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4>6.1.5. è¯ç‰©</h4>
<ul>
<li>NMN</li>
<li>äºŒç”²åŒèƒ
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/419202902" target="_blank" rel="noopener noreferrer">â€œèƒâ€å¹å¿…çœ‹ ä¸¨æˆ‘å°±æ˜¯ç¥è¯â€”â€”äºŒç”²åŒèƒ</a>
<ul>
<li>äºŒç”²åŒèƒä¸ä»…åœ¨å¤šç§è‚¿ç˜¤ã€å¿ƒè¡€ç®¡ç–¾ç—…åŠç³–å°¿ç—…ä¸­å‘æŒ¥ä¿æŠ¤ä½œç”¨ï¼Œè€Œä¸”åœ¨è‚¥èƒ–ã€è‚ç—…ã€è‚¾ç—…åŠè¡°è€æ–¹é¢ä¹Ÿå¤§æ”¾å¼‚å½©ã€‚</li>
</ul>
</li>
<li><a href="https://zhuanlan.zhihu.com/p/357807109" target="_blank" rel="noopener noreferrer">äºŒç”²åŒèƒ2020æœ€å€¼å¾—äº†è§£çš„â€œåƒç“œâ€å¤§æ–°é—»â€”â€”æŠ¤èƒƒã€å¥è„‘ã€æŠ—è¡°ã€é˜²ç™Œè¿˜æ˜¯è‡´ç™Œï¼Ÿ</a></li>
<li><a href="https://baijiahao.baidu.com/s?id=1729999374705305768" target="_blank" rel="noopener noreferrer">äºŒç”²åŒèƒçœŸçš„é‚£ä¹ˆç¥å—ï¼Ÿç¾ç ”ç©¶ï¼šçˆ¶äº²æœç”¨äºŒç”²åŒèƒæˆ–è‡´å­å¥³æœ‰ç¼ºé™·</a></li>
<li><img src="https://user-images.githubusercontent.com/2707039/163702325-5d427542-9ae5-4311-8979-d0d326a9832f.jpg" alt="äºŒç”²åŒèƒ" tabindex="0" loading="lazy"><figcaption>äºŒç”²åŒèƒ</figcaption></li>
<li>ä¸è‰¯ååº”
<ul>
<li>ä½œä¸ºä¸€ç§ä½¿ç”¨è¿‘ç™¾å¹´çš„è¯ç‰©ï¼ŒäºŒç”²åŒèƒçš„ä¸è‰¯ååº”å·²ç»éå¸¸æ˜ç¡®ï¼Œå¸¸è§çš„æœ‰ï¼šç»´ç”Ÿç´ B12ç¼ºä¹ï¼ˆ7%-17.4%ï¼‰ï¼Œèƒƒè‚ é“ä¸è‰¯ååº”ï¼ˆæœ€é«˜53%ï¼‰ï¼Œç–²å€¦ï¼ˆ9%ï¼‰ï¼Œå¤´ç—›ï¼ˆ6%ï¼‰ï¼›ä¸¥é‡ä½†ä¸å¸¸è§çš„ä¸è‰¯ååº”åŒ…æ‹¬ä¹³é…¸é…¸ä¸­æ¯’ã€è‚æŸä¼¤ï¼›ä¹Ÿæœ‰ç ”ç©¶è¡¨æ˜å¯èƒ½å¯¹èƒå„¿è‡´ç•¸</li>
</ul>
</li>
</ul>
</li>
<li>å¤åˆç»´ç”Ÿç´ 
<ul>
<li><a href="https://health.qq.com/a/20121023/000026.htm" target="_blank" rel="noopener noreferrer">æœç”¨å¤åˆç»´ç”Ÿç´ å¯é™ä½ç™Œç—‡å±é™©8%ï¼Œå…¶ä»–æ•ˆæœå¹¶ä¸æ˜¾è‘—</a></li>
</ul>
</li>
<li>è‘¡è„ç³–èƒº
<ul>
<li><a href="https://www.sohu.com/a/436372221_120873241" target="_blank" rel="noopener noreferrer">ç¥å¥‡ï¼æ°¨ç³–é™ä½å¿ƒè¡€ç®¡æ­»äº¡ç‡65%ï¼Œä¸å®šæœŸè¿åŠ¨æ•ˆæœç›¸å½“</a></li>
<li>ç¾å›½è¥¿å¼—å‰å°¼äºšå¤§å­¦æœ€æ–°ç ”ç©¶å‘ç° æ°¨ç³–ï¼ˆè½¯éª¨ç´ ï¼‰ å¯ä»¥é™ä½å¿ƒè¡€ç®¡æ­»äº¡ç‡65%ï¼Œé™ä½æ€»ä½“æ­»äº¡ç‡39%ï¼Œæ•ˆæœä¸åšæŒå®šæœŸè¿åŠ¨ç›¸å¯¹</li>
<li>è¯¥ç ”ç©¶ä½¿ç”¨1999å¹´è‡³2010å¹´ï¼Œ16,686åæˆå¹´äººçš„å›½å®¶å¥åº·å’Œè¥å…»æ£€æŸ¥(NHANES)æ•°æ®ï¼Œå‚ä¸è€…çš„ä¸­ä½è¿½è¸ªæ—¶é—´ä¸º107ä¸ªæœˆï¼Œè€Œå…¶ä¸­æœ‰648ä½å‚ä¸è€…å®šæœŸä¸”æ¯æœç”¨æ—¥500-1000æ¯«å…‹çš„è‘¡è„ç³–èƒº/è½¯éª¨ç´ ä¸€å¹´ä»¥ä¸Šã€‚</li>
</ul>
</li>
<li>äºšç²¾èƒº
<ul>
<li><a href="https://www.medsci.cn/article/show_article.do?id=420d12904103" target="_blank" rel="noopener noreferrer">Scienceï¼šç§‘å­¦èƒŒä¹¦ï¼ä»ç²¾æ¶²ä¸­å‘ç°çš„äºšç²¾èƒºï¼Œç«Ÿç„¶æœ‰ç€æŠ—è¡°è€ã€æŠ—ç™Œã€ä¿æŠ¤å¿ƒè¡€ç®¡å’Œç¥ç»ã€æ”¹å–„è‚¥èƒ–å’Œ2å‹ç³–å°¿ç—…ç­‰é€†å¤©ç¥æ•ˆ</a></li>
<li>äºšç²¾èƒºæ˜¯æœ€å®¹æ˜“ä»äººä½“è‚ é“å¸æ”¶çš„å¤šèƒºã€‚è®¸å¤šçš„é£Ÿç‰©ä¸­éƒ½å«æœ‰å¤§é‡çš„äºšç²¾èƒºï¼Œä¾‹å¦‚æ–°é²œçš„é’æ¤’ã€å°éº¦èƒšèŠ½ã€èŠ±æ¤°èœã€è¥¿å…°èŠ±ã€è˜‘è‡å’Œå„ç§å¥¶é…ªï¼Œå°¤å…¶åœ¨çº³è±†ç­‰å¤§è±†åˆ¶å“ã€é¦™è‡å’Œæ¦´è²ä¸­å«é‡æ›´é«˜ã€‚åœ¨æœ¬å®éªŒä¸­ï¼Œç ”ç©¶äººå‘˜é€‰æ‹©äº†829ä½å¹´é¾„åœ¨45-84å²ä¹‹é—´çš„å‚ä¸è€…è¿›è¡Œäº†ä¸ºæœŸ20å¹´çš„éšè®¿ï¼Œåˆ†æäº†é¥®é£Ÿä¸­äºšç²¾èƒºæ‘„å…¥é‡ä¸äººç±»æ­»äº¡ç‡ä¹‹é—´çš„æ½œåœ¨å…³è”ã€‚</li>
<li>ç ”ç©¶å‘ç°ï¼Œå¥³æ€§çš„äºšç²¾èƒºæ‘„å…¥é‡é«˜äºç”·æ€§ï¼Œå¹¶ä¸”æ‘„å…¥é‡éƒ½ä¼šéšç€å¹´é¾„çš„å¢é•¿è€Œä¸‹é™ã€‚äºšç²¾èƒºçš„ä¸»è¦æ¥æºæ˜¯å…¨è°·ç‰©ï¼ˆå 13.4%ï¼‰ã€è‹¹æœå’Œæ¢¨ï¼ˆå 13.3%ï¼‰ã€æ²™æ‹‰ï¼ˆå 9.8%ï¼‰ã€èŠ½èœï¼ˆå 7.3%ï¼‰å’Œé©¬é“ƒè–¯ï¼ˆå 6.4%ï¼‰ã€‚ç ”ç©¶æ ¹æ®äºšç²¾èƒºæ‘„å…¥é‡å°†äººç¾¤åˆ†ä¸ºä¸‰ç»„ï¼Œä½æ‘„å…¥é‡ç»„ï¼ˆ&lt;62.2 Âµmol / dï¼‰ã€ä¸­æ‘„å…¥é‡ç»„ï¼ˆ62.2â€“79.8 Âµmol / dï¼‰å’Œé«˜æ‘„å…¥é‡ç»„ï¼ˆ&gt; 79.8 Âµmol / dï¼‰ã€‚éšè®¿æœŸé—´å…±è®°å½•äº†341ä¾‹æ­»äº¡ï¼Œå…¶ä¸­è¡€ç®¡ç–¾ç—…137ä¾‹ï¼Œç™Œç—‡94ä¾‹ï¼Œå…¶ä»–åŸå› 110ä¾‹ã€‚ç»è®¡ç®—ä½ä¸­é«˜ä¸‰ç»„çš„ç²—ç•¥æ­»äº¡ç‡åˆ†åˆ«ä¸º40.5%ã€23.7%å’Œ15.1%ï¼Œè¿™äº›æ•°æ®è¡¨æ˜äºšç²¾èƒºæ‘„å…¥é‡ä¸å…¨å› æ­»äº¡ç‡ä¹‹é—´çš„è´Ÿç›¸å…³å…³ç³»æ˜¾è‘—ã€‚éšç€é€æ­¥å¯¹å¹´é¾„ã€æ€§åˆ«å’Œçƒ­é‡çš„æ¯”ä¾‹è¿›è¡Œè°ƒæ•´ï¼Œè¿™ç§ç›¸å…³å…³ç³»ä¾ç„¶æ˜¾è‘—ã€‚</li>
</ul>
</li>
<li>ç»¼åˆ
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/145495570" target="_blank" rel="noopener noreferrer">ã€Šè‡ªç„¶ã€‹å­åˆŠæ·±åº¦ç»¼è¿°ï¼šå¦‚ä½•å¼€å‘æŠ—è¡°è€è¯</a></li>
<li><img src="https://user-images.githubusercontent.com/2707039/163702474-205baeec-f0ce-4e8d-96a4-36efe47534de.jpg" alt="å¦‚ä½•å¼€å‘æŠ—è¡°è€è¯" tabindex="0" loading="lazy"><figcaption>å¦‚ä½•å¼€å‘æŠ—è¡°è€è¯</figcaption></li>
</ul>
</li>
</ul>
<h3>6.2. è¾“å‡º</h3>
<h4>6.2.1. æŒ¥æ‹è¿åŠ¨</h4>
<ul>
<li><a href="https://www.sohu.com/a/535581770_121124216" target="_blank" rel="noopener noreferrer">å“ªç§è¿åŠ¨æ€§ä»·æ¯”æœ€é«˜ï¼Ÿæƒå¨åŒ»å­¦æ‚å¿—â€œæŸ³å¶åˆ€â€ç»™å‡ºç­”æ¡ˆäº†</a>
<ul>
<li>ä¸€å‘¨ä¸‰æ¬¡ï¼Œæ¯æ¬¡45-60åˆ†é’Ÿï¼ŒæŒ¥æ‹è¿åŠ¨ï¼Œé™ä½~47%å…¨å› æ­»äº¡ç‡</li>
<li>ç¾½æ¯›çƒã€ä¹’ä¹“çƒã€ç½‘çƒç­‰éƒ½ç®—æŒ¥æ‹è¿åŠ¨ï¼Œä½†ç”±äºè¥¿åŒ–ç ”ç©¶èƒŒæ™¯ï¼Œå¯èƒ½æŒ‡ç½‘çƒæ›´å¤šã€‚è¿™éšå¼çš„è¡¨è¾¾äº†å…¨èº«é”»ç‚¼æ›´ä¸ºé‡è¦</li>
</ul>
</li>
</ul>
<h4>6.2.2. èµ°è·¯</h4>
<ul>
<li><a href="http://www.shcell.org/219/3571.html" target="_blank" rel="noopener noreferrer">èµ°è·¯é™ä½å…¨å› æ­»äº¡ç‡è¶…è¿‡50%ï¼æ¯å¤©èµ°å¤šå°‘æ­¥æœ€åˆé€‚ï¼Ÿã€ŠJAMAã€‹å­åˆŠè¶…10å¹´ç ”ç©¶å‘Šè¯‰ä½ ç­”æ¡ˆ</a>
<ul>
<li><img src="https://user-images.githubusercontent.com/2707039/163704147-afec1c79-799b-4db8-b547-1a2431d504c9.jpg" alt="èµ°è·¯é™ä½å…¨å› æ­»äº¡ç‡" tabindex="0" loading="lazy"><figcaption>èµ°è·¯é™ä½å…¨å› æ­»äº¡ç‡</figcaption></li>
<li>æ³¨1ï¼šè¿™é¡¹ç ”ç©¶å‚ä¸è€…çš„å¹³å‡å¹´é¾„ä¸º45.2å²</li>
<li>æ³¨2ï¼šå¹³å‡æ­¥æ•°çš„å¤šå°‘ä¸èŒä¸šæœ‰å…³ï¼Œæ­¤é¡¹ç ”ç©¶ä»…è¡¨æ˜ç›¸å…³æ€§ï¼Œè¿˜æ²¡æœ‰æ›´æ·±åº¦çš„å› æœåˆ†æ</li>
</ul>
</li>
</ul>
<h4>6.2.3. åˆ·ç‰™</h4>
<ul>
<li><a href="https://www.cn-healthcare.com/articlewm/20211209/content-1293760.html" target="_blank" rel="noopener noreferrer">50ä¸‡å›½äººç ”ç©¶è¯å®ï¼šä¸å¥½å¥½åˆ·ç‰™ï¼Œè‡´ç™Œï¼è¡€ç®¡ç–¾ç—…ä¹Ÿä¼šå¢å¤šï¼</a>
<ul>
<li>ç»å¸¸ä¸åˆ·ç‰™çš„äººï¼šç™Œç—‡ã€æ…¢æ€§é˜»å¡æ€§è‚ºç—…åŠè‚ç¡¬åŒ–é£é™©åˆ†åˆ«å¢åŠ äº†9%ã€12%å’Œ25%ï¼Œè¿‡æ—©æ­»äº¡é£é™©å¢åŠ 25%ã€‚</li>
</ul>
</li>
</ul>
<h4>6.2.4. æ³¡æ¾¡</h4>
<ul>
<li><a href="https://www.cn-healthcare.com/article/20200326/content-533379.html" target="_blank" rel="noopener noreferrer">å®šæœŸæ´—æ¾¡é™ä½å¿ƒè¡€ç®¡ç–¾ç—…å‘ä½œé£é™©</a>
<ul>
<li>ä¸æ¯å‘¨ä¸€è‡³ä¸¤æ¬¡æ³¡æ¾¡æˆ–æ ¹æœ¬ä¸æ³¡æ¾¡ç›¸æ¯”ï¼Œæ¯å¤©æ´—çƒ­æ°´æ¾¡å¯ä»¥é™ä½28%çš„å¿ƒè¡€ç®¡ç–¾ç—…æ€»é£é™©ï¼Œé™ä½26%çš„ä¸­é£æ€»é£é™©ï¼Œè„‘å‡ºè¡€é£é™©ä¸‹é™46%ã€‚è€Œæµ´ç¼¸æµ´çš„é¢‘ç‡ä¸å¿ƒæºæ€§çŒæ­»çš„é£é™©å¢åŠ æ— å…³ã€‚</li>
</ul>
</li>
</ul>
<h4>6.2.5. åšå®¶åŠ¡ï¼ˆè€å¹´ç”·æ€§ï¼‰</h4>
<ul>
<li><a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0061529" target="_blank" rel="noopener noreferrer">Housework Reduces All-Cause and Cancer Mortality in Chinese Men</a>
<ul>
<li>72å²ä¹‹åç”·æ€§æ¯å‘¨åšé‡å‹å®¶åŠ¡å¯ä»¥å‡å°‘29%å¹³å‡æ­»äº¡ç‡</li>
<li>é‡å‹å®¶åŠ¡ï¼šå¸å°˜ã€æ“¦åœ°æ¿ã€æ‹–åœ°ã€æ“¦æ´—çª—æˆ·ã€æ´—è½¦ã€æ¬åŠ¨å®¶å…·ã€æ¬ç…¤æ°”ç½ç­‰ç­‰ã€‚</li>
<li>è½»å‹å®¶åŠ¡ï¼šæ¸ç°å°˜ã€æ´—ç¢—ã€æ‰‹æ´—è¡£æœã€ç†¨çƒ«ã€æ™¾è¡£æœã€åšé¥­ã€ä¹°æ—¥ç”¨å“ç­‰ç­‰ã€‚</li>
</ul>
</li>
</ul>
<h4>6.2.6. ç¡çœ </h4>
<ul>
<li><a href="https://med.sina.com/article_detail_103_1_105491.html" target="_blank" rel="noopener noreferrer">è¶…30ä¸‡äºšæ´²äººæ•°æ®ï¼šæ¯å¤©ç¡å‡ ä¸ªå°æ—¶æœ€æœ‰ç›Šé•¿å¯¿ï¼Ÿ</a>
<ul>
<li>åœ¨ç”·æ€§ä¸­ï¼Œä¸ç¡çœ æ—¶é•¿ä¸º7å°æ—¶ç›¸æ¯”ï¼šç¡çœ æŒç»­æ—¶é—´â‰¥10å°æ—¶ä¸å…¨å› æ­»äº¡é£é™©å¢åŠ 34%ç›¸å…³ï¼›</li>
<li><img src="https://user-images.githubusercontent.com/2707039/163704166-226b7ebb-92ce-4753-a3e7-77a87652a104.jpg" alt="ç¡çœ -ç”·" tabindex="0" loading="lazy"><figcaption>ç¡çœ -ç”·</figcaption></li>
<li>åœ¨å¥³æ€§ä¸­ï¼Œä¸ç¡çœ æŒç»­æ—¶é—´7å°æ—¶ç›¸æ¯”ï¼šç¡çœ æŒç»­æ—¶é—´â‰¥10å°æ—¶ä¸å…¨å› æ­»äº¡é£é™©å¢åŠ 48%ç›¸å…³ï¼›</li>
<li><img src="https://user-images.githubusercontent.com/2707039/163704169-c5c715aa-7130-403b-b0d1-ec34fab094d8.png" alt="ç¡çœ -å¥³" tabindex="0" loading="lazy"><figcaption>ç¡çœ -å¥³</figcaption></li>
</ul>
</li>
<li><a href="https://www.thepaper.cn/newsDetail_forward_14461799" target="_blank" rel="noopener noreferrer">é¢ è¦†è®¤çŸ¥ï¼åŠ æ‹¿å¤§ç ”ç©¶å‘ç°ï¼šæ—©ç¡æ¯”ç†¬å¤œæˆ–è®¸æ›´ä¼¤èº«ï¼Œå‡ ç‚¹ç¡æ‰å¥½ï¼Ÿ</a>
<ul>
<li>å…¶ä¸­ä¸€ä¸ªç»“è®ºä¸ºï¼Œå°±å¯æ—¶é—´ä¸å…¨å› æ­»äº¡ç‡çš„å…³è”æ€§å¼ºï¼Œè¿‡æ—©ç¡è§‰å’Œè¿‡æ™šç¡è§‰éƒ½ä¼šå½±å“å¥åº·ï¼Œä½†æ˜¯æ—©ç¡å¢åŠ çš„å…¨å› æ­»äº¡ç‡æ¯”æ™šç¡å¢åŠ çš„æ­»äº¡ç‡é«˜ï¼Œæ—©ç¡å¢åŠ äº†43%çš„æ­»äº¡é£é™©ï¼Œè€Œæ™šç¡å¢åŠ äº†15%çš„æ­»äº¡é£é™©ã€‚</li>
<li>è¿™é¡¹è°ƒæŸ¥ç ”ç©¶ï¼Œè¿˜å­˜åœ¨å¾ˆå¤šå±€é™æ€§ï¼Œæ¯”å¦‚æ²¡æœ‰ç›´æ¥è¯æ˜å°±å¯æ—¶é—´ä¸æ­»äº¡çš„å…³ç³»ï¼Œä»…ä»…è¯´æ˜ç›¸å…³æ€§ï¼Œé€šè¿‡å‚ä¸äººç¾¤è‡ªæˆ‘æŠ¥å‘Šç»Ÿè®¡ç¡çœ æ—¶é—´ï¼Œæ•°æ®ä¸å¤Ÿå®¢è§‚</li>
</ul>
</li>
</ul>
<h3>6.3. ä¸Šä¸‹æ–‡</h3>
<h4>6.3.1. æƒ…ç»ª</h4>
<ul>
<li><a href="https://www.x-mol.com/paper/1288184397379059712/t?recommendPaper=1263704526086578176" target="_blank" rel="noopener noreferrer">æ‚²è§‚æƒ…ç»ªä¸æ›´é«˜çš„å…¨å› æ­»äº¡ç‡å’Œå¿ƒè¡€ç®¡ç–¾ç—…æ­»äº¡ç‡æœ‰å…³ï¼Œä½†ä¹è§‚æƒ…ç»ªå¹¶ä¸èƒ½èµ·åˆ°ä¿æŠ¤ä½œç”¨</a></li>
<li><a href="https://www.nature.com/articles/s41598-020-69388-y?utm_source=xmol&amp;utm_medium=affiliate&amp;utm_content=meta&amp;utm_campaign=DDCN_1_GL01_metadata_scirep" target="_blank" rel="noopener noreferrer">Pessimism is associated with greater all-cause and cardiovascular mortality, but optimism is not protective</a>
<ul>
<li>åœ¨1993-1995å¹´é—´ï¼Œä¸€é¡¹é’ˆå¯¹50å²ä»¥ä¸Šæ¾³å¤§åˆ©äºšäººå¥åº·çš„åŒèƒèƒç ”ç©¶ä¸­åŒ…æ‹¬äº†ç”Ÿæ´»å–å‘æµ‹è¯•ï¼ˆLOTï¼‰ï¼Œå…¶ä¸­åŒ…å«ä¹è§‚å’Œæ‚²è§‚çš„é¡¹ç›®ã€‚å¹³å‡20å¹´åï¼Œå‚ä¸è€…ä¸æ¥è‡ªæ¾³å¤§åˆ©äºšå›½å®¶æ­»äº¡æŒ‡æ•°çš„æ­»äº¡ä¿¡æ¯ç›¸åŒ¹é…ã€‚åœ¨2,978åå…·æœ‰å¾ˆå¤šå¯ç”¨åˆ†æ•°çš„å‚ä¸è€…ä¸­ï¼Œæœ‰1,068äººæ­»äº¡ã€‚ç”Ÿå­˜åˆ†ææµ‹è¯•äº†å„ç§ä¹è§‚å› ç´ å’Œæ‚²è§‚æƒ…ç»ªåˆ†æ•°ä¸ä»»ä½•åŸå› ï¼Œç™Œç—‡ï¼Œå¿ƒè¡€ç®¡ç–¾ç—…æˆ–å…¶ä»–å·²çŸ¥åŸå› çš„æ­»äº¡ç‡ä¹‹é—´çš„å…³è”ã€‚å¹´é¾„è°ƒæ•´åçš„æ‚²è§‚é‡è¡¨ä¸Šçš„æ ¸å¿ƒä¸å…¨å› å’Œå¿ƒè¡€ç®¡ç–¾ç—…æ­»äº¡ç‡ç›¸å…³ï¼ˆæ¯1ä¸ªæ ‡å‡†å·®å•ä½çš„å±é™©æ¯”ï¼Œ95ï¼…ç½®ä¿¡åŒºé—´å’Œpå€¼1.134ã€1.065â€“1.207ã€8.85Ã—10 â€“5å’Œ1.196ã€1.045â€“1.368ã€0.0093 ï¼‰ï¼Œä½†ä¸ä¼šå› ç™Œç—‡æ­»äº¡ã€‚ä¹è§‚å¾—åˆ†ä¸æ‚²è§‚å¾—åˆ†ä¹‹é—´çš„ç›¸å…³æ€§å¾ˆå¼±ï¼ˆå¹´é¾„è°ƒæ•´åçš„ç­‰çº§ç›¸å…³ç³»æ•°= âˆ’ 0.176ï¼‰ï¼Œä½†ä¸æ€»æ­»äº¡ç‡æˆ–ç‰¹å®šåŸå› æ­»äº¡ç‡æ²¡æœ‰æ˜¾ç€ç›¸å…³æ€§ã€‚åå‘å› æœå…³ç³»ï¼ˆå¼•èµ·æ‚²è§‚æƒ…ç»ªçš„ç–¾ç—…ï¼‰æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºåœ¨é‚£ç§æƒ…å†µä¸‹ï¼Œå¿ƒè¡€ç®¡ç–¾ç—…å’Œç™Œç—‡éƒ½ä¼šå¯¼è‡´æ‚²è§‚æƒ…ç»ªã€‚</li>
</ul>
</li>
</ul>
<h4>6.3.2. è´«å¯Œ</h4>
<ul>
<li><a href="https://www.cn-healthcare.com/articlewm/20210727/content-1246348.html" target="_blank" rel="noopener noreferrer">JAMAå­åˆŠï¼šè´«å¯Œå·®è·çœŸèƒ½å½±å“å¯¿å‘½ï¼Ÿè¿™å¯èƒ½æ˜¯çœŸçš„ï¼</a>
<ul>
<li>è¯¥ç ”ç©¶ä½¿ç”¨1994-1996å¹´ç¬¬ä¸€æ¬¡æ”¶é›†çš„æ•°æ®ï¼Œå¹¶é€šè¿‡ç”Ÿå­˜æ¨¡å‹æ¥åˆ†æå‡€èµ„äº§å’Œé•¿å¯¿ä¹‹é—´çš„å…³è”ã€‚ç»“æœæ˜¾ç¤ºï¼Œå…±æ”¶çº³5414 åå‚ä¸è€…ï¼Œå¹³å‡å¹´é¾„ä¸º 46.7å²ï¼ŒåŒ…æ‹¬ 2766 åå¥³æ€§ã€‚è¾ƒé«˜çš„å‡€èµ„äº§ä¸è¾ƒä½çš„æ­»äº¡é£é™©ç›¸å…³ã€‚ç‰¹åˆ«æ˜¯åœ¨å…„å¼Ÿå§å¦¹å’ŒåŒèƒèƒä¸­ï¼ˆn = 2490ï¼‰ï¼Œåœ¨è¾ƒé«˜çš„å‡€èµ„äº§å’Œè¾ƒä½çš„æ­»äº¡ç‡ä¹‹é—´è§‚å¯Ÿåˆ°ç±»ä¼¼çš„å…³è”ï¼Œè¡¨æ˜æ‹¥æœ‰æ›´å¤šè´¢å¯Œçš„å…„å¼Ÿå§å¦¹æˆ–åŒèƒèƒæ¯”æ‹¥æœ‰æ›´å°‘è´¢å¯Œçš„å…„å¼Ÿå§å¦¹/åŒèƒèƒæ´»å¾—æ›´ä¹…ã€‚</li>
</ul>
</li>
</ul>
<h4>6.3.3. ä½“é‡</h4>
<ul>
<li><a href="https://www.chinacdc.cn/gwxx/202009/t20200904_218959.html" target="_blank" rel="noopener noreferrer">JAMAå­åˆŠï¼šå‡è‚¥è¦è¶æ—©ï¼Œæ‰èƒ½æœ‰æ•ˆé™ä½æ­»äº¡ç‡é£é™©</a>
<ul>
<li>å¯¹ä½“é‡å‡è½»çš„æ­»äº¡ç‡é£é™©è¯„ä¼°å‘ç°ï¼Œä½“é‡ä»è‚¥èƒ–å‡è½»åˆ°è¶…é‡çš„æˆå¹´äººä¸ç¨³å®šè‚¥èƒ–äººç¾¤ç›¸æ¯”ï¼Œå…¨å› æ­»äº¡ç‡é™ä½äº†54ï¼…ï¼ˆå±é™©æ¯”ä¸º0.46ï¼‰ï¼Œç„¶è€Œä»æˆå¹´åˆæœŸçš„è¶…é‡å‡è½»åˆ°ä¸­å¹´ä»¥å‰çš„æ­£å¸¸ä½“é‡çš„äººç¾¤çš„æ­»äº¡ç‡é£é™©å¹¶æœªé™ä½ï¼ˆé£é™©æ¯”ä¸º1.12ï¼‰ã€‚</li>
<li><img src="https://raw.githubusercontent.com/qhy040404/Image-Resources-Repo/master/zoi200509t3_1596761185.02415.png" alt="Table3" tabindex="0" loading="lazy"><figcaption>Table3</figcaption></li>
</ul>
</li>
</ul>
<h4>6.3.4. æ–°å† </h4>
<ul>
<li><a href="https://www.nature.com/articles/s41591-020-1112-0.pdf" target="_blank" rel="noopener noreferrer">Magnitude, demographics and dynamics of the effect of the first wave of the COVID-19 pandemic on all-cause mortality in 21 industrialized countries</a>
<ul>
<li>ç›®å‰æ¥çœ‹ï¼Œæ–°å† æ­»äº¡ç‡ï¼ˆç¾å›½ï¼‰åœ¨1.5%å·¦å³ï¼Œäººå‡é¢„æœŸå¯¿å‘½å‡å°‘äº†2å¹´</li>
</ul>
</li>
<li><a href="https://www.zhihu.com/question/510943670/answer/2308499719" target="_blank" rel="noopener noreferrer">å¦‚ä½•çœ‹å¾…ç¾å›½CDCå®£ç§°æ–°å† æ­»äº¡äººæ•°è¢«é«˜ä¼°ï¼Ÿ</a></li>
<li><a href="https://www.cdc.gov/nchs/nvss/deaths.htm" target="_blank" rel="noopener noreferrer">NVSS deaths</a></li>
</ul>
]]></content:encoded>
      <enclosure url="https://user-images.githubusercontent.com/2707039/163703960-6f321de5-4daa-4ea5-95b9-af9c96f1c1bc.jpg" type="image/jpeg"/>
    </item>
    <item>
      <title>æ”¶é›†çš„ä¸€äº›ç½‘ç«™</title>
      <link>http://blog.cjhe.top/other/website.html</link>
      <guid>http://blog.cjhe.top/other/website.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">æ”¶é›†çš„ä¸€äº›ç½‘ç«™</source>
      <description>ç®—æ³• æ•°æ®ç»“æ„å’Œç®—æ³•åŠ¨æ€å¯è§†åŒ– ç®—æ³•å¯è§†åŒ– åœ¨çº¿è¿è¡Œä»£ç çš„ç®—æ³•å¯è§†åŒ– æ•°æ®ç»“æ„å¯è§†åŒ– ç®—æ³•å®ç° Linux é¸Ÿå“¥çš„Linuxç§æˆ¿èœ TLCL ç²¾å½©çš„Linuxå‘½ä»¤ å‘½ä»¤è¡Œçš„è‰ºæœ¯ CURLä½¿ç”¨ è®¾è®¡æ¨¡å¼ å›¾è¯´è®¾è®¡æ¨¡å¼ Goè®¾è®¡æ¨¡å¼ Goè®¾è®¡æ¨¡å¼ è®¾è®¡æ¨¡å¼ å®¹å™¨åŒ– Docker-ä»å…¥é—¨åˆ°å®è·µ Dockerä¸­æ–‡æ–‡æ¡£ ä»Dockeråˆ°kubernetesè¿›é˜¶ ...</description>
      <category>è½¬è½½</category>
      <pubDate>Sat, 04 Mar 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h2>ç®—æ³•</h2>
<p>æ•°æ®ç»“æ„å’Œç®—æ³•åŠ¨æ€å¯è§†åŒ–<a href="https://visualgo.net/zh" target="_blank" rel="noopener noreferrer"></a></p>
<p>ç®—æ³•å¯è§†åŒ–<a href="https://www.chrislaux.com/" target="_blank" rel="noopener noreferrer"></a></p>
<p>åœ¨çº¿è¿è¡Œä»£ç çš„ç®—æ³•å¯è§†åŒ–<a href="https://algorithm-visualizer.org/" target="_blank" rel="noopener noreferrer"></a></p>
<p>æ•°æ®ç»“æ„å¯è§†åŒ–<a href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html" target="_blank" rel="noopener noreferrer"></a></p>
<p>ç®—æ³•å®ç°<a href="https://the-algorithms.com/" target="_blank" rel="noopener noreferrer"></a></p>
<h2>Linux</h2>
<p>é¸Ÿå“¥çš„Linuxç§æˆ¿èœ<a href="http://cn.linux.vbird.org/linux_basic/linux_basic.php" target="_blank" rel="noopener noreferrer"></a></p>
<p>TLCL<a href="http://billie66.github.io/TLCL/book/" target="_blank" rel="noopener noreferrer"></a></p>
<p>ç²¾å½©çš„Linuxå‘½ä»¤<a href="https://www.cnblogs.com/nineep/p/6795650.html" target="_blank" rel="noopener noreferrer"></a></p>
<p>å‘½ä»¤è¡Œçš„è‰ºæœ¯<a href="https://github.com/jlevy/the-art-of-command-line/blob/master/README-zh.md" target="_blank" rel="noopener noreferrer"></a></p>
<p>CURLä½¿ç”¨<a href="https://everything.curl.dev/" target="_blank" rel="noopener noreferrer"></a></p>
<h2>è®¾è®¡æ¨¡å¼</h2>
<p>å›¾è¯´è®¾è®¡æ¨¡å¼<a href="https://design-patterns.readthedocs.io/zh_CN/latest/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goè®¾è®¡æ¨¡å¼<a href="https://golangbyexample.com/all-design-patterns-golang/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goè®¾è®¡æ¨¡å¼<a href="https://dev.to/gopher/go-all-design-patterns-code-with-workflow-ea1" target="_blank" rel="noopener noreferrer"></a></p>
<p>è®¾è®¡æ¨¡å¼<a href="https://refactoringguru.cn/design-patterns" target="_blank" rel="noopener noreferrer"></a></p>
<h2>å®¹å™¨åŒ–</h2>
<p>Docker-ä»å…¥é—¨åˆ°å®è·µ<a href="https://www.cntofu.com/book/139/index.html" target="_blank" rel="noopener noreferrer"></a></p>
<p>Dockerä¸­æ–‡æ–‡æ¡£<a href="http://www.dockerinfo.net/document" target="_blank" rel="noopener noreferrer"></a></p>
<p>ä»Dockeråˆ°kubernetesè¿›é˜¶<a href="https://www.qikqiak.com/k8s-book/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Kubernetesä¸­æ–‡æŒ‡å—<a href="https://jimmysong.io/kubernetes-handbook/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Prometheuså‘Šè­¦<a href="https://awesome-prometheus-alerts.grep.to/" target="_blank" rel="noopener noreferrer"></a></p>
<h2>è®¾è®¡</h2>
<p>Google APIè®¾è®¡æŒ‡å—<a href="https://www.bookstack.cn/read/API-design-guide/API-design-guide-README.md" target="_blank" rel="noopener noreferrer"></a></p>
]]></content:encoded>
    </item>
    <item>
      <title>åˆ†æ”¯è§„èŒƒ</title>
      <link>http://blog.cjhe.top/project-standard/branch.html</link>
      <guid>http://blog.cjhe.top/project-standard/branch.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">åˆ†æ”¯è§„èŒƒ</source>
      <description>git-modelgit-model æç¤º ä¸€ä¸ªå¥½çš„ä»£ç åˆ†æ”¯åº”è¯¥æ˜¯æ€æ ·çš„â“</description>
      <category>é¡¹ç›®è§„èŒƒ</category>
      <pubDate>Tue, 11 Feb 2020 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015122301.png" alt="git-model" tabindex="0" loading="lazy"><figcaption>git-model</figcaption></figure>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä¸€ä¸ªå¥½çš„ä»£ç åˆ†æ”¯åº”è¯¥æ˜¯æ€æ ·çš„â“</p>
</div>
<!-- more -->
<h2>åˆ†æ”¯æ¨¡å‹</h2>
<p>æˆ‘ä»¬ç»å¸¸ä½¿ç”¨Gitç”¨äºç®¡ç†ç‰ˆæœ¬ï¼Œä½†å¦‚æœæ²¡æœ‰æ¸…æ™°çš„æµç¨‹å’Œè§„èŒƒï¼Œä¼šå¯¼è‡´éš¾ä»¥åè°ƒå’Œç»´æŠ¤ã€‚
Vincent Driessen ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæå‡º<a href="https://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="noopener noreferrer">A Successful Git Branching Model</a></p>
<figure><figcaption>git-model</figcaption></figure>
<h2>masteråˆ†æ”¯</h2>
<p>è¿™ä¸ªåˆ†æ”¯ä¿æŒæœ€è¿‘å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<ul>
<li>ä¸èƒ½åœ¨è¿™ä¸ªåˆ†æ”¯ç›´æ¥ä¿®æ”¹</li>
<li>ç”Ÿäº§ç¯å¢ƒè¿è¡Œçš„ä»£ç å’Œè¯¥åˆ†æ”¯ä¿æŒä¸€è‡´</li>
<li>masteråˆ†æ”¯æ¯åˆå¹¶ä¸€ä¸ªhotfix/releaseåˆ†æ”¯ï¼Œéƒ½ä¼šæ‰“ä¸€ä¸ªç‰ˆæœ¬æ ‡ç­¾</li>
</ul>
</div>
<h2>developåˆ†æ”¯</h2>
<p>è¿™ä¸ªåˆ†æ”¯æ˜¯æˆ‘ä»¬çš„ä¸»å¼€å‘åˆ†æ”¯</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>feature/release/hotfixéƒ½éœ€è¦åˆå¹¶åˆ°è¯¥åˆ†æ”¯</p>
</div>
<h2>featureåˆ†æ”¯</h2>
<p>è¿™ä¸ªåˆ†æ”¯æ˜¯ç”¨æ¥å¼€å‘æ–°çš„åŠŸèƒ½ï¼Œä¸€æ—¦å¼€å‘å®Œæˆï¼Œåˆå¹¶åˆ°developåˆ†æ”¯å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªrelease</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<ul>
<li>åˆ†æ”¯å‘½åå»ºè®®ï¼š<code>feature/xxx-xxx</code></li>
<li>åˆå¹¶åˆ°developåˆ†æ”¯éœ€è¦åˆ é™¤è¯¥åˆ†æ”¯ï¼Œå¦‚æœæœ‰bugï¼Œåœ¨å¯¹åº”çš„releaseåˆ†æ”¯è¿›è¡Œä¿®å¤</li>
<li>featureåˆ†æ”¯åˆå¹¶åˆ°developåˆ†æ”¯ä¹‹å‰å…ˆpullä¸€ä¸‹developåˆ†æ”¯ï¼Œé¿å…å†²çª</li>
</ul>
</div>
<h2>releaseåˆ†æ”¯</h2>
<p>å½“éœ€è¦å‘å¸ƒä¸€ä¸ªæ–°çš„releaseçš„æ—¶å€™ï¼ŒåŸºäºdevelopåˆ†æ”¯åˆ›å»ºä¸€ä¸ªreleaseåˆ†æ”¯</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<ul>
<li>åˆ†æ”¯åå»ºè®®å‘½å<code>release/xxx-xxx</code></li>
<li>æµ‹è¯•äººå‘˜åŸºäºreleaseåˆ†æ”¯è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœ‰bugï¼Œä¹Ÿåœ¨è¯¥åˆ†æ”¯ä¿®å¤ï¼Œå†æµ‹è¯•ã€‚</li>
<li>å®Œæˆreleaseåˆ†æ”¯åéœ€è¦åˆå¹¶åˆ°masterå’Œdevelopåˆ†æ”¯</li>
</ul>
</div>
<h2>hotfixåˆ†æ”¯</h2>
<p>å½“åœ¨ç°ç½‘å‘ç°bugæ—¶ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªhotfixåˆ†æ”¯è¿›è¡Œä¿®å¤ï¼Œå®Œæˆååˆå¹¶åˆ°masterå’Œdevelopï¼Œhotfixçš„æ”¹åŠ¨ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªrelease</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<ul>
<li>å»ºè®®å‘½åï¼š<code>hotfix/xxx-xxx</code></li>
<li>åªèƒ½åŸºäºmasteråˆ†æ”¯åˆ›å»ºhotfixåˆ†æ”¯</li>
</ul>
</div>
]]></content:encoded>
      <enclosure url="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015122301.png" type="image/png"/>
    </item>
    <item>
      <title>ç›®å½•è§„èŒƒ</title>
      <link>http://blog.cjhe.top/project-standard/directory.html</link>
      <guid>http://blog.cjhe.top/project-standard/directory.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç›®å½•è§„èŒƒ</source>
      <description>æç¤º Goè¯­è¨€é¡¹ç›®ä¸šç•Œå…¬è®¤çš„ç›®å½•ç»“æ„æ˜¯æ€æ ·çš„â“</description>
      <category>é¡¹ç›®è§„èŒƒ</category>
      <pubDate>Sun, 09 Feb 2020 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>Goè¯­è¨€é¡¹ç›®ä¸šç•Œå…¬è®¤çš„ç›®å½•ç»“æ„æ˜¯æ€æ ·çš„â“</p>
</div>
<!-- more -->
<h2>ç›®å½•ç»“æ„</h2>
<blockquote>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹ç»´åº¦è¿›è¡Œè€ƒé‡ï¼š</p>
<ul>
<li>
<p>å‘½åæ¸…æ™°ï¼šç›®å½•å‘½åéœ€è¦ç®€æ´ï¼Œæ¸…æ™°çš„è¡¨è¾¾å‡ºè¯¥ç›®å½•å®ç°çš„åŠŸèƒ½ï¼Œåšåˆ°ä¸€çœ‹åˆ°è¯¥ç›®å½•åå°±çŸ¥é“æ˜¯å¹²å˜›çš„ï¼›</p>
</li>
<li>
<p>åŠŸèƒ½æ˜ç¡®ï¼šç›®å½•çš„åŠŸèƒ½å¿…é¡»æ˜ç¡®ï¼Œä¾‹å¦‚ï¼šapiç›®å½•æ˜¯æ¥å£æœåŠ¡ã€serviceç›®å½•æ˜¯ä¸šåŠ¡é€»è¾‘ï¼›</p>
</li>
<li>
<p>åŠŸèƒ½é½å…¨ï¼šä¾‹å¦‚æµ‹è¯•ã€æ„å»ºã€è„šæœ¬ã€å·¥å…·ã€æ–‡æ¡£ç­‰ï¼›</p>
</li>
</ul>
</blockquote>
<p>è¿™é‡Œå‚è€ƒGoè¯­è¨€å…¬è®¤é¡¹ç›®ç›®å½•<a href="https://github.com/golang-standards/project-layout" target="_blank" rel="noopener noreferrer">project-layout</a>ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>.
â”œâ”€â”€ api
â”œâ”€â”€ assets
â”œâ”€â”€ build
â”‚   â”œâ”€â”€ ci
â”‚   â””â”€â”€ package
â”œâ”€â”€ cmd
â”‚   â””â”€â”€ _your_app_
â”œâ”€â”€ configs
â”œâ”€â”€ deployments
â”œâ”€â”€ docs
â”œâ”€â”€ examples
â”œâ”€â”€ githooks
â”œâ”€â”€ init
â”œâ”€â”€ internal
â”‚   â”œâ”€â”€ app
â”‚   â”‚   â””â”€â”€ _your_app_
â”‚   â””â”€â”€ pkg
â”‚       â””â”€â”€ _your_private_lib_
â”œâ”€â”€ pkg
â”‚   â””â”€â”€ _your_public_lib_
â”œâ”€â”€ scripts
â”œâ”€â”€ test
â”œâ”€â”€ third_party
â”œâ”€â”€ tools
â”œâ”€â”€ vendor
â”œâ”€â”€ web
â”‚   â”œâ”€â”€ app
â”‚   â”œâ”€â”€ static
â”‚   â””â”€â”€ template
â””â”€â”€ website
</code></pre></div><h2>åº”ç”¨ç›®å½•</h2>
<h3>apiç›®å½•</h3>
<blockquote>
<p>OpenAPI/Swaggerè§„èŒƒã€JSONæ¨¡å¼æ–‡ä»¶ã€åè®®å®šä¹‰æ–‡ä»¶</p>
</blockquote>
<h3>cmdç›®å½•</h3>
<blockquote>
<p>è¯¥é¡¹ç›®çš„ä¸»è¦åº”ç”¨ï¼ŒGoè¯­è¨€ä»¥mainå‡½æ•°æ–‡ä»¶ä½œä¸ºç¨‹åºå…¥å£ã€‚æ¯ä¸ªåº”ç”¨ç¨‹åºçš„ç›®å½•åç§°åº”ä¸æ‰§è¡Œæ–‡ä»¶çš„åç§°ç›¸åŒ¹é…ï¼Œä¾‹å¦‚ï¼š<code>/cmd/myapp</code></p>
</blockquote>
<h3>examplesç›®å½•</h3>
<blockquote>
<p>åº”ç”¨ç¨‹åºå’Œå…¬å…±åº“çš„ç¤ºä¾‹</p>
</blockquote>
<h3>internalç›®å½•</h3>
<blockquote>
<p>å­˜æ”¾ç§æœ‰åº”ç”¨å’Œåº“ä»£ç ï¼Œå¦‚æœä¸€äº›ä»£ç ï¼Œä½ ä¸å¸Œæœ›åœ¨å…¶ä»–åœ¨å…¶ä»–åº”ç”¨å’Œåº“ä¸­è¢«å¯¼å…¥ï¼Œå¯ä»¥æ”¾åœ¨internalç›®å½•ä¸‹ã€‚è€Œå¯¹äºç§æœ‰åº”ç”¨å…±äº«çš„ä»£ç å¯ä»¥æ”¾åœ¨/internal/pkgç›®å½•ä¸‹ã€‚
å»ºè®®internalç›®å½•ä»¥å„ä¸ªç»„ä»¶çš„æ–¹å¼è¿›è¡Œåˆ†å±‚ã€‚</p>
</blockquote>
<h3>pkgç›®å½•</h3>
<blockquote>
<p>ä¸internalç›¸åï¼Œè¯¥ç›®å½•å­˜æ”¾å¯ä¾›å…¶ä»–å¤–éƒ¨åº”ç”¨ç¨‹åºä½¿ç”¨çš„åº“ä»£ç ã€‚</p>
</blockquote>
<h3>vendorç›®å½•</h3>
<blockquote>
<p>è¯¥ç›®å½•å­˜æ”¾é¡¹ç›®ä¾èµ–ï¼Œå¯é€šè¿‡<code>go mod vendor</code>åˆ›å»ºã€‚</p>
</blockquote>
<p>ğŸ‘€ æ³¨æ„</p>
<p>å¦‚æœå¼€å‘çš„æ˜¯Goè¯­è¨€åº“ï¼Œä¸è¦æäº¤vendorä¾èµ–åŒ…</p>
<h3>testç›®å½•</h3>
<blockquote>
<p>å…¶ä»–å¤–éƒ¨æµ‹è¯•åº”ç”¨ç¨‹åºå’Œæµ‹è¯•æ•°æ®ã€‚å¯¹äºæ›´å¤§çš„é¡¹ç›®ï¼Œæœ‰ä¸€ä¸ªæ•°æ®å­ç›®å½•æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼š<code>/test/data</code>æˆ–è€…<code>/test/testdata</code></p>
</blockquote>
<p>ğŸ‘€ æ³¨æ„</p>
<p>Go ä¹Ÿä¼šå¿½ç•¥ä»¥â€œ.â€å¼€å¤´çš„ç›®å½•æˆ–æ–‡ä»¶ã€‚æˆ–â€œ_â€ï¼Œå› æ­¤æ‚¨å¯ä»¥æ›´çµæ´»åœ°å‘½åæµ‹è¯•æ•°æ®ç›®å½•ã€‚</p>
<h3>third_partyç›®å½•</h3>
<blockquote>
<p>å¤–éƒ¨å¸®åŠ©å·¥å…·ï¼Œåˆ†æ”¯ä»£ç æˆ–å…¶ä»–ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚</p>
</blockquote>
<h3>toolsç›®å½•</h3>
<blockquote>
<p>è¯¥é¡¹ç›®çš„æ”¯æŒå·¥å…·</p>
</blockquote>
<p>ğŸ‘€ æ³¨æ„</p>
<p>è¿™äº›å·¥å…·å¯ä»¥ä»<code>pkg</code>å’Œ<code>internal</code>ç›®å½•å¯¼å…¥ä»£ç </p>
<h3>webç›®å½•</h3>
<blockquote>
<p>å‰ç«¯ä»£ç å­˜æ”¾ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾Webé™æ€èµ„æºï¼ŒæœåŠ¡ç«¯æ¨¡å—å’Œå•é¡µåº”ç”¨ï¼ˆSPAsï¼‰</p>
</blockquote>
<h3>assets</h3>
<blockquote>
<p>å…¶ä»–èµ„äº§ï¼Œä¾‹å¦‚ï¼šå›¾åƒã€å¾½æ ‡ã€CSSã€JavaScriptç­‰</p>
</blockquote>
<h3>website</h3>
<blockquote>
<p>é¡¹ç›®ç½‘ç«™æˆ–è€…Githubé¡µé¢</p>
</blockquote>
<h2>é¡¹ç›®ç®¡ç†ç›®å½•ä¸æ–‡ä»¶</h2>
<h3>buildç›®å½•</h3>
<blockquote>
<p>æ‰“åŒ…å’ŒæŒç»­é›†æˆ</p>
<p>å°†äº‘ (AMI)ã€å®¹å™¨ (Docker)ã€æ“ä½œç³»ç»Ÿï¼ˆdebã€rpmã€pkgï¼‰åŒ…é…ç½®å’Œè„šæœ¬æ”¾åœ¨<code>/build/package</code>ç›®å½•ä¸­ã€‚</p>
<p>å°†CIï¼ˆtravisã€circleã€droneï¼‰é…ç½®å’Œè„šæœ¬æ”¾åœ¨<code>/build/ci</code>ç›®å½•ä¸­ã€‚</p>
</blockquote>
<p>ğŸ‘€ æ³¨æ„</p>
<p>ä¸€äº› CI å·¥å…·ï¼ˆä¾‹å¦‚ Travis CIï¼‰å¯¹å…¶é…ç½®æ–‡ä»¶çš„ä½ç½®éå¸¸æŒ‘å‰”ã€‚å°è¯•å°†é…ç½®æ–‡ä»¶æ”¾åœ¨/build/ciå°†å®ƒä»¬é“¾æ¥åˆ° CI å·¥å…·æœŸæœ›å®ƒä»¬çš„ä½ç½®çš„ç›®å½•ä¸­ï¼ˆå¦‚æœå¯èƒ½ï¼‰ã€‚</p>
<h3>configsç›®å½•</h3>
<blockquote>
<p>é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚è¿™é‡Œå¯ä»¥å­˜æ”¾confdæˆ–consul-templateæ¨¡ç‰ˆæ–‡ä»¶ã€‚</p>
</blockquote>
<h3>deploymentsç›®å½•</h3>
<blockquote>
<p>IaaSã€PaaSã€ç³»ç»Ÿå’Œå®¹å™¨ç¼–æ’éƒ¨ç½²é…ç½®å’Œæ¨¡æ¿ï¼ˆdocker-composeã€kubernetes/helmã€mesosã€terraformã€boshï¼‰ã€‚</p>
</blockquote>
<p>ğŸ‘€ æ³¨æ„</p>
<p>åœ¨æŸäº›å­˜å‚¨åº“ï¼ˆå°¤å…¶æ˜¯ä½¿ç”¨ kubernetes éƒ¨ç½²çš„åº”ç”¨ç¨‹åºï¼‰ä¸­ï¼Œæ­¤ç›®å½•ç§°ä¸º<code>deploy</code>.</p>
<h3>initç›®å½•</h3>
<blockquote>
<p>ç³»ç»Ÿåˆå§‹åŒ–ï¼ˆsystemdã€upstartã€sysvï¼‰å’Œè¿›ç¨‹ç®¡ç†å™¨(runitã€supervisord)é…ç½®æ–‡ä»¶ï¼Œåœ¨éå®¹å™¨åŒ–éƒ¨ç½²çš„é¡¹ç›®ä¸­ä¼šä½¿ç”¨åˆ°ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼šsystemdçš„unitæ–‡ä»¶ï¼Œç”¨äºç®¡ç†ç¨‹åºï¼Œä¸€èˆ¬ä»¥.serviceç»“å°¾</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>[Unit]
Description=OpenSSH server daemon
Documentation=man:sshd(8) man:sshd_config(5)
After=network.target sshd-keygen.target
Wants=sshd-keygen.target

[Service]
Type=notify
EnvironmentFile=-/etc/crypto-policies/back-ends/opensshserver.config
EnvironmentFile=-/etc/sysconfig/sshd
ExecStart=/usr/sbin/sshd -D $OPTIONS $CRYPTO_POLICY
ExecReload=/bin/kill -HUP $MAINPID
KillMode=process
Restart=on-failure
RestartSec=42s

[Install]
WantedBy=multi-user.target
</code></pre></div><h3>scriptsç›®å½•</h3>
<blockquote>
<p>æ‰§è¡Œå„ç§æ„å»ºã€å®‰è£…ã€åˆ†æç­‰æ“ä½œçš„è„šæœ¬ã€‚è¿™äº›è„šæœ¬ä½¿æ ¹çº§ Makefile å°è€Œç®€å•</p>
</blockquote>
<p>ä¾‹å¦‚: <a href="https://github.com/hashicorp/terraform/blob/master/Makefile" target="_blank" rel="noopener noreferrer">terraform-website</a>ä½¿ç”¨äº†å¾ˆå¤šsciptsç›®å½•ä¸‹çš„è„šæœ¬ï¼Œä½¿å¾—Makefileå°ä½†åŠŸèƒ½å¼ºå¤§ã€‚</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>WEBSITE_REPO=github.com/hashicorp/terraform-website
VERSION?="0.3.44"
PWD=$$(pwd)
DOCKER_IMAGE="hashicorp/terraform-website:full"
DOCKER_IMAGE_LOCAL="hashicorp-terraform-website-local"
DOCKER_RUN_FLAGS=--interactive \
	--rm \
	--tty \
	--workdir "/website" \
	--volume "$(shell pwd):/website/ext/terraform" \
	--volume "$(shell pwd)/website:/website/preview" \
	--publish "3000:3000" \
	-e "IS_CONTENT_PREVIEW=true" \
	-e "PREVIEW_FROM_REPO=terraform" \
	-e "NAV_DATA_DIRNAME=./preview/data" \
	-e "CONTENT_DIRNAME=./preview/docs" \
	-e "CURRENT_GIT_BRANCH=$$(git rev-parse --abbrev-ref HEAD)"

# generate runs `go generate` to build the dynamically generated
# source files, except the protobuf stubs which are built instead with
# "make protobuf".
generate:
	go generate ./...

# We separate the protobuf generation because most development tasks on
# Terraform do not involve changing protobuf files and protoc is not a
# go-gettable dependency and so getting it installed can be inconvenient.
#
# If you are working on changes to protobuf interfaces, run this Makefile
# target to be sure to regenerate all of the protobuf stubs using the expected
# versions of protoc and the protoc Go plugins.
protobuf:
	go run ./tools/protobuf-compile .

fmtcheck:
	"$(CURDIR)/scripts/gofmtcheck.sh"

importscheck:
	"$(CURDIR)/scripts/goimportscheck.sh"

staticcheck:
	"$(CURDIR)/scripts/staticcheck.sh"

exhaustive:
	"$(CURDIR)/scripts/exhaustive.sh"

# Default: run this if working on the website locally to run in watch mode.
website:
	@echo "==&gt; Downloading latest Docker image..."
	@docker pull ${DOCKER_IMAGE}
	@echo "==&gt; Starting website in Docker..."
	@docker run ${DOCKER_RUN_FLAGS} ${DOCKER_IMAGE} npm start

website/local:
	@echo "==&gt; Starting website in Docker..."
	@docker run ${DOCKER_RUN_FLAGS} ${DOCKER_IMAGE_LOCAL} npm start

.PHONY: website/build-local
website/build-local:
	@echo "==&gt; Building local Docker image"
	@docker build https://github.com/hashicorp/terraform-website.git\#master \
		-t $(DOCKER_IMAGE_LOCAL)

# disallow any parallelism (-j) for Make. This is necessary since some
# commands during the build process create temporary files that collide
# under parallel conditions.
.NOTPARALLEL:

.PHONY: fmtcheck importscheck generate protobuf website website-test staticcheck website/local website/build-local
</code></pre></div><h3>githooksç›®å½•</h3>
<blockquote>
<p>Gité’©å­ï¼Œæ¯”å¦‚å¯ä»¥å°†commit-msgå­˜æ”¾åœ¨è¯¥ç›®å½•</p>
</blockquote>
<h3>Makefileæ–‡ä»¶</h3>
<blockquote>
<p>Makefileæ˜¯ä¸€ä¸ªå¾ˆä¼˜ç§€çš„é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œé€šå¸¸ç”¨æ¥æ‰§è¡Œé™æ€ä»£ç æ£€æŸ¥ã€å•å…ƒæµ‹è¯•ã€ç¼–è¯‘ç­‰åŠŸèƒ½</p>
</blockquote>
<ul>
<li>é™æ€ä»£ç æ£€æŸ¥(lint)ï¼šæ¨èç”¨ golangci-lintã€‚</li>
<li>å•å…ƒæµ‹è¯•(test)ï¼šè¿è¡Œ go test ./...ã€‚</li>
<li>ç¼–è¯‘(build)ï¼šç¼–è¯‘æºç ï¼Œæ”¯æŒä¸åŒçš„å¹³å°ï¼Œä¸åŒçš„ CPU æ¶æ„ã€‚</li>
<li>é•œåƒæ‰“åŒ…å’Œå‘å¸ƒ(image/image.push)ï¼šç°åœ¨çš„ç³»ç»Ÿæ¯”è¾ƒæ¨èç”¨ Docker/Kubernetes è¿›è¡Œéƒ¨ç½²ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿè¦æœ‰é•œåƒæ„å»ºåŠŸèƒ½ã€‚</li>
<li>æ¸…ç†ï¼ˆcleanï¼‰:æ¸…ç†ä¸´æ—¶æ–‡ä»¶æˆ–è€…ç¼–è¯‘åçš„äº§ç‰©ã€‚</li>
<li>ä»£ç ç”Ÿæˆï¼ˆgenï¼‰ï¼šæ¯”å¦‚è¦ç¼–è¯‘ç”Ÿæˆ protobuf pb.go æ–‡ä»¶ã€‚</li>
<li>éƒ¨ç½²ï¼ˆdeployï¼Œå¯é€‰ï¼‰ï¼šä¸€é”®éƒ¨ç½²åŠŸèƒ½ï¼Œæ–¹ä¾¿æµ‹è¯•ã€‚</li>
<li>å‘å¸ƒï¼ˆreleaseï¼‰ï¼šå‘å¸ƒåŠŸèƒ½ï¼Œæ¯”å¦‚ï¼šå‘å¸ƒåˆ° Docker Hubã€github ç­‰ã€‚</li>
<li>å¸®åŠ©ï¼ˆhelpï¼‰:å‘Šè¯‰ Makefile æœ‰å“ªäº›åŠŸèƒ½ï¼Œå¦‚ä½•æ‰§è¡Œè¿™äº›åŠŸèƒ½ã€‚</li>
<li>ç‰ˆæƒå£°æ˜ï¼ˆadd-copyrightï¼‰ï¼šå¦‚æœæ˜¯å¼€æºé¡¹ç›®ï¼Œå¯èƒ½éœ€è¦åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ç‰ˆæƒå¤´ï¼Œè¿™å¯ä»¥é€šè¿‡ Makefile æ¥æ·»åŠ ã€‚</li>
<li>API æ–‡æ¡£ï¼ˆswaggerï¼‰ï¼šå¦‚æœä½¿ç”¨ swagger æ¥ç”Ÿæˆ API æ–‡æ¡£ï¼Œè¿™å¯ä»¥é€šè¿‡ Makefile æ¥ç”Ÿæˆã€‚</li>
</ul>
<h2>æ–‡æ¡£ç›®å½•ä¸æ–‡ä»¶</h2>
<h3>docsç›®å½•</h3>
<blockquote>
<p>è®¾è®¡å’Œç”¨æˆ·æ–‡æ¡£ï¼Œé™¤äº†<code>godoc</code>ç”Ÿæˆçš„æ–‡æ¡£ä¹‹å¤–</p>
</blockquote>
<ul>
<li>/docs/devel/{en-US,zh-CN}: å­˜æ”¾å¼€å‘æ–‡æ¡£ã€hackæ–‡æ¡£</li>
<li>/docs/guide/{en-US,zh-CN}: å­˜æ”¾ç”¨æˆ·æ‰‹å†Œï¼Œå®‰è£…ã€quickstartã€äº§å“æ–‡æ¡£ç­‰</li>
<li>/docs/image: å­˜æ”¾å›¾ç‰‡æ–‡ä»¶</li>
</ul>
<h3>CHANGELOGç›®å½•</h3>
<blockquote>
<p>å½“é¡¹ç›®æœ‰æ›´æ–°æ—¶ï¼Œä¸ºäº†æ–¹ä¾¿äº†è§£å½“å‰ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹æˆ–è€…å†å²æ›´æ–°å†…å®¹ï¼Œéœ€è¦å°†æ›´æ–°è®°å½•å­˜æ”¾åˆ°CHANGELOGç›®å½•ã€‚</p>
</blockquote>
<p>ç¼–å†™CHANGELOGæ˜¯ä¸€ä¸ªç¹ççš„å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆ<a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines" target="_blank" rel="noopener noreferrer">Angularè§„èŒƒ</a>å’Œ<a href="https://github.com/git-chglog/git-chglog" target="_blank" rel="noopener noreferrer">git-chglogå·¥å…·</a></p>
<h3>CONTRIBUTING.mdæ–‡ä»¶</h3>
<blockquote>
<p>å¼€æºé¡¹ç›®ç”¨äºè¯´æ˜å¦‚ä½•è´¡çŒ®ä»£ç ï¼Œå¦‚ä½•å¼€æºååŒç­‰ã€‚</p>
</blockquote>
<h3>LICENSEæ–‡ä»¶</h3>
<blockquote>
<p>ç‰ˆæƒæ–‡ä»¶ï¼Œå¸¸ç”¨çš„å¼€æºåè®®æœ‰ï¼šApache 2.0ã€MITã€GPLç­‰</p>
</blockquote>
<p>ä¸ºäº†å£°æ˜ç‰ˆæƒï¼Œä½ å¯èƒ½ä¼šéœ€è¦å°†LICENSEå¤´æ·»åŠ åˆ°æºä»£ç æ–‡ä»¶æˆ–è€…å…¶ä»–æ–‡ä»¶ä¸­ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨è¿™ä¸ªå·¥å…·è‡ªåŠ¨åŒ–å®ç°ï¼š<a href="https://github.com/marmotedu/addlicense" target="_blank" rel="noopener noreferrer">addlicense</a></p>
<p>å½“ä»£ç ä¸­å¼•ç”¨äº†å…¶ä»–å¼€æºä»£ç æ—¶ï¼Œéœ€è¦åœ¨LICENSEä¸­è¯´æ˜å¯¹å…¶ä»–æºç çš„å¼•ç”¨ï¼Œå¯ä»¥å€ŸåŠ©å·¥å…·æ¥è¿›è¡Œæ£€æŸ¥ï¼š<a href="https://github.com/ribice/glice" target="_blank" rel="noopener noreferrer">glice</a></p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>+</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>ç‰ˆæœ¬è§„èŒƒ</title>
      <link>http://blog.cjhe.top/project-standard/version.html</link>
      <guid>http://blog.cjhe.top/project-standard/version.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç‰ˆæœ¬è§„èŒƒ</source>
      <description>æç¤º éšç€ç³»ç»ŸåŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚ï¼Œä¾èµ–çš„è½¯ä»¶åŒ…è¶Šæ¥è¶Šå¤šï¼Œå¦‚ä½•è§£å†³ã€ä¾èµ–åœ°ç‹±ã€‘é—®é¢˜ï¼Ÿ</description>
      <category>é¡¹ç›®è§„èŒƒ</category>
      <pubDate>Sat, 25 Jan 2020 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>éšç€ç³»ç»ŸåŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚ï¼Œä¾èµ–çš„è½¯ä»¶åŒ…è¶Šæ¥è¶Šå¤šï¼Œå¦‚ä½•è§£å†³ã€ä¾èµ–åœ°ç‹±ã€‘é—®é¢˜ï¼Ÿ</p>
</div>
<!-- more -->
<h2>è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ</h2>
<blockquote>
<p>è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼ˆSemVer,Semantic Versioningï¼‰æ˜¯Githubèµ·è‰çš„ä¸€ä¸ªå…·æœ‰æŒ‡å¯¼æ„ä¹‰çš„ã€ç»Ÿä¸€çš„ç‰ˆæœ¬å·è¡¨ç¤ºè§„èŒƒã€‚
å®ƒè§„å®šäº†ç‰ˆæœ¬å·çš„è¡¨ç¤ºã€å¢åŠ å’Œæ¯”è¾ƒæ–¹å¼ï¼Œä»¥åŠä¸åŒç‰ˆæœ¬å·ä»£è¡¨çš„å«ä¹‰ã€‚</p>
</blockquote>
<p>è¯­ä¹‰åŒ–ç‰ˆæœ¬æ ¼å¼ä¸ºï¼š<code>ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼ˆX.Y.Zï¼‰</code>ï¼Œå…¶ä¸­Xã€Yå’ŒZä¸ºéè´Ÿæ•´æ•°ï¼Œä¸”ç¦æ­¢åœ¨æ•°å­—å‰æ–¹è¡¥é›¶ã€‚
ä¾‹å¦‚ï¼šv1.2.3</p>
<p>ç‰ˆæœ¬å·å¢åŠ çš„å«ä¹‰ï¼š</p>
<ul>
<li>ä¸»ç‰ˆæœ¬å·ï¼ˆMAJORï¼‰ï¼šå½“åšäº†ä¸å…¼å®¹çš„APIä¿®æ”¹ã€‚ä¸€èˆ¬ç”¨äºå¤§çš„åŠŸèƒ½å˜åŠ¨(Breaking Change)ï¼Œå½±å“åˆ°ä¹‹å‰çš„åŠŸèƒ½ã€‚</li>
<li>æ¬¡ç‰ˆæœ¬å·ï¼ˆMINORï¼‰ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢åŠä¿®æ”¹ã€‚ä¸€èˆ¬ç”¨äºä¸å½±å“ä¹‹å‰é€»è¾‘çš„åŠŸèƒ½ä¼˜åŒ–ï¼Œæˆ–è€…æ–°çš„åŠŸèƒ½(New Feature)ã€‚</li>
<li>ä¿®è®¢å·ï¼ˆPATCHï¼‰ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ï¼Œä¸€èˆ¬ç”¨äºé—®é¢˜ä¿®å¤(Bug Fix)ã€‚</li>
</ul>
<figure><figcaption>server</figcaption></figure>
<p>ä¸€äº›ç»éªŒï¼š</p>
<ul>
<li>å»ºè®®0.1.0ä½œä¸ºç¬¬ä¸€ä¸ªå¼€å‘ç‰ˆæœ¬å·ï¼›</li>
<li>å½“ç”¨äºæ­£å¼ç¯å¢ƒï¼Œå®ƒåº”è¯¥è¾¾åˆ°1.0.0ç‰ˆï¼Œ0.y.zç‰ˆæœ¬å‡å¯è§†ä¸ºä¸ç¨³å®šç‰ˆæœ¬ï¼Œä»åœ¨æŒç»­å¼€å‘ä¸­ï¼›</li>
<li>v1.2.3å¹¶ä¸æ˜¯ä¸€ä¸ªè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬å·ï¼Œä½†æ˜¯åœ¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ä¹‹å‰å¢åŠ å‰ç¼€â€v"æ˜¯ç”¨æ¥è¡¨ç¤ºç‰ˆæœ¬å·çš„å¸¸ç”¨åšæ³•ï¼›</li>
</ul>
<p>å…³äºè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒè¯¦ç»†å†…å®¹å‚è€ƒï¼š<a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener noreferrer">semver.org</a></p>
<h2>å…ˆè¡Œç‰ˆæœ¬</h2>
<p>æ­¤å¤–æˆ‘ä»¬è¿˜ä¼šç»å¸¸é‡è§å…ˆè¡Œç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š1.0.0-alpha.0ã€1.0.0-alpha.1ã€1.0.0-beta.0ã€1.0.0-rc.0ã€1.0.0-rc.1ç­‰</p>
<blockquote>
<p>å½“è¦å‘å¸ƒå¤§ç‰ˆæœ¬æˆ–è€…æ ¸å¿ƒçš„featureæ—¶ï¼Œä½†åˆä¸èƒ½ä¿è¯è¿™ä¸ªç‰ˆæœ¬çš„åŠŸèƒ½100%æ­£å¸¸ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦é€šè¿‡å‘å¸ƒå…ˆè¡Œç‰ˆæœ¬</p>
</blockquote>
<p>å¸¸è§çš„å…ˆè¡Œç‰ˆæœ¬åŒ…æ‹¬ï¼šå†…æµ‹ç‰ˆ ã€ç°åº¦ç‰ˆå’ŒRCç‰ˆæœ¬ã€‚Semverè§„èŒƒä¸­ä½¿ç”¨alphaã€betaã€rcæ¥ä¿®é¥°å³å°†è¦å‘å¸ƒçš„ç‰ˆæœ¬ã€‚</p>
<ul>
<li>snapshot:å¿«ç…§ï¼Œä¹Ÿè¢«ç§°ä¸ºå¼€å‘ç‰ˆï¼Œå¤„äºå¼€å‘é˜¶æ®µï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ä»£ç ç¦æ­¢ç”¨äºç”Ÿäº§ç¯å¢ƒï¼›</li>
<li>alpha:å†…éƒ¨ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬è¡¨ç¤ºè½¯ä»¶åœ¨æ­¤é˜¶æ®µä¸»è¦æ˜¯ä»¥å®ç°åŠŸèƒ½ä¸ºä¸»ï¼Œç”¨äºè½¯ä»¶å¼€å‘å†…éƒ¨äº¤æµï¼Œä¸€èˆ¬bugæ¯”è¾ƒå¤šï¼›</li>
<li>beta:å…¬æµ‹ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬è¡¨ç¤ºç›¸å¯¹alphaç‰ˆå·²ç»æ”¹è¿›ï¼Œä½†ä»ç„¶å­˜åœ¨ä¸€äº›ç¼ºé™·ï¼Œç”¨äºä¸“ä¸šçˆ±å¥½è€…å¤§è§„æ¨¡ä½¿ç”¨ï¼›</li>
<li>gamma:æ¯”è¾ƒæˆç†Ÿçš„æµ‹è¯•ç‰ˆï¼›</li>
<li>rc:å³release candiateï¼Œæ­£å¼ç‰ˆæœ¬çš„å€™é€‰ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬å·²ç»ç›¸å½“æˆç†Ÿï¼Œåªä¼šä¿®å¤Bugï¼Œä¸ä¼šå¯¹è½¯ä»¶åšä»»ä½•å¤§çš„æ›´æ”¹ï¼›</li>
<li>release:å‘è¡Œç‰ˆæœ¬ï¼Œé€‚åˆä¸€èˆ¬ç”¨æˆ·ä½¿ç”¨ï¼Œä¸å¼€æºçš„è½¯ä»¶ï¼Œreleaseå¯èƒ½æ˜¯å¸¦æœ‰å…è´¹ä½¿ç”¨æ—¶é—´é™åˆ¶çš„ç‰ˆæœ¬ï¼›</li>
<li>stable:ç¨³å®šç‰ˆï¼ŒåŒreleaseï¼›</li>
</ul>
<h2>å·¥å…·</h2>
<p>å¦å¤–å¯ä»¥ä½¿ç”¨ä¸€äº›å·¥å…·è§„èŒƒç‰ˆæœ¬å·ï¼š</p>
<ul>
<li><a href="https://github.com/arnaud-deprez/gsemver" target="_blank" rel="noopener noreferrer">gsemver</a>
<ul>
<li>ä½¿ç”¨<code>gsemver bump</code>å‘½ä»¤å°±å¯ä»¥æ ¹æ®Gitå†å²æäº¤çº¦å®šç”Ÿæˆä¸‹ä¸€ä¸ªç‰ˆæœ¬</li>
</ul>
</li>
<li><a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">cz-cli</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>åŸºäºRedisçš„åˆ†å¸ƒå¼é”</title>
      <link>http://blog.cjhe.top/system-design/distribute-lock.html</link>
      <guid>http://blog.cjhe.top/system-design/distribute-lock.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">åŸºäºRedisçš„åˆ†å¸ƒå¼é”</source>
      <description>åˆ†å¸ƒå¼é”

åˆ†å¸ƒå¼é”å³åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä¸åŒå®ä¾‹ä¹‹é—´æŠ¢ä¸€æŠŠé”ï¼Œç›¸æ¯”è¾ƒå•ä¸€å®ä¾‹çš„é”ï¼Œåˆ†å¸ƒå¼ç¯å¢ƒä¸‹å¸¦æ¥çš„é—®é¢˜æ›´å¤šï¼Œä¾‹å¦‚ç½‘ç»œé—®é¢˜ã€‚
åˆ†å¸ƒå¼é”å¯ä»¥é€šè¿‡å¤šç§é€”å¾„å®ç°ï¼Œä¾‹å¦‚:Zookeeperç­‰ã€‚ç”±äºRedisæ˜¯ç»å¸¸ä½¿ç”¨çš„ä¸­é—´ä»¶ï¼Œæœ¬ç¯‡å†…å®¹åŸºäºRediså®ç°åˆ†å¸ƒå¼é”ã€‚

ç‰¹æ€§ï¼š

äº’æ–¥æ€§ï¼šä»»æ„æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½æŒæœ‰é”ï¼›
é”è¶…æ—¶é‡Šæ”¾ï¼šæŒæœ‰é”è¶…æ—¶ï¼Œå¯ä»¥é‡Šæ”¾ï¼Œé˜²æ­¢ä¸å¿…è¦çš„...</description>
      <category>ç³»ç»Ÿè®¾è®¡</category>
      <pubDate>Sat, 12 Nov 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<!-- more -->
<h2>åˆ†å¸ƒå¼é”</h2>
<blockquote>
<p>åˆ†å¸ƒå¼é”å³åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä¸åŒå®ä¾‹ä¹‹é—´æŠ¢ä¸€æŠŠé”ï¼Œç›¸æ¯”è¾ƒå•ä¸€å®ä¾‹çš„é”ï¼Œåˆ†å¸ƒå¼ç¯å¢ƒä¸‹å¸¦æ¥çš„é—®é¢˜æ›´å¤šï¼Œä¾‹å¦‚ç½‘ç»œé—®é¢˜ã€‚
åˆ†å¸ƒå¼é”å¯ä»¥é€šè¿‡å¤šç§é€”å¾„å®ç°ï¼Œä¾‹å¦‚:Zookeeperç­‰ã€‚ç”±äºRedisæ˜¯ç»å¸¸ä½¿ç”¨çš„ä¸­é—´ä»¶ï¼Œæœ¬ç¯‡å†…å®¹åŸºäºRediså®ç°åˆ†å¸ƒå¼é”ã€‚</p>
</blockquote>
<p>ç‰¹æ€§ï¼š</p>
<ul>
<li>äº’æ–¥æ€§ï¼šä»»æ„æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½æŒæœ‰é”ï¼›</li>
<li>é”è¶…æ—¶é‡Šæ”¾ï¼šæŒæœ‰é”è¶…æ—¶ï¼Œå¯ä»¥é‡Šæ”¾ï¼Œé˜²æ­¢ä¸å¿…è¦çš„èµ„æºæµªè´¹ï¼Œä¹Ÿå¯ä»¥é˜²æ­¢æ­»é”ï¼›</li>
<li>å¯é‡å…¥æ€§ï¼šä¸€ä¸ªçº¿ç¨‹å¦‚æœè·å–äº†é”ä¹‹åï¼Œå¯ä»¥å†æ¬¡å¯¹å…¶è¯·æ±‚åŠ é”ï¼›</li>
<li>é«˜æ€§èƒ½å’Œé«˜å¯ç”¨ï¼šåŠ é”å’Œè§£é”éœ€è¦å¼€é”€å°½å¯èƒ½ä½ï¼ŒåŒæ—¶ä¹Ÿè¦ä¿è¯é«˜å¯ç”¨ï¼Œé¿å…åˆ†å¸ƒå¼é”å¤±æ•ˆï¼›</li>
<li>å®‰å…¨æ€§ï¼šé”åªèƒ½è¢«æŒæœ‰çš„å®¢æˆ·ç«¯é‡Šæ”¾ï¼Œä¸èƒ½è¢«å…¶ä»–å®¢æˆ·ç«¯é‡Šæ”¾</li>
</ul>
<h3>ç®€å•ç‰ˆæœ¬</h3>
<blockquote>
<p>é”çš„ç‰¹æ€§å°±æ˜¯æ’ä»–æ€§ï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡Redisçš„å‘½ä»¤ï¼š<code>SETNX</code>ï¼Œè¯¥å‘½ä»¤ï¼š</p>
<ul>
<li>åªåœ¨é”®keyä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå°†é”®çš„å€¼è®¾ç½®ä¸ºvalueï¼Œè¿”å›1ï¼›</li>
<li>è‹¥é”®keyå·²å­˜åœ¨ï¼Œåˆ™SETNXå‘½ä»¤ä¸åšä»»ä½•æ“ä½œï¼Œè¿”å›0ï¼›</li>
</ul>
</blockquote>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> redislock

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"context"</span>
	<span class="token string">"errors"</span>
	<span class="token string">"time"</span>

	<span class="token string">"github.com/go-redis/redis/v9"</span>
	<span class="token string">"github.com/google/uuid"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	ErrObtainLockFail  <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"fail to obtain lock"</span><span class="token punctuation">)</span>
	ErrReleaseLockFail <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"fail to release lock"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Client <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	client redis<span class="token punctuation">.</span>Cmdable
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewClient</span><span class="token punctuation">(</span>client redis<span class="token punctuation">.</span>Cmdable<span class="token punctuation">)</span> <span class="token operator">*</span>Client <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Client<span class="token punctuation">{</span>
		client<span class="token punctuation">:</span> client<span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Lock <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	client redis<span class="token punctuation">.</span>Cmdable
	key    <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Client<span class="token punctuation">)</span> <span class="token function">ObtainLock</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> key <span class="token builtin">string</span><span class="token punctuation">,</span> expiration time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Lock<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	value <span class="token operator">:=</span> uuid<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	res<span class="token punctuation">,</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">SetNX</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> expiration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token operator">!</span>res <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> ErrObtainLockFail
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">newLock</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>client<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">newLock</span><span class="token punctuation">(</span>client redis<span class="token punctuation">.</span>Cmdable<span class="token punctuation">,</span> key <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Lock <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Lock<span class="token punctuation">{</span>
		client<span class="token punctuation">:</span> client<span class="token punctuation">,</span>
		key<span class="token punctuation">:</span>    key<span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Lock<span class="token punctuation">)</span> <span class="token function">Release</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	res<span class="token punctuation">,</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">Del</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> c<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">1</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> ErrReleaseLockFail
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½†æ˜¯è¿™é‡Œçš„é‡Šæ”¾å…¶å®æ˜¯å­˜åœ¨é—®é¢˜çš„ï¼š</p>
<ul>
<li>å½“rediså­˜å‚¨çš„æ˜¯åˆ«äººçš„é”ï¼Œç›´æ¥åˆ é™¤keyè¿™å°±ä¼šå¯¼è‡´åˆ é™¤åˆ«äººçš„é”é—®é¢˜</li>
</ul>
<h3>è§£å†³é”é‡Šæ”¾é—®é¢˜</h3>
<blockquote>
<p>æ–¹æ³•å°±æ˜¯ç”Ÿäº§å”¯ä¸€çš„valueï¼Œåªæœ‰å½“å‰rediså­˜å‚¨çš„valueæ˜¯è‡ªå·±çš„æ‰å¯ä»¥åˆ é™¤</p>
<p>ä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œå³æŸ¥è¯¢redisçš„valueå’Œåˆ é™¤åŠ¨ä½œæ˜¯ä¸€èµ·è¿›è¡Œæ“ä½œï¼Œè¿™é‡Œé‡‡ç”¨luaè„šæœ¬å»ä¿è¯</p>
</blockquote>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> redislock

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"context"</span>
	<span class="token boolean">_</span> <span class="token string">"embed"</span>
	<span class="token string">"errors"</span>
	<span class="token string">"time"</span>

	<span class="token string">"github.com/go-redis/redis/v9"</span>
	<span class="token string">"github.com/google/uuid"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	ErrObtainLockFail  <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"fail to obtain lock"</span><span class="token punctuation">)</span>
	ErrReleaseLockFail <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"fail to release lock"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	<span class="token comment">//go:embed release.lua</span>
	releaseLua <span class="token builtin">string</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Client <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	client redis<span class="token punctuation">.</span>Cmdable
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewClient</span><span class="token punctuation">(</span>client redis<span class="token punctuation">.</span>Cmdable<span class="token punctuation">)</span> <span class="token operator">*</span>Client <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Client<span class="token punctuation">{</span>
		client<span class="token punctuation">:</span> client<span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> lock <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	client redis<span class="token punctuation">.</span>Cmdable
	key    <span class="token builtin">string</span>
	value  <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Client<span class="token punctuation">)</span> <span class="token function">ObtainLock</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> key <span class="token builtin">string</span><span class="token punctuation">,</span> expiration time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>lock<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	value <span class="token operator">:=</span> uuid<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	res<span class="token punctuation">,</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">SetNX</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> expiration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token operator">!</span>res <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> ErrObtainLockFail
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">newLock</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>client<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">newLock</span><span class="token punctuation">(</span>client redis<span class="token punctuation">.</span>Cmdable<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>lock <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>lock<span class="token punctuation">{</span>
		client<span class="token punctuation">:</span> client<span class="token punctuation">,</span>
		key<span class="token punctuation">:</span>    key<span class="token punctuation">,</span>
		value<span class="token punctuation">:</span>  value<span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>lock<span class="token punctuation">)</span> <span class="token function">Release</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	res<span class="token punctuation">,</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">Eval</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> releaseLua<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>c<span class="token punctuation">.</span>key<span class="token punctuation">}</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Int64</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">==</span> redis<span class="token punctuation">.</span>Nil <span class="token punctuation">{</span>
		<span class="token keyword">return</span> ErrReleaseLockFail
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> res <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> ErrReleaseLockFail
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>release.luaè„šæœ¬</p>
<div class="language-lua" data-ext="lua" data-title="lua"><pre class="language-lua"><code><span class="token comment">-- è·å¾—çš„valueå’ŒæœŸæœ›çš„valueæ˜¯ä¸€è‡´çš„è¯´æ˜æ˜¯è‡ªå·±çš„é”</span>
<span class="token keyword">if</span> redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">"get"</span><span class="token punctuation">,</span> KEYS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> ARGV<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">then</span>
  <span class="token keyword">return</span> redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">"del"</span><span class="token punctuation">,</span> KEYS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">else</span>
  <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token keyword">end</span>
</code></pre></div><h3>è§£å†³è¶…æ—¶é—®é¢˜</h3>
<blockquote>
<p>æç«¯åœºæ™¯ä¸‹ä¸šåŠ¡å¾ˆå¯èƒ½æ‰§è¡Œè¶…æ—¶ï¼Œä¾‹å¦‚ï¼šåˆ†å¸ƒå¼é”ä¸€åˆ†é’Ÿï¼Œä½†ä¸šåŠ¡æ‰§è¡Œä¸€å°æ—¶ï¼Œå¯¼è‡´è¿™ä¸€ä¸ªå°æ—¶ä¹‹å†…ï¼Œæœ‰60ä¸ªä¸šåŠ¡æ‹¿åˆ°åˆ†å¸ƒå¼é”ï¼Œå’Œæˆ‘ä»¬æœŸæœ›1ä¸ªä¸šåŠ¡æ‰§è¡Œä¸ä¸€è‡´ã€‚</p>
<p>è§£å†³è¶…æ—¶é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»­çº¦çš„æ–¹å¼ï¼Œä¸æ–­å»¶é•¿åˆ†å¸ƒå¼é”çš„æœ‰æ•ˆæœŸæ¥è§£å†³ä¸šåŠ¡è¶…æ—¶é—®é¢˜ï¼Œä¿è¯ä¸šåŠ¡æ‰§è¡Œè¿‡ç¨‹é”ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚</p>
</blockquote>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>lock<span class="token punctuation">)</span> <span class="token function">AutoRefresh</span><span class="token punctuation">(</span>interval<span class="token punctuation">,</span> timeout time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> interval <span class="token operator">&gt;=</span> c<span class="token punctuation">.</span>expiration <span class="token punctuation">{</span>
		<span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"interval should be less than expiration"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	ticker <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">NewTicker</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		ticker<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token keyword">select</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ticker<span class="token punctuation">.</span>C<span class="token punctuation">:</span>
			ctx<span class="token punctuation">,</span> cancel <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>
			err <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Refresh</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
			<span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> context<span class="token punctuation">.</span>DeadlineExceeded <span class="token punctuation">{</span>
				<span class="token keyword">select</span> <span class="token punctuation">{</span>
				<span class="token keyword">case</span> ch <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">:</span>
				<span class="token keyword">default</span><span class="token punctuation">:</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> err
			<span class="token punctuation">}</span>
		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span>
			ctx<span class="token punctuation">,</span> cancel <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>
			err <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Refresh</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
			<span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> context<span class="token punctuation">.</span>DeadlineExceeded <span class="token punctuation">{</span>
				<span class="token keyword">select</span> <span class="token punctuation">{</span>
				<span class="token keyword">case</span> ch <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">:</span>
				<span class="token keyword">default</span><span class="token punctuation">:</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> err
			<span class="token punctuation">}</span>
		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>c<span class="token punctuation">.</span>release<span class="token punctuation">:</span> <span class="token comment">//ä¸»åŠ¨é‡Šæ”¾é”åœºæ™¯</span>
			<span class="token keyword">return</span> <span class="token boolean">nil</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>lock<span class="token punctuation">)</span> <span class="token function">Refresh</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	res<span class="token punctuation">,</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">Eval</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> refreshLua<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>c<span class="token punctuation">.</span>key<span class="token punctuation">}</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>value<span class="token punctuation">,</span> c<span class="token punctuation">.</span>expiration<span class="token punctuation">.</span><span class="token function">Milliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Int64</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">==</span> redis<span class="token punctuation">.</span>Nil <span class="token punctuation">{</span>
		<span class="token keyword">return</span> ErrRefreshLockFail
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> res <span class="token operator">!=</span> <span class="token number">1</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> ErrRefreshLockFail
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>refresh.luaè„šæœ¬</p>
<div class="language-lua" data-ext="lua" data-title="lua"><pre class="language-lua"><code><span class="token comment">--ç»­çº¦åˆ†å¸ƒå¼é”</span>
<span class="token keyword">if</span> redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">"get"</span><span class="token punctuation">,</span> KEYS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> ARGV<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">then</span>
  <span class="token keyword">return</span> redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">"pexpire"</span><span class="token punctuation">,</span> KEYS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ARGV<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">--è¿”å›1æˆåŠŸï¼Œè¿”å›0å¤±è´¥</span>
<span class="token keyword">else</span>
  <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token keyword">end</span>
</code></pre></div><h3>è§£å†³æ— é™ç»­çº¦é—®é¢˜</h3>
<blockquote>
<p>å½“ç»­çº¦é‡è§ç½‘ç»œè¶…æ—¶é—®é¢˜ï¼Œæ€»ä¸èƒ½ä¸€ç›´ç»­çº¦ï¼Œé¡»æœ‰åˆç†çš„æ–¹å¼å‘ŠçŸ¥ä¸šåŠ¡æ–¹é”™è¯¯</p>
<p>å› æ­¤éœ€å¢åŠ ç­–ç•¥å»é‡è¯•ç»­çº¦</p>
</blockquote>
<p>æˆ‘ä»¬å®šä¹‰ç­–ç•¥</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> redislock

<span class="token keyword">import</span> <span class="token string">"time"</span>

<span class="token keyword">type</span> RetryStrategy <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token comment">//è¿”å›ä¸‹ä¸€æ¬¡æ˜¯å¦éœ€è¦é‡è¯•ä»¥åŠé‡è¯•é—´éš”</span>
	<span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> limitedRetry <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	interval time<span class="token punctuation">.</span>Duration
	max      <span class="token builtin">int64</span>
	cnt      <span class="token builtin">int64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>retry <span class="token operator">*</span>limitedRetry<span class="token punctuation">)</span> <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	retry<span class="token punctuation">.</span>cnt<span class="token operator">++</span>
	<span class="token keyword">return</span> retry<span class="token punctuation">.</span>cnt <span class="token operator">&lt;</span> retry<span class="token punctuation">.</span>max<span class="token punctuation">,</span> retry<span class="token punctuation">.</span>interval
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">LimitedRetry</span><span class="token punctuation">(</span>interval time<span class="token punctuation">.</span>Duration<span class="token punctuation">,</span> max <span class="token builtin">int64</span><span class="token punctuation">)</span> RetryStrategy <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>limitedRetry<span class="token punctuation">{</span>interval<span class="token punctuation">:</span> interval<span class="token punctuation">,</span> max<span class="token punctuation">:</span> max<span class="token punctuation">,</span> cnt<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> noRetry <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>retry <span class="token operator">*</span>noRetry<span class="token punctuation">)</span> <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NoRetry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> RetryStrategy <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>noRetry<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨å¸¦ç­–ç•¥çš„ç»­çº¦æ–¹å¼</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Client<span class="token punctuation">)</span> <span class="token function">TryLock</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> key <span class="token builtin">string</span><span class="token punctuation">,</span> expiration time<span class="token punctuation">.</span>Duration<span class="token punctuation">,</span> try RetryStrategy<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>lock<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	value <span class="token operator">:=</span> uuid<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> ticker <span class="token operator">*</span>time<span class="token punctuation">.</span>Ticker
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> ticker <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			ticker<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		res<span class="token punctuation">,</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">Eval</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> lockLua<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> expiration<span class="token punctuation">.</span><span class="token function">Milliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>errors<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> context<span class="token punctuation">.</span>DeadlineExceeded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> res <span class="token operator">==</span> <span class="token string">"OK"</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">newLock</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>client<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> expiration<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
		<span class="token punctuation">}</span>
		retry<span class="token punctuation">,</span> interval <span class="token operator">:=</span> try<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> <span class="token operator">!</span>retry <span class="token punctuation">{</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> ErrObtainLockFail
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> ticker <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			ticker <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">NewTicker</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">select</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ctx<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span><span class="token function">Err</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ticker<span class="token punctuation">.</span>C<span class="token punctuation">:</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>lock.luaè„šæœ¬</p>
<div class="language-lua" data-ext="lua" data-title="lua"><pre class="language-lua"><code><span class="token keyword">local</span> val <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span> KEYS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">-- åœ¨åŠ é”çš„é‡è¯•çš„æ—¶å€™ï¼Œè¦åˆ¤æ–­è‡ªå·±ä¸Šä¸€æ¬¡æ˜¯ä¸æ˜¯åŠ é”æˆåŠŸäº†</span>
<span class="token keyword">if</span> val <span class="token operator">==</span> <span class="token keyword">false</span> <span class="token keyword">then</span> <span class="token comment">-- key ä¸å­˜åœ¨</span>
    <span class="token keyword">return</span> redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'set'</span><span class="token punctuation">,</span> KEYS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ARGV<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'PX'</span><span class="token punctuation">,</span> ARGV<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">-- px æ¯«ç§’</span>
<span class="token keyword">elseif</span> val <span class="token operator">==</span> ARGV<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">then</span>  <span class="token comment">-- å­˜åœ¨ï¼Œåˆ·æ–°è¿‡æœŸæ—¶é—´</span>
    redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'expire'</span><span class="token punctuation">,</span> KEYS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ARGV<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">"OK"</span>
<span class="token keyword">else</span> <span class="token comment">-- æ­¤æ—¶åˆ«äººæŒæœ‰é”</span>
    <span class="token keyword">return</span> <span class="token string">""</span>
<span class="token keyword">end</span>
</code></pre></div><h3>è¿›ä¸€æ­¥ä¼˜åŒ–è·å–é”</h3>
<blockquote>
<p>å½“å¹¶å‘é‡å¾ˆå¤§åœºæ™¯æ—¶ï¼Œä¸ºäº†å‡ç¼“DBçš„å‹åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å•ä¸ªå®ä¾‹ä¸Šé¢ï¼Œåªå…è®¸ä¸€ä¸ªåç¨‹è·å–åˆ†å¸ƒå¼é”ï¼Œå³ï¼šå•ä¸€å®ä¾‹å…ˆç­›é€‰ä¸€ä¸ªåç¨‹ï¼Œä¸åŒçš„å®ä¾‹å†å»ç«äº‰åˆ†å¸ƒå¼é”</p>
</blockquote>
<div class="language-go" data-ext="go" data-title="go"><pre go="" class="language-go"><code><span class="token keyword">type</span> Client <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	client redis<span class="token punctuation">.</span>Cmdable
	s      singleflight<span class="token punctuation">.</span>Group
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Client<span class="token punctuation">)</span> <span class="token function">SingleFlightLock</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> key <span class="token builtin">string</span><span class="token punctuation">,</span> expiration time<span class="token punctuation">.</span>Duration<span class="token punctuation">,</span> try RetryStrategy<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>lock<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		flag <span class="token operator">:=</span> <span class="token boolean">false</span>
		result <span class="token operator">:=</span> c<span class="token punctuation">.</span>s<span class="token punctuation">.</span><span class="token function">DoChan</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			flag <span class="token operator">=</span> <span class="token boolean">true</span>
			<span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">TryLock</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> key<span class="token punctuation">,</span> expiration<span class="token punctuation">,</span> try<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token keyword">select</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> res <span class="token operator">:=</span> <span class="token operator">&lt;-</span>result<span class="token punctuation">:</span>
			<span class="token keyword">if</span> flag <span class="token punctuation">{</span>
				c<span class="token punctuation">.</span>s<span class="token punctuation">.</span><span class="token function">Forget</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
				<span class="token keyword">if</span> res<span class="token punctuation">.</span>Err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>Err
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> res<span class="token punctuation">.</span>Val<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>lock<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
			<span class="token punctuation">}</span>
		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ctx<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
			<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span><span class="token function">Err</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>vscode leetcodeæ’ä»¶</title>
      <link>http://blog.cjhe.top/tools/vscode-leetcode.html</link>
      <guid>http://blog.cjhe.top/tools/vscode-leetcode.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">vscode leetcodeæ’ä»¶</source>
      <description>æç¤º vscodeè¿™æ¬¾æ’ä»¶å¤ªé¦™äº†ï¼Œç»ˆäºå¯ä»¥æ²‰æµ¸å¼åˆ·leetcodeğŸ˜„</description>
      <category>å·¥å…·</category>
      <pubDate>Wed, 10 Aug 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>vscodeè¿™æ¬¾æ’ä»¶å¤ªé¦™äº†ï¼Œç»ˆäºå¯ä»¥æ²‰æµ¸å¼åˆ·leetcodeğŸ˜„</p>
</div>
<!-- more -->
<h2>ç¯å¢ƒæ­å»º</h2>
<h3>å®‰è£…</h3>
<p>åœ¨vscodeæ‰©å±•å•†åº—æœç´¢<code>LeetCode</code>,ä¸€èˆ¬æ˜¯ä¸‹è½½é‡æœ€é«˜çš„é‚£ä¸ªå°±å®Œäº‹äº†
</p>
<h3>ç™»é™†</h3>
<p>åœ¨ç™»é™†ä¹‹å‰ï¼Œè®°å¾—è¦é€‰æ‹©ä¸­å›½ç‰ˆï¼Œå¦åˆ™ä¼šé‡è§ç™»é™†ä¸ä¸Šé—®é¢˜

æ¥ä¸‹æ¥é€‰æ‹©è´¦å·ç™»å½•ï¼Œéœ€è¦æå‰åœ¨LeetCodeå®˜ç½‘æ³¨å†Œè´¦å·

è¿™é‡Œæˆ‘é€‰æ‹©è´¦æˆ·æ–¹å¼ï¼ŒæŒ‰ç…§æç¤ºå¡«å†™é‚®ç®±ã€å¯†ç å³å¯ç™»å½•</p>
<h3>é¢„è§ˆ</h3>
<figure><figcaption>leetcode-preview</figcaption></figure>
<blockquote>
<p>åœ¨å·¦ä¾§ï¼Œè¯¥æ’ä»¶æŒ‰ç…§äº”ä¸ªåˆ†ç±»å°†é¢˜ç›®è¿›è¡Œäº†åˆ†ç±»ï¼Œæ¯”å¦‚ï¼šæŒ‰ç…§éš¾æ˜“ç¨‹åº¦(ç®€å•ã€ä¸­ç­‰ã€éš¾)ã€æŒ‰ç…§æ ‡ç­¾(æ•°æ®ã€äºŒå‰æœç´¢ç­‰)ã€æŒ‰ç…§å…¬å¸(Googleã€Facebookç­‰)</p>
<p>ä¸”é¢˜ç›®æ ¹æ®éš¾æ˜“ç¨‹åº¦æœ‰ä¸åŒçš„é¢œè‰²è¿›è¡ŒåŒºåˆ†ï¼Œå¦‚æœå·²ç»å®Œæˆç›¸å…³çš„ç»ƒä¹ ï¼Œè¿˜ä¼šç”¨âœ”ï¸æç¤º</p>
</blockquote>
<h3>ä¸ªæ€§åŒ–é…ç½®</h3>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"leetcode.endpoint"</span><span class="token operator">:</span> <span class="token string">"leetcode-cn"</span><span class="token punctuation">,</span>
  <span class="token property">"leetcode.workspaceFolder"</span><span class="token operator">:</span> <span class="token string">"/Users/hechangjie/code/hexiaopi/leetcode-go"</span><span class="token punctuation">,</span>
  <span class="token property">"leetcode.defaultLanguage"</span><span class="token operator">:</span> <span class="token string">"golang"</span><span class="token punctuation">,</span>
  <span class="token property">"leetcode.hint.configWebviewMarkdown"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">"leetcode.hint.commentDescription"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">"leetcode.hint.commandShortcut"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ²‰æµ¸å¼åˆ·é¢˜</h2>
<h3>é¢„è§ˆé¢˜ç›®å†…å®¹</h3>
<p>
ç‚¹å‡»Code Nowï¼Œé€‰æ‹©ä¸€ç§ç¼–ç¨‹è¯­è¨€å°±å¯ä»¥å¼€å§‹äº†</p>
<h3>ç¼–å†™ä»£ç </h3>
<figure><figcaption>leetcode-code</figcaption></figure>
<h3>æµ‹è¯•ä»£ç </h3>
<p>ç‚¹å‡»ä»£ç ä¸‹æ–¹çš„<code>Test</code>æ ‡ç­¾å³å¯è¿›è¡Œæµ‹è¯•ä»£ç ï¼ˆå†ä¹Ÿä¸ç”¨ç¼–å†™å¤§é‡çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹äº†ï¼‰
</p>
<h3>æäº¤ä»£ç </h3>
<p>ç‚¹å‡»ä»£ç ä¸‹æ–¹çš„<code>Submit</code>æ ‡ç­¾å³å¯æäº¤ä»£ç ï¼Œå®Œæˆä¹‹åå°±ä¼šçœ‹åˆ°æäº¤åçš„ä»£ç æ€§èƒ½ç­‰ä¿¡æ¯äº†
</p>
]]></content:encoded>
    </item>
    <item>
      <title>å­˜å‚¨å¼•æ“</title>
      <link>http://blog.cjhe.top/database/mysql/engine.html</link>
      <guid>http://blog.cjhe.top/database/mysql/engine.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å­˜å‚¨å¼•æ“</source>
      <description>MySQLæ˜¯å¸¸ç”¨çš„å…³ç³»å‹æ•°æ®åº“

MySQLæ¶æ„
MySQLæ¶æ„MySQLæ¶æ„
å­˜å‚¨å¼•æ“

å­˜å‚¨å¼•æ“æ˜¯MySQLåŒºåˆ«äºå…¶ä»–æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼ŒMySQLæœ‰è¯¸å¤šå­˜å‚¨å¼•æ“ï¼Œä¸”å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨çš„ï¼Œè€Œä¸æ˜¯æ•°æ®(åŒä¸€ä¸ªæ•°æ®åº“ä¸‹é¢çš„å„ä¸ªè¡¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¼•æ“)
å­˜å‚¨å¼•æ“æ˜¯åº•å±‚ç‰©ç†ç»“æ„çš„å®ç°ï¼Œæ¯ä¸ªå­˜å‚¨å¼•æ“å¼€å‘è€…å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ„æ„¿å¼€å‘ï¼Œå…·æœ‰å„è‡ªçš„ç‰¹ç‚¹
å¯¹äºMySQLä½¿...</description>
      <category>æ•°æ®åº“</category>
      <pubDate>Sat, 22 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<!-- more -->
<blockquote>
<p>MySQLæ˜¯å¸¸ç”¨çš„å…³ç³»å‹æ•°æ®åº“</p>
</blockquote>
<h2>MySQLæ¶æ„</h2>
<figure><figcaption>MySQLæ¶æ„</figcaption></figure>
<h2>å­˜å‚¨å¼•æ“</h2>
<ul>
<li>å­˜å‚¨å¼•æ“æ˜¯MySQLåŒºåˆ«äºå…¶ä»–æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼ŒMySQLæœ‰è¯¸å¤šå­˜å‚¨å¼•æ“ï¼Œä¸”<strong>å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨çš„ï¼Œè€Œä¸æ˜¯æ•°æ®</strong>(åŒä¸€ä¸ªæ•°æ®åº“ä¸‹é¢çš„å„ä¸ªè¡¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¼•æ“)</li>
<li>å­˜å‚¨å¼•æ“æ˜¯åº•å±‚ç‰©ç†ç»“æ„çš„å®ç°ï¼Œæ¯ä¸ªå­˜å‚¨å¼•æ“å¼€å‘è€…å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ„æ„¿å¼€å‘ï¼Œå…·æœ‰å„è‡ªçš„ç‰¹ç‚¹</li>
<li>å¯¹äºMySQLä½¿ç”¨è€…æ¥è¯´ï¼Œå­˜å‚¨å¼•æ“å¯¹å…¶å®é€æ˜çš„</li>
</ul>
<h3>Innodbå¼•æ“</h3>
<blockquote>
<p>æ˜¯ä¸€ä¸ªæ”¯æŒACIDäº‹åŠ¡ï¼Œè¡Œé”è®¾è®¡ï¼Œæ”¯æŒMVCCåŠŸèƒ½ï¼Œå®ç°äº†SQLæ ‡å‡†çš„4ç§éš”ç¦»çº§åˆ«</p>
</blockquote>
<h4>ç‰¹ç‚¹</h4>
<ul>
<li>ä½¿ç”¨Table Spaceçš„æ–¹å¼ä»…é™æ•°æ®å­˜å‚¨</li>
<li>æ”¯æŒäº‹åŠ¡ã€å¤–é”®çº¦æŸç­‰æ•°æ®åº“ç‰¹æ€§</li>
<li>Rows Level Lockï¼Œè¯»å†™æ€§èƒ½éƒ½éå¸¸ä¼˜ç§€</li>
<li>æ‹¥æœ‰ç‹¬ç«‹çš„ç¼“å†²æ± ï¼Œèƒ½å¤Ÿç¼“å­˜æ•°æ®å’Œç´¢å¼•</li>
<li>é€šè¿‡å¤šç‰ˆæœ¬æ§åˆ¶ï¼Œæ”¯æŒé«˜å¹¶å‘ä¸šåŠ¡</li>
</ul>
<h4>æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>ä¸»é”®å°½å¯èƒ½å°ï¼Œå¦åˆ™äºŒçº§ç´¢å¼•ä¼šè†¨èƒ€</li>
<li>é¿å…å…¨è¡¨æ‰«æï¼Œå¯¼è‡´é”å‡çº§</li>
<li>å°½å¯èƒ½ç¼“å­˜æ‰€æœ‰çš„ç´¢å¼•å’Œæ•°æ®ï¼Œå‡å°‘IOæ“ä½œ</li>
<li>é¿å…ä¸»é”®æ›´æ–°ï¼Œé€ æˆå¤§é‡çš„æ•°æ®ç§»åŠ¨</li>
</ul>
<h3>MyISAMå­˜å‚¨å¼•æ“</h3>
<blockquote>
<p>MySQL 5.5ä¹‹å‰é»˜è®¤æ˜¯MyISAMå­˜å‚¨å¼•æ“ï¼Œä¹‹åé»˜è®¤éƒ½æ”¹ä¸ºInnoDB</p>
</blockquote>
<h4>ç‰¹ç‚¹</h4>
<ul>
<li>æ•°æ®å­˜å‚¨æ–¹å¼ç®€å•ï¼Œä½¿ç”¨B-Treeè¿›è¡Œç´¢å¼•ï¼Œ<strong>ç´¢å¼•å¶å­èŠ‚ç‚¹å­˜æ”¾æ•°æ®çš„æŒ‡é’ˆ</strong></li>
<li><strong>ä¸æ”¯æŒä¸€äº›æ•°æ®åº“ç‰¹æ€§ï¼Œæ¯”å¦‚äº‹åŠ¡ã€å¤–é”®çº¦æŸç­‰</strong></li>
<li><strong>Table Level Lock(è¡¨çº§åˆ«é”)</strong>ï¼Œæ€§èƒ½ç¨å·®ï¼Œæ›´é€‚åˆè¯»å¤šçš„æ“ä½œ</li>
<li>ä½¿ç”¨ä¸‰ä¸ªæ–‡ä»¶å®šä¹‰ä¸€ä¸ªè¡¨ï¼š
<ul>
<li><code>.MYi</code>ï¼šå­˜å‚¨ç´¢å¼•</li>
<li><code>.MYD</code>ï¼šå­˜å‚¨æ•°æ®</li>
<li><code>.frm</code>ï¼šå­˜å‚¨è¡¨å®šä¹‰</li>
</ul>
</li>
<li>å°‘ç¢ç‰‡ã€æ”¯æŒå¤§æ–‡ä»¶ã€èƒ½å¤Ÿè¿›è¡Œç´¢å¼•å‹ç¼©</li>
<li>äºŒè¿›åˆ¶å±‚æ¬¡çš„æ–‡ä»¶å¯ä»¥ç§»æ¤ï¼ˆLinux-&gt;Windowsï¼‰</li>
<li>è®¿é—®é€Ÿåº¦å¿«ï¼Œé€‚åˆåªè¯»æŸ¥è¯¢åœºæ™¯</li>
</ul>
<h4>æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>è®¾ç½®åˆé€‚ç´¢å¼•</li>
<li>å¯ç”¨å»¶è¿Ÿå†™å…¥ï¼Œå°½é‡ä¸€æ¬¡å¤§æ‰¹é‡å†™å…¥ï¼Œè€Œéé¢‘ç¹å†™å…¥</li>
<li>é™ä½å¹¶å‘æ•°ï¼Œé«˜å¹¶å‘ä½¿ç”¨æ’é˜Ÿæœºåˆ¶</li>
<li>ç”±äºå­˜å‚¨äº†Countå­—æ®µï¼Œå› æ­¤Countæ“ä½œæ¯”è¾ƒé«˜æ•ˆï¼Œä½†ä»…é™ä¸å¸¦æ¡ä»¶</li>
</ul>
<h2>å¼•æ“å¯¹æ¯”</h2>
<p>| å­˜å‚¨å¼•æ“  |                             ç‰¹ç‚¹                              |       åº”ç”¨åœºæ™¯       |
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>ç´¢å¼•</title>
      <link>http://blog.cjhe.top/database/mysql/idx.html</link>
      <guid>http://blog.cjhe.top/database/mysql/idx.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç´¢å¼•</source>
      <description>ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¸®åŠ©SQLé«˜æ•ˆè·å–æ•°æ®çš„ã€‚ç±»ä¼¼ä¸€æœ¬ä¹¦çš„ç›®å½•ï¼Œå¯ä»¥å¿«é€Ÿå¯¹ç‰¹å®šå€¼è¿›è¡Œå®šä½å’ŒæŸ¥æ‰¾ï¼Œä»è€Œå¤§å¤§åŠ å¿«æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ã€‚</description>
      <category>æ•°æ®åº“</category>
      <pubDate>Wed, 15 Mar 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¸®åŠ©SQLé«˜æ•ˆè·å–æ•°æ®çš„ã€‚ç±»ä¼¼ä¸€æœ¬ä¹¦çš„ç›®å½•ï¼Œå¯ä»¥å¿«é€Ÿå¯¹ç‰¹å®šå€¼è¿›è¡Œå®šä½å’ŒæŸ¥æ‰¾ï¼Œä»è€Œå¤§å¤§åŠ å¿«æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ã€‚</p>
<!-- more -->
<h2>ç´¢å¼•ä¼˜ç¼ºç‚¹</h2>
<h3>ç´¢å¼•ä¼˜ç‚¹</h3>
<ul>
<li>ç´¢å¼•å¯ä»¥å¤§å¤§å‡å°‘éœ€è¦æ‰«æçš„æ•°æ®é‡</li>
<li>ç´¢å¼•å¯ä»¥é¿å…æ’åºå’Œä¸´æ—¶è¡¨ï¼Œç´¢å¼•å·²ç»æœ‰åº</li>
<li>ç´¢å¼•å¯ä»¥å°½é‡å°†éšæœºIOå˜æˆé¡ºåºIOï¼Œä¾‹å¦‚ï¼šèšç°‡ç´¢å¼•åŒ…å«æ•°æ®ï¼Œä¸”ç´¢å¼•æ˜¯æœ‰åºçš„ï¼Œå°±å¯ä»¥å¿«é€Ÿè·å¾—æ‰¹é‡æ•°æ®ï¼Œä½†å¦‚æœå›è¡¨ï¼Œé€šè¿‡ä¸»é”®æŸ¥è¯¢æ•°æ®ï¼Œåˆ™åˆå˜æˆéšæœºIO</li>
<li>ç´¢å¼•å¯¹äºInnoDBï¼ˆæ”¯æŒè¡Œçº§é”ï¼‰éå¸¸é‡è¦ï¼ŒInnoDBå¯¹éœ€è¦è®¿é—®çš„å…ƒç»„åŠ é”ï¼Œè€Œç´¢å¼•èƒ½å¤Ÿå‡å°‘InnoDBè®¿é—®çš„å…ƒç»„æ•°ï¼Œå¦‚æœæŸ¥è¯¢ä¸èƒ½ä½¿ç”¨ç´¢å¼•ï¼ŒMySQLä¼šè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¯¼è‡´é”ä½å…¨è¡¨ã€‚</li>
</ul>
<h3>ç´¢å¼•ç¼ºç‚¹</h3>
<ul>
<li>é™ä½äº†æ›´æ–°è¡¨çš„æ•°æ®ï¼Œå› ä¸ºä¸ä»…è¦æ›´æ–°åŸå§‹æ•°æ®ï¼Œè¿˜è¦æ›´æ–°ç´¢å¼•</li>
<li>ç´¢å¼•å ç”¨ç£ç›˜ç©ºé—´</li>
<li>æ•°æ®åˆ—å¦‚æœåŒ…å«äº†è®¸å¤šé‡å¤çš„å†…å®¹ï¼Œä¾‹å¦‚æ€§åˆ«ä¸ºï¼šç”·ã€å¥³ï¼Œç´¢å¼•é€‰æ‹©å¯èƒ½åªç­›é€‰ä¸€åŠçš„æ•°æ®é‡ï¼Œæ•ˆæœä¸æ˜¯å¾ˆå¥½</li>
<li>å¯¹äºæ•°æ®é‡éå¸¸å°çš„è¡¨ï¼Œç´¢å¼•æ„ä¹‰ä¸å¤§ï¼Œæœ‰æ—¶å…¨è¡¨æ‰«ææ›´é«˜æ•ˆ</li>
</ul>
<p>MySQLå•å¼ è¡¨æœ€å¤šåªæ”¯æŒ16ä¸ªç´¢å¼•</p>
<h2>ç´¢å¼•ç±»å‹</h2>
<h3>æŒ‰åŠŸèƒ½é€»è¾‘åˆ’åˆ†</h3>
<h4>æ™®é€šç´¢å¼•</h4>
<p>æ™®é€šç´¢å¼•ä»…ä»…åŠ å¿«å¯¹æ•°æ®çš„è®¿é—®é€Ÿåº¦ï¼Œå¸¸ç”¨äºæŸ¥è¯¢æ¡ä»¶ï¼ˆwhere field_name=valueï¼‰æˆ–æ’åºæ¡ä»¶ï¼ˆorder by field_nameï¼‰è¿™äº›åœºæ™¯ä¸­ã€‚</p>
<h4>å”¯ä¸€ç´¢å¼•</h4>
<p>å”¯ä¸€ç´¢å¼•ç›¸æ¯”è¾ƒæ™®é€šç´¢å¼•ï¼Œè¦æ±‚ç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚</p>
<h4>ä¸»é”®ç´¢å¼•</h4>
<p>ä¸»é”®ç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç´¢å¼•ï¼Œä¸å…è®¸æœ‰ç©ºå€¼ï¼Œä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä¸€èˆ¬åœ¨å»ºè¡¨çš„æ—¶å€™é€šè¿‡primary key(field_name)æŒ‡å®š</p>
<h4>å…¨æ–‡ç´¢å¼•</h4>
<p>mysql Like '%xxx'å°±ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œä¸ºäº†æ¨¡ç³Šæœç´¢éœ€æ±‚ï¼Œä¾‹å¦‚ï¼šlike '%hello%'ï¼Œå°±éœ€è¦å…¨æ–‡ç´¢å¼•æ”¯æŒã€‚InnoDBåœ¨5.6ç‰ˆæœ¬ä¹‹åæ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚</p>
<h3>æŒ‰ç‰©ç†é€»è¾‘åˆ’åˆ†</h3>
<h4>èšç°‡ç´¢å¼•</h4>
<p>èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ç›´æ¥å­˜å‚¨æ•°æ®ï¼Œå› æ­¤æŸ¥è¯¢çš„æ—¶å€™åªéœ€è¦è¿›è¡Œä¸€æ¬¡æŸ¥è¯¢</p>
<h4>éèšç°‡ç´¢å¼•</h4>
<p>éèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨æ•°æ®çš„ä¸»é”®ï¼Œå› æ­¤æŸ¥è¯¢çš„æ—¶å€™éœ€è¦è¿›è¡Œä¸¤æ¬¡æŸ¥è¯¢ï¼šå…ˆæŸ¥è¯¢èšç°‡ç´¢å¼•è·å–åˆ°ä¸»é”®ï¼Œå†é€šè¿‡ä¸»é”®æŸ¥è¯¢æ•°æ®ã€‚</p>
<h3>æŒ‰å­—æ®µä¸ªæ•°åˆ’åˆ†</h3>
<h4>å•ä¸€ç´¢å¼•</h4>
<p>ç´¢å¼•åªä½¿ç”¨ä¸€ä¸ªå­—æ®µ</p>
<h4>è”åˆç´¢å¼•</h4>
<p>ç´¢å¼•ä½¿ç”¨å¤šä¸ªå­—æ®µ
ä¾‹å¦‚ï¼š</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="language-sql"><code>alert <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">add</span> <span class="token keyword">index</span> index_name_city_age<span class="token punctuation">(</span>name<span class="token punctuation">,</span>city<span class="token punctuation">,</span>age<span class="token punctuation">)</span>
</code></pre></div><p>MySQLè”åˆç´¢å¼•éµä»ï¼šæœ€å·¦åŒ¹é…åŸåˆ™</p>
<p>ä¸Šé¢ç´¢å¼•ç›¸å½“äºå»ºç«‹ä¸‹é¢ä¸‰ç»„ç´¢å¼•ï¼š</p>
<ul>
<li>name,city,age</li>
<li>name,city</li>
<li>name</li>
</ul>
<p>å› æ­¤ï¼š</p>
<ul>
<li>å¦‚æœæŸ¥è¯¢æ¡ä»¶æ˜¯ï¼š(city)ã€(city,age)ã€(age)éƒ½ä¸ä¼šå‘½ä¸­ç´¢å¼•</li>
<li>å¦‚æœæŸ¥è¯¢æ¡ä»¶æ˜¯ï¼š(name,age)ï¼Œåˆ™ä¼šå‘½ä¸­nameç´¢å¼•</li>
</ul>
<p>ç†è®ºä¸Šæœ€å·¦åŒ¹é…åŸåˆ™ä¸­ç´¢å¼•å¯¹ where ä¸­å­å¥çš„é¡ºåºä¹Ÿæ˜¯æ•æ„Ÿçš„ï¼Œä½†æ˜¯ç”±äºMySQLçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´ where å­å¥çš„æ¡ä»¶é¡ºåºä»¥ä½¿ç”¨é€‚åˆçš„ç´¢å¼•ï¼Œæ‰€ä»¥å®é™…ä¸Š where å­å¥é¡ºåºä¸å½±å“ç´¢å¼•çš„æ•ˆæœã€‚</p>
<p>å¦‚æœè”åˆç´¢å¼•æœ‰èŒƒå›´æŸ¥è¯¢ï¼Œå°±ä¼šåœæ­¢åŒ¹é…</p>
<p>å¦‚æœåˆ†åˆ«åœ¨ x, y, z ä¸Šå»ºç«‹å•åˆ—ç´¢å¼•ï¼Œè®©è¯¥è¡¨æœ‰3ä¸ªå•åˆ—ç´¢å¼•ï¼Œç´¢å¼•æ•ˆç‡ä¹Ÿä¼šå¤§ä¸ä¸€æ ·ï¼Œåœ¨è”åˆç´¢å¼•ç”Ÿæ•ˆçš„æƒ…å†µä¸‹ï¼Œå•ä¸ªç´¢å¼•çš„æ•ˆç‡è¿œè¿œä½äºè”åˆç´¢å¼•ã€‚è¿™æ˜¯ç”± MySQL æŸ¥è¯¢ä¼˜åŒ–å™¨çš„æ‰§è¡Œé¡ºåºå†³å®šçš„ï¼Œåœ¨æ‰§è¡Œä¸€æ¡æŸ¥è¯¢ sql æ—¶ï¼Œé’ˆå¯¹ç´¢å¼•çš„é€‰æ‹©å¤§è‡´æœ‰å¦‚ä¸‹æ­¥éª¤ï¼š</p>
<p>MySQL ä¼˜åŒ–å™¨æ ¹æ®æœç´¢æ¡ä»¶ï¼Œæ‰¾å‡ºæ‰€æœ‰å¯èƒ½ä½¿ç”¨çš„ç´¢å¼•
è®¡ç®—å…¨è¡¨æ‰«æçš„ä»£ä»·
è®¡ç®—ä½¿ç”¨ä¸åŒç´¢å¼•æ‰§è¡ŒæŸ¥è¯¢çš„ä»£ä»·
å¯¹æ¯”å„ç§æ‰§è¡Œæ–¹æ¡ˆçš„ä»£ä»·ï¼Œæ‰¾å‡ºæˆæœ¬æœ€ä½çš„é‚£ä¸€ä¸ª
å› æ­¤ï¼Œè™½ç„¶æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•ï¼Œä½† MySQL åªèƒ½ç”¨åˆ°å…¶ä¸­çš„é‚£ä¸ªç³»ç»Ÿè®¤ä¸ºä¼¼ä¹æ˜¯æœ€æœ‰æ•ˆç‡çš„ï¼Œå…¶ä»–çš„å°±ä¼šå¤±æ•ˆã€‚</p>
<h2>æ€»ç»“</h2>
<h3>ç´¢å¼•æ¨èä½¿ç”¨æƒ…å†µ</h3>
<ul>
<li>WHERE, GROUP BY, ORDER BY å­å¥ä¸­çš„å­—æ®µ</li>
<li>å¤šä¸ªå•åˆ—ç´¢å¼•åœ¨å¤šæ¡ä»¶æŸ¥è¯¢æ˜¯åªä¼šæœ‰ä¸€ä¸ªæœ€ä¼˜çš„ç´¢å¼•ç”Ÿæ•ˆï¼Œå› æ­¤å¤šæ¡ä»¶æŸ¥è¯¢ä¸­æœ€å¥½åˆ›å»ºè”åˆç´¢å¼•ã€‚</li>
<li>è”åˆç´¢å¼•çš„æ—¶å€™å¿…é¡»æ»¡è¶³æœ€å·¦åŒ¹é…åŸåˆ™ï¼Œå¹¶ä¸”æœ€å¥½è€ƒè™‘åˆ° sql è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œæ¯”å¦‚ WHERE a = 1 GROUP BY b ORDER BY c, é‚£ä¹ˆè”åˆç´¢å¼•åº”è¯¥è®¾è®¡ä¸º (a,b,c)ï¼Œå› ä¸ºmysql æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåº WHERE &gt; GROUP BY &gt; ORDER BYã€‚<a href="/database/mysql/sql-order.html" target="_blank">å‚è§</a></li>
<li>å¤šå¼ è¡¨ JOIN çš„æ—¶å€™ï¼Œå¯¹è¡¨è¿æ¥å­—æ®µåˆ›å»ºç´¢å¼•ã€‚</li>
<li>å½“ SELECT ä¸­æœ‰ä¸åœ¨ç´¢å¼•ä¸­çš„å­—æ®µæ—¶ï¼Œä¼šå…ˆé€šè¿‡ç´¢å¼•æŸ¥è¯¢å‡ºæ»¡è¶³æ¡ä»¶çš„ä¸»é”®å€¼ï¼Œç„¶åé€šè¿‡ä¸»é”®å›è¡¨æŸ¥è¯¢å‡ºæ‰€æœ‰çš„ SELECT ä¸­çš„å­—æ®µï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ã€‚å› æ­¤å¦‚æœ SELECT ä¸­çš„å†…å®¹å¾ˆå°‘ï¼Œä¸ºäº†é¿å…å›è¡¨ï¼Œå¯ä»¥æŠŠ SELECT ä¸­çš„å­—æ®µéƒ½åŠ åˆ°è”åˆç´¢å¼•ä¸­ï¼Œè¿™ä¹Ÿå°±æ˜¯å®½ç´¢å¼•çš„æ¦‚å¿µã€‚ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå¦‚æœç´¢å¼•å­—æ®µè¿‡å¤šï¼Œå­˜å‚¨å’Œç»´æŠ¤ç´¢å¼•çš„æˆæœ¬ä¹Ÿä¼šå¢åŠ ã€‚</li>
</ul>
<h3>ä¸æ¨èä½¿ç”¨æˆ–ç´¢å¼•å¤±æ•ˆæƒ…å†µ</h3>
<ul>
<li>æ•°æ®é‡å¾ˆå°çš„è¡¨</li>
<li>æœ‰å¤§é‡é‡å¤æ•°æ®çš„å­—æ®µ</li>
<li>é¢‘ç¹æ›´æ–°çš„å­—æ®µ</li>
<li>å¦‚æœå¯¹ç´¢å¼•å­—æ®µä½¿ç”¨äº†å‡½æ•°æˆ–è€…è¡¨è¾¾å¼è®¡ç®—ï¼Œç´¢å¼•å¤±æ•ˆ</li>
<li>å­—æ®µç±»å‹ä¸ä¸€è‡´ä¹Ÿä¼šå¤±æ•ˆï¼Œå› ä¸ºç­‰ä»·ä½¿ç”¨å‡½æ•°</li>
<li>innodb OR æ¡ä»¶æ²¡æœ‰å¯¹æ‰€æœ‰æ¡ä»¶åˆ›å»ºç´¢å¼•ï¼Œç´¢å¼•å¤±æ•ˆ</li>
<li>å¤§äºå°äºæ¡ä»¶ &lt; &gt;ï¼Œç´¢å¼•æ˜¯å¦ç”Ÿæ•ˆå–å†³äºå‘½ä¸­çš„æ•°é‡æ¯”ä¾‹ï¼Œå¦‚æœå‘½ä¸­æ•°é‡å¾ˆå¤šï¼Œç´¢å¼•ç”Ÿæ•ˆï¼Œå‘½ä¸­æ•°é‡å¾ˆå°ï¼Œç´¢å¼•å¤±æ•ˆ</li>
<li>ä¸ç­‰äºæ¡ä»¶ !=ã€&lt;&gt;ï¼Œç´¢å¼•å¤±æ•ˆ</li>
<li>LIKE å€¼ä»¥ % å¼€å¤´ï¼Œç´¢å¼•å¤±æ•ˆ</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>SQLæŸ¥è¯¢é¡ºåº</title>
      <link>http://blog.cjhe.top/database/mysql/sql-order.html</link>
      <guid>http://blog.cjhe.top/database/mysql/sql-order.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">SQLæŸ¥è¯¢é¡ºåº</source>
      <description>sql-queriessql-queries</description>
      <category>æ•°æ®åº“</category>
      <pubDate>Thu, 09 Mar 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://jvns.ca/images/sql-queries.jpeg" alt="sql-queries" tabindex="0" loading="lazy"><figcaption>sql-queries</figcaption></figure>
<!-- more -->
<p>è¿™å¼ å›¾ä¸ SQL æŸ¥è¯¢çš„è¯­ä¹‰æœ‰å…³ï¼Œè®©ä½ çŸ¥é“ä¸€ä¸ªæŸ¥è¯¢ä¼šè¿”å›ä»€ä¹ˆï¼Œå¹¶å›ç­”äº†ä»¥ä¸‹è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>
<p>å¯ä»¥åœ¨ GROUP BY ä¹‹åä½¿ç”¨ WHERE å—ï¼Ÿï¼ˆä¸è¡Œï¼ŒWHERE æ˜¯åœ¨ GROUP BY ä¹‹å‰ï¼ï¼‰</p>
</li>
<li>
<p>å¯ä»¥å¯¹çª—å£å‡½æ•°è¿”å›çš„ç»“æœè¿›è¡Œè¿‡æ»¤å—ï¼Ÿï¼ˆä¸è¡Œï¼Œçª—å£å‡½æ•°æ˜¯ SELECT è¯­å¥é‡Œï¼Œè€Œ SELECT æ˜¯åœ¨ WHERE å’Œ GROUP BY ä¹‹åï¼‰</p>
</li>
<li>
<p>å¯ä»¥åŸºäº GROUP BY é‡Œçš„ä¸œè¥¿è¿›è¡Œ ORDER BY å—ï¼Ÿï¼ˆå¯ä»¥ï¼ŒORDER BY åŸºæœ¬ä¸Šæ˜¯åœ¨æœ€åæ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¯ä»¥åŸºäºä»»ä½•ä¸œè¥¿è¿›è¡Œ ORDER BYï¼‰</p>
</li>
<li>
<p>LIMIT æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Ÿï¼ˆåœ¨æœ€åï¼ï¼‰</p>
</li>
</ul>
<p>ä½†æ•°æ®åº“å¼•æ“å¹¶ä¸ä¸€å®šä¸¥æ ¼æŒ‰ç…§è¿™ä¸ªé¡ºåºæ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œå› ä¸ºä¸ºäº†æ›´å¿«åœ°æ‰§è¡ŒæŸ¥è¯¢ï¼Œå®ƒä»¬ä¼šåšå‡ºä¸€äº›ä¼˜åŒ–ã€‚</p>
<p>æ‰€ä»¥ï¼š</p>
<p>å¦‚æœä½ æƒ³è¦çŸ¥é“ä¸€ä¸ªæŸ¥è¯¢è¯­å¥æ˜¯å¦åˆæ³•ï¼Œæˆ–è€…æƒ³è¦çŸ¥é“ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ä¼šè¿”å›ä»€ä¹ˆï¼Œå¯ä»¥å‚è€ƒè¿™å¼ å›¾ï¼›</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…å®ç°ä¸­ï¼ŒMySQLä¼šæ ¹æ®å…·ä½“çš„æŸ¥è¯¢æ¡ä»¶å’Œæ•°æ®é‡è¿›è¡Œä¸€å®šçš„ä¼˜åŒ–å’Œè°ƒæ•´ã€‚åœ¨æ¶‰åŠæŸ¥è¯¢æ€§èƒ½æˆ–è€…ä¸ç´¢å¼•æœ‰å…³çš„ä¸œè¥¿æ—¶ï¼Œè¿™å¼ å›¾å°±ä¸é€‚ç”¨äº†ã€‚</p>
<h2>è¯¦ç»†æŸ¥è¯¢é¡ºåº</h2>
<p>1.FROMå­å¥
MySQLé¦–å…ˆå¤„ç†FROMå­å¥ï¼Œè¯¥æ­¥éª¤ä¸»è¦æ˜¯ç¡®å®šéœ€è¦æŸ¥è¯¢çš„æ•°æ®è¡¨ï¼Œå¹¶å»ºç«‹æ•°æ®è¡¨ä¹‹é—´çš„è¿æ¥å…³ç³»ã€‚</p>
<p>2.WHEREå­å¥
æ ¹æ®WHEREå­å¥æŒ‡å®šçš„æŸ¥è¯¢æ¡ä»¶ï¼ŒMySQLä¼šè¿›è¡Œç­›é€‰å¹¶è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„æ•°æ®ã€‚</p>
<p>3.GROUP BYå­å¥
å¦‚æœæŸ¥è¯¢éœ€è¦å¯¹æ•°æ®åˆ†ç»„ï¼Œåˆ™MySQLä¼šæŒ‰ç…§GROUP BYå­å¥ä¸­æŒ‡å®šçš„åˆ†ç»„æ¡ä»¶å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œç„¶åå¯¹æ¯ä¸ªç»„è¿›è¡Œæ±‡æ€»è®¡ç®—ã€‚</p>
<p>4.HAVINGå­å¥
HAVINGå­å¥ç”¨äºè¿‡æ»¤åˆ†ç»„åçš„æ•°æ®ï¼Œå’ŒWHEREå­å¥ç±»ä¼¼ã€‚åªæœ‰æ»¡è¶³HAVINGå­å¥æŒ‡å®šçš„æ¡ä»¶çš„ç»„æ‰ä¼šå‡ºç°åœ¨ç»“æœé›†ä¸­ã€‚</p>
<p>5.SELECTå­å¥
SELECTå­å¥æ˜¯MySQLæŸ¥è¯¢è¯­å¥æœ€ä¸»è¦çš„éƒ¨åˆ†ï¼Œå®ƒç”¨äºæŒ‡å®šéœ€è¦æŸ¥è¯¢çš„æ•°æ®é›†åˆä»¥åŠè®¡ç®—è¿™ä¸ªæ•°æ®é›†åˆä¸­çš„ä¸€äº›åˆ—å€¼ã€‚</p>
<p>6.DISTINCT
å¦‚æœä½¿ç”¨äº†DISTINCTå…³é”®å­—ï¼Œåˆ™MySQLä¼šè¿‡æ»¤æ‰æŸ¥è¯¢ç»“æœä¸­çš„é‡å¤è®°å½•ã€‚</p>
<p>7.ORDER BY
ORDER BYå­å¥ç”¨äºå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºã€‚MySQLä¼šæŒ‰ç…§æŒ‡å®šçš„åˆ—æˆ–è¡¨è¾¾å¼çš„ç»“æœå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºï¼Œå¯ä»¥æŒ‡å®šå‡åºæˆ–é™åºã€‚</p>
<p>8.LIMIT
LIMITå…³é”®å­—ç”¨äºé™åˆ¶æŸ¥è¯¢ç»“æœçš„æ•°é‡ã€‚MySQLåªè¿”å›å‰Næ¡ç¬¦åˆæ¡ä»¶çš„è®°å½•ï¼Œå…¶ä¸­Nç”±LIMITè¯­å¥åé¢çš„æ•°å­—æŒ‡å®šã€‚</p>
<h2>å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://jvns.ca/blog/2019/10/03/sql-queries-don-t-start-with-select/" target="_blank" rel="noopener noreferrer">SQLæŸ¥è¯¢ä¸æ˜¯ä»¥selectå¼€å§‹</a></p>
]]></content:encoded>
      <enclosure url="https://jvns.ca/images/sql-queries.jpeg" type="image/jpeg"/>
    </item>
    <item>
      <title>äº‹åŠ¡</title>
      <link>http://blog.cjhe.top/database/mysql/transaction.html</link>
      <guid>http://blog.cjhe.top/database/mysql/transaction.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">äº‹åŠ¡</source>
      <description>äº‹åŠ¡çš„ç‰¹æ€§ åŸå­æ€§(Atomicity): äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼ˆå›æ»šï¼‰ï¼Œä¸ä¼šåœ¨äº‹åŠ¡ä¸­é—´é‡åˆ°é”™è¯¯è€Œä¸­æ–­ã€‚ ä¸€è‡´æ€§(Consistency): äº‹åŠ¡å¼€å§‹å’Œç»“æŸæ—¶ï¼Œæ•°æ®éƒ½å¿…é¡»ä¿æŒä¸€è‡´çŠ¶æ€ï¼Œå³ç¬¦åˆçº¦æŸã€å®Œæ•´æ€§ã€é»˜è®¤å€¼ä»¥åŠå…¶å®ƒå®šä¹‰çš„è§„åˆ™ã€‚äº‹åŠ¡æ‰§è¡Œçš„ç»“æœä¸èƒ½ç ´åæ•°æ®åº“çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚ éš”ç¦»æ€§(Isolation): å„ä¸ªäº‹åŠ¡äº’ç›¸éš”ç¦»ï¼Œæ¯...</description>
      <category>æ•°æ®åº“</category>
      <pubDate>Sun, 23 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h2>äº‹åŠ¡çš„ç‰¹æ€§</h2>
<ul>
<li>åŸå­æ€§(Atomicity): äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼ˆå›æ»šï¼‰ï¼Œä¸ä¼šåœ¨äº‹åŠ¡ä¸­é—´é‡åˆ°é”™è¯¯è€Œä¸­æ–­ã€‚</li>
<li>ä¸€è‡´æ€§(Consistency): äº‹åŠ¡å¼€å§‹å’Œç»“æŸæ—¶ï¼Œæ•°æ®éƒ½å¿…é¡»ä¿æŒä¸€è‡´çŠ¶æ€ï¼Œå³ç¬¦åˆçº¦æŸã€å®Œæ•´æ€§ã€é»˜è®¤å€¼ä»¥åŠå…¶å®ƒå®šä¹‰çš„è§„åˆ™ã€‚äº‹åŠ¡æ‰§è¡Œçš„ç»“æœä¸èƒ½ç ´åæ•°æ®åº“çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚</li>
<li>éš”ç¦»æ€§(Isolation): å„ä¸ªäº‹åŠ¡äº’ç›¸éš”ç¦»ï¼Œæ¯ä¸ªäº‹åŠ¡çš„æ‰§è¡Œéƒ½ä¸ä¼šå½±å“å…¶å®ƒäº‹åŠ¡çš„æ‰§è¡Œæˆ–è€…ç»“æœã€‚</li>
<li>æŒä¹…æ€§(Durability): ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤æˆåŠŸï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå³ä½¿å‘ç”Ÿæ•°æ®åº“æ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶äº§ç”Ÿå½±å“ã€‚</li>
</ul>
<h2>äº‹åŠ¡çš„å®ç°</h2>
<ul>
<li>Undo logï¼šå®ç°äº‹åŠ¡çš„åŸå­æ€§ï¼›</li>
<li>Redo logï¼šå®ç°äº‹åŠ¡çš„æŒä¹…æ€§ï¼›</li>
<li>é”/MVCCï¼šå®ç°äº‹åŠ¡çš„éš”ç¦»æ€§ï¼›é”æœºåˆ¶æ¥ä¿è¯äº‹åŠ¡åœ¨æ‰§è¡Œæ—¶äº’ç›¸éš”ç¦»ï¼Œé˜²æ­¢äº‹åŠ¡é—´ç›¸äº’å¹²æ‰°ï¼Œå³å†™-å†™é—®é¢˜ã€‚MVCC æœºåˆ¶æ˜¯é€šè¿‡ä¿å­˜å†å²ç‰ˆæœ¬çš„æ–¹å¼æ¥å®ç°ï¼Œäº‹åŠ¡å¯ä»¥è¯»å–æ•°æ®åœ¨äº‹åŠ¡å¼€å§‹æ—¶çš„ç‰ˆæœ¬ï¼Œè€Œä¸å—åˆ°äº‹åŠ¡æœŸé—´å…¶ä»–äº‹åŠ¡æ‰€åšçš„æ”¹å˜çš„å½±å“ï¼Œå³å†™-è¯»é—®é¢˜ã€‚</li>
<li>ä»¥ä¸Šä¸‰è€…ä¿è¯äº†äº‹åŠ¡çš„ä¸€è‡´æ€§ï¼›</li>
</ul>
<h2>å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜</h2>
<p>å½“æ•°æ®åº“ä¸Šæœ‰å¤šä¸ªäº‹åŠ¡åŒæ—¶æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±å¯èƒ½å‡ºç°<strong>è„è¯»(dirty read)</strong>ã€<strong>ä¸å¯é‡å¤è¯»(non-repeatable read)</strong>ã€<strong>å¹»è¯»(phantom read)</strong>ï¼Œä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå°±æœ‰äº†éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ</p>
<h3>è„è¯»é—®é¢˜</h3>
<blockquote>
<p>è„è¯»æ˜¯æŒ‡ï¼šä¸€ä¸ªäº‹åŠ¡ä¸­è®¿é—®åˆ°äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®</p>
</blockquote>
<figure><figcaption>dirty-read</figcaption></figure>
<h3>ä¸å¯é‡å¤è¯»é—®é¢˜</h3>
<blockquote>
<p>ä¸å¯é‡å¤è¯»æ˜¯æŒ‡ï¼šä¸€ä¸ªäº‹åŠ¡å¤šæ¬¡è¯»å–åŒä¸€è¡Œæ•°æ®ï¼Œä½†æ˜¯åœ¨å¤šæ¬¡è¯»å–ä¸­æ•°æ®å‘ç”Ÿäº†æ”¹å˜ã€‚</p>
</blockquote>
<figure><figcaption>non-repeatable-read</figcaption></figure>
<h3>å¹»è¯»é—®é¢˜</h3>
<blockquote>
<p>å¹»è¯»æ˜¯æŒ‡ï¼šä¸€ä¸ªäº‹åŠ¡å¤šæ¬¡æ‰§è¡ŒåŒä¸€æ¡ SQL è¯­å¥ï¼Œä½†ç»“æœé›†å´ä¸åŒï¼Œå¯¼è‡´æ— æ³•æ”¯æ’‘åç»­çš„ä¸šåŠ¡æ“ä½œ</p>
</blockquote>
<figure><figcaption>phantom-read</figcaption></figure>
<h2>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h2>
<p>é’ˆå¯¹ä¸Šé¢ä¸‰ç§é—®é¢˜ï¼Œåˆ†åˆ«æœ‰å››ç§éš”ç¦»çº§åˆ«ï¼š</p>
<h3>æœªæäº¤è¯»(read uncommittedï¼ŒRU)</h3>
<blockquote>
<p>æœªæäº¤è¯»ï¼Œæ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡è¿˜æœªæäº¤æ—¶ï¼Œå®ƒåšçš„å˜æ›´å°±èƒ½è¢«åˆ«çš„äº‹åŠ¡çœ‹åˆ°ã€‚å³<strong>æ²¡æœ‰æäº¤å´å¯ä»¥è¯»</strong></p>
</blockquote>
<h3>æäº¤è¯»(read committedï¼ŒRC)</h3>
<blockquote>
<p>æäº¤è¯»ï¼Œæ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡æäº¤ä¹‹åï¼Œå®ƒåšçš„å˜æ›´æ‰ä¼šè¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°ã€‚å³<strong>æäº¤æ‰å¯ä»¥è¯»</strong></p>
</blockquote>
<p>ğŸ‘€ <strong>å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿçš„é»˜è®¤éš”ç¦»çº§åˆ«</strong></p>
<h3>å¯é‡å¤è¯»(repeatable readï¼ŒRR)</h3>
<blockquote>
<p>å¯é‡å¤åº¦ï¼Œæ˜¯æŒ‡åŒä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡åœ¨å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚å³åŒä¸€ä¸ªäº‹åŠ¡å¤šæ¬¡è¯·æ±‚è¯»å–æ•°æ®ï¼Œä¼šçœ‹åˆ°åŒæ ·çš„æ•°æ®è¡Œã€‚</p>
</blockquote>
<p>ğŸ‘€ <strong>MySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«</strong></p>
<h3>ä¸²è¡ŒåŒ–(serializableï¼ŒS)</h3>
<blockquote>
<p>æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®ƒé€šè¿‡å¼ºåˆ¶äº‹åŠ¡æ’åºï¼Œä½¿ä¹‹ä¸å¯èƒ½ç›¸äº’å†²çªã€‚</p>
<p>è¿™ä¸ªçº§åˆ«å¯èƒ½å¯¼è‡´å¤§é‡çš„è¶…æ—¶ç°è±¡å’Œé”ç«äº‰ã€‚</p>
</blockquote>
<p>ä»¥ä¸Šå››ç§éš”ç¦»çº§åˆ«è§£å†³é—®é¢˜å¦‚ä¸‹ï¼š</p>
<p>| éš”ç¦»çº§åˆ«\è§£å†³é—®é¢˜ |        è„è¯»        |     ä¸å¯é‡å¤è¯»     |        å¹»è¯»        |                     å®ç°åŸç†                     |
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>è´£ä»»é“¾</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/chain-of-responsibility.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/chain-of-responsibility.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">è´£ä»»é“¾</source>
      <description>è´£ä»»é“¾è´£ä»»é“¾</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 13 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/chain-of-responsibility/chain-of-responsibility-2x.png" alt="è´£ä»»é“¾" tabindex="0" loading="lazy"><figcaption>è´£ä»»é“¾</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼</h2>
<p>è´£ä»»é“¾æ¨¡å¼(Chain of Responsibility)ï¼šä¸ºäº†é¿å…è¯·æ±‚å‘é€è€…ä¸å¤šä¸ªè¯·æ±‚å¤„ç†è€…è€¦åˆåœ¨ä¸€èµ·ï¼Œå°†æ‰€æœ‰è¯·æ±‚çš„å¤„ç†è€…é€šè¿‡å‰ä¸€å¯¹è±¡è®°ä½å…¶ä¸‹ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è€Œè¿æˆä¸€æ¡é“¾ï¼›å½“æœ‰è¯·æ±‚å‘ç”Ÿæ—¶ï¼Œå¯å°†è¯·æ±‚æ²¿ç€è¿™æ¡é“¾ä¼ é€’ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p>
<div class="language-ascii" data-ext="ascii" data-title="ascii"><pre class="language-ascii"><code>     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Request â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
â”Œ â”€ â”€ â”€ â”€ â”¼ â”€ â”€ â”€ â”€ â”
          â–¼
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚ ProcessorA  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â”‚
â”‚         â–¼         â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ ProcessorB  â”‚  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚         â”‚         â”‚
          â–¼
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚ ProcessorC  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â”‚
â”” â”€ â”€ â”€ â”€ â”¼ â”€ â”€ â”€ â”€ â”˜
          â”‚
          â–¼
</code></pre></div><h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<ul>
<li>
<p>Handler: æŠ½è±¡å¤„ç†è€…</p>
<p>åŒ…å«ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ¥å£å’Œä¸€ä¸ªè®¾ç½®åç»­å¤„ç†è€…</p>
</li>
<li>
<p>Concrete Handler: å…·ä½“å¤„ç†è€…</p>
<p>å®ç°æŠ½è±¡å¤„ç†è€…æ¥å£</p>
</li>
<li>
<p>Client: å®¢æˆ·ç«¯</p>
<p>åˆ›å»ºå¤„ç†é“¾ï¼Œå¹¶è®©é“¾å¤´å¼€å§‹æ‰§è¡Œå¤„ç†</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> chainofresponsibility

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Handler <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">SetNext</span><span class="token punctuation">(</span>Handler<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteHandler1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	next Handler
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>h <span class="token operator">*</span>ConcreteHandler1<span class="token punctuation">)</span> <span class="token function">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concrete handler1"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> h<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		h<span class="token punctuation">.</span>next<span class="token punctuation">.</span><span class="token function">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>h <span class="token operator">*</span>ConcreteHandler1<span class="token punctuation">)</span> <span class="token function">SetNext</span><span class="token punctuation">(</span>handler Handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	h<span class="token punctuation">.</span>next <span class="token operator">=</span> handler
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteHandler2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	next Handler
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>h <span class="token operator">*</span>ConcreteHandler2<span class="token punctuation">)</span> <span class="token function">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concrete handler2"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> h<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		h<span class="token punctuation">.</span>next<span class="token punctuation">.</span><span class="token function">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>h <span class="token operator">*</span>ConcreteHandler2<span class="token punctuation">)</span> <span class="token function">SetNext</span><span class="token punctuation">(</span>handler Handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	h<span class="token punctuation">.</span>next <span class="token operator">=</span> handler
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> chainofresponsibility

<span class="token keyword">func</span> <span class="token function">ExampleHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	h1 <span class="token operator">:=</span> ConcreteHandler1<span class="token punctuation">{</span><span class="token punctuation">}</span>
	h2 <span class="token operator">:=</span> ConcreteHandler2<span class="token punctuation">{</span><span class="token punctuation">}</span>
	h1<span class="token punctuation">.</span><span class="token function">SetNext</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>h2<span class="token punctuation">)</span>
	h1<span class="token punctuation">.</span><span class="token function">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// concrete handler1</span>
	<span class="token comment">// concrete handler2</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>å®¡æ‰¹æµç¨‹ï¼šç»ç†ã€ä¸»ç®¡ã€Boss</li>
<li>åŒ»é™¢æµç¨‹ï¼šæŒ‚å·å¤„ã€åŒ»ç”Ÿã€æ”¶é“¶å¤„ã€è¯æˆ¿</li>
</ul>
<h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>å¯ä»¥æ§åˆ¶è¯·æ±‚å¤„ç†çš„é¡ºåºï¼›</li>
<li>å•ä¸€èŒè´£åŸåˆ™ï¼Œå…·ä½“çš„å¤„ç†è€…åªå…³å¿ƒè‡ªå·±çš„ä¸šåŠ¡ï¼›</li>
<li>å¼€é—­åŸåˆ™ï¼Œå¯ä»¥ä¸æ›´æ”¹ç°æœ‰ä»£ç çš„æƒ…å†µä¸‹æ–°å¢å¤„ç†è€…ï¼›</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>å„ä¸ªå¤„ç†è€…é¡»æœ‰å…±åŒçš„å¤„ç†å‡½æ•°</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/chain-of-responsibility/chain-of-responsibility-2x.png" type="image/png"/>
    </item>
    <item>
      <title>å‘½ä»¤</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/command.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/command.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å‘½ä»¤</source>
      <description>commandcommand</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Wed, 26 Apr 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/command/command-zh-2x.png" alt="command" tabindex="0" loading="lazy"><figcaption>command</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯è¡Œä¸ºå‹æ¨¡å¼</h2>
<p>å‘½ä»¤è®¾è®¡æ¨¡å¼å…è®¸å°†è¯·æ±‚å°è£…æˆå¯¹è±¡ï¼Œä»è€Œå°†ä¸åŒçš„è¯·æ±‚å‘é€è€…ä¸æ¥æ”¶è€…è§£è€¦ã€‚å‘½ä»¤å¯¹è±¡åŒ…å«äº†è¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬è°ƒç”¨çš„æ–¹æ³•ã€å‚æ•°å’Œæ¥æ”¶è€…ç­‰ã€‚è¿™ç§æ–¹å¼ä½¿å¾—è¯·æ±‚çš„å‘é€è€…ä¸æ¥æ”¶è€…æ— éœ€çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ï¼Œä»è€Œå¯ä»¥æ›´çµæ´»åœ°è¿›è¡Œäº¤äº’ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>command</figcaption></figure>
<ul>
<li>
<p>Invoker: è°ƒç”¨è€…</p>
<p>åˆ›å»ºå’Œé…ç½®å‘½å‘½ä»¤å¯¹è±¡ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™æ¥æ”¶è€…</p>
</li>
<li>
<p>Command: å‘½ä»¤æ¥å£</p>
<p>å®šä¹‰å‘½ä»¤çš„æ ¸å¿ƒæ¥å£ï¼Œé€šå¸¸åŒ…æ‹¬ä¸€ä¸ªæ‰§è¡Œæ–¹æ³•</p>
</li>
<li>
<p>ConcreteCommand: å…·ä½“å‘½ä»¤ç±»</p>
<p>å®ç°å‘½ä»¤æ¥å£ï¼Œå¹¶å°è£…å…·ä½“çš„æ“ä½œã€‚é€šå¸¸éœ€è¦å¼•ç”¨æ¥æ”¶è€…ï¼Œä»è€Œè°ƒç”¨å¯¹åº”çš„æ–¹æ³•</p>
</li>
<li>
<p>Receiver: æ¥æ”¶è€…</p>
<p>å®ç°è¯·æ±‚çš„å®é™…æ“ä½œï¼Œå‘½ä»¤å¯¹è±¡å°†è¯·æ±‚ä¼ é€’ç»™æ¥æ”¶è€…ï¼Œä»è€Œå®Œæˆè¯·æ±‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> command

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Command <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Receiver <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Receiver<span class="token punctuation">)</span> <span class="token function">operation1</span><span class="token punctuation">(</span>a <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"operation1:"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Receiver<span class="token punctuation">)</span> <span class="token function">operation2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"operation2:"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Invoker <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	cmd Command
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>Invoker<span class="token punctuation">)</span> <span class="token function">SetCommand</span><span class="token punctuation">(</span>cmd Command<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	i<span class="token punctuation">.</span>cmd <span class="token operator">=</span> cmd
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>Invoker<span class="token punctuation">)</span> <span class="token function">ExecuteCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	i<span class="token punctuation">.</span>cmd<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreateCommand1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name     <span class="token builtin">string</span>
	receiver <span class="token operator">*</span>Receiver
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreateCommand1<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">operation1</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreateCommand2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name     <span class="token builtin">string</span>
	desc     <span class="token builtin">string</span>
	address  <span class="token builtin">string</span>
	receiver <span class="token operator">*</span>Receiver
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreateCommand2<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">operation2</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>name<span class="token punctuation">,</span> c<span class="token punctuation">.</span>desc<span class="token punctuation">,</span> c<span class="token punctuation">.</span>address<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> command

<span class="token keyword">func</span> <span class="token function">ExampleCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	receiver <span class="token operator">:=</span> Receiver<span class="token punctuation">{</span><span class="token punctuation">}</span>
	invoker <span class="token operator">:=</span> Invoker<span class="token punctuation">{</span><span class="token punctuation">}</span>

	cmd1 <span class="token operator">:=</span> ConcreateCommand1<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span> receiver<span class="token punctuation">:</span> <span class="token operator">&amp;</span>receiver<span class="token punctuation">}</span>
	invoker<span class="token punctuation">.</span><span class="token function">SetCommand</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cmd1<span class="token punctuation">)</span>
	invoker<span class="token punctuation">.</span><span class="token function">ExecuteCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	cmd2 <span class="token operator">:=</span> ConcreateCommand2<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span> desc<span class="token punctuation">:</span> <span class="token string">"æè¿°"</span><span class="token punctuation">,</span> address<span class="token punctuation">:</span> <span class="token string">"åœ°å€"</span><span class="token punctuation">,</span> receiver<span class="token punctuation">:</span> <span class="token operator">&amp;</span>receiver<span class="token punctuation">}</span>
	invoker<span class="token punctuation">.</span><span class="token function">SetCommand</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cmd2<span class="token punctuation">)</span>
	invoker<span class="token punctuation">.</span><span class="token function">ExecuteCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// Output:</span>
	<span class="token comment">// operation1: admin</span>
	<span class="token comment">// operation2: admin æè¿° åœ°å€</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>é€‚ç”¨åœºæ™¯</h2>
<ul>
<li>
<p>éœ€è¦å°†è¯·æ±‚å’Œæ‰§è¡Œæ“ä½œè§£è€¦çš„æƒ…å†µã€‚å‘½ä»¤æ¨¡å¼å¯ä»¥å°†è¯·æ±‚å°è£…ä¸ºå¯¹è±¡å¹¶å°†å…¶å‘é€ç»™æ¥æ”¶è€…ï¼Œä»è€Œä½¿å¾—å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´æ¾è€¦åˆã€‚</p>
</li>
<li>
<p>éœ€è¦æ”¯æŒæ’¤é”€æˆ–é‡åšæ“ä½œçš„æƒ…å†µã€‚ç”±äºæ¯ä¸ªå‘½ä»¤éƒ½å°è£…äº†ä¸€ç»„ç‰¹å®šçš„æ“ä½œï¼Œå› æ­¤å¯ä»¥è½»æ¾è¿›è¡Œæ’¤é”€æˆ–é‡åšã€‚</p>
</li>
<li>
<p>éœ€è¦æ”¯æŒäº‹åŠ¡æ“ä½œçš„æƒ…å†µã€‚å°†ä¸€ç»„ç›¸å…³çš„å‘½ä»¤ç»„åˆåœ¨ä¸€èµ·ï¼Œå¯ä»¥å®ç°äº‹åŠ¡æ“ä½œï¼Œå³ä¸€ç»„æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p>
</li>
<li>
<p>éœ€è¦è¿œç¨‹æ‰§è¡Œæ“ä½œçš„æƒ…å†µã€‚å°†å‘½ä»¤å¯¹è±¡åºåˆ—åŒ–åˆ°ç½‘ç»œä¸Šï¼Œå¯ä»¥å®ç°è¿œç¨‹æ‰§è¡Œæ“ä½œçš„åŠŸèƒ½ã€‚</p>
</li>
<li>
<p>éœ€è¦å°†å‘½ä»¤é˜Ÿåˆ—ä¸­çš„è¯·æ±‚å»¶è¿Ÿã€è°ƒåº¦æˆ–è€…æ‰§è¡Œçš„æƒ…å†µã€‚å¯ä»¥å°†å‘½ä»¤å¯¹è±¡å­˜å‚¨åœ¨é˜Ÿåˆ—ä¸­ï¼Œç„¶åæŒ‰ç…§ç‰¹å®šçš„è§„åˆ™æ‰§è¡Œå®ƒä»¬ã€‚</p>
</li>
<li>
<p>éœ€è¦å®ç°æ—¥å¿—ã€å®¡è®¡æˆ–è€…äº‹åŠ¡è®°å½•çš„æƒ…å†µã€‚å¯ä»¥åœ¨æ‰§è¡Œå‘½ä»¤çš„åŒæ—¶ï¼Œå°†å…¶è®°å½•ä¸‹æ¥ï¼Œå¹¶å¯ä»¥å°†å…¶å›æ”¾ä»¥é‡ç°å†å²æ“ä½œã€‚</p>
</li>
</ul>
<h3>è¯·æ±‚ä¸æ‰§è¡Œè§£è€¦</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> command

<span class="token keyword">type</span> Commander <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> AddCommand <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	receiver <span class="token operator">*</span>Origin
	value    <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>AddCommand<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> SubtractCommand <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	receiver <span class="token operator">*</span>Origin
	value    <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>SubtractCommand<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Subtract</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> MultiplyCommand <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	receiver <span class="token operator">*</span>Origin
	value    <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>MultiplyCommand<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Multiply</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> DivideCommand <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	receiver <span class="token operator">*</span>Origin
	value    <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>DivideCommand<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Divide</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Origin <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	value <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Origin<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">.</span>value <span class="token operator">+=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Origin<span class="token punctuation">)</span> <span class="token function">Subtract</span><span class="token punctuation">(</span>value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">.</span>value <span class="token operator">-=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Origin<span class="token punctuation">)</span> <span class="token function">Multiply</span><span class="token punctuation">(</span>value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">.</span>value <span class="token operator">*=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Origin<span class="token punctuation">)</span> <span class="token function">Divide</span><span class="token punctuation">(</span>value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">.</span>value <span class="token operator">/=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Computer <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	commands <span class="token punctuation">[</span><span class="token punctuation">]</span>Commander
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>Computer<span class="token punctuation">)</span> <span class="token function">AddCommand</span><span class="token punctuation">(</span>command Commander<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	i<span class="token punctuation">.</span>commands <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>commands<span class="token punctuation">,</span> command<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>Computer<span class="token punctuation">)</span> <span class="token function">ExecuteCommands</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> command <span class="token operator">:=</span> <span class="token keyword">range</span> i<span class="token punctuation">.</span>commands <span class="token punctuation">{</span>
		command<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>package command

import "fmt"

func ExampleComputer() {
	computer := Computer{}
	origin := Origin{10}
	addCmd := AddCommand{&amp;origin, 20}
	subCmd := SubtractCommand{&amp;origin, 15}
	mulCmd := MultiplyCommand{&amp;origin, 2}
	divCmd := DivideCommand{&amp;origin, 3}
	computer.AddCommand(&amp;addCmd)
	computer.AddCommand(&amp;subCmd)
	computer.AddCommand(&amp;mulCmd)
	computer.AddCommand(&amp;divCmd)
	computer.ExecuteCommands()
	fmt.Println(origin.value)
	// Output:
	// 10
}
</code></pre></div><p>æˆ‘ä»¬å°†è¯·æ±‚è€…Computerå’Œæ¥æ”¶è€…Originï¼Œè¿›è¡Œäº†è§£è€¦ã€‚è¯·æ±‚è€…å¯ä»¥ä»»æ„è¿½åŠ å‘½ä»¤ï¼Œæ‰§è¡Œï¼šåŠ ã€å‡ã€ä¹˜ã€é™¤ç­‰è¿ç®—ã€‚</p>
<h3>æ’¤é”€æ“ä½œ</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> command

<span class="token keyword">type</span> Commander <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">Undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> AddCommand <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	receiver <span class="token operator">*</span>Origin
	value    <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>AddCommand<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>AddCommand<span class="token punctuation">)</span> <span class="token function">Undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Subtract</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> SubtractCommand <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	receiver <span class="token operator">*</span>Origin
	value    <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>SubtractCommand<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Subtract</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>SubtractCommand<span class="token punctuation">)</span> <span class="token function">Undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> MultiplyCommand <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	receiver <span class="token operator">*</span>Origin
	value    <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>MultiplyCommand<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Multiply</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>MultiplyCommand<span class="token punctuation">)</span> <span class="token function">Undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Divide</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> DivideCommand <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	receiver <span class="token operator">*</span>Origin
	value    <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>DivideCommand<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Divide</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>DivideCommand<span class="token punctuation">)</span> <span class="token function">Undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>receiver<span class="token punctuation">.</span><span class="token function">Multiply</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Origin <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	value <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Origin<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">.</span>value <span class="token operator">+=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Origin<span class="token punctuation">)</span> <span class="token function">Subtract</span><span class="token punctuation">(</span>value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">.</span>value <span class="token operator">-=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Origin<span class="token punctuation">)</span> <span class="token function">Multiply</span><span class="token punctuation">(</span>value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">.</span>value <span class="token operator">*=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Origin<span class="token punctuation">)</span> <span class="token function">Divide</span><span class="token punctuation">(</span>value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">.</span>value <span class="token operator">/=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Computer <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	commands <span class="token punctuation">[</span><span class="token punctuation">]</span>Commander
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>Computer<span class="token punctuation">)</span> <span class="token function">AddCommand</span><span class="token punctuation">(</span>command Commander<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	i<span class="token punctuation">.</span>commands <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>commands<span class="token punctuation">,</span> command<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>Computer<span class="token punctuation">)</span> <span class="token function">ExecuteCommands</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> command <span class="token operator">:=</span> <span class="token keyword">range</span> i<span class="token punctuation">.</span>commands <span class="token punctuation">{</span>
		command<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>Computer<span class="token punctuation">)</span> <span class="token function">UndoLastCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>commands<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		cmd <span class="token operator">:=</span> i<span class="token punctuation">.</span>commands<span class="token punctuation">[</span><span class="token function">len</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>commands<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
		cmd<span class="token punctuation">.</span><span class="token function">Undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		i<span class="token punctuation">.</span>commands <span class="token operator">=</span> i<span class="token punctuation">.</span>commands<span class="token punctuation">[</span><span class="token number">0</span> <span class="token punctuation">:</span> <span class="token function">len</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>commands<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleComputerUndo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	computer <span class="token operator">:=</span> Computer<span class="token punctuation">{</span><span class="token punctuation">}</span>
	origin <span class="token operator">:=</span> Origin<span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span>
	addCmd <span class="token operator">:=</span> AddCommand<span class="token punctuation">{</span><span class="token operator">&amp;</span>origin<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">}</span>
	subCmd <span class="token operator">:=</span> SubtractCommand<span class="token punctuation">{</span><span class="token operator">&amp;</span>origin<span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span>
	mulCmd <span class="token operator">:=</span> MultiplyCommand<span class="token punctuation">{</span><span class="token operator">&amp;</span>origin<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span>
	divCmd <span class="token operator">:=</span> DivideCommand<span class="token punctuation">{</span><span class="token operator">&amp;</span>origin<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
	computer<span class="token punctuation">.</span><span class="token function">AddCommand</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>addCmd<span class="token punctuation">)</span>
	computer<span class="token punctuation">.</span><span class="token function">AddCommand</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>subCmd<span class="token punctuation">)</span>
	computer<span class="token punctuation">.</span><span class="token function">AddCommand</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mulCmd<span class="token punctuation">)</span>
	computer<span class="token punctuation">.</span><span class="token function">AddCommand</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>divCmd<span class="token punctuation">)</span>
	computer<span class="token punctuation">.</span><span class="token function">ExecuteCommands</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>origin<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
	computer<span class="token punctuation">.</span><span class="token function">UndoLastCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>origin<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
	computer<span class="token punctuation">.</span><span class="token function">UndoLastCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>origin<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
	computer<span class="token punctuation">.</span><span class="token function">UndoLastCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>origin<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// 10</span>
	<span class="token comment">// 30</span>
  <span class="token comment">// 15</span>
	<span class="token comment">// 30</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬å¯¹Commonderæ¥å£å¢åŠ Undoæ–¹æ³•ï¼Œå³å¯ä»¥å®ç°è®¡ç®—å™¨çš„æ’¤é”€æ“ä½œã€‚</p>
<h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>å‘½ä»¤æ¨¡å¼å¯ä»¥é™ä½ä»£ç çš„è€¦åˆåº¦ï¼Œå¹¶ä¸”å°†è¯·æ±‚è°ƒç”¨è€…ä¸è¯·æ±‚æ¥æ”¶è€…è¿›è¡Œè§£è€¦ï¼›</li>
<li>å‘½ä»¤æ¨¡å¼æ‰©å±•æ€§è¾ƒé«˜
<ul>
<li>å¦‚æœæ˜¯æ‰©å±•æ–°çš„å‘½ä»¤ï¼Œé‚£ä¹ˆç›´æ¥å®šä¹‰æ–°çš„å‘½ä»¤ç±»å³å¯ï¼›</li>
<li>å¦‚æœæ˜¯æ‰§è¡Œä¸€ç»„å‘½ä»¤ï¼Œé‚£ä¹ˆ</li>
</ul>
</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚ä½¿ç”¨å‘½ä»¤æ¨¡å¼å¯èƒ½ä¼šå¢åŠ å¯¹è±¡æ•°é‡ï¼Œå¹¶ä¸”æ¯ä¸ªå‘½ä»¤éƒ½éœ€è¦è¿›è¡Œå°è£…ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li>
<li>å¯èƒ½ä¼šä½¿ä»£ç æ›´åŠ å¤æ‚ã€‚ä½¿ç”¨å‘½ä»¤æ¨¡å¼éœ€è¦å®šä¹‰è®¸å¤šæ¥å£å’Œç±»ï¼Œå¯èƒ½ä¼šä½¿ä»£ç è¿‡äºå¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/command/command-zh-2x.png" type="image/png"/>
    </item>
    <item>
      <title>è¿­ä»£å™¨</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/iterator.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/iterator.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">è¿­ä»£å™¨</source>
      <description>iteratoriterator</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Mon, 12 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/iterator/iterator-zh-2x.png" alt="iterator" tabindex="0" loading="lazy"><figcaption>iterator</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯è¿­ä»£å™¨æ¨¡å¼</h2>
<p>è¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œè®©ä½ èƒ½åœ¨ä¸æš´éœ²é›†åˆåº•å±‚ç»“æ„ï¼ˆåˆ—è¡¨ã€æ ˆã€æ ‘ç­‰ï¼‰çš„æƒ…å†µä¸‹éå†é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>iterator</figcaption></figure>
<ul>
<li>
<p>Iterator: è¿­ä»£å™¨æ¥å£</p>
<p>å£°æ˜äº†éå†é›†åˆæ‰€éœ€çš„æ“ä½œ</p>
</li>
<li>
<p>IterableCollection: é›†åˆæ¥å£</p>
<p>å£°æ˜ä¸€ä¸ªæ–¹æ³•æˆ–å¤šä¸ªæ–¹æ³•æ¥è·å–ä¸é›†åˆå…¼å®¹çš„è¿­ä»£å™¨ã€‚</p>
</li>
<li>
<p>ConcreteIterator: å…·ä½“è¿­ä»£å™¨</p>
<p>å®ç°éå†é›†åˆçš„ä¸€ç§ç‰¹å®šç®—æ³•ï¼Œè¿­ä»£å™¨å¯¹è±¡å¿…é¡»è·Ÿè¸ªè‡ªèº«éå†è¿›åº¦ã€‚</p>
</li>
<li>
<p>ConcreteCollection: å…·ä½“é›†åˆ</p>
<p>ä¼šåœ¨å®¢æˆ·ç«¯è¯·æ±‚è¿­ä»£å™¨æ—¶è¿”å›ä¸€ä¸ªç‰¹å®šçš„å…·ä½“è¿­ä»£å™¨ç±»å®ä½“ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> iterator

<span class="token keyword">type</span> Aggregate <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Iterator
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Iterator <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
	<span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteIterator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	numbers <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
	next    <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>ConcreteIterator<span class="token punctuation">)</span> <span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> i<span class="token punctuation">.</span>next <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>numbers<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>i <span class="token operator">*</span>ConcreteIterator<span class="token punctuation">)</span> <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> i<span class="token punctuation">.</span><span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		numer <span class="token operator">:=</span> i<span class="token punctuation">.</span>numbers<span class="token punctuation">[</span>i<span class="token punctuation">.</span>next<span class="token punctuation">]</span>
		i<span class="token punctuation">.</span>next <span class="token operator">+=</span> <span class="token number">1</span>
		<span class="token keyword">return</span> numer
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteAggregate <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Length <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>ConcreteAggregate<span class="token punctuation">)</span> <span class="token function">Iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Iterator <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>ConcreteIterator<span class="token punctuation">{</span>
		numbers<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">,</span>
		next<span class="token punctuation">:</span>    <span class="token number">0</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> iterator

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">ExampleIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> aggregate Aggregate
	aggregate <span class="token operator">=</span> <span class="token operator">&amp;</span>ConcreteAggregate<span class="token punctuation">{</span>Length<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
	iterator <span class="token operator">:=</span> aggregate<span class="token punctuation">.</span><span class="token function">Iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	i <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">for</span> iterator<span class="token punctuation">.</span><span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token boolean">_</span> <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
		i<span class="token operator">++</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// 0</span>
	<span class="token comment">// 1</span>
	<span class="token comment">// 2</span>
	<span class="token comment">// 3</span>
	<span class="token comment">// 4</span>
	<span class="token comment">// 5</span>
	<span class="token comment">// 6</span>
	<span class="token comment">// 7</span>
	<span class="token comment">// 8</span>
	<span class="token comment">// 9</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— é¡»æš´éœ²å®ƒçš„å†…éƒ¨è¡¨ç¤ºã€‚</li>
<li>éå†ä»»åŠ¡äº¤ç”±è¿­ä»£å™¨å®Œæˆï¼Œè¿™ç®€åŒ–äº†èšåˆç±»ã€‚</li>
<li>å®ƒæ”¯æŒä»¥ä¸åŒæ–¹å¼éå†ä¸€ä¸ªèšåˆï¼Œç”šè‡³å¯ä»¥è‡ªå®šä¹‰è¿­ä»£å™¨çš„å­ç±»ä»¥æ”¯æŒæ–°çš„éå†ã€‚</li>
<li>å¢åŠ æ–°çš„èšåˆç±»å’Œè¿­ä»£å™¨ç±»éƒ½å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»ä¿®æ”¹åŸæœ‰ä»£ç ã€‚</li>
<li>å°è£…æ€§è‰¯å¥½ï¼Œä¸ºéå†ä¸åŒçš„èšåˆç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>å¢åŠ äº†ç±»çš„ä¸ªæ•°ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/iterator/iterator-zh-2x.png" type="image/png"/>
    </item>
    <item>
      <title>ä¸­ä»‹è€…</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/mediator.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/mediator.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ä¸­ä»‹è€…</source>
      <description>mediatormediator</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sat, 29 Apr 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/mediator/mediator-2x.png" alt="mediator" tabindex="0" loading="lazy"><figcaption>mediator</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯ä¸­ä»‹è€…æ¨¡å¼</h2>
<p>ä¸­ä»‹è€…æ¨¡å¼(Mediator Pattern)åˆå«è°ƒåœè€…æ¨¡å¼ï¼Œé€šè¿‡åœ¨ä¸­é—´å¼•å…¥ä¸­ä»‹å¯¹è±¡æ¥åè°ƒå„ä¸ªå¯¹è±¡ä¹‹é—´äº¤äº’ï¼Œä½¿å¾—å¯¹è±¡ä¹‹é—´ä¸ç›´æ¥äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ä¸­ä»‹è€…è¿›è¡Œé€šä¿¡å’Œåè°ƒï¼Œä»è€Œä½¿å¾—å„ä¸ªå¯¹è±¡èƒ½å¤Ÿæ›´åŠ çµæ´»åœ°è¿›è¡Œç»„åˆå’Œæ‹†åˆ†ï¼Œå¢å¼ºç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>mediator</figcaption></figure>
<ul>
<li>
<p>Mediatorï¼šä¸­ä»‹è€…</p>
<p>å®šä¹‰äº†ä¸­ä»‹è€…çš„æ¥å£ï¼Œå³é€šè¿‡è¯¥æ¥å£ä¸å…¶ä»–ç»„ä»¶äº¤äº’</p>
</li>
<li>
<p>ConcreteMediatorï¼šå…·ä½“ä¸­ä»‹è€…</p>
<p>å®ç°äº†ä¸­ä»‹è€…çš„æ¥å£ï¼Œç»´æŠ¤å…¶ä»–ç»„ä»¶ä¹‹é—´çš„äº¤äº’å…³ç³»ã€‚</p>
</li>
<li>
<p>Colleagueï¼šåŒäº‹</p>
<p>å®šä¹‰ç»„ä»¶çš„æ¥å£ï¼Œå³é€šè¿‡è¯¥æ¥å£ä¸ä¸­ä»‹è€…äº¤äº’ã€‚</p>
</li>
<li>
<p>ConcreteColleagueï¼šå…·ä½“åŒäº‹</p>
<p>å®ç°äº†ç»„ä»¶çš„æ¥å£ï¼Œç»´æŠ¤è‡ªå·±ä¸å…¶ä»–ç»„ä»¶ä¹‹é—´çš„äº¤äº’å…³ç³»ã€‚æ³¨æ„ï¼ŒåŒäº‹ä¹‹é—´ä¸ä¼šç›´æ¥äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ä¸­ä»‹è€…æ¥å®Œæˆäº¤äº’ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> mediator

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Mediator <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Coordinate</span><span class="token punctuation">(</span>colleague Colleague<span class="token punctuation">,</span> message <span class="token builtin">string</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Colleague <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">SendMessage</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span>
	<span class="token function">ReceiveMessage</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteColleague1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	mediator Mediator
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreteColleague1<span class="token punctuation">)</span> <span class="token function">SendMessage</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ConcreateColleague1 send message:"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>mediator<span class="token punctuation">.</span><span class="token function">Coordinate</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreteColleague1<span class="token punctuation">)</span> <span class="token function">ReceiveMessage</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ConcreateColleague1 receive message:"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteColleague2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	mediator Mediator
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreteColleague2<span class="token punctuation">)</span> <span class="token function">SendMessage</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ConcreateColleague2 send message:"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>mediator<span class="token punctuation">.</span><span class="token function">Coordinate</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreteColleague2<span class="token punctuation">)</span> <span class="token function">ReceiveMessage</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ConcreateColleague2 receive message:"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteMediator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ConcreteColleague1
	ConcreteColleague2
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteMediator<span class="token punctuation">)</span> <span class="token function">Coordinate</span><span class="token punctuation">(</span>colleague Colleague<span class="token punctuation">,</span> message <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">switch</span> colleague<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token operator">*</span>ConcreteColleague1<span class="token punctuation">:</span>
		c<span class="token punctuation">.</span>ConcreteColleague2<span class="token punctuation">.</span><span class="token function">ReceiveMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
	<span class="token keyword">case</span> <span class="token operator">*</span>ConcreteColleague2<span class="token punctuation">:</span>
		c<span class="token punctuation">.</span>ConcreteColleague1<span class="token punctuation">.</span><span class="token function">ReceiveMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> mediator

<span class="token keyword">func</span> <span class="token function">ExampleMediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	mediator <span class="token operator">:=</span> ConcreteMediator<span class="token punctuation">{</span><span class="token punctuation">}</span>
	colleague1 <span class="token operator">:=</span> ConcreteColleague1<span class="token punctuation">{</span>mediator<span class="token punctuation">:</span> mediator<span class="token punctuation">}</span>
	colleague2 <span class="token operator">:=</span> ConcreteColleague2<span class="token punctuation">{</span>mediator<span class="token punctuation">:</span> mediator<span class="token punctuation">}</span>
	mediator<span class="token punctuation">.</span>ConcreteColleague1 <span class="token operator">=</span> colleague1
	mediator<span class="token punctuation">.</span>ConcreteColleague2 <span class="token operator">=</span> colleague2

	colleague1<span class="token punctuation">.</span><span class="token function">SendMessage</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>
	colleague2<span class="token punctuation">.</span><span class="token function">SendMessage</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// ConcreateColleague1 send message: hello</span>
	<span class="token comment">// ConcreateColleague2 receive message: hello</span>
	<span class="token comment">// ConcreateColleague2 send message: hi</span>
	<span class="token comment">// ConcreateColleague1 receive message: hi</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>
<p>é™ä½ç³»ç»Ÿå¤æ‚åº¦ï¼šé€šè¿‡ä¸­ä»‹è€…å¯¹è±¡ï¼Œå¯ä»¥å°†ç³»ç»Ÿä¸­å¤šä¸ªå¯¹è±¡ä¹‹é—´çš„ç›´æ¥äº¤äº’å…³ç³»è½¬åŒ–ä¸ºå¯¹ä¸­ä»‹è€…å¯¹è±¡çš„è¯·æ±‚è°ƒç”¨ï¼Œä»è€Œç®€åŒ–äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼›</p>
</li>
<li>
<p>å‡ä½ç³»ç»Ÿç»´æŠ¤æˆæœ¬ï¼šé€šè¿‡å‡å°‘å¯¹è±¡ä¹‹é—´çš„ç›´æ¥è€¦åˆåº¦ï¼Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œé™ä½äº†ç³»ç»Ÿç»´æŠ¤çš„æˆæœ¬ï¼›</p>
</li>
<li>
<p>æé«˜ç³»ç»Ÿæ‰©å±•æ€§ï¼šç”±äºä¸­ä»‹è€…å¯¹è±¡ç‹¬ç«‹è´Ÿè´£å¯¹è±¡ä¹‹é—´çš„é€šä¿¡åè°ƒï¼Œå› æ­¤å¢åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡éƒ½ä¸ä¼šå½±å“å…¶ä»–å¯¹è±¡çš„äº¤äº’å…³ç³»ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚</p>
</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>
<p>ä¸­ä»‹è€…å¯¹è±¡ä¼šå¼•å…¥ç³»ç»Ÿçš„å¤æ‚åº¦ï¼šè™½ç„¶ä¸­ä»‹è€…å¯¹è±¡å¯ä»¥ç®€åŒ–ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œä½†å¦‚æœä¸­ä»‹è€…å¯¹è±¡æœ¬èº«è¿‡äºå¤æ‚ï¼Œå¯èƒ½ä¼šå¼•å…¥æ–°çš„å¤æ‚åº¦ï¼›</p>
</li>
<li>
<p>ä¸­ä»‹è€…å¯¹è±¡å¯èƒ½æˆä¸ºç³»ç»Ÿçš„<strong>ç“¶é¢ˆ</strong>ï¼šç”±äºæ‰€æœ‰çš„äº¤äº’éƒ½è¦ç»è¿‡ä¸­ä»‹è€…å¯¹è±¡ï¼Œå½“ç³»ç»Ÿä¸­å¯¹è±¡æ•°é‡è¾ƒå¤šæˆ–äº¤äº’å¤æ‚æ—¶ï¼Œä¸­ä»‹è€…å¯¹è±¡å¯èƒ½æˆä¸ºç³»ç»Ÿçš„ç“¶é¢ˆã€‚</p>
</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/mediator/mediator-2x.png" type="image/png"/>
    </item>
    <item>
      <title>å¤‡å¿˜å½•</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/memento.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/memento.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å¤‡å¿˜å½•</source>
      <description>mementomemento</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Mon, 01 May 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/memento/memento-zh-2x.png" alt="memento" tabindex="0" loading="lazy"><figcaption>memento</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯å¤‡å¿˜å½•æ¨¡å¼</h2>
<p>å¤‡å¿˜å½•æ¨¡å¼(Memento Pattern)å…è®¸åœ¨ä¸æš´éœ²å¯¹è±¡å®ç°ç»†èŠ‚çš„æƒ…å†µä¸‹ä¿å­˜å’Œæ¢å¤å¯¹è±¡ä¹‹å‰çš„çŠ¶æ€ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>memento</figcaption></figure>
<ul>
<li>
<p>Originator: åŸå‘å™¨</p>
<p>ç”¨äºç”Ÿæˆè‡ªèº«çŠ¶æ€çš„å¿«ç…§ï¼Œåœ¨éœ€è¦æ—¶å¯ä»¥é€šè¿‡å¿«ç…§æ¢å¤è‡ªèº«çŠ¶æ€</p>
</li>
<li>
<p>Memento: å¤‡å¿˜å½•</p>
<p>åŸå‘å™¨çŠ¶æ€å¿«ç…§ï¼Œé€šå¸¸å°†å¤‡å¿˜å½•è®¾ç½®ä¸ºä¸å¯å˜çš„ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ„é€ å‡½æ•°ä¸€æ¬¡æ€§ä¼ é€’æ•°æ®</p>
</li>
<li>
<p>Caretaker: è´Ÿè´£äºº</p>
<p>å­˜å‚¨å¤‡å¿˜å½•çš„å†å²è®°å½•</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> memento

<span class="token keyword">type</span> Originator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	state <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewOriginator</span><span class="token punctuation">(</span>value <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Originator <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Originator<span class="token punctuation">{</span>state<span class="token punctuation">:</span> value<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>o <span class="token operator">*</span>Originator<span class="token punctuation">)</span> <span class="token function">ChangeState</span><span class="token punctuation">(</span>value <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	o<span class="token punctuation">.</span>state <span class="token operator">=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>o <span class="token operator">*</span>Originator<span class="token punctuation">)</span> <span class="token function">Save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Memento <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">NewMemento</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>state<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>o <span class="token operator">*</span>Originator<span class="token punctuation">)</span> <span class="token function">Restore</span><span class="token punctuation">(</span>memento Memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	o<span class="token punctuation">.</span>state <span class="token operator">=</span> memento<span class="token punctuation">.</span><span class="token function">GetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Memento <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	state <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewMemento</span><span class="token punctuation">(</span>state <span class="token builtin">string</span><span class="token punctuation">)</span> Memento <span class="token punctuation">{</span>
	<span class="token keyword">return</span> Memento<span class="token punctuation">{</span>state<span class="token punctuation">:</span> state<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m Memento<span class="token punctuation">)</span> <span class="token function">GetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> m<span class="token punctuation">.</span>state
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Caretaker <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	history <span class="token punctuation">[</span><span class="token punctuation">]</span>Memento
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Caretaker<span class="token punctuation">)</span> <span class="token function">AddMemento</span><span class="token punctuation">(</span>memento Memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>history <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>history<span class="token punctuation">,</span> memento<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Caretaker<span class="token punctuation">)</span> <span class="token function">GetMemento</span><span class="token punctuation">(</span>index <span class="token builtin">int</span><span class="token punctuation">)</span> Memento <span class="token punctuation">{</span>
	<span class="token keyword">return</span> c<span class="token punctuation">.</span>history<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> memento

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">ExampleMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	caretaker <span class="token operator">:=</span> Caretaker<span class="token punctuation">{</span>history<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>Memento<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
	originator <span class="token operator">:=</span> <span class="token function">NewOriginator</span><span class="token punctuation">(</span><span class="token string">"one"</span><span class="token punctuation">)</span>
	caretaker<span class="token punctuation">.</span><span class="token function">AddMemento</span><span class="token punctuation">(</span>originator<span class="token punctuation">.</span><span class="token function">Save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>originator<span class="token punctuation">.</span>state<span class="token punctuation">)</span>
	originator<span class="token punctuation">.</span><span class="token function">ChangeState</span><span class="token punctuation">(</span><span class="token string">"two"</span><span class="token punctuation">)</span>
	caretaker<span class="token punctuation">.</span><span class="token function">AddMemento</span><span class="token punctuation">(</span>originator<span class="token punctuation">.</span><span class="token function">Save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>originator<span class="token punctuation">.</span>state<span class="token punctuation">)</span>
	originator<span class="token punctuation">.</span><span class="token function">ChangeState</span><span class="token punctuation">(</span><span class="token string">"three"</span><span class="token punctuation">)</span>
	caretaker<span class="token punctuation">.</span><span class="token function">AddMemento</span><span class="token punctuation">(</span>originator<span class="token punctuation">.</span><span class="token function">Save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>originator<span class="token punctuation">.</span>state<span class="token punctuation">)</span>
	originator<span class="token punctuation">.</span><span class="token function">Restore</span><span class="token punctuation">(</span>caretaker<span class="token punctuation">.</span><span class="token function">GetMemento</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>originator<span class="token punctuation">.</span>state<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// one</span>
	<span class="token comment">// two</span>
	<span class="token comment">// three</span>
	<span class="token comment">// two</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>å¯ä»¥åœ¨ä¸ç ´åå¯¹è±¡å°è£…æ€§çš„å‰æä¸‹æ•è·å¹¶å­˜å‚¨å¯¹è±¡çš„çŠ¶æ€ï¼›</li>
<li>ç®€åŒ–äº†å¯¹è±¡åœ¨ä¸åŒçŠ¶æ€ä¹‹é—´çš„åˆ‡æ¢è¿‡ç¨‹ï¼Œé¿å…äº†å¤§é‡çš„ if-else è¯­å¥ï¼›</li>
<li>åŸå‘å™¨å’Œè´Ÿè´£äººä¹‹é—´çš„è§£è€¦ï¼ŒåŸå‘å™¨åªéœ€è¦çŸ¥é“å¦‚ä½•åˆ›å»ºå¤‡å¿˜å½•å’Œæ¢å¤å¤‡å¿˜å½•å³å¯ï¼Œè€Œè´Ÿè´£äººåˆ™è´Ÿè´£ä¿å­˜å¤‡å¿˜å½•ã€‚</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>ä½¿ç”¨å¤‡å¿˜å½•ä¼šå ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ï¼›</li>
<li>å½“åŸå‘å™¨çš„çŠ¶æ€æ”¹å˜å¾ˆé¢‘ç¹æ—¶ï¼Œå¤‡å¿˜å½•å¯¹è±¡çš„æ•°é‡ä¼šå¾ˆå¤§ï¼Œä¼šå ç”¨è¾ƒå¤§çš„å†…å­˜ç©ºé—´ï¼›</li>
<li>å¦‚æœåŸå‘å™¨éœ€è¦ä¿å­˜çš„çŠ¶æ€å¾ˆå¤šï¼Œé‚£ä¹ˆå¤‡å¿˜å½•å¯¹è±¡çš„åˆ›å»ºå’Œæ¢å¤æ“ä½œå°±ä¼šå˜å¾—å¾ˆæ…¢ã€‚</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/memento/memento-zh-2x.png" type="image/png"/>
    </item>
    <item>
      <title>è§‚å¯Ÿè€…</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/observer.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/observer.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">è§‚å¯Ÿè€…</source>
      <description>observerobserver</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 02 May 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/observer/observer-2x.png" alt="observer" tabindex="0" loading="lazy"><figcaption>observer</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼</h2>
<p>è§‚å¯Ÿè€…æ¨¡å¼(Observer Pattern)å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å…³ç³»éƒ½ä¼šè‡ªåŠ¨å¾—åˆ°é€šçŸ¥å’Œæ›´æ–°ã€‚ç±»ä¼¼è®¢é˜…æœºåˆ¶ï¼Œå¯¹è±¡å˜åŒ–æ—¶é€šçŸ¥å¤šä¸ª<strong>è§‚å¯Ÿ</strong>è¯¥å¯¹è±¡çš„å…¶ä»–å¯¹è±¡ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>observer</figcaption></figure>
<ul>
<li>
<p>Observer: è§‚å¯Ÿè€…</p>
<p>å£°æ˜äº†é€šçŸ¥æ¥å£ï¼Œåœ¨ç»å¤§æ•°æƒ…å†µä¸‹ï¼Œè¯¥æ¥å£ä»…åŒ…å«ä¸€ä¸ª<code>update</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥æœ‰å¤šä¸ªå‚æ•°</p>
</li>
<li>
<p>Subject: ä¸»é¢˜</p>
<p>æä¾›ä¸€ä¸ªç”¨äºå­˜å‚¨è§‚å¯Ÿè€…å¯¹è±¡çš„èšé›†ç±»ï¼Œè¯¥ç±»é€šå¸¸åŒ…å«<code>æ³¨å†Œ</code>å’Œ<code>å–æ¶ˆæ³¨å†Œ</code>è§‚å¯Ÿè€…çš„æ–¹æ³•ï¼Œä»¥åŠé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å˜åŒ–çš„æ–¹æ³•ã€‚</p>
</li>
<li>
<p>ConcreteObserver: å…·ä½“çš„è§‚å¯Ÿè€…</p>
<p>å®ç°è§‚å¯Ÿè€…æ¥å£å®šä¹‰çš„æ–¹æ³•ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œå®ç°å¯¹è±¡å˜åŒ–æ—¶å…·ä½“çš„è¡Œä¸ºã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> observer

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Context <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Id <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Observer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Update</span><span class="token punctuation">(</span>ctx Context<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteObserver1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteObserver1<span class="token punctuation">)</span> <span class="token function">Update</span><span class="token punctuation">(</span>ctx Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concrete observer 1 update ctx:"</span><span class="token punctuation">,</span> ctx<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteObserver2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteObserver2<span class="token punctuation">)</span> <span class="token function">Update</span><span class="token punctuation">(</span>ctx Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concrete observer 2 update ctx:"</span><span class="token punctuation">,</span> ctx<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Subject <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ObserverCollection <span class="token punctuation">[</span><span class="token punctuation">]</span>Observer
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Subject<span class="token punctuation">)</span> <span class="token function">Register</span><span class="token punctuation">(</span>observer Observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s<span class="token punctuation">.</span>ObserverCollection <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>ObserverCollection<span class="token punctuation">,</span> observer<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Subject<span class="token punctuation">)</span> <span class="token function">UnRegister</span><span class="token punctuation">(</span>observer Observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>ObserverCollection<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> s<span class="token punctuation">.</span>ObserverCollection<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> observer <span class="token punctuation">{</span>
			s<span class="token punctuation">.</span>ObserverCollection <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>ObserverCollection<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>ObserverCollection<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Subject<span class="token punctuation">)</span> <span class="token function">NotifyObservers</span><span class="token punctuation">(</span>ctx Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>ObserverCollection<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		s<span class="token punctuation">.</span>ObserverCollection<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> observer

<span class="token keyword">func</span> <span class="token function">ExampleObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	ctx <span class="token operator">:=</span> Context<span class="token punctuation">{</span><span class="token string">"test"</span><span class="token punctuation">}</span>
	co1 <span class="token operator">:=</span> ConcreteObserver1<span class="token punctuation">{</span><span class="token punctuation">}</span>
	co2 <span class="token operator">:=</span> ConcreteObserver2<span class="token punctuation">{</span><span class="token punctuation">}</span>
	subject <span class="token operator">:=</span> Subject<span class="token punctuation">{</span>
		ObserverCollection<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>Observer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	subject<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span>co1<span class="token punctuation">)</span>
	subject<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span>co2<span class="token punctuation">)</span>
	subject<span class="token punctuation">.</span><span class="token function">NotifyObservers</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
	ctx<span class="token punctuation">.</span>Id <span class="token operator">=</span> <span class="token string">"other"</span>
	subject<span class="token punctuation">.</span><span class="token function">UnRegister</span><span class="token punctuation">(</span>co1<span class="token punctuation">)</span>
	subject<span class="token punctuation">.</span><span class="token function">NotifyObservers</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// concrete observer 1 update ctx: {test}</span>
	<span class="token comment">// concrete observer 2 update ctx: {test}</span>
	<span class="token comment">// concrete observer 2 update ctx: {other}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>æ¾è€¦åˆï¼šè§‚å¯Ÿè€…æ¨¡å¼ä½¿ä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´çš„ä¾èµ–å…³ç³»å˜å¾—æ¾æ•£ï¼Œè®©å®ƒä»¬å¯ä»¥ç‹¬ç«‹æ¼”åŒ–ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¸å½±å“ä¸»é¢˜çš„æƒ…å†µä¸‹ä¿®æ”¹æˆ–æ‰©å±•è§‚å¯Ÿè€…ã€‚</li>
<li>å¯é‡ç”¨æ€§ï¼šç”±äºä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´çš„å…³ç³»è¢«å°è£…åœ¨æŠ½è±¡æ¥å£ä¸­ï¼Œå› æ­¤å¯ä»¥æ–¹ä¾¿åœ°æ·»åŠ æ–°çš„è§‚å¯Ÿè€…æˆ–ä¸»é¢˜ï¼Œä»è€Œæé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
<li>é€šçŸ¥æœºåˆ¶ï¼šä¸€æ—¦ä¸»é¢˜çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œè§‚å¯Ÿè€…ä¼šè‡ªåŠ¨è¢«é€šçŸ¥ï¼Œå¹¶ä¸”å¯ä»¥åŠæ—¶æ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼Œä»è€Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>æ€§èƒ½é—®é¢˜ï¼šå¦‚æœè§‚å¯Ÿè€…è¿‡å¤šï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…ä¼šæµªè´¹å¾ˆå¤šèµ„æºï¼Œå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿè¿è¡Œç¼“æ…¢ã€‚</li>
<li>éš¾ä»¥ç†è§£ï¼šå½“æ¶‰åŠå¤šä¸ªå¯¹è±¡ä¹‹é—´çš„äº¤äº’æ—¶ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å¯èƒ½æ¯”è¾ƒéš¾ä»¥ç†è§£å’Œè°ƒè¯•</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/observer/observer-2x.png" type="image/png"/>
    </item>
    <item>
      <title>çŠ¶æ€</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/state.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/state.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">çŠ¶æ€</source>
      <description>statestate</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Thu, 04 May 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/state/state-zh-2x.png" alt="state" tabindex="0" loading="lazy"><figcaption>state</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯çŠ¶æ€æ¨¡å¼</h2>
<p>çŠ¶æ€æ¨¡å¼(State Pattern) å…è®¸å¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶æ”¹å˜å…¶è¡Œä¸ºã€‚é€šè¿‡å°†çŠ¶æ€è½¬æ¢ä»£ç ä»ä¸»é€»è¾‘ä¸­æŠ½ç¦»å¹¶å°è£…åœ¨çŠ¶æ€å¯¹è±¡ä¸­ï¼Œä½¿å¾—å¯¹è±¡èƒ½å¤Ÿåœ¨è¡Œä¸ºä¸Šè¿›è¡Œæ›´çµæ´»çš„å˜åŒ–ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>state</figcaption></figure>
<ul>
<li>
<p>Context: ä¸Šä¸‹æ–‡</p>
<p>å®ƒæ˜¯åŒ…å«çŠ¶æ€çš„ä¸»å¯¹è±¡ã€‚å®ƒè¿˜åŒ…å«ä¸€äº›ç”¨äºåœ¨çŠ¶æ€ä¹‹é—´åˆ‡æ¢çš„æ–¹æ³•ã€‚</p>
</li>
<li>
<p>State: çŠ¶æ€</p>
<p>å®ƒå®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç”¨äºå°è£…ä¸ä¸Šä¸‹æ–‡çš„ç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºã€‚</p>
</li>
<li>
<p>ConcreteStates: å…·ä½“çŠ¶æ€ç±»</p>
<p>å®ç°Stateæ¥å£ï¼Œæ¯ä¸ªå…·ä½“çŠ¶æ€éƒ½æä¾›å„è‡ªçš„å®ç°æ–¹å¼ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> state

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Context <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	state State
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token function">ChangeState</span><span class="token punctuation">(</span>state State<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>state <span class="token operator">=</span> state
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>state<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>state<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>state<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> State <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Start</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span>
	<span class="token function">Stop</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span>
	<span class="token function">Run</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> StartState <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>StartState<span class="token punctuation">)</span> <span class="token function">Start</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"already start"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>StartState<span class="token punctuation">)</span> <span class="token function">Stop</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"change start state to stop"</span><span class="token punctuation">)</span>
	ctx<span class="token punctuation">.</span><span class="token function">ChangeState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>StopState<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>StartState<span class="token punctuation">)</span> <span class="token function">Run</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"change start state to run"</span><span class="token punctuation">)</span>
	ctx<span class="token punctuation">.</span><span class="token function">ChangeState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>RunState<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> StopState <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>StopState<span class="token punctuation">)</span> <span class="token function">Start</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"change stop state to start"</span><span class="token punctuation">)</span>
	ctx<span class="token punctuation">.</span><span class="token function">ChangeState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>StartState<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>StopState<span class="token punctuation">)</span> <span class="token function">Stop</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"already stop"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>StopState<span class="token punctuation">)</span> <span class="token function">Run</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"can't change stop state to run"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> RunState <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>RunState<span class="token punctuation">)</span> <span class="token function">Start</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"can't change run state to start"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>RunState<span class="token punctuation">)</span> <span class="token function">Stop</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"change run state to stop"</span><span class="token punctuation">)</span>
	ctx<span class="token punctuation">.</span><span class="token function">ChangeState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>StopState<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>RunState<span class="token punctuation">)</span> <span class="token function">Run</span><span class="token punctuation">(</span>ctx <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"already run"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> state

<span class="token keyword">func</span> <span class="token function">ExampleState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	start <span class="token operator">:=</span> <span class="token operator">&amp;</span>StartState<span class="token punctuation">{</span><span class="token punctuation">}</span>
	context <span class="token operator">:=</span> Context<span class="token punctuation">{</span>state<span class="token punctuation">:</span> start<span class="token punctuation">}</span>
	context<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	context<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	context<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	context<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// already start</span>
	<span class="token comment">// change start state to run</span>
	<span class="token comment">// change run state to stop</span>
	<span class="token comment">// can't change stop state to run</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>å°†çŠ¶æ€æŠ½è±¡æˆå¯¹è±¡ï¼Œä½¿å¾—çŠ¶æ€ä¹‹é—´çš„è½¬æ¢æ›´åŠ æ¸…æ™°æ˜äº†ã€‚é€šè¿‡å°†æ¯ç§çŠ¶æ€å°è£…æˆå…·ä½“çš„ç±»ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ ç®€å•æ˜“æ‡‚ï¼Œé¿å…äº†çŠ¶æ€è½¬æ¢æ—¶å¤§é‡çš„æ¡ä»¶åˆ¤æ–­ã€‚</li>
<li>çŠ¶æ€ä¹‹é—´çš„è½¬æ¢å˜å¾—å®¹æ˜“æ‰©å±•ã€‚ç”±äºçŠ¶æ€ä¹‹é—´çš„è½¬æ¢æ˜¯ç”±çŠ¶æ€å¯¹è±¡è‡ªèº«å®Œæˆçš„ï¼Œå› æ­¤åªéœ€è¦å¢åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤å¯¹åº”çš„çŠ¶æ€ç±»å³å¯æ‰©å±•æˆ–ä¿®æ”¹çŠ¶æ€è½¬æ¢ï¼Œè€Œä¸å½±å“å…¶ä»–éƒ¨åˆ†ã€‚</li>
<li>æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œçµæ´»æ€§ã€‚ç”±äºæ¯ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­é‡å¤ä½¿ç”¨ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥å®ç°æ›´å¤šçš„ç»„åˆæ–¹å¼ï¼Œä»è€Œæé«˜ä»£ç çš„å¤ç”¨æ€§å’Œçµæ´»æ€§ã€‚</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>
<p>å¯¹äºç®€å•çš„çŠ¶æ€æœºï¼Œå¼•å…¥çŠ¶æ€æ¨¡å¼ä¼šå¢åŠ é¢å¤–çš„å¤æ‚åº¦ã€‚å¦‚æœçŠ¶æ€æœºåªæœ‰å‡ ä¸ªçŠ¶æ€ï¼Œé‚£ä¹ˆå¼•å…¥çŠ¶æ€æ¨¡å¼å¯èƒ½ä¼šè®©ä»£ç æ›´åŠ å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</p>
</li>
<li>
<p>å¢åŠ äº†ç³»ç»Ÿçš„ç±»å’Œå¯¹è±¡æ•°é‡ã€‚å¼•å…¥çŠ¶æ€æ¨¡å¼ä¼šå¢åŠ é¢å¤–çš„ç±»å’Œå¯¹è±¡ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦å’Œå¼€é”€ã€‚</p>
</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/state/state-zh-2x.png" type="image/png"/>
    </item>
    <item>
      <title>ç­–ç•¥</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/strategy.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/strategy.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç­–ç•¥</source>
      <description>strategystrategy</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 13 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/strategy/strategy-2x.png" alt="strategy" tabindex="0" loading="lazy"><figcaption>strategy</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼</h2>
<p>ç­–ç•¥æ¨¡å¼(Strategy Pattern)å®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©ä»–ä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚ç­–ç•¥æ¨¡å¼å±äºå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼Œå®ƒé€šè¿‡å¯¹ç®—æ³•è¿›è¡Œå°è£…ï¼ŒæŠŠä½¿ç”¨ç®—æ³•çš„è´£ä»»å’Œç®—æ³•çš„å®ç°åˆ†å‰²å¼€æ¥ï¼Œå¹¶å§”æ´¾ç»™ä¸åŒçš„å¯¹è±¡å¯¹è¿™äº›ç®—æ³•è¿›è¡Œç®¡ç†ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>strategy</figcaption></figure>
<ul>
<li>
<p>Strategy: ç­–ç•¥æ¥å£</p>
<p>æ˜¯æ‰€æœ‰å…·ä½“ç­–ç•¥çš„é€šç”¨æ¥å£ï¼Œå®ƒå£°æ˜äº†ä¸€ä¸ªä¸Šä¸‹æ–‡ç”¨äºæ‰§è¡Œç­–ç•¥çš„æ–¹æ³•</p>
</li>
<li>
<p>Concrete Strategies: å…·ä½“ç­–ç•¥ï¼Œå®ç°äº†ä¸Šä¸‹æ–‡æ‰€ç”¨ç®—æ³•çš„å„ç§ä¸åŒå˜ä½“ï¼›</p>
</li>
<li>
<p>Context: ä¸Šä¸‹æ–‡ï¼Œç»´æŠ¤æŒ‡å‘å…·ä½“ç­–ç•¥çš„å¼•ç”¨ï¼Œä¸”ä»…é€šè¿‡ç­–ç•¥æ¥å£ä¸è¯¥å¯¹è±¡è¿›è¡Œäº¤æµï¼›</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> strategy

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Strategy <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteStrategy1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s ConcreteStrategy1<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concrete strategy1 execute"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteStrategy2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s ConcreteStrategy2<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concrete strategy2 execute"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Context <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	strategy Strategy
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token function">SetStrategy</span><span class="token punctuation">(</span>strategy Strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Context<span class="token punctuation">)</span> <span class="token function">Do</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"do something"</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>strategy<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> strategy

<span class="token keyword">func</span> <span class="token function">ExampleStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c <span class="token operator">:=</span> Context<span class="token punctuation">{</span><span class="token punctuation">}</span>
	s1 <span class="token operator">:=</span> ConcreteStrategy1<span class="token punctuation">{</span><span class="token punctuation">}</span>
	c<span class="token punctuation">.</span><span class="token function">SetStrategy</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
	c<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	s2 <span class="token operator">:=</span> ConcreteStrategy2<span class="token punctuation">{</span><span class="token punctuation">}</span>
	c<span class="token punctuation">.</span><span class="token function">SetStrategy</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
	c<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// do something</span>
	<span class="token comment">// concrete strategy1 execute</span>
	<span class="token comment">// do something</span>
	<span class="token comment">// concrete strategy2 execute</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>å¯ä»¥åœ¨è¿è¡Œæ—¶åˆ‡æ¢å¯¹è±¡å†…çš„ç®—æ³•ã€‚</li>
<li>å¯ä»¥å°†ç®—æ³•çš„å®ç°å’Œä½¿ç”¨ç®—æ³•çš„ä»£ç éš”ç¦»å¼€æ¥ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨ç»„åˆæ¥ä»£æ›¿ç»§æ‰¿ã€‚</li>
<li>å¼€é—­åŸåˆ™ï¼Œæ— éœ€å¯¹ä¸Šä¸‹æ–‡è¿›è¡Œä¿®æ”¹å°±èƒ½å¤Ÿå¼•å…¥æ–°çš„ç­–ç•¥ã€‚</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>å¦‚æœä½ çš„ç®—æ³•æå°‘å‘ç”Ÿæ”¹å˜ï¼Œ é‚£ä¹ˆæ²¡æœ‰ä»»ä½•ç†ç”±å¼•å…¥æ–°çš„ç±»å’Œæ¥å£ã€‚ ä½¿ç”¨è¯¥æ¨¡å¼åªä¼šè®©ç¨‹åºè¿‡äºå¤æ‚ã€‚</li>
<li>å®¢æˆ·ç«¯å¿…é¡»çŸ¥æ™“ç­–ç•¥é—´çš„ä¸åŒâ€”â€”å®ƒéœ€è¦é€‰æ‹©åˆé€‚çš„ç­–ç•¥ã€‚</li>
<li>è®¸å¤šç°ä»£ç¼–ç¨‹è¯­è¨€æ”¯æŒå‡½æ•°ç±»å‹åŠŸèƒ½ï¼Œ å…è®¸ä½ åœ¨ä¸€ç»„åŒ¿åå‡½æ•°ä¸­å®ç°ä¸åŒç‰ˆæœ¬çš„ç®—æ³•ã€‚ è¿™æ ·ï¼Œ ä½ ä½¿ç”¨è¿™äº›å‡½æ•°çš„æ–¹å¼å°±å’Œä½¿ç”¨ç­–ç•¥å¯¹è±¡æ—¶å®Œå…¨ç›¸åŒï¼Œ æ— éœ€å€ŸåŠ©é¢å¤–çš„ç±»å’Œæ¥å£æ¥ä¿æŒä»£ç ç®€æ´ã€‚</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/strategy/strategy-2x.png" type="image/png"/>
    </item>
    <item>
      <title>æ¨¡ç‰ˆæ–¹æ³•</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/template-method.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/template-method.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">æ¨¡ç‰ˆæ–¹æ³•</source>
      <description>template-methodtemplate-method</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sun, 11 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/template-method/template-method-2x.png" alt="template-method" tabindex="0" loading="lazy"><figcaption>template-method</figcaption></figure>
<!-- more -->
<h2>åœºæ™¯é—®é¢˜</h2>
<p>ä¾‹å¦‚ï¼šå‡è®¾å¼€å‘ä¸€ä¸ªæ–‡æ¡£çš„æ•°æ®æŒ–å±€ç¨‹åºï¼Œè¾“å…¥å„ç§æ ¼å¼çš„æ–‡æ¡£ï¼ˆPDFã€DOCã€CSVã€...ï¼‰ï¼Œç¨‹åºä»è¿™äº›æ–‡æ¡£ä¸­æå–æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œè¿›è¡Œå¤„ç†å’Œåˆ†æï¼Œå¹¶è¿”å›ç»™ç”¨æˆ·ã€‚éšç€å¼€å‘è¿›è¡Œï¼Œå®ç°ä¸‰ä¸ªç±»åˆ†åˆ«æ˜¯ï¼šPDFDataMinerã€DOCDataMinerã€CSVDataMinerï¼Œå®ƒä»¬éƒ½æœ‰ç›¸ä¼¼çš„å¤„ç†é€»è¾‘ï¼šæ‰“å¼€æ–‡ä»¶ã€æå–æ•°æ®ã€è½¬æ¢æ•°æ®ã€åˆ†ææ•°æ®ã€å‘é€æŠ¥å‘Šã€‚å…¶ä¸­ï¼šåˆ†ææ•°æ®å’Œå‘é€æŠ¥å‘Šæ¨¡å—å®Œå…¨ä¸€è‡´ã€‚
é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼å°†æ­¥éª¤è¿›è¡ŒæŠ½è±¡ï¼Œå¹¶æä¾›æ­¥éª¤çš„é»˜è®¤å®ç°ï¼Œæ”¯æŒé‡å†™ã€‚</p>
<h2>ä»€ä¹ˆæ˜¯æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼</h2>
<p>æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ï¼ˆTemplate Method Patternï¼‰ï¼Œå°†æ€»ç»“å‡ºæ¥çš„è§„å¾‹æ²‰æ·€ä¸ºä¸€ç§æ—¢å®šæ ¼å¼ï¼Œå¹¶å›ºåŒ–äºæ¨¡ç‰ˆä¸­ä»¥ä¾›å­ç±»ç»§æ‰¿ï¼Œå¯¹æœªç¡®å®šä¸‹æ¥çš„æ­¥éª¤æ–¹æ³•è¿›è¡ŒæŠ½è±¡åŒ–ï¼Œä½¿å…¶å¾—ä»¥å»¶ç»­ã€å¤šæ€åŒ–ï¼Œæœ€ç»ˆæ¶æ„èµ·ä¸€ä¸ªå¹³å°ï¼Œä½¿ç³»ç»Ÿå®ç°åœ¨ä¸æ”¹å˜é¢„è®¾è§„åˆ™çš„å‰æä¸‹ï¼Œå¯¹æ¯ä¸ªåˆ†æ­¥éª¤è¿›è¡Œä¸ªæ€§åŒ–å®šä¹‰çš„ç›®çš„ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>template-method</figcaption></figure>
<ul>
<li>
<p>AbstractClass: æŠ½è±¡ç±»</p>
<p>è´Ÿè´£ç»™å‡ºä¸€ä¸ªç®—æ³•çš„è½®å»“å’Œéª¨æ¶ã€‚å®ƒç”±ä¸€ä¸ªæ¨¡ç‰ˆæ–¹æ³•å’Œè‹¥å¹²ä¸ªåŸºæœ¬æ–¹æ³•æ„æˆ</p>
</li>
<li>
<p>ConCreteClass: å…·ä½“å®ç°ç±»</p>
<p>å¤ç”¨æŠ½è±¡ç±»çš„æ–¹æ³•ï¼Œæˆ–è€…é‡å†™ç›¸å…³æ–¹æ³•ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<p>ç”±äºGoè¯­è¨€æ²¡æœ‰æŠ½è±¡ç±»è¿™ä¸€æ¦‚å¿µï¼Œæˆ‘ä»¬ä½¿ç”¨æ¥å£å®ç°ã€‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> templatemethod

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Templater <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Template</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Implement <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">step1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">step2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">step3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Abstract <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Implement
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">newAbstract</span><span class="token punctuation">(</span>impl Implement<span class="token punctuation">)</span> <span class="token operator">*</span>Abstract <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Abstract<span class="token punctuation">{</span>Implement<span class="token punctuation">:</span> impl<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t <span class="token operator">*</span>Abstract<span class="token punctuation">)</span> <span class="token function">Template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	t<span class="token punctuation">.</span>Implement<span class="token punctuation">.</span><span class="token function">step1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	t<span class="token punctuation">.</span>Implement<span class="token punctuation">.</span><span class="token function">step2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	t<span class="token punctuation">.</span>Implement<span class="token punctuation">.</span><span class="token function">step3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t <span class="token operator">*</span>Abstract<span class="token punctuation">)</span> <span class="token function">step2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"default step2"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Concreate1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token operator">*</span>Abstract
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewConcreate1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Templater <span class="token punctuation">{</span>
	c <span class="token operator">:=</span> <span class="token operator">&amp;</span>Concreate1<span class="token punctuation">{</span><span class="token punctuation">}</span>
	a <span class="token operator">:=</span> <span class="token function">newAbstract</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>Abstract <span class="token operator">=</span> a
	<span class="token keyword">return</span> c
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>Concreate1<span class="token punctuation">)</span> <span class="token function">step1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concreate1 step1"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>Concreate1<span class="token punctuation">)</span> <span class="token function">step2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concreate1 step2"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>Concreate1<span class="token punctuation">)</span> <span class="token function">step3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concreate1 step3"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Concreate2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token operator">*</span>Abstract
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewConcreate2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Templater <span class="token punctuation">{</span>
	c <span class="token operator">:=</span> <span class="token operator">&amp;</span>Concreate2<span class="token punctuation">{</span><span class="token punctuation">}</span>
	a <span class="token operator">:=</span> <span class="token function">newAbstract</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>Abstract <span class="token operator">=</span> a
	<span class="token keyword">return</span> c
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>Concreate2<span class="token punctuation">)</span> <span class="token function">step1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concreate2 step1"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>Concreate2<span class="token punctuation">)</span> <span class="token function">step3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concreate2 step3"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> t Templater
	t <span class="token operator">=</span> <span class="token function">NewConcreate1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	t<span class="token punctuation">.</span><span class="token function">Template</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	t <span class="token operator">=</span> <span class="token function">NewConcreate2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	t<span class="token punctuation">.</span><span class="token function">Template</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// concreate1 step1</span>
	<span class="token comment">// concreate1 step2</span>
	<span class="token comment">// concreate1 step3</span>
	<span class="token comment">// concreate2 step1</span>
	<span class="token comment">// default step2</span>
	<span class="token comment">// concreate2 step3</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶ä¸­concreate2å¹¶æœªå®ç°step2()ï¼Œè€Œæ˜¯ä½¿ç”¨äº†é»˜è®¤çš„step2()</p>
<h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>å…è®¸å®¢æˆ·ç«¯é‡å†™ä¸€ä¸ªå¤§å‹ç®—æ³•ä¸­çš„ç‰¹å®šéƒ¨åˆ†ï¼Œä½¿å¾—ç®—æ³•å…¶ä»–éƒ¨åˆ†ä¿®æ”¹å¯¹å…¶æ‰€é€ æˆçš„å½±å“è¾ƒå°ã€‚</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>éƒ¨åˆ†å®¢æˆ·ç«¯å¯èƒ½å—åˆ°ç®—æ³•æ¡†æ¶çš„é™åˆ¶</li>
<li>é€šè¿‡å­ç±»ä¸€ç›´é»˜è®¤æ­¥éª¤å®ç°å¯èƒ½ä¼šå¯¼è‡´è¿åé‡Œæ°æ›¿æ¢åŸåˆ™</li>
<li>æ¨¡ç‰ˆæ–¹æ³•ä¸­çš„æ­¥éª¤è¶Šå¤šï¼Œå…¶ç»´æŠ¤å·¥ä½œå°±å¯èƒ½ä¼šè¶Šå›°éš¾</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/template-method/template-method-2x.png" type="image/png"/>
    </item>
    <item>
      <title>è®¿é—®è€…</title>
      <link>http://blog.cjhe.top/design-pattern/behavioral/visitor.html</link>
      <guid>http://blog.cjhe.top/design-pattern/behavioral/visitor.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">è®¿é—®è€…</source>
      <description>visitorvisitor</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Fri, 05 May 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/visitor/visitor-2x.png" alt="visitor" tabindex="0" loading="lazy"><figcaption>visitor</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯è®¿é—®è€…æ¨¡å¼</h2>
<p>è®¿é—®è€…æ¨¡å¼(Visitor Pattern)å°†ç®—æ³•ä¸å¯¹è±¡ç»“æ„åˆ†ç¦»å¼€æ¥ï¼Œå¹¶åœ¨ç»“æ„ä¸­å¢åŠ å¯æ“ä½œå…ƒç´ çš„èƒ½åŠ›ã€‚å…¶ä¸»è¦æ€æƒ³æ˜¯åœ¨ä¸æ”¹å˜å·²æœ‰ç±»çš„å‰æä¸‹ï¼Œé€šè¿‡å¢åŠ è®¿é—®è€…ç±»ï¼Œæ¥ç»™å·²æœ‰ç±»å¢åŠ æ–°çš„æ“ä½œæ–¹æ³•ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>visitor</figcaption></figure>
<ul>
<li>
<p>Visitor: è®¿é—®è€…</p>
<p>å£°æ˜äº†ä¸€äº›åˆ—ä»¥å¯¹è±¡ç»“æ„çš„å…·ä½“å…ƒç´ ä¸ºå‚æ•°çš„è®¿é—®è€…æ–¹æ³•</p>
</li>
<li>
<p>ConCreteVistors: å…·ä½“è®¿é—®è€…</p>
<p>ä¸åŒçš„å…·ä½“è®¿é—®è€…å®ç°è®¿é—®å…ƒç´ å¯¹è±¡å„ä¸ç›¸åŒ</p>
</li>
<li>
<p>Element: å…ƒç´ </p>
<p>å£°æ˜äº†ä¸€ä¸ªæ–¹æ³•æ¥æ¥æ”¶è®¿é—®è€…</p>
</li>
<li>
<p>ConcreteElement: å…·ä½“å…ƒç´ </p>
<p>å…·ä½“å…ƒç´ å®ç°æ¥æ”¶æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ ¹æ®å½“å‰è®¿é—®è€…ç±»è°ƒç”¨ç›¸åº”è®¿é—®è€…æ–¹æ³•ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> visitor

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Visitor <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">VisitConcreteElementA</span><span class="token punctuation">(</span>element <span class="token operator">*</span>ConcreteElementA<span class="token punctuation">)</span>
	<span class="token function">VisitConcreteElementB</span><span class="token punctuation">(</span>element <span class="token operator">*</span>ConcreteElementB<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteVisitor <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreteVisitor<span class="token punctuation">)</span> <span class="token function">VisitConcreteElementA</span><span class="token punctuation">(</span>element <span class="token operator">*</span>ConcreteElementA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Visit ConcreteElementA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreteVisitor<span class="token punctuation">)</span> <span class="token function">VisitConcreteElementB</span><span class="token punctuation">(</span>element <span class="token operator">*</span>ConcreteElementB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Visit ConcreteElementB"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Element <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Accept</span><span class="token punctuation">(</span>visitor Visitor<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteElementA <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreteElementA<span class="token punctuation">)</span> <span class="token function">Accept</span><span class="token punctuation">(</span>visitor Visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	visitor<span class="token punctuation">.</span><span class="token function">VisitConcreteElementA</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteElementB <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>ConcreteElementB<span class="token punctuation">)</span> <span class="token function">Accept</span><span class="token punctuation">(</span>visitor Visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	visitor<span class="token punctuation">.</span><span class="token function">VisitConcreteElementB</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> visitor

<span class="token keyword">func</span> <span class="token function">ExampleVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	visitor <span class="token operator">:=</span> <span class="token operator">&amp;</span>ConcreteVisitor<span class="token punctuation">{</span><span class="token punctuation">}</span>
	elementA <span class="token operator">:=</span> <span class="token operator">&amp;</span>ConcreteElementA<span class="token punctuation">{</span><span class="token punctuation">}</span>
	elementB <span class="token operator">:=</span> <span class="token operator">&amp;</span>ConcreteElementB<span class="token punctuation">{</span><span class="token punctuation">}</span>
	elementA<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span>
	elementB<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// Visit ConcreteElementA</span>
	<span class="token comment">// Visit ConcreteElementB</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>åº”ç”¨åœºæ™¯</h2>
<ul>
<li>å½“å¯¹è±¡ç»“æ„æ¯”è¾ƒç¨³å®šï¼Œä½†éœ€è¦ç»å¸¸å®šä¹‰æ–°çš„æ“ä½œæ—¶ï¼Œè®¿é—®è€…æ¨¡å¼å¯ä»¥ä½¿ç”¨ã€‚</li>
<li>å½“ä¸€ç»„å¯¹è±¡ä¸­ï¼Œéœ€è¦æ‰§è¡Œä¸åŒçš„ã€å¤æ‚çš„æ“ä½œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨è®¿é—®è€…æ¨¡å¼æ¥å°è£…è¿™äº›æ“ä½œï¼Œä»¥ç®€åŒ–ä»£ç é€»è¾‘ã€‚</li>
</ul>
<h3>åœ¨ä¸ä¿®æ”¹å·²æœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå‘å·²æœ‰ç±»å±‚æ¬¡ç»“æ„å¢åŠ æ–°çš„è¡Œä¸º</h3>
<p>å‡å¦‚å½“å‰å·²æœ‰ä¸‰ç§ç¨³å®šå›¾å½¢ç±»ï¼šæ­£æ–¹å½¢ã€åœ†å½¢ã€ä¸‰è§’å½¢ã€‚å½“å‰éœ€æ±‚æ˜¯è·å–è¿™ä¸‰ç§å›¾å½¢çš„é¢ç§¯å’Œå‘¨é•¿ï¼Œä¸”æœªæ¥å¯èƒ½æœ‰å…¶ä»–çš„è¡Œä¸ºæ“ä½œã€‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> visitor

<span class="token keyword">import</span> <span class="token string">"math"</span>

<span class="token keyword">type</span> Shape <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Accept</span><span class="token punctuation">(</span>visitor CalculateVisitor<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> CalculateVisitor <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">VisitSquare</span><span class="token punctuation">(</span>s <span class="token operator">*</span>Square<span class="token punctuation">)</span>
	<span class="token function">VisitRectangle</span><span class="token punctuation">(</span>r <span class="token operator">*</span>Rectangle<span class="token punctuation">)</span>
	<span class="token function">VisitCircle</span><span class="token punctuation">(</span>c <span class="token operator">*</span>Circle<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ­£æ–¹å½¢</span>
<span class="token keyword">type</span> Square <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	SideLength <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Square<span class="token punctuation">)</span> <span class="token function">Accept</span><span class="token punctuation">(</span>visitor CalculateVisitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	visitor<span class="token punctuation">.</span><span class="token function">VisitSquare</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// é•¿æ–¹å½¢</span>
<span class="token keyword">type</span> Rectangle <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Width  <span class="token builtin">float64</span>
	Height <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>Rectangle<span class="token punctuation">)</span> <span class="token function">Accept</span><span class="token punctuation">(</span>visitor CalculateVisitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	visitor<span class="token punctuation">.</span><span class="token function">VisitRectangle</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// åœ†å½¢</span>
<span class="token keyword">type</span> Circle <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Radius <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Circle<span class="token punctuation">)</span> <span class="token function">Accept</span><span class="token punctuation">(</span>visitor CalculateVisitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	visitor<span class="token punctuation">.</span><span class="token function">VisitCircle</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// é¢ç§¯è®¿é—®è€…</span>
<span class="token keyword">type</span> AreaVisitor <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Area <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>av <span class="token operator">*</span>AreaVisitor<span class="token punctuation">)</span> <span class="token function">VisitSquare</span><span class="token punctuation">(</span>s <span class="token operator">*</span>Square<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	av<span class="token punctuation">.</span>Area <span class="token operator">=</span> s<span class="token punctuation">.</span>SideLength <span class="token operator">*</span> s<span class="token punctuation">.</span>SideLength
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>av <span class="token operator">*</span>AreaVisitor<span class="token punctuation">)</span> <span class="token function">VisitRectangle</span><span class="token punctuation">(</span>r <span class="token operator">*</span>Rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	av<span class="token punctuation">.</span>Area <span class="token operator">=</span> r<span class="token punctuation">.</span>Width <span class="token operator">*</span> r<span class="token punctuation">.</span>Height
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>av <span class="token operator">*</span>AreaVisitor<span class="token punctuation">)</span> <span class="token function">VisitCircle</span><span class="token punctuation">(</span>c <span class="token operator">*</span>Circle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	av<span class="token punctuation">.</span>Area <span class="token operator">=</span> math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> c<span class="token punctuation">.</span>Radius <span class="token operator">*</span> c<span class="token punctuation">.</span>Radius
<span class="token punctuation">}</span>

<span class="token comment">// å‘¨é•¿è®¿é—®è€…</span>
<span class="token keyword">type</span> PerimeterVisitor <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Perimeter <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>pv <span class="token operator">*</span>PerimeterVisitor<span class="token punctuation">)</span> <span class="token function">VisitSquare</span><span class="token punctuation">(</span>s <span class="token operator">*</span>Square<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	pv<span class="token punctuation">.</span>Perimeter <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> s<span class="token punctuation">.</span>SideLength
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>pv <span class="token operator">*</span>PerimeterVisitor<span class="token punctuation">)</span> <span class="token function">VisitRectangle</span><span class="token punctuation">(</span>r <span class="token operator">*</span>Rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	pv<span class="token punctuation">.</span>Perimeter <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>Width <span class="token operator">+</span> r<span class="token punctuation">.</span>Height<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>pv <span class="token operator">*</span>PerimeterVisitor<span class="token punctuation">)</span> <span class="token function">VisitCircle</span><span class="token punctuation">(</span>c <span class="token operator">*</span>Circle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	pv<span class="token punctuation">.</span>Perimeter <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> c<span class="token punctuation">.</span>Radius
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> visitor

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">ExampleShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	square <span class="token operator">:=</span> <span class="token operator">&amp;</span>Square<span class="token punctuation">{</span>SideLength<span class="token punctuation">:</span> <span class="token number">4.0</span><span class="token punctuation">}</span>
	rectangle <span class="token operator">:=</span> <span class="token operator">&amp;</span>Rectangle<span class="token punctuation">{</span>Width<span class="token punctuation">:</span> <span class="token number">3.0</span><span class="token punctuation">,</span> Height<span class="token punctuation">:</span> <span class="token number">5.0</span><span class="token punctuation">}</span>
	circle <span class="token operator">:=</span> <span class="token operator">&amp;</span>Circle<span class="token punctuation">{</span>Radius<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">}</span>

	areaVisitor <span class="token operator">:=</span> <span class="token operator">&amp;</span>AreaVisitor<span class="token punctuation">{</span><span class="token punctuation">}</span>
	square<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>areaVisitor<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"square area:"</span><span class="token punctuation">,</span> areaVisitor<span class="token punctuation">.</span>Area<span class="token punctuation">)</span>
	rectangle<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>areaVisitor<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"rectangle area:"</span><span class="token punctuation">,</span> areaVisitor<span class="token punctuation">.</span>Area<span class="token punctuation">)</span>
	circle<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>areaVisitor<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"circle area:"</span><span class="token punctuation">,</span> areaVisitor<span class="token punctuation">.</span>Area<span class="token punctuation">)</span>

	perimeterVisitor <span class="token operator">:=</span> <span class="token operator">&amp;</span>PerimeterVisitor<span class="token punctuation">{</span><span class="token punctuation">}</span>
	square<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>perimeterVisitor<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"square perimeter:"</span><span class="token punctuation">,</span> perimeterVisitor<span class="token punctuation">.</span>Perimeter<span class="token punctuation">)</span>
	rectangle<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>perimeterVisitor<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"rectangle perimeter:"</span><span class="token punctuation">,</span> perimeterVisitor<span class="token punctuation">.</span>Perimeter<span class="token punctuation">)</span>
	circle<span class="token punctuation">.</span><span class="token function">Accept</span><span class="token punctuation">(</span>perimeterVisitor<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"circle perimeter:"</span><span class="token punctuation">,</span> perimeterVisitor<span class="token punctuation">.</span>Perimeter<span class="token punctuation">)</span>

	<span class="token comment">// Output:</span>
	<span class="token comment">// square area: 16</span>
	<span class="token comment">// rectangle area: 15</span>
	<span class="token comment">// circle area: 12.566370614359172</span>
	<span class="token comment">// square perimeter: 16</span>
	<span class="token comment">// rectangle perimeter: 16</span>
	<span class="token comment">// circle perimeter: 12.566370614359172</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™é‡Œåªéœ€è¦å®ç°é¢ç§¯è®¿é—®è€…ç±»å’Œå‘¨é•¿è®¿é—®è€…ç±»å°±å¯ä»¥ä¸ç”¨åŠ¨ä¸‰ä¸ªå›¾å½¢ç±»ã€‚</p>
<h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>å¢åŠ æ–°çš„æ“ä½œæ—¶ä¸éœ€è¦æ”¹å˜ç°æœ‰çš„å¯¹è±¡ç»“æ„ï¼Œåªéœ€è¦å¢åŠ æ–°çš„è®¿é—®è€…å³å¯ã€‚</li>
<li>ç»“æ„å’Œæ“ä½œåˆ†ç¦»ï¼Œç¬¦åˆ<strong>å•ä¸€èŒè´£åŸåˆ™</strong>å’Œ<strong>å¼€é—­åŸåˆ™</strong>ï¼Œé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚</li>
<li>æŠŠæ•°æ®ç»“æ„å’Œæ“ä½œåˆ†ç¦»ï¼Œå¯ä»¥ä½¿å¾—ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>å¢åŠ æ–°çš„å…ƒç´ æ—¶æ¯”è¾ƒå›°éš¾ï¼Œéœ€è¦ä¿®æ”¹æŠ½è±¡è®¿é—®è€…çš„æ¥å£ä»¥åŠæ‰€æœ‰çš„å…·ä½“è®¿é—®è€…çš„å®ç°ã€‚</li>
<li>è®¿é—®è€…æ¨¡å¼å°†å¯¹è±¡æœ¬èº«å’Œæ“ä½œåˆ†ç¦»å¼€æ¥ï¼Œå¯¼è‡´å¢åŠ æ–°çš„æ“ä½œä¸å¤Ÿæ–¹ä¾¿ã€‚</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/visitor/visitor-2x.png" type="image/png"/>
    </item>
    <item>
      <title>å¹¶å‘æ¨¡å¼</title>
      <link>http://blog.cjhe.top/design-pattern/concurrency/</link>
      <guid>http://blog.cjhe.top/design-pattern/concurrency/</guid>
      <source url="http://blog.cjhe.top/rss.xml">å¹¶å‘æ¨¡å¼</source>
      <description>Goè¯­è¨€æ¨èCSPæ¨¡å‹è¿›è¡Œå¹¶å‘å¤„ç†ï¼Œè€Œéé€šè¿‡å…±äº«å†…å­˜ã€‚è¿™é‡Œæ€»ç»“ä¸€äº›å¹¶å‘æ¨¡å¼æˆ–è€…ç§°ä½œèŒƒå¼ï¼Œå»ç®¡ç†æ§åˆ¶åç¨‹ã€‚</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sun, 26 Feb 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>Goè¯­è¨€æ¨èCSPæ¨¡å‹è¿›è¡Œå¹¶å‘å¤„ç†ï¼Œè€Œéé€šè¿‡å…±äº«å†…å­˜ã€‚è¿™é‡Œæ€»ç»“ä¸€äº›å¹¶å‘æ¨¡å¼æˆ–è€…ç§°ä½œèŒƒå¼ï¼Œå»ç®¡ç†æ§åˆ¶åç¨‹ã€‚</p>
<!-- more -->
<h2>Goå¹¶å‘æ¨¡å¼</h2>
<p>æˆ‘ä»¬éƒ½çŸ¥é“Goè¯­è¨€å¼€å¯åç¨‹åªéœ€è¦<code>go func(){ }</code>ï¼Œæœ‰æ—¶å€™éœ€è¦ä¸goroutineä¹‹é—´å»ºç«‹è”ç³»ï¼Œæ–¹ä¾¿è¿›ä¸€æ­¥æ§åˆ¶ä¸å¤„ç†ã€‚
å› æ­¤æ€»ç»“ä¸€äº›èŒƒå¼ï¼Œä¼˜é›…çš„ç®¡ç†goroutineã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>æŠ½è±¡å·¥å‚</title>
      <link>http://blog.cjhe.top/design-pattern/creational/abstract-factory.html</link>
      <guid>http://blog.cjhe.top/design-pattern/creational/abstract-factory.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">æŠ½è±¡å·¥å‚</source>
      <description>abstract-factoryabstract-factory</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sat, 15 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/abstract-factory/abstract-factory-zh-2x.png" alt="abstract-factory" tabindex="0" loading="lazy"><figcaption>abstract-factory</figcaption></figure>
<!-- more -->
<h2>é—®é¢˜</h2>
<p>å·¥å‚æ–¹æ³•æ¨¡å¼åªè€ƒè™‘ç”Ÿäº§åŒç­‰çº§çš„äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼(Abstract Factory Pattern)å¯ç”Ÿäº§å¤šä¸ªç­‰çº§çš„äº§å“ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼ç”¨äºç”Ÿæˆ<strong>äº§å“æ—</strong>çš„å·¥å‚ï¼Œæ‰€ç”Ÿæˆçš„å¯¹è±¡æ˜¯æœ‰å…³è”çš„ï¼ŒåŒä¸€ä¸ªå…·ä½“å·¥å‚æ‰€ç”Ÿäº§çš„ä½äºä¸åŒç­‰çº§çš„ä¸€ç»„äº§å“ç§°ä¸ºä¸€ä¸ªäº§å“æ—ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ¡Œå­ã€æ¤…å­ã€æ²™å‘æ˜¯ä¸€ä¸ªäº§å“æ—</li>
<li>æ¬§æ´²ç‰Œã€äºšæ´²ç‰Œæ˜¯ä¸€ä¸ªäº§å“ç­‰çº§</li>
</ul>
<h2>è§£å†³æ–¹æ¡ˆ</h2>
<h3>è§’è‰²</h3>
<figure><figcaption>æŠ½è±¡å·¥å‚æ¨¡å¼</figcaption></figure>
<ul>
<li>
<p>Abstract Factory: æŠ½è±¡å·¥å‚</p>
<p>å®ƒå£°æ˜äº†ä¸€ç»„ç”¨äºåˆ›å»ºä¸€æ—äº§å“çš„æ–¹æ³•ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ç§äº§å“ã€‚</p>
</li>
<li>
<p>Concrete Factory: å…·ä½“å·¥å‚</p>
<p>å®ƒå®ç°äº†åœ¨æŠ½è±¡å·¥å‚ä¸­å£°æ˜çš„åˆ›å»ºäº§å“çš„æ–¹æ³•ï¼Œç”Ÿæˆä¸€ç»„å…·ä½“äº§å“ï¼Œè¿™äº›äº§å“æ„æˆäº†ä¸€ä¸ªäº§å“æ—ï¼Œæ¯ä¸€ä¸ªäº§å“éƒ½ä½äºæŸä¸ªäº§å“ç­‰çº§ç»“æ„ä¸­ã€‚</p>
</li>
<li>
<p>Abstract Product: æŠ½è±¡äº§å“</p>
<p>å®ƒä¸ºæ¯ç§äº§å“å£°æ˜æ¥å£ï¼Œåœ¨æŠ½è±¡äº§å“ä¸­å£°æ˜äº†äº§å“æ‰€å…·æœ‰çš„ä¸šåŠ¡æ–¹æ³•ã€‚</p>
</li>
<li>
<p>Product: å…·ä½“äº§å“</p>
<p>å®ƒå®šä¹‰å…·ä½“å·¥å‚ç”Ÿäº§çš„å…·ä½“äº§å“å¯¹è±¡ï¼Œå®ç°æŠ½è±¡äº§å“æ¥å£ä¸­å£°æ˜çš„ä¸šåŠ¡æ–¹æ³•ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> abstract_factory

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// æŠ½è±¡äº§å“1</span>
<span class="token keyword">type</span> Product1 <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŠ½è±¡äº§å“2</span>
<span class="token keyword">type</span> Product2 <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Use</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŠ½è±¡å·¥å‚</span>
<span class="token keyword">type</span> AbstractFactory <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">NewProduct1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product1
	<span class="token function">NewProduct2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product2
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“äº§å“11</span>
<span class="token keyword">type</span> ConcreteProduct11 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>ConcreteProduct11<span class="token punctuation">)</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Product11 show"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“äº§å“12</span>
<span class="token keyword">type</span> ConcreteProduct12 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>ConcreteProduct12<span class="token punctuation">)</span> <span class="token function">Use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Product12 use"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“å·¥å‚1</span>
<span class="token keyword">type</span> ConcreteFactory1 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ConcreteFactory1<span class="token punctuation">)</span> <span class="token function">NewProduct1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product1 <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>ConcreteProduct11<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ConcreteFactory1<span class="token punctuation">)</span> <span class="token function">NewProduct2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product2 <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>ConcreteProduct12<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“äº§å“21</span>
<span class="token keyword">type</span> ConcreteProduct21 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>ConcreteProduct21<span class="token punctuation">)</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Product21 show"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteProduct22 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>ConcreteProduct22<span class="token punctuation">)</span> <span class="token function">Use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Product22 use"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“å·¥å‚2</span>
<span class="token keyword">type</span> ConcreteFactory2 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ConcreteFactory2<span class="token punctuation">)</span> <span class="token function">NewProduct1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product1 <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>ConcreteProduct21<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ConcreteFactory2<span class="token punctuation">)</span> <span class="token function">NewProduct2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product2 <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>ConcreteProduct22<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> abstract_factory

<span class="token keyword">func</span> <span class="token function">ExampleConcreteFactory1_NewProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> factory AbstractFactory
	factory <span class="token operator">=</span> ConcreteFactory1<span class="token punctuation">{</span><span class="token punctuation">}</span>
	product1 <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">NewProduct1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	Product2 <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">NewProduct2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	product1<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	Product2<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// Product11 show</span>
	<span class="token comment">// Product12 use</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ExampleConcreteFactory2_NewProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> factory AbstractFactory
	factory <span class="token operator">=</span> ConcreteFactory2<span class="token punctuation">{</span><span class="token punctuation">}</span>
	product1 <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">NewProduct1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	product2 <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">NewProduct2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	product1<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	product2<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// Product21 show</span>
	<span class="token comment">// Product22 use</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ•ˆæœ</h2>
<h3>åº”ç”¨åœºæ™¯</h3>
<p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ï¼š</p>
<ul>
<li>ä¸€ä¸ªç³»ç»Ÿä¸åº”å½“ä¾èµ–äºäº§å“ç±»å®ä¾‹å¦‚ä½•è¢«åˆ›å»ºã€ç»„åˆå’Œè¡¨è¾¾çš„ç»†èŠ‚ï¼Œè¿™å¯¹äºæ‰€æœ‰ç±»å‹çš„å·¥å‚æ¨¡å¼éƒ½æ˜¯é‡è¦çš„ã€‚</li>
<li>ç³»ç»Ÿä¸­æœ‰å¤šäºä¸€ä¸ªçš„äº§å“æ—ï¼Œè€Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­æŸä¸€äº§å“æ—ã€‚</li>
<li>å±äºåŒä¸€ä¸ªäº§å“æ—çš„äº§å“å°†åœ¨ä¸€èµ·ä½¿ç”¨ï¼Œè¿™ä¸€çº¦æŸå¿…é¡»åœ¨ç³»ç»Ÿçš„è®¾è®¡ä¸­ä½“ç°å‡ºæ¥ã€‚</li>
<li>ç³»ç»Ÿæä¾›ä¸€ä¸ªäº§å“ç±»çš„åº“ï¼Œæ‰€æœ‰çš„äº§å“ä»¥åŒæ ·çš„æ¥å£å‡ºç°ï¼Œä»è€Œä½¿å®¢æˆ·ç«¯ä¸ä¾èµ–äºå…·ä½“å®ç°ã€‚</li>
</ul>
<h3>ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼éš”ç¦»äº†å…·ä½“ç±»çš„ç”Ÿäº§ï¼Œä½¿å¾—å®¢æˆ·å¹¶ä¸éœ€è¦çŸ¥é“ä»€ä¹ˆè¢«åˆ›å»ºã€‚</li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥åœ¨ç±»çš„å†…éƒ¨å¯¹äº§å“æ—è¿›è¡Œçº¦æŸï¼Œä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹è±¡ã€‚</li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥æ–¹ä¾¿åœ°åˆ‡æ¢äº§å“ç³»åˆ—ï¼Œåªéœ€è¦æ›´æ¢å…·ä½“å·¥å‚å³å¯ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>äº§å“æ—æ‰©å±•éå¸¸å›°éš¾ï¼Œè¦å¢åŠ ä¸€ä¸ªç³»åˆ—çš„æŸä¸€äº§å“ï¼Œæ—¢è¦åœ¨æŠ½è±¡çš„å·¥å‚é‡ŒåŠ ä»£ç ï¼Œåˆè¦åœ¨å…·ä½“çš„å·¥å‚é‡ŒåŠ ä»£ç ã€‚<strong>äº§å“æ—éš¾æ‰©å±•ï¼Œäº§å“ç­‰çº§æ˜“æ‰©å±•</strong></li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼å¢åŠ äº†ç³»ç»Ÿçš„æŠ½è±¡æ€§å’Œç†è§£éš¾åº¦ã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<p>æŠ½è±¡å·¥å‚æ¨¡å¼é€šè¿‡å¼•å…¥æŠ½è±¡å·¥å‚æ¥å£å’ŒæŠ½è±¡äº§å“æ¥å£ï¼Œæä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ¥å£ç”¨äºåˆ›å»ºä¸€ç»„ç›¸å…³çš„äº§å“å¯¹è±¡ã€‚å®ƒå¯ä»¥å°†äº§å“çš„åˆ›å»ºè¿‡ç¨‹å°è£…èµ·æ¥ï¼Œä½¿å¾—å®¢æˆ·ç«¯ä»£ç å¯ä»¥ä¸å…·ä½“äº§å“çš„å®ç°ç»†èŠ‚è§£è€¦ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§å…è®¸åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢ä¸åŒçš„å…·ä½“å·¥å‚å’Œäº§å“æ—ã€‚</p>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/abstract-factory/abstract-factory-zh-2x.png" type="image/png"/>
    </item>
    <item>
      <title>å»ºé€ è€…</title>
      <link>http://blog.cjhe.top/design-pattern/creational/builder.html</link>
      <guid>http://blog.cjhe.top/design-pattern/creational/builder.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å»ºé€ è€…</source>
      <description>builderbuilder</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sun, 16 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/builder/builder-zh-2x.png" alt="builder" tabindex="0" loading="lazy"><figcaption>builder</figcaption></figure>
<!-- more -->
<p>å»ºé€ è€…æ¨¡å¼(Builder Pattern)åˆå«ç”Ÿæˆå™¨æ¨¡å¼ï¼Œå®ƒå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ã€‚ä½¿ç»Ÿä¸€çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</p>
<p>å®ƒå°†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡åˆ†è§£ä¸ºå¤šä¸ªç®€å•çš„å¯¹è±¡ï¼Œç„¶åä¸€æ­¥ä¸€æ­¥æ„å»ºè€Œæˆï¼Œå®ƒå°†å˜ä¸ä¸å˜ç›¸åˆ†ç¦»ï¼Œå³äº§å“çš„ç»„æˆéƒ¨åˆ†æ˜¯ä¸å˜çš„ï¼Œä½†æ¯ä¸€éƒ¨åˆ†æ˜¯å¯ä»¥çµæ´»é€‰æ‹©çš„ã€‚</p>
<h2>é—®é¢˜</h2>
<p>å½“å¯¹è±¡éå¸¸å¤æ‚ï¼Œä¸”å­˜åœ¨ä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹éå¸¸å¤æ‚ï¼Œä¸”æœ‰å¤šä¸ªæ­¥éª¤æ—¶</li>
<li>å¯¹è±¡æ„é€ æ—¶éœ€è¦ä¼ å…¥å¾ˆå¤šå‚æ•°æ—¶</li>
<li>å¯¹è±¡çš„ç»„æˆéƒ¨åˆ†æœ‰å¤šç§é€‰æ‹©ï¼Œæ„å»ºéœ€è¦è€ƒè™‘å„ä¸ªéƒ¨åˆ†çš„ç»„åˆæ—¶</li>
</ul>
<h2>è§£å†³æ–¹æ¡ˆ</h2>
<h3>è§’è‰²</h3>
<figure><figcaption>å»ºé€ è€…æ¨¡å¼</figcaption></figure>
<ul>
<li>
<p>Productï¼šäº§å“è§’è‰²</p>
<p>åŒ…å«å¤šä¸ªç»„æˆéƒ¨åˆ†çš„å¤æ‚å¯¹è±¡ï¼Œç”±å…·ä½“å»ºé€ è€…æ¥åˆ›å»ºå„ä¸ªé›¶éƒ¨ä»¶ã€‚</p>
</li>
<li>
<p>Builderï¼šæŠ½è±¡å»ºé€ è€…</p>
<p>ä¸ºåˆ›å»ºäº§å“å„ä¸ªå­éƒ¨ä»¶æŒ‡å®šæŠ½è±¡æ¥å£ï¼Œä¸€èˆ¬æ˜¯buildXXX()æ–¹æ³•ï¼Œé€šå¸¸è¿˜åŒ…å«ä¸€ä¸ªè¿”å›å¤æ‚äº§å“çš„æ–¹æ³•getResult()ã€‚</p>
</li>
<li>
<p>Concrete Builderï¼šå…·ä½“å»ºé€ è€…</p>
<p>å®ç°Builderæ¥å£ï¼Œå®Œæˆå¤æ‚äº§å“çš„å„ä¸ªéƒ¨ä»¶çš„å…·ä½“åˆ›å»ºæ–¹æ³•ã€‚</p>
</li>
<li>
<p>Directorï¼šæŒ‡æŒ¥è€…</p>
<p>è°ƒç”¨å»ºé€ è€…å¯¹è±¡ä¸­çš„éƒ¨ä»¶æ„å»ºä¸è£…é…æ–¹æ³•å®Œæˆå¤æ‚å¯¹è±¡çš„åˆ›å»ºï¼Œåœ¨æŒ‡æŒ¥è€…ä¸­ä¸æ¶‰åŠå…·ä½“äº§å“çš„ä¿¡æ¯ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> builder

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Product <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	partA <span class="token builtin">string</span>
	partB <span class="token builtin">string</span>
	partC <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Product<span class="token punctuation">)</span> <span class="token function">setPartA</span><span class="token punctuation">(</span>partA <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	p<span class="token punctuation">.</span>partA <span class="token operator">=</span> partA
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Product<span class="token punctuation">)</span> <span class="token function">setPartB</span><span class="token punctuation">(</span>partB <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	p<span class="token punctuation">.</span>partB <span class="token operator">=</span> partB
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Product<span class="token punctuation">)</span> <span class="token function">setPartC</span><span class="token punctuation">(</span>partC <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	p<span class="token punctuation">.</span>partC <span class="token operator">=</span> partC
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Product<span class="token punctuation">)</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"A:%s\tB:%s\tC:%s"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>partA<span class="token punctuation">,</span> p<span class="token punctuation">.</span>partB<span class="token punctuation">,</span> p<span class="token punctuation">.</span>partC<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Builder <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">buildPartA</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">buildPartB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">buildPartC</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Director <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	builder Builder
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>Director<span class="token punctuation">)</span> <span class="token function">Director</span><span class="token punctuation">(</span>builder Builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	d<span class="token punctuation">.</span>builder <span class="token operator">=</span> builder
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d Director<span class="token punctuation">)</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product <span class="token punctuation">{</span>
	d<span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">buildPartA</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	d<span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">buildPartB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	d<span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">buildPartC</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> d<span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteBuilder1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	product <span class="token operator">*</span>Product
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteBuilder1<span class="token punctuation">)</span> <span class="token function">buildPartA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>product<span class="token punctuation">.</span><span class="token function">setPartA</span><span class="token punctuation">(</span><span class="token string">"A1"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteBuilder1<span class="token punctuation">)</span> <span class="token function">buildPartB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>product<span class="token punctuation">.</span><span class="token function">setPartB</span><span class="token punctuation">(</span><span class="token string">"B1"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteBuilder1<span class="token punctuation">)</span> <span class="token function">buildPartC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>product<span class="token punctuation">.</span><span class="token function">setPartC</span><span class="token punctuation">(</span><span class="token string">"C1"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteBuilder1<span class="token punctuation">)</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">*</span>c<span class="token punctuation">.</span>product
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteBuilder2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	product <span class="token operator">*</span>Product
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteBuilder2<span class="token punctuation">)</span> <span class="token function">buildPartA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>product<span class="token punctuation">.</span><span class="token function">setPartA</span><span class="token punctuation">(</span><span class="token string">"A2"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteBuilder2<span class="token punctuation">)</span> <span class="token function">buildPartB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>product<span class="token punctuation">.</span><span class="token function">setPartB</span><span class="token punctuation">(</span><span class="token string">"B2"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteBuilder2<span class="token punctuation">)</span> <span class="token function">buildPartC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>product<span class="token punctuation">.</span><span class="token function">setPartC</span><span class="token punctuation">(</span><span class="token string">"C2"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteBuilder2<span class="token punctuation">)</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">*</span>c<span class="token punctuation">.</span>product
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> builder

<span class="token keyword">func</span> <span class="token function">ExampleDirector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	builder <span class="token operator">:=</span> ConcreteBuilder1<span class="token punctuation">{</span>product<span class="token punctuation">:</span> <span class="token operator">&amp;</span>Product<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token keyword">var</span> director Director
	director<span class="token punctuation">.</span><span class="token function">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span>
	product <span class="token operator">:=</span> director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	product<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output: A:A1	B:B1	C:C1</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ExampleDirector_second</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	builder <span class="token operator">:=</span> ConcreteBuilder2<span class="token punctuation">{</span>product<span class="token punctuation">:</span> <span class="token operator">&amp;</span>Product<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token keyword">var</span> director Director
	director<span class="token punctuation">.</span><span class="token function">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span>
	product <span class="token operator">:=</span> director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	product<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output: A:A2	B:B2	C:C2</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ•ˆæœ</h2>
<h3>åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å½“è¦åˆ›å»ºçš„å¯¹è±¡æ˜¯ç”±å¤šä¸ªéƒ¨ä»¶ç»„æˆï¼Œè€Œä¸”éƒ¨ä»¶çš„ç»„åˆæ–¹å¼å¯èƒ½æœ‰ä¸åŒçš„å˜åŒ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥å°è£…å¤æ‚çš„åˆ›å»ºé€»è¾‘ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
<li>å½“è¦åˆ›å»ºçš„å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹éœ€è¦åˆ†æ­¥è¿›è¡Œï¼Œè€Œä¸”æ¯ä¸€æ­¥éƒ½å¯èƒ½æœ‰ä¸åŒçš„å®ç°æ–¹å¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥å°†æ„å»ºè¿‡ç¨‹å’Œè¡¨ç¤ºåˆ†ç¦»ï¼Œæé«˜ä»£ç çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ã€‚</li>
<li>å½“è¦åˆ›å»ºçš„å¯¹è±¡çš„è¡¨ç¤ºå’Œæ„å»ºè¿‡ç¨‹éƒ½éœ€è¦æ ¹æ®ä¸åŒçš„éœ€æ±‚è¿›è¡Œå®šåˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥å°†å®¢æˆ·ç«¯å’Œå…·ä½“å»ºé€ è€…è§£è€¦ï¼Œæé«˜ä»£ç çš„å¯å®šåˆ¶æ€§å’Œå¯é…ç½®æ€§ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<p>æˆ¿å±‹è£…ä¿®æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼ŒåŒ…å«ï¼šåœ°æ¿çš„é€‰æ‹©ã€å¢™ä½“çš„è£…ä¿®é¢œè‰²ã€å¤©èŠ±æ¿çš„è®¾è®¡ã€å®¶å…·çš„å¸ƒå±€ç­‰ç­‰ã€‚å®¢æˆ·æŠŠè£…ä¿®è¦æ±‚å‘Šè¯‰è£…ä¿®é¡¹ç›®ç»ç†ï¼Œé¡¹ç›®ç»ç†æŒ‡æŒ¥å·¥äººä¸€æ­¥æ­¥è£…ä¿®ï¼Œæœ€åå®Œæˆæ•´ä¸ªæˆ¿å±‹çš„è£…ä¿®ä¸å¸ƒå±€ã€‚</p>
<p>æ±½è½¦çš„å»ºé€ é€šå¸¸åŒ…å«ï¼šè½®èƒçš„é€‰æ‹©ã€å‘åŠ¨æœºçš„é€‰æ‹©ã€è½¦èº«è®¾è®¡ã€è½¦å†…è£…æ½¢ç­‰ç­‰ï¼Œæ–¹æ¡ˆè™½ç„¶ä¸åŒï¼Œä½†æ­¥éª¤é€šå¸¸æ˜¯ä¸€è‡´çš„ã€‚</p>
<h3>ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>å°è£…æ€§å¥½ï¼Œåˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»ï¼Œè°ƒç”¨è€…æ— éœ€å…³æ³¨ç»†èŠ‚éƒ¨åˆ†ã€‚</li>
<li>æ‰©å±•æ€§å¥½ï¼Œå„ä¸ªå…·ä½“çš„å»ºé€ è€…ç›¸äº’ç‹¬ç«‹ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„è§£è€¦ã€‚</li>
<li>å®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå»ºé€ è€…å¯ä»¥å¯¹åˆ›å»ºè¿‡ç¨‹é€æ­¥ç»†åŒ–ï¼Œè€Œä¸å¯¹å…¶ä»–æ¨¡å—äº§ç”Ÿä»»ä½•å½±å“ï¼Œä¾¿äºæ§åˆ¶ç»†èŠ‚é£é™©ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>äº§å“çš„ç»„æˆéƒ¨åˆ†å¿…é¡»ç›¸åŒï¼Œè¿™é™åˆ¶äº†å…¶ä½¿ç”¨èŒƒå›´ã€‚</li>
<li>å¦‚æœäº§å“å†…éƒ¨å‘ç”Ÿå˜åŒ–ï¼Œåˆ™å»ºé€ è€…ä¹Ÿè¦åŒæ­¥ä¿®æ”¹ï¼ŒåæœŸç»´æŠ¤æˆæœ¬è¾ƒå¤§ã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<p>å»ºé€ è€…è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒå¯ä»¥ç”¨äºåˆ›å»ºå¤æ‚çš„å¯¹è±¡ï¼Œå°†å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹å’Œè¡¨ç¤ºåˆ†ç¦»å¼€æ¥ã€‚å®ƒé€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>å½“è¦åˆ›å»ºçš„å¯¹è±¡æ˜¯ç”±å¤šä¸ªéƒ¨ä»¶ç»„æˆï¼Œè€Œä¸”éƒ¨ä»¶çš„ç»„åˆæ–¹å¼å¯èƒ½æœ‰ä¸åŒçš„å˜åŒ–æ—¶ã€‚</li>
<li>å½“è¦åˆ›å»ºçš„å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹éœ€è¦åˆ†æ­¥è¿›è¡Œï¼Œè€Œä¸”æ¯ä¸€æ­¥éƒ½å¯èƒ½æœ‰ä¸åŒçš„å®ç°æ–¹å¼æ—¶ã€‚</li>
<li>å½“è¦åˆ›å»ºçš„å¯¹è±¡çš„è¡¨ç¤ºå’Œæ„å»ºè¿‡ç¨‹éƒ½éœ€è¦æ ¹æ®ä¸åŒçš„éœ€æ±‚è¿›è¡Œå®šåˆ¶æ—¶ã€‚</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/builder/builder-zh-2x.png" type="image/png"/>
    </item>
    <item>
      <title>å·¥å‚æ–¹æ³•</title>
      <link>http://blog.cjhe.top/design-pattern/creational/factory-method.html</link>
      <guid>http://blog.cjhe.top/design-pattern/creational/factory-method.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å·¥å‚æ–¹æ³•</source>
      <description>factory-methodfactory-method</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sat, 15 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/factory-method/factory-method-zh-2x.png" alt="factory-method" tabindex="0" loading="lazy"><figcaption>factory-method</figcaption></figure>
<!-- more -->
<p>å·¥å‚æ–¹æ³•æ¨¡å¼(Factory Method Pattern)ä¹Ÿå«è™šæ‹Ÿæ„é€ å™¨(Virtual Constructor)æ¨¡å¼</p>
<h2>é—®é¢˜</h2>
<p>ç”±äºç®€å•å·¥å‚æ¨¡å¼è¿èƒŒäº†<code>å¼€é—­åŸåˆ™</code>ï¼Œè€Œå·¥å‚æ–¹æ³•æ¨¡å¼å¯¹ç®€å•å·¥å‚æ¨¡å¼è¿›ä¸€æ­¥æŠ½è±¡ï¼Œå…¶å¥½å¤„æ˜¯å¯ä»¥ä½¿ç³»ç»Ÿåœ¨ä¸ä¿®æ”¹åŸæ¥ä»£ç çš„æƒ…å†µä¸‹å¼•è¿›æ–°çš„äº§å“ï¼Œå³æ»¡è¶³å¼€é—­åŸåˆ™ã€‚</p>
<h2>è§£å†³æ–¹æ¡ˆ</h2>
<h3>è§’è‰²</h3>
<figure><figcaption>å·¥å‚æ–¹æ³•æ¨¡å¼</figcaption></figure>
<ul>
<li>
<p>Abstract Factoryï¼šæŠ½è±¡å·¥å‚</p>
<p>æä¾›äº†åˆ›å»ºäº§å“çš„æ¥å£ï¼Œè°ƒç”¨è€…é€šè¿‡å®ƒè®¿é—®å…·ä½“å·¥å‚çš„å·¥å‚æ–¹æ³•æ¥åˆ›å»ºäº§å“ã€‚</p>
</li>
<li>
<p>Concrete Factoryï¼šå…·ä½“å·¥å‚</p>
<p>å®ç°äº†æŠ½è±¡å·¥å‚çš„æ–¹æ³•ï¼Œå®Œæˆå…·ä½“äº§å“çš„åˆ›å»ºã€‚</p>
</li>
<li>
<p>Productï¼šæŠ½è±¡äº§å“</p>
<p>å®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚</p>
</li>
<li>
<p>Concrete Productï¼šå…·ä½“äº§å“</p>
<p>å®ç°äº†æŠ½è±¡äº§å“å®šä¹‰çš„æ¥å£ï¼Œç”±å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œå®ƒåŒå…·ä½“å·¥å‚ä¹‹é—´ä¸€ä¸€å¯¹åº”ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> factory_method

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// æŠ½è±¡äº§å“</span>
<span class="token keyword">type</span> Product <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŠ½è±¡å·¥å‚</span>
<span class="token keyword">type</span> AbstractFactory <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">NewProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“äº§å“1</span>
<span class="token keyword">type</span> ConcreteProduct1 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>ConcreteProduct1<span class="token punctuation">)</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Product1 show"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“å·¥å‚1</span>
<span class="token keyword">type</span> ConcreteFactory1 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ConcreteFactory1<span class="token punctuation">)</span> <span class="token function">NewProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>ConcreteProduct1<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“äº§å“2</span>
<span class="token keyword">type</span> ConcreteProduct2 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>ConcreteProduct2<span class="token punctuation">)</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Product2 show"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“å·¥å‚2</span>
<span class="token keyword">type</span> ConcreteFactory2 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ConcreteFactory2<span class="token punctuation">)</span> <span class="token function">NewProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Product <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>ConcreteProduct2<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨å·¥å‚åˆ›å»ºäº§å“ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> factory_method

<span class="token keyword">func</span> <span class="token function">ExampleConcreteFactory1_NewProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> factory AbstractFactory
	factory <span class="token operator">=</span> ConcreteFactory1<span class="token punctuation">{</span><span class="token punctuation">}</span>
	product <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">NewProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	product<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// Product1 show</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ExampleConcreteFactory2_NewProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> factory AbstractFactory
	factory <span class="token operator">=</span> ConcreteFactory2<span class="token punctuation">{</span><span class="token punctuation">}</span>
	product <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">NewProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	product<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// Product2 show</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ•ˆæœ</h2>
<h3>ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>éµå¾ªäº†<code>å¼€é—­åŸåˆ™</code>ï¼Œæ‰©å±•æ€§æå¼ºã€‚å¢åŠ æ–°çš„äº§å“ç±»æ—¶ï¼Œåªéœ€å¢åŠ å¯¹åº”çš„å·¥å‚ç±»ï¼Œä¸éœ€è¦ä¿®æ”¹åŸæœ‰ä»£ç ã€‚</li>
<li>é™ä½äº†ç³»ç»Ÿçš„è€¦åˆæ€§ï¼Œå°†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»ï¼Œä½¿å¾—å„ä¸ªæ¨¡å—å„å¸å…¶èŒã€‚</li>
<li>åˆ©ç”¨äº†é¢å‘æ¥å£ç¼–ç¨‹çš„æ€è·¯ï¼Œåˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸€ä¸ªç¬¦åˆé€šç”¨æ¥å£çš„é€šç”¨å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„å…·ä½“å®ç°å¯ä»¥éšæ„æ›¿æ¢ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œç±»çš„ä¸ªæ•°å®¹æ˜“è¿‡å¤šï¼Œå¢åŠ äº†ç³»ç»ŸæŠ½è±¡æ€§å’Œç†è§£éš¾åº¦ã€‚</li>
<li>å¢åŠ äº†ç³»ç»Ÿçš„å¼€é”€ï¼Œæ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶éƒ½è¦åˆ›å»ºä¸€ä¸ªå·¥å‚å¯¹è±¡ï¼Œæ¶ˆè€—èµ„æºå’Œæ—¶é—´ã€‚</li>
<li><strong>æŠ½è±¡äº§å“åªèƒ½æ˜¯ä¸€ç§äº§å“</strong>ã€‚æ­¤å¼Šç«¯å¯ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼è§£å†³ã€‚</li>
</ul>
<h3>åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å½“åˆ›å»ºå¯¹è±¡éœ€è¦ä½¿ç”¨å¤§é‡é‡å¤çš„ä»£ç æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼æ¥ç®€åŒ–ä»£ç å’Œæé«˜å¯è¯»æ€§ã€‚</li>
<li>å½“å®¢æˆ·ç«¯ä¸å…³å¿ƒå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹å’Œå®ç°ç»†èŠ‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼æ¥éšè—å¯¹è±¡çš„åˆ›å»ºé€»è¾‘ï¼Œåªéœ€è¦çŸ¥é“å·¥å‚ç±»å’Œäº§å“æ¥å£å³å¯ã€‚</li>
<li>å½“ä¸€ä¸ªç±»é€šè¿‡å…¶å­ç±»æ¥æŒ‡å®šåˆ›å»ºå“ªä¸ªå¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼æ¥å®ç°å¤šæ€å’ŒåŠ¨æ€ç»‘å®šï¼Œè®©å­ç±»å†³å®šå…·ä½“çš„äº§å“ç±»ã€‚</li>
<li>å½“éœ€è¦æ ¹æ®ä¸åŒçš„ç¯å¢ƒæˆ–æ¡ä»¶æ¥åˆ›å»ºä¸åŒçš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼æ¥æ ¹æ®ä¸åŒçš„å·¥å‚ç±»æ¥åˆ›å»ºå¯¹åº”çš„äº§å“ç±»ã€‚</li>
</ul>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li>æ¢ç¯æ³¡ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªç¯æ³¡æ¥å£ï¼Œå®ƒæœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯å‘å…‰ï¼Œä½ æœ‰ä¸åŒçš„ç¯æ³¡å®ç°ç±»ï¼Œæ¯”å¦‚ç™½ç‚½ç¯ã€èŠ‚èƒ½ç¯ã€LEDç¯ç­‰ï¼Œæ¯ç§ç¯æ³¡éƒ½æœ‰è‡ªå·±çš„å·¥å‚ç±»ï¼Œè´Ÿè´£åˆ›å»ºå¯¹åº”çš„ç¯æ³¡å¯¹è±¡ã€‚è¿™æ ·ä½ å°±å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„å·¥å‚æ¥åˆ›å»ºä¸åŒçš„ç¯æ³¡ï¼Œè€Œä¸ç”¨ç›´æ¥ä½¿ç”¨newå…³é”®å­—ã€‚</li>
<li>æ—¥å¿—è®°å½•å™¨ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªæ—¥å¿—è®°å½•å™¨æ¥å£ï¼Œå®ƒæœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯è®°å½•æ—¥å¿—ï¼Œä½ æœ‰ä¸åŒçš„æ—¥å¿—è®°å½•å™¨å®ç°ç±»ï¼Œæ¯”å¦‚æ–‡ä»¶æ—¥å¿—è®°å½•å™¨ã€æ•°æ®åº“æ—¥å¿—è®°å½•å™¨ã€ç½‘ç»œæ—¥å¿—è®°å½•å™¨ç­‰ï¼Œæ¯ç§æ—¥å¿—è®°å½•å™¨éƒ½æœ‰è‡ªå·±çš„å·¥å‚ç±»ï¼Œè´Ÿè´£åˆ›å»ºå¯¹åº”çš„æ—¥å¿—è®°å½•å™¨å¯¹è±¡ã€‚è¿™æ ·ä½ å°±å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„å·¥å‚æ¥åˆ›å»ºä¸åŒçš„æ—¥å¿—è®°å½•å™¨ï¼Œè€Œä¸ç”¨ç›´æ¥ä½¿ç”¨newå…³é”®å­—ã€‚</li>
<li>ç”µè„‘å•†åº—ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªç”µè„‘æ¥å£ï¼Œå®ƒæœ‰ä¸€äº›æ–¹æ³•æ˜¯æ˜¾ç¤ºé…ç½®ã€è¿è¡Œç¨‹åºç­‰ï¼Œä½ æœ‰ä¸åŒçš„ç”µè„‘å®ç°ç±»ï¼Œæ¯”å¦‚è”æƒ³ç”µè„‘ã€åä¸ºç”µè„‘ã€è‹¹æœç”µè„‘ç­‰ï¼Œæ¯ç§ç”µè„‘éƒ½æœ‰è‡ªå·±çš„å·¥å‚ç±»ï¼Œè´Ÿè´£åˆ›å»ºå¯¹åº”çš„ç”µè„‘å¯¹è±¡ã€‚è¿™æ ·ä½ å°±å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„å·¥å‚æ¥åˆ›å»ºä¸åŒçš„ç”µè„‘ï¼Œè€Œä¸ç”¨ç›´æ¥ä½¿ç”¨newå…³é”®å­—ã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<p>å·¥å‚æ–¹æ³•æ¨¡å¼é€šè¿‡å®šä¹‰å·¥å‚æ¥å£å’Œäº§å“æ¥å£ï¼Œå¹¶ç”±å…·ä½“çš„å·¥å‚ç±»å’Œäº§å“ç±»æ¥å®ç°ï¼Œå®ç°äº†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨çš„åˆ†ç¦»ï¼Œæé«˜äº†ä»£ç çš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/factory-method/factory-method-zh-2x.png" type="image/png"/>
    </item>
    <item>
      <title>å¯¹è±¡æ± </title>
      <link>http://blog.cjhe.top/design-pattern/creational/object-pool.html</link>
      <guid>http://blog.cjhe.top/design-pattern/creational/object-pool.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å¯¹è±¡æ± </source>
      <description>å¯¹è±¡æ± æ¨¡å¼(Object Pool Pattern)ï¼šå®ƒé€šè¿‡é¢„å…ˆåˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ç»„å¯¹è±¡ï¼Œç„¶åå°†å®ƒä»¬å­˜æ”¾åœ¨ä¸€ä¸ªæ± ä¸­ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶é‡å¤ä½¿ç”¨ã€‚è¿™æ ·å¯ä»¥å‡å°‘é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„å¼€é”€ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œæ•ˆç‡ã€‚
é—®é¢˜
åœ¨æŸäº›æ€§èƒ½åœºæ™¯ï¼Œé¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯å¯¹è±¡æˆ–å¯¹GCå‹åŠ›è¾ƒå¤§ï¼Œå½±å“ç¨‹åºçš„æ€§èƒ½
è§£å†³æ–¹æ¡ˆ
è§’è‰²
object-poolobject-pool


Poolï¼šå¯¹...</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sun, 16 Apr 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<!-- more -->
<p>å¯¹è±¡æ± æ¨¡å¼(Object Pool Pattern)ï¼šå®ƒé€šè¿‡é¢„å…ˆåˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ç»„å¯¹è±¡ï¼Œç„¶åå°†å®ƒä»¬å­˜æ”¾åœ¨ä¸€ä¸ªæ± ä¸­ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶é‡å¤ä½¿ç”¨ã€‚è¿™æ ·å¯ä»¥å‡å°‘é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„å¼€é”€ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œæ•ˆç‡ã€‚</p>
<h2>é—®é¢˜</h2>
<p>åœ¨æŸäº›æ€§èƒ½åœºæ™¯ï¼Œé¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯å¯¹è±¡æˆ–å¯¹GCå‹åŠ›è¾ƒå¤§ï¼Œå½±å“ç¨‹åºçš„æ€§èƒ½</p>
<h2>è§£å†³æ–¹æ¡ˆ</h2>
<h3>è§’è‰²</h3>
<figure><figcaption>object-pool</figcaption></figure>
<ul>
<li>
<p>Poolï¼šå¯¹è±¡æ± </p>
<p>å¯¹è±¡æ± ç»´æŠ¤æ´»åŠ¨å¯¹è±¡åˆ—è¡¨å’Œç©ºé—²å¯¹è±¡åˆ—è¡¨</p>
</li>
<li>
<p>Objectï¼šå¯¹è±¡</p>
<p>å¯¹è±¡è¢«å®¢æˆ·ç«¯ä½¿ç”¨</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> object_pool

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> pool <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	mutex     <span class="token operator">*</span>sync<span class="token punctuation">.</span>Mutex
	idle      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	active    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	newObject <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewPool</span><span class="token punctuation">(</span>newFunc <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">*</span>pool <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>pool<span class="token punctuation">{</span>
		mutex<span class="token punctuation">:</span>     <span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>Mutex<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		idle<span class="token punctuation">:</span>      <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		active<span class="token punctuation">:</span>    <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		newObject<span class="token punctuation">:</span> newFunc<span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>pool<span class="token punctuation">)</span> <span class="token function">Acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
	p<span class="token punctuation">.</span>mutex<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> p<span class="token punctuation">.</span>mutex<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> object <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>idle<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		object <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">newObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		object <span class="token operator">=</span> p<span class="token punctuation">.</span>idle<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
		p<span class="token punctuation">.</span>idle <span class="token operator">=</span> p<span class="token punctuation">.</span>idle<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
	p<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>active<span class="token punctuation">,</span> object<span class="token punctuation">)</span>
	<span class="token keyword">return</span> object
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>pool<span class="token punctuation">)</span> <span class="token function">Release</span><span class="token punctuation">(</span>target <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	p<span class="token punctuation">.</span>mutex<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> p<span class="token punctuation">.</span>mutex<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	p<span class="token punctuation">.</span>idle <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>idle<span class="token punctuation">,</span> target<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> p<span class="token punctuation">.</span>active <span class="token punctuation">{</span>
		<span class="token keyword">if</span> p<span class="token punctuation">.</span>active<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> target <span class="token punctuation">{</span>
			p<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>active<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>active<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> object_pool

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">ExamplePool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	newConnDB <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">"conn-db"</span>
	<span class="token punctuation">}</span>
	pool <span class="token operator">:=</span> <span class="token function">NewPool</span><span class="token punctuation">(</span>newConnDB<span class="token punctuation">)</span>
	object1 <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>idle<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">)</span>

	object2 <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>idle<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">)</span>

	pool<span class="token punctuation">.</span><span class="token function">Release</span><span class="token punctuation">(</span>object1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>idle<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">)</span>

	pool3 <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>idle<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">)</span>

	pool<span class="token punctuation">.</span><span class="token function">Release</span><span class="token punctuation">(</span>object2<span class="token punctuation">)</span>
	pool<span class="token punctuation">.</span><span class="token function">Release</span><span class="token punctuation">(</span>pool3<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>idle<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// 0</span>
	<span class="token comment">// 1</span>
	<span class="token comment">// 0</span>
	<span class="token comment">// 2</span>
	<span class="token comment">// 1</span>
	<span class="token comment">// 1</span>
	<span class="token comment">// 0</span>
	<span class="token comment">// 2</span>
	<span class="token comment">// 2</span>
	<span class="token comment">// 0</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ•ˆæœ</h2>
<h3>ä½¿ç”¨åœºæ™¯</h3>
<ul>
<li>èµ„æºå—é™çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸éœ€è¦å¯ä¼¸ç¼©æ€§çš„ç¯å¢ƒï¼ˆCPUã€å†…å­˜ç­‰ç‰©ç†èµ„æºæœ‰é™ï¼‰ï¼ŒCPUæ€§èƒ½ä¸å¤Ÿå¼ºåŠ²ï¼Œå†…å­˜æ¯”è¾ƒç´§å¼ ï¼Œåƒåœ¾æ”¶é›†ï¼Œå†…å­˜æŠ–åŠ¨ä¼šé€ æˆæ¯”è¾ƒå¤§çš„å½±å“ï¼Œéœ€è¦æé«˜å†…å­˜ç®¡ç†æ•ˆç‡ï¼Œå“åº”æ€§æ¯”ååé‡æ›´ä¸ºé‡è¦ã€‚</li>
<li>åœ¨å†…å­˜ä¸­æ•°é‡å—é™çš„å¯¹è±¡ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥ã€çº¿ç¨‹ç­‰ã€‚</li>
<li>åˆ›å»ºæˆæœ¬é«˜çš„å¯¹è±¡ï¼Œæ¯”å¦‚åˆå§‹åŒ–æ—¶é—´é•¿ã€å ç”¨èµ„æºå¤šã€éœ€è¦å¤æ‚çš„é…ç½®ç­‰ã€‚</li>
</ul>
<h3>ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>æå‡æ€§èƒ½ï¼šå‡å°‘åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„å¼€é”€ï¼ŒèŠ‚çœå†…å­˜å’ŒCPUèµ„æºï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚</li>
<li>å‡å°‘GCå‹åŠ›ï¼šå¤ç”¨å¯¹è±¡æ± ä¸­çš„å¯¹è±¡ï¼Œé¿å…é¢‘ç¹çš„åƒåœ¾å›æ”¶ï¼Œé™ä½å†…å­˜æŠ–åŠ¨å’Œæš‚åœæ—¶é—´ã€‚</li>
<li>æ˜“äºå®ç°ï¼šå¯¹è±¡æ± æ¨¡å¼ç›¸å¯¹å®¹æ˜“å®ç°ï¼Œå¯ç”¨äºå¤šç§æƒ…å†µã€‚å®ƒæ˜¯ä¸€ç§ç»è¿‡éªŒè¯çš„è®¾è®¡æ¨¡å¼ï¼Œå·²åœ¨è®¸å¤šåº”ç”¨ç¨‹åºå’Œç¼–ç¨‹è¯­è¨€ä¸­æˆåŠŸä½¿ç”¨ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>å¢åŠ ä¾èµ–æ€§ï¼šå°†å¯¹è±¡è¿”å›å¯¹è±¡æ± ä¸­çš„æ“ä½œä¾èµ–äºå®¢æˆ·ç«¯ï¼Œå¦‚æœå®¢æˆ·ç«¯å¿˜è®°å°†å¯¹è±¡è¿”å›å¯¹è±¡æ± ä¸­ï¼Œå°†å¯¼è‡´è¯¥å¯¹è±¡æ— æ³•è¢«å…¶ä»–ç»„ä»¶ä½¿ç”¨ã€‚</li>
<li>å¢åŠ å¤æ‚æ€§ï¼šå¯¹è±¡æ± æ¨¡å¼å¯ä»¥é€šè¿‡æ·»åŠ é¢å¤–çš„æŠ½è±¡å±‚æ¥å¢åŠ åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§ã€‚è¿™ä¼šä½¿ä»£ç æ›´éš¾ç†è§£å’Œç»´æŠ¤ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°å¤šçº¿ç¨‹å’Œå¹¶å‘çš„åœºæ™¯ã€‚</li>
<li>å­˜åœ¨è„å¯¹è±¡é—®é¢˜ï¼šæ‰€è°“çš„è„å¯¹è±¡å°±æ˜¯æŒ‡çš„æ˜¯å½“å¯¹è±¡è¢«æ”¾å›å¯¹è±¡æ± åï¼Œè¿˜ä¿ç•™ç€åˆšåˆšè¢«å®¢æˆ·ç«¯è°ƒç”¨æ—¶ç”Ÿæˆçš„æ•°æ®ã€‚è„å¯¹è±¡å¯èƒ½å¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š
<ul>
<li>è„å¯¹è±¡æŒæœ‰ä¸Šæ¬¡ä½¿ç”¨çš„å¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ³„éœ²ç­‰é—®é¢˜ã€‚</li>
<li>è„å¯¹è±¡å¦‚æœä¸‹ä¸€æ¬¡ä½¿ç”¨æ—¶æ²¡æœ‰åšæ¸…ç†ï¼Œå¯èƒ½å½±å“ç¨‹åºçš„å¤„ç†æ•°æ®ã€‚</li>
</ul>
</li>
<li>ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼šå¤„äºå¯¹è±¡æ± ä¸­çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¦æ¯”æ™®é€šçš„å¯¹è±¡è¦é•¿ä¹…ã€‚è¿™å¯èƒ½å¯¼è‡´ä¸€äº›éš¾ä»¥é¢„æ–™çš„é—®é¢˜ï¼Œæ¯”å¦‚å¯¹è±¡çŠ¶æ€ä¸ä¸€è‡´ã€èµ„æºå ç”¨è¿‡å¤šç­‰ã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<p>å¯¹è±¡æ± æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡é¢„å…ˆåˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ç»„å¯¹è±¡ï¼Œç„¶åå°†å®ƒä»¬å­˜æ”¾åœ¨ä¸€ä¸ªæ± ä¸­ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶é‡å¤ä½¿ç”¨ã€‚è¿™æ ·å¯ä»¥å‡å°‘é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„å¼€é”€ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œæ•ˆç‡ã€‚åœ¨ä½¿ç”¨å¯¹è±¡æ± è®¾è®¡æ¨¡å¼æ—¶ï¼Œéœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>å¯¹è±¡æ± çš„å¤§å°åº”è¯¥æ ¹æ®å®é™…éœ€æ±‚å’Œèµ„æºæƒ…å†µæ¥ç¡®å®šï¼Œä¸è¦è¿‡å¤§æˆ–è¿‡å°ã€‚</li>
<li>å¯¹è±¡æ± ä¸­çš„å¯¹è±¡åº”è¯¥æ˜¯æ— çŠ¶æ€æˆ–è€…å¯é‡ç½®çŠ¶æ€çš„ï¼Œä»¥é¿å…çŠ¶æ€æ±¡æŸ“å’Œæ•°æ®ä¸ä¸€è‡´ã€‚</li>
<li>å¯¹è±¡æ± ä¸­çš„å¯¹è±¡åº”è¯¥æ˜¯çº¿ç¨‹å®‰å…¨æˆ–è€…çº¿ç¨‹éš”ç¦»çš„ï¼Œä»¥é¿å…å¹¶å‘é—®é¢˜å’Œç«äº‰æ¡ä»¶ã€‚</li>
<li>å¯¹è±¡æ± ä¸­çš„å¯¹è±¡åº”è¯¥åœ¨ä½¿ç”¨å®Œæ¯•ååŠæ—¶å½’è¿˜ï¼Œä»¥é¿å…èµ„æºæ³„éœ²å’Œæµªè´¹ã€‚</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>åŸå‹</title>
      <link>http://blog.cjhe.top/design-pattern/creational/prototype.html</link>
      <guid>http://blog.cjhe.top/design-pattern/creational/prototype.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">åŸå‹</source>
      <description>prototypeprototype</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sun, 16 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/prototype/prototype-2x.png" alt="prototype" tabindex="0" loading="lazy"><figcaption>prototype</figcaption></figure>
<!-- more -->
<p>åŸå‹æ¨¡å¼(Prototype Pattern)ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºçš„å®ä¾‹ä½œä¸ºåŸå‹ï¼Œé€šè¿‡å¤åˆ¶è¯¥åŸå‹å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªå’ŒåŸå‹ç›¸åŒæˆ–ç›¸ä¼¼çš„æ–°å¯¹è±¡ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å¤åˆ¶ä¸€ä¸ªå·²ç»å­˜åœ¨çš„<strong>å¯¹è±¡</strong>æ¥åˆ›å»ºæ–°çš„<strong>å¯¹è±¡</strong>ï¼Œè€Œä¸æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°æˆ–è€…å…¶ä»–åˆå§‹åŒ–æ–¹æ³•ã€‚è¿™æ ·å¯ä»¥é¿å…ä¸€äº›å¤æ‚çš„æˆ–è€…è€—æ—¶çš„å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Œæé«˜ç¨‹åºçš„æ•ˆç‡å’Œçµæ´»æ€§ã€‚</p>
<h2>é—®é¢˜</h2>
<p>å½“ç¨‹åºä¸­éœ€è¦å¤§é‡å¯¹è±¡ï¼Œåˆ›å»ºè¿™äº›å¯¹è±¡å°†å¯¼è‡´å ç”¨å¤§é‡çš„å†…å­˜ï¼Œéå¸¸è€—æ—¶ã€‚</p>
<h2>è§£å†³æ–¹æ¡ˆ</h2>
<h3>è§’è‰²</h3>
<figure><figcaption>prototype</figcaption></figure>
<ul>
<li>
<p>Prototypeï¼šæŠ½è±¡åŸå‹</p>
<p>æŠ½è±¡åŸå‹è§„å®šäº†clone()æ¥å£æ¥å¤åˆ¶æ–°çš„å¯¹è±¡</p>
</li>
<li>
<p>ConcretePrototypeï¼šå…·ä½“åŸå‹</p>
<p>å…·ä½“åŸå‹å®ç°æŠ½è±¡åŸå‹çš„clone()æ–¹æ³•ï¼Œæ˜¯å¯è¢«å¤åˆ¶çš„å¯¹è±¡</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> prototype

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> inode <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
	<span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> inode
<span class="token punctuation">}</span>

<span class="token keyword">type</span> file <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>f <span class="token operator">*</span>file<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>indentation <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>indentation <span class="token operator">+</span> f<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>f <span class="token operator">*</span>file<span class="token punctuation">)</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> inode <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>file<span class="token punctuation">{</span>name<span class="token punctuation">:</span> f<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">"_clone"</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> folder <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	children <span class="token punctuation">[</span><span class="token punctuation">]</span>inode
	name     <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>f <span class="token operator">*</span>folder<span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>indentation <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>indentation <span class="token operator">+</span> f<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> f<span class="token punctuation">.</span>children <span class="token punctuation">{</span>
		i<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>indentation <span class="token operator">+</span> indentation<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>f <span class="token operator">*</span>folder<span class="token punctuation">)</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> inode <span class="token punctuation">{</span>
	cloneFolder <span class="token operator">:=</span> <span class="token operator">&amp;</span>folder<span class="token punctuation">{</span>name<span class="token punctuation">:</span> f<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">"_clone"</span><span class="token punctuation">}</span>
	<span class="token keyword">var</span> tempChildren <span class="token punctuation">[</span><span class="token punctuation">]</span>inode
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> f<span class="token punctuation">.</span>children <span class="token punctuation">{</span>
		<span class="token builtin">copy</span> <span class="token operator">:=</span> i<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		tempChildren <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>tempChildren<span class="token punctuation">,</span> <span class="token builtin">copy</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	cloneFolder<span class="token punctuation">.</span>children <span class="token operator">=</span> tempChildren
	<span class="token keyword">return</span> cloneFolder
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> prototype

<span class="token keyword">func</span> <span class="token function">ExampleFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	file1 <span class="token operator">:=</span> <span class="token operator">&amp;</span>file<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"file1"</span><span class="token punctuation">}</span>
	cloneFile <span class="token operator">:=</span> file1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	cloneFile<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"example_"</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// example_file1_clone</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ExampleFolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	file1 <span class="token operator">:=</span> <span class="token operator">&amp;</span>file<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"file1"</span><span class="token punctuation">}</span>
	file2 <span class="token operator">:=</span> <span class="token operator">&amp;</span>file<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"file2"</span><span class="token punctuation">}</span>
	file3 <span class="token operator">:=</span> <span class="token operator">&amp;</span>file<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"file3"</span><span class="token punctuation">}</span>
	folder1 <span class="token operator">:=</span> <span class="token operator">&amp;</span>folder<span class="token punctuation">{</span>
		name<span class="token punctuation">:</span>     <span class="token string">"folder1"</span><span class="token punctuation">,</span>
		children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>inode<span class="token punctuation">{</span>file1<span class="token punctuation">,</span> file2<span class="token punctuation">,</span> file3<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	cloneFolder <span class="token operator">:=</span> folder1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	cloneFolder<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"example_"</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// example_folder1_clone</span>
	<span class="token comment">// example_example_file1_clone</span>
	<span class="token comment">// example_example_file2_clone</span>
	<span class="token comment">// example_example_file3_clone</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ•ˆæœ</h2>
<h3>åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å½“å¯¹è±¡åˆ›å»ºè¿‡ç¨‹å¾ˆå¤æ‚æˆ–è€…å¾ˆè€—æ—¶æ—¶ï¼Œå¯ä»¥é€šè¿‡å¤åˆ¶ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡æ¥ç®€åŒ–å’ŒåŠ å¿«å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ã€‚</li>
<li>å½“éœ€è¦ç”Ÿæˆå¤§é‡ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥é€šè¿‡å¤åˆ¶ä¸€ä¸ªåŸå‹å¯¹è±¡æ¥å‡å°‘å†…å­˜æ¶ˆè€—å’Œæé«˜æ€§èƒ½ã€‚</li>
<li>å½“éœ€è¦æ ¹æ®ä¸åŒçš„éœ€æ±‚å’Œç¯å¢ƒæ¥åŠ¨æ€åœ°ç”Ÿæˆå¯¹è±¡æ—¶ï¼Œå¯ä»¥é€šè¿‡é€‰æ‹©ä¸åŒçš„åŸå‹å¯¹è±¡æ¥å®ç°å¤šæ€æ€§å’Œçµæ´»æ€§ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<p>æ¸¸æˆä¸­çš„å­å¼¹ï¼Œé€šå¸¸æ•°é‡è§„æ¨¡å¾ˆå¤§ï¼Œé€šè¿‡åŸå‹è®¾è®¡æ¨¡å¼å¯ä»¥å¤åˆ¶å·²ç»åˆ›å»ºå¥½çš„å­—æ®µå¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå†…å­˜å’Œæ€§èƒ½ã€‚</p>
<h3>ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>å¯ä»¥é¿å…é‡å¤çš„å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼ŒèŠ‚çœæ—¶é—´å’Œèµ„æºã€‚</li>
<li>å¯ä»¥åŠ¨æ€åœ°ç”Ÿæˆå¯¹è±¡ï¼Œæ ¹æ®ä¸åŒçš„éœ€æ±‚å’Œç¯å¢ƒæ¥é€‰æ‹©åˆé€‚çš„åŸå‹ã€‚</li>
<li>å¯ä»¥éšè—å¯¹è±¡åˆ›å»ºçš„ç»†èŠ‚ï¼Œé™ä½ä»£ç çš„è€¦åˆåº¦å’Œä¾èµ–æ€§ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>éœ€è¦å®ç°å…‹éš†æ–¹æ³•ï¼Œå¯èƒ½ä¼šå¢åŠ ä»£ç çš„å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬ã€‚</li>
<li>éœ€è¦æ³¨æ„æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«ï¼Œé¿å…å‡ºç°æ„å¤–çš„å‰¯ä½œç”¨å’Œé”™è¯¯ã€‚</li>
<li>éœ€è¦ä¿è¯åŸå‹å¯¹è±¡çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ï¼Œé¿å…è¢«ä¿®æ”¹æˆ–è€…ç ´åã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<p>åŸå‹è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡å¤åˆ¶ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°æˆ–è€…å…¶ä»–åˆå§‹åŒ–æ–¹æ³•ã€‚
åœ¨Goè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«ï¼š
æ·±æ‹·è´æ˜¯æŒ‡å®Œå…¨å¤åˆ¶ä¸€ä¸ªå¯¹è±¡åŠå…¶æ‰€æœ‰å…³è”çš„å¯¹è±¡ï¼Œä½¿å¾—æ–°å¯¹è±¡å’Œæ—§å¯¹è±¡å®Œå…¨ç‹¬ç«‹ã€‚
æµ…æ‹·è´æ˜¯æŒ‡åªå¤åˆ¶ä¸€ä¸ªå¯¹è±¡æœ¬èº«ï¼Œè€Œä¸å¤åˆ¶å…¶å…³è”çš„å¯¹è±¡ï¼Œä½¿å¾—æ–°å¯¹è±¡å’Œæ—§å¯¹è±¡å…±äº«éƒ¨åˆ†æ•°æ®ã€‚</p>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/prototype/prototype-2x.png" type="image/png"/>
    </item>
    <item>
      <title>ç®€å•å·¥å‚</title>
      <link>http://blog.cjhe.top/design-pattern/creational/simple-factory.html</link>
      <guid>http://blog.cjhe.top/design-pattern/creational/simple-factory.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç®€å•å·¥å‚</source>
      <description>ç®€å•å·¥å‚æ¨¡å¼(Simple Factory Pattern)åˆç§°ä¸ºé™æ€å·¥å‚æ–¹æ³•(Static Factory Method)æ¨¡å¼ æç¤º å®ƒå¯ä»¥æ ¹æ®å‚æ•°çš„ä¸åŒï¼Œè¿”å›ä¸åŒç±»çš„å®ä¾‹ï¼Œè€Œæ— éœ€è®©å®¢æˆ·ç«¯çŸ¥é“å…·ä½“çš„åˆ›å»ºç»†èŠ‚ã€‚</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sat, 15 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ç®€å•å·¥å‚æ¨¡å¼(Simple Factory Pattern)åˆç§°ä¸ºé™æ€å·¥å‚æ–¹æ³•(Static Factory Method)æ¨¡å¼</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å®ƒå¯ä»¥æ ¹æ®å‚æ•°çš„ä¸åŒï¼Œè¿”å›ä¸åŒç±»çš„å®ä¾‹ï¼Œè€Œæ— éœ€è®©å®¢æˆ·ç«¯çŸ¥é“å…·ä½“çš„åˆ›å»ºç»†èŠ‚ã€‚</p>
</div>
<!-- more -->
<h2>é—®é¢˜</h2>
<p>å‡è®¾ï¼Œç°åœ¨å·¥å‚ç”Ÿäº§ï¼šæœ¨é—¨ã€é“é—¨ã€ç»ç’ƒé—¨è¿™ä¸‰ç§é—¨ï¼Œåœ¨è®¢è´­æ—¶æˆ‘ä»¬æœŸæœ›åªéœ€è¦å‘Šè¯‰å·¥å‚ææ–™åç§°ï¼Œå·¥å‚å°±ç»™æˆ‘ä»¬ç”Ÿäº§ç›¸åº”çš„é—¨ã€‚</p>
<p>ç®€å•è®¾è®¡æ¨¡å¼è§£å†³çš„é—®é¢˜å°±æ˜¯ï¼šå®¢æˆ·ç«¯æœŸæœ›æ ¹æ®è¯·æ±‚çš„ç±»å‹åˆ›å»ºç›¸åº”çš„å¯¹è±¡ï¼Œå®¢æˆ·ç«¯ä¸å…³æ³¨å¯¹è±¡å¸¸è§çš„ç»†èŠ‚ï¼Œç”±å·¥å‚è´Ÿè´£ç±»å‹åŒ¹é…å’Œå¯¹è±¡åˆ›å»ºé€»è¾‘ã€‚</p>
<h2>è§£å†³æ–¹æ¡ˆ</h2>
<h3>è§’è‰²</h3>
<figure><figcaption>simple-factory</figcaption></figure>
<ul>
<li>
<p>SimpleFactoryï¼šç®€å•å·¥å‚</p>
<p>ç®€å•å·¥å‚æ ¹æ®å‚æ•°çš„ä¸åŒåˆ›å»ºå¹¶è¿”å›ä¸åŒçš„äº§å“å®ä¾‹ã€‚</p>
</li>
<li>
<p>Productï¼šæŠ½è±¡äº§å“</p>
<p>æŠ½è±¡äº§å“è´Ÿè´£æè¿°æ‰€æœ‰å®ä¾‹æ‰€å…±æœ‰çš„å…¬å…±æ¥å£ã€‚</p>
</li>
<li>
<p>ConcreteProductï¼šå…·ä½“äº§å“</p>
<p>å…·ä½“äº§å“å®ç°äº§å“çš„å…·ä½“è¡Œä¸ºã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> simple_factory

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// æŠ½è±¡äº§å“</span>
<span class="token keyword">type</span> Product <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
	Product1 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token boolean">iota</span>
	Product2
<span class="token punctuation">)</span>

<span class="token comment">// å·¥å‚</span>
<span class="token keyword">type</span> SimpleFactory <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>SimpleFactory<span class="token punctuation">)</span> <span class="token function">NewProduct</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> Product <span class="token punctuation">{</span>
	<span class="token keyword">switch</span> i <span class="token punctuation">{</span>
	<span class="token keyword">case</span> Product1<span class="token punctuation">:</span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span>ConcreteProduct1<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token keyword">case</span> Product2<span class="token punctuation">:</span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span>ConcreteProduct2<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“äº§å“1</span>
<span class="token keyword">type</span> ConcreteProduct1 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>ConcreteProduct1<span class="token punctuation">)</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Product1 show"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“äº§å“2</span>
<span class="token keyword">type</span> ConcreteProduct2 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token operator">*</span>ConcreteProduct2<span class="token punctuation">)</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Product2 show"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼šåªéœ€è¦ä¼ å…¥äº§å“çš„å‚æ•°ï¼Œå°±å¯ä»¥è·å¾—è¯¥äº§å“</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> simple_factory

<span class="token keyword">func</span> <span class="token function">ExampleSimpleFactory_NewProduct1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	factory <span class="token operator">:=</span> SimpleFactory<span class="token punctuation">{</span><span class="token punctuation">}</span>
	product <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">NewProduct</span><span class="token punctuation">(</span>Product1<span class="token punctuation">)</span>
	product<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// Product1 show</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ExampleSimpleFactory_NewProduct2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	factory <span class="token operator">:=</span> SimpleFactory<span class="token punctuation">{</span><span class="token punctuation">}</span>
	product <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">NewProduct</span><span class="token punctuation">(</span>Product2<span class="token punctuation">)</span>
	product<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// Product2 show</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ•ˆæœ</h2>
<h3>ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>å®ç°äº†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»ï¼Œé™ä½äº†ç³»ç»Ÿçš„è€¦åˆæ€§ã€‚</li>
<li>é€šè¿‡è¯¥æ¨¡å¼ï¼Œå®ç°äº†å¯¹è´£ä»»çš„åˆ†é…ï¼Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>æ‰©å±•æ€§å·®ï¼Œå¦‚æœè¦å¢åŠ æ–°çš„äº§å“ç±»ï¼Œå°±éœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„ä»£ç ï¼Œè¿èƒŒäº†<strong>å¼€é—­</strong>åŸåˆ™</li>
<li>ç”±äºä½¿ç”¨äº†é™æ€å·¥å‚æ–¹æ³•ï¼Œé€ æˆå·¥å‚è§’è‰²æ— æ³•å½¢æˆåŸºäºç»§æ‰¿çš„ç»“æ„</li>
<li>å¦‚æœäº§å“ç§ç±»è¾ƒå¤šï¼Œå·¥å‚æ–¹æ³•çš„ä»£ç å°†ä¼šéå¸¸å¤æ‚</li>
</ul>
<h3>åº”ç”¨åœºæ™¯</h3>
<ul>
<li>åˆ›å»ºå¯¹è±¡å°‘ï¼šå·¥å‚ç±»è´Ÿè´£åˆ›å»ºçš„å¯¹è±¡æ¯”è¾ƒå°‘ã€‚</li>
<li>ä¸å…³å¿ƒåˆ›å»ºè¿‡ç¨‹ï¼šå®¢æˆ·ç«¯åªçŸ¥é“ä¼ å…¥å·¥å‚ç±»çš„å‚æ•°ï¼Œå¯¹äºå¦‚ä½•åˆ›å»ºå¯¹è±¡ä¸å…³å¿ƒã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>å¯¹äº<strong>é—¨</strong>è¿™ä¸ªäº§å“ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™å®šçš„<strong>ææ–™</strong>å‚æ•°ï¼Œå·¥å‚å°±ä¼šç»™æˆ‘ä»¬åˆ›å»º<code>æœ¨é—¨</code>ã€<code>é“é—¨</code>ã€<code>ç»ç’ƒé—¨</code>ç­‰ç­‰ã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<p>ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå¯ä»¥æ ¹æ®å‚æ•°çš„ä¸åŒï¼Œè¿”å›ä¸åŒç±»çš„å®ä¾‹ï¼Œè€Œæ— éœ€è®©å®¢æˆ·ç«¯çŸ¥é“å…·ä½“çš„åˆ›å»ºç»†èŠ‚ã€‚ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼æœ‰åˆ©äºå®ç°å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»ï¼Œé™ä½äº†ç³»ç»Ÿçš„è€¦åˆæ€§ï¼Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
ä½†æ˜¯ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œé¦–å…ˆï¼Œå®ƒæ‰©å±•æ€§å·®ï¼Œå¦‚æœè¦å¢åŠ æ–°çš„äº§å“ç±»ï¼Œå°±éœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„ä»£ç ï¼Œè¿èƒŒäº†<code>å¼€é—­åŸåˆ™</code>ã€‚å…¶æ¬¡ï¼Œå·¥å‚ç±»çš„èŒè´£è¿‡é‡ï¼Œå¦‚æœäº§å“ç§ç±»è¾ƒå¤šï¼Œå·¥å‚æ–¹æ³•çš„ä»£ç å°†ä¼šéå¸¸å¤æ‚ã€‚å› æ­¤ï¼Œç®€å•å·¥å‚è®¾è®¡æ¨¡å¼é€‚ç”¨äºåˆ›å»ºå¯¹è±¡å°‘ä¸”ä¸å…³å¿ƒåˆ›å»ºè¿‡ç¨‹çš„åœºæ™¯ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>å•ä¾‹</title>
      <link>http://blog.cjhe.top/design-pattern/creational/singleton.html</link>
      <guid>http://blog.cjhe.top/design-pattern/creational/singleton.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å•ä¾‹</source>
      <description>singletonsingleton</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Mon, 17 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/singleton/singleton-2x.png" alt="singleton" tabindex="0" loading="lazy"><figcaption>singleton</figcaption></figure>
<!-- more -->
<p>å•ä¾‹æ¨¡å¼(Singleton Pattern)æŒ‡ä¸€ä¸ªç±»åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡æˆ–è€…å®ä¾‹ï¼Œé‚£è¿™ä¸ªç±»å°±æ˜¯ä¸€ä¸ªå•ä¾‹ç±»ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼å°±å«åšå•ä¾‹è®¾è®¡æ¨¡å¼ã€‚</p>
<h2>é—®é¢˜</h2>
<p>å¼€å‘è¿‡ç¨‹ä¸­å¸¸å¸¸é‡è§éœ€è¦ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œç»Ÿä¸€å¤„ç†ç›¸å…³äº‹å®œï¼Œå¤šä¸ªå®ä¾‹å¯èƒ½ä¼šå¯¼è‡´ä¸ä¸€è‡´é—®é¢˜ã€‚ä¾‹å¦‚ï¼šæ—¥å¿—å®¢æˆ·ç«¯ï¼Œå¤šä¸ªæ—¥å¿—å®¢æˆ·ç«¯å¯èƒ½ä¼šå¯¼è‡´æ–‡ä»¶æ—¥å¿—å†…å®¹è¢«è¦†ç›–ã€è¢«æ’å…¥é—®é¢˜ã€‚</p>
<h2>è§£å†³æ–¹æ¡ˆ</h2>
<h3>è§’è‰²</h3>
<figure><figcaption>singleton</figcaption></figure>
<ul>
<li>
<p>Singletonï¼šå•ä¾‹ç±»</p>
<p>å•ä¾‹ç±»æä¾›getInstanceæ–¹æ³•è·å–å®ä¾‹</p>
</li>
</ul>
<h3>ç±»åˆ«</h3>
<p>å•ä¾‹æ¨¡å¼ä»å®ç°ä¸Šåˆ†ä¸ºä¸¤ç§ï¼šé¥¿æ±‰æ¨¡å¼å’Œæ‡’æ±‰æ¨¡å¼</p>
<h4>é¥¿æ±‰æ¨¡å¼</h4>
<p>ç±»åŠ è½½æ—¶ï¼Œinstanceé™æ€å®ä¾‹å°±å·²ç»åˆ›å»ºå¹¶åˆå§‹åŒ–å¥½äº†
å¥½å¤„åœ¨äºï¼šå¯¹äºè€—æ—¶è¾ƒé«˜çš„åˆå§‹åŒ–æ“ä½œï¼Œæå‰åˆ°ç¨‹åºå¯åŠ¨çš„æ—¶å€™å®Œæˆï¼Œè¿™æ ·å°±èƒ½é¿å…åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œå†å»åˆå§‹åŒ–å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚å¦‚æœåˆå§‹åŒ–æœ‰é—®é¢˜ï¼ŒåŸºäºfail-fastçš„è®¾è®¡åŸåˆ™ï¼ˆæœ‰é—®é¢˜åŠæ—©æš´éœ²ï¼‰ï¼Œè€Œä¸æ˜¯ç­‰å¾…ä½¿ç”¨çš„æ—¶å€™æ‰åé¦ˆé—®é¢˜ä¼šæ›´å¥½ã€‚</p>
<h4>æ‡’æ±‰æ¨¡å¼</h4>
<p>ç¨‹åºéœ€è¦æŸä¸ªå˜é‡çš„æ—¶å€™æ‰ä¼šå»åˆå§‹åŒ–
ç¼ºç‚¹åœ¨äºï¼šéœ€è¦å¢åŠ ä¸€æŠŠé”ï¼Œå¯¼è‡´å¹¶å‘åº¦ä½ã€‚é¢‘ç¹çš„ä½¿ç”¨ï¼Œä¹Ÿä¼šé¢‘ç¹çš„åŠ é”ã€é‡Šæ”¾é”ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚é€šå¸¸æˆ‘ä»¬ä¼šé‡‡ç”¨åŒé‡æ£€æµ‹ï¼Œä¸€æ—¦instanceåˆ›å»ºä¹‹åå°±ä¸å†åŠ é”ã€‚</p>
<h3>ç‰¹ç‚¹</h3>
<ul>
<li>å•ä¾‹ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼›</li>
<li>è¯¥å•ä¾‹å¯¹è±¡å¿…é¡»ç”±å•ä¾‹ç±»è‡ªè¡Œåˆ›å»ºï¼›</li>
<li>å•ä¾‹ç±»å¯¹å¤–æä¾›ä¸€ä¸ªè®¿é—®è¯¥å•ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ï¼›</li>
</ul>
<h2>æ•ˆæœ</h2>
<h3>åº”ç”¨åœºæ™¯</h3>
<ul>
<li>é…ç½®æ–‡ä»¶å®ä¾‹--é€šå¸¸æˆ‘ä»¬åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ï¼Œåªä½¿ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶å®ä¾‹ï¼›</li>
<li>DBå®ä¾‹--æˆ‘ä»¬åªæƒ³åˆ›å»ºDBå¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”è¯¥å®ä¾‹å°†åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼›</li>
<li>æ—¥å¿—å®ä¾‹--åŒæ ·ï¼Œåªåº”åˆ›å»ºä¸€ä¸ªæ—¥å¿—å®ä¾‹ï¼Œå¹¶åº”åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒï¼›</li>
</ul>
<h3>ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>å¯ä»¥å‡å°‘å†…å­˜å¼€é”€ï¼Œæé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œé¿å…å¯¹èµ„æºçš„è¿‡å¤šå ç”¨ï¼Œæ–¹ä¾¿å®šä½é—®é¢˜</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>ä¸èƒ½è¢«ç»§æ‰¿ï¼Œå¾ˆéš¾è¿›è¡Œç±»çš„æ‰©å±•ï¼Œè¿èƒŒäº†<code>å•ä¸€èŒè´£</code>åŸåˆ™ï¼Œå¿½ç•¥äº†å¤–éƒ¨å…³ç³»ï¼Œä¸é€‚ç”¨äºå˜åŒ–å¯¹è±¡ï¼Œå¯èƒ½å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜</li>
</ul>
<h2>ä»£ç ç¤ºä¾‹</h2>
<p>Goè¯­è¨€åˆ›å»ºå•ä¾‹çš„åŠæ³•</p>
<ul>
<li>Sync.Mutexæ–¹å¼ï¼Œåœ¨GetInstanceæ–¹æ³•ä¸­åŠ é”ï¼ˆæ‡’æ±‰æ–¹å¼ï¼‰</li>
<li>init()å‡½æ•°æ–¹å¼ï¼Œå¼•å…¥singletonåŒ…æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼ˆé¥¿æ±‰æ–¹å¼ï¼‰</li>
<li>sync.Onceæ–¹å¼ï¼Œåœ¨GetInstanceæ–¹æ³•ä¸­è°ƒç”¨once.Doæ–¹æ³•</li>
</ul>
<h3>Sync.Mutex æ–¹å¼</h3>
<div class="language-go" data-ext="go" data-title="go"><pre go="" class="language-go"><code><span class="token keyword">package</span> singleton

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>RWMutex<span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">type</span> single1 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> singleInstance1 <span class="token operator">*</span>single1

<span class="token keyword">func</span> <span class="token function">GetInstance1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>single1 <span class="token punctuation">{</span>
	<span class="token keyword">if</span> singleInstance1 <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">defer</span> lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> singleInstance1 <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Creating Single Instance Now"</span><span class="token punctuation">)</span>
			singleInstance1 <span class="token operator">=</span> <span class="token operator">&amp;</span>single1<span class="token punctuation">{</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Single Instance already created-1"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Single Instance already created-2"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> singleInstance1
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶ä¸­ï¼š</p>
<ul>
<li>18è¡Œå†æ¬¡åˆ¤æ–­çš„åŸå› æ˜¯ï¼šå¦‚æœå¤šä¸ªgoroutineé€šè¿‡ç¬¬ä¸€æ¬¡æ£€æŸ¥ï¼ˆ15è¡Œï¼‰ï¼Œå…¶ä¸­ä¸€ä¸ªgoroutineè·å¾—é”å¹¶åˆå§‹åŒ–äº†instanceç¤ºä¾‹ï¼Œé‚£ä¹ˆå‰©ä½™çš„goroutineå°±ä¸å¿…åœ¨è·å¾—é”ä¹‹åå†å»åˆå§‹åŒ–å®ä¾‹äº†ã€‚</li>
</ul>
<p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> singleton

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"sync"</span>
	<span class="token string">"testing"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestGetInstance1</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token function">GetInstance1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡atomicä¿è¯åŸå­æ€§ä¹Ÿæ˜¯å¯è¡Œçš„æ–¹æ¡ˆ</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> singleton

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"sync/atomic"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> single4 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> rwlock <span class="token operator">=</span> <span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>Mutex<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> singleInstance4 <span class="token operator">*</span>single4
<span class="token keyword">var</span> flag <span class="token builtin">uint32</span>

<span class="token keyword">func</span> <span class="token function">GetInstance4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>single4 <span class="token punctuation">{</span>
	<span class="token keyword">if</span> atomic<span class="token punctuation">.</span><span class="token function">LoadUint32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>flag<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		rwlock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">defer</span> rwlock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> atomic<span class="token punctuation">.</span><span class="token function">LoadUint32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>flag<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Creating Single Instance Now"</span><span class="token punctuation">)</span>
			singleInstance4 <span class="token operator">=</span> <span class="token operator">&amp;</span>single4<span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token keyword">defer</span> atomic<span class="token punctuation">.</span><span class="token function">StoreUint32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>flag<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Single Instance already created-1"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Single Instance already created-2"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> singleInstance4
<span class="token punctuation">}</span>
</code></pre></div><h3>init() å‡½æ•°æ–¹å¼</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> singleton

<span class="token keyword">type</span> single2 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> singleInstance2 <span class="token operator">*</span>single2

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	singleInstance2 <span class="token operator">=</span> <span class="token operator">&amp;</span>single2<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">GetInstance2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>single2 <span class="token punctuation">{</span>
	<span class="token keyword">return</span> singleInstance2
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> singleton

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"testing"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestGetInstance2</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			instance2 <span class="token operator">:=</span> <span class="token function">GetInstance2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"get single instance address %p and is nil? %t\n"</span><span class="token punctuation">,</span> instance2<span class="token punctuation">,</span> instance2 <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>sync.Once æ–¹å¼</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> singleton

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> once sync<span class="token punctuation">.</span>Once

<span class="token keyword">type</span> single3 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> singleInstance3 <span class="token operator">*</span>single3

<span class="token keyword">func</span> <span class="token function">GetInstance3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>single3 <span class="token punctuation">{</span>
	<span class="token keyword">if</span> singleInstance3 <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		once<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span>
			<span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Creating Single Instance Now"</span><span class="token punctuation">)</span>
				singleInstance3 <span class="token operator">=</span> <span class="token operator">&amp;</span>single3<span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Single Instance already created-2"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> singleInstance3
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> singleton

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"sync"</span>
	<span class="token string">"testing"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestGetInstance3</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token function">GetInstance3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/singleton/singleton-2x.png" type="image/png"/>
    </item>
    <item>
      <title>é€‰é¡¹æ¨¡å¼</title>
      <link>http://blog.cjhe.top/design-pattern/function/option.html</link>
      <guid>http://blog.cjhe.top/design-pattern/function/option.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">é€‰é¡¹æ¨¡å¼</source>
      <description>æç¤º ç”±äºGoè¯­è¨€ä¸æ”¯æŒé‡è½½å‡½æ•°ï¼Œå½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„æ–¹å¼æ„å»ºå¯¹è±¡æ—¶ï¼Œä¸å¾—ä¸ä½¿ç”¨å¤šä¸ªæ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚ å¯¹äºå¤šå‚æ•°çš„ç±»çš„åˆå§‹åŒ–é‡åˆ°å“ªäº›å›°å¢ƒï¼Ÿ ä¾‹å¦‚ï¼šHTTP Serverçš„åˆå§‹åŒ– ä¸ºäº†æ”¯æŒä¸åŒåŠŸèƒ½çš„Serverï¼Œæˆ‘ä»¬ä¸å¾—ä¸é€šè¿‡ä¸åŒçš„å‡½æ•°å‘½åå’Œå‚æ•°ï¼Œæ„é€ åˆå§‹åŒ–å‡½æ•°ã€‚ ä¸€åœˆå†™ä¸‹æ¥ï¼Œå‘ç°è¿™ä»…ä¸ç¦æ— æ³•åˆ—ä¸¾æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯ï¼Œè€Œä¸”ä»£ç å†—ä½™éå¸¸å¤šã€‚ é‚£ä¹ˆOption...</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sun, 06 Aug 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ç”±äºGoè¯­è¨€ä¸æ”¯æŒé‡è½½å‡½æ•°ï¼Œå½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„æ–¹å¼æ„å»ºå¯¹è±¡æ—¶ï¼Œä¸å¾—ä¸ä½¿ç”¨å¤šä¸ªæ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
</div>
<h2>å¯¹äºå¤šå‚æ•°çš„ç±»çš„åˆå§‹åŒ–é‡åˆ°å“ªäº›å›°å¢ƒï¼Ÿ</h2>
<p>ä¾‹å¦‚ï¼šHTTP Serverçš„åˆå§‹åŒ–</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Server <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Addr     <span class="token builtin">string</span>
	Port     <span class="token builtin">int</span>
	Protocol <span class="token builtin">string</span>
	Timeout  time<span class="token punctuation">.</span>Duration
	MaxConns <span class="token builtin">int</span>
	TLS      <span class="token operator">*</span>tls<span class="token punctuation">.</span>Config
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸ºäº†æ”¯æŒä¸åŒåŠŸèƒ½çš„Serverï¼Œæˆ‘ä»¬ä¸å¾—ä¸é€šè¿‡ä¸åŒçš„å‡½æ•°å‘½åå’Œå‚æ•°ï¼Œæ„é€ åˆå§‹åŒ–å‡½æ•°ã€‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// NewTLSServer å¸¦TLSçš„åˆå§‹åŒ–å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">NewTLSServer</span><span class="token punctuation">(</span>addr <span class="token builtin">string</span><span class="token punctuation">,</span> port <span class="token builtin">int</span><span class="token punctuation">,</span> tls <span class="token operator">*</span>tls<span class="token punctuation">.</span>Config<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Server<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Server<span class="token punctuation">{</span>
		Addr<span class="token punctuation">:</span>     addr<span class="token punctuation">,</span>
		Port<span class="token punctuation">:</span>     port<span class="token punctuation">,</span>
		Protocol<span class="token punctuation">:</span> <span class="token string">"tcp"</span><span class="token punctuation">,</span>
		Timeout<span class="token punctuation">:</span>  time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">,</span>
		MaxConns<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
		TLS<span class="token punctuation">:</span>      tls<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// NewServerWithTimeout å¸¦è¶…æ—¶æ—¶é—´çš„åˆå§‹åŒ–å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">NewServerWithTimeout</span><span class="token punctuation">(</span>addr <span class="token builtin">string</span><span class="token punctuation">,</span> port <span class="token builtin">int</span><span class="token punctuation">,</span> timeout time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Server<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Server<span class="token punctuation">{</span>
		Addr<span class="token punctuation">:</span>     addr<span class="token punctuation">,</span>
		Port<span class="token punctuation">:</span>     port<span class="token punctuation">,</span>
		Protocol<span class="token punctuation">:</span> <span class="token string">"tcp"</span><span class="token punctuation">,</span>
		Timeout<span class="token punctuation">:</span>  timeout<span class="token punctuation">,</span>
		MaxConns<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
		TLS<span class="token punctuation">:</span>      <span class="token boolean">nil</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// NewTLSServerWithMaxConnAndTimeout æ”¯æŒTLSå’Œæœ€å¤§è¿æ¥æ•°å’Œè¶…æ—¶æ—¶é—´çš„åˆå§‹åŒ–å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">NewTLSServerWithMaxConnAndTimeout</span><span class="token punctuation">(</span>addr <span class="token builtin">string</span><span class="token punctuation">,</span> port <span class="token builtin">int</span><span class="token punctuation">,</span> maxconns <span class="token builtin">int</span><span class="token punctuation">,</span> timeout time<span class="token punctuation">.</span>Duration<span class="token punctuation">,</span> tls <span class="token operator">*</span>tls<span class="token punctuation">.</span>Config<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Server<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Server<span class="token punctuation">{</span>
		Addr<span class="token punctuation">:</span>     addr<span class="token punctuation">,</span>
		Port<span class="token punctuation">:</span>     port<span class="token punctuation">,</span>
		Protocol<span class="token punctuation">:</span> <span class="token string">"tcp"</span><span class="token punctuation">,</span>
		Timeout<span class="token punctuation">:</span>  timeout<span class="token punctuation">,</span>
		MaxConns<span class="token punctuation">:</span> maxconns<span class="token punctuation">,</span>
		TLS<span class="token punctuation">:</span>      tls<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸€åœˆå†™ä¸‹æ¥ï¼Œå‘ç°è¿™ä»…ä¸ç¦æ— æ³•åˆ—ä¸¾æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯ï¼Œè€Œä¸”ä»£ç å†—ä½™éå¸¸å¤šã€‚</p>
<h2>é‚£ä¹ˆOption(é€‰é¡¹æ¨¡å¼)æ˜¯å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿ</h2>
<h3>é¦–å…ˆï¼šå®šä¹‰ä¸€ä¸ªOptionå‡½æ•°ï¼Œå‚æ•°ä¸ºServeræŒ‡é’ˆ</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Option <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>Server<span class="token punctuation">)</span>
</code></pre></div><p>å¦‚æœå…³æ³¨é”™è¯¯çš„è¯ï¼Œå¯ä»¥å®šä¹‰å¦‚ä¸‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Option <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>Server<span class="token punctuation">)</span> <span class="token builtin">error</span>
</code></pre></div><h3>å…¶æ¬¡ï¼šå®šä¹‰å„ç§åˆå§‹åŒ–é€‰é¡¹å‡½æ•°ï¼Œé€šå¸¸è¿”å›ä¸Šæ–‡å®šä¹‰çš„Option</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">WithProtocol</span><span class="token punctuation">(</span>protocol <span class="token builtin">string</span><span class="token punctuation">)</span> Option <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>s <span class="token operator">*</span>Server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		s<span class="token punctuation">.</span>Protocol <span class="token operator">=</span> protocol
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">WithTimeout</span><span class="token punctuation">(</span>timeout time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> Option <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>s <span class="token operator">*</span>Server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		s<span class="token punctuation">.</span>Timeout <span class="token operator">=</span> timeout
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">WithMaxConns</span><span class="token punctuation">(</span>maxconns <span class="token builtin">int</span><span class="token punctuation">)</span> Option <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>s <span class="token operator">*</span>Server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		s<span class="token punctuation">.</span>MaxConns <span class="token operator">=</span> maxconns
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">WihtTLS</span><span class="token punctuation">(</span>tls <span class="token operator">*</span>tls<span class="token punctuation">.</span>Config<span class="token punctuation">)</span> Option <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>s <span class="token operator">*</span>Server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		s<span class="token punctuation">.</span>TLS <span class="token operator">=</span> tls
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>é€šå¸¸ï¼šæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå…¨å±€çš„åˆå§‹åŒ–å‡½æ•°ï¼Œä½¿ç”¨Goè¯­è¨€å¯å˜å‚æ•°Option</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">NewServer</span><span class="token punctuation">(</span>addr <span class="token builtin">string</span><span class="token punctuation">,</span> port <span class="token builtin">int</span><span class="token punctuation">,</span> options <span class="token operator">...</span>Option<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Server<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	srv <span class="token operator">:=</span> Server<span class="token punctuation">{</span>
		Addr<span class="token punctuation">:</span>     addr<span class="token punctuation">,</span>
		Port<span class="token punctuation">:</span>     port<span class="token punctuation">,</span>
		Protocol<span class="token punctuation">:</span> <span class="token string">"tcp"</span><span class="token punctuation">,</span>
		Timeout<span class="token punctuation">:</span>  time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">,</span>
		MaxConns<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
		TLS<span class="token punctuation">:</span>      <span class="token boolean">nil</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> option <span class="token operator">:=</span> <span class="token keyword">range</span> options <span class="token punctuation">{</span>
		<span class="token function">option</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>srv<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//...</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>srv<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>æœ€åï¼Œæˆ‘ä»¬çœ‹çœ‹æœ€ç»ˆæ•ˆæœ</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>s1<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> <span class="token function">NewServer</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token comment">//é»˜è®¤çš„Server</span>
s2<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> <span class="token function">NewServer</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span> <span class="token number">2048</span><span class="token punctuation">,</span> <span class="token function">WithProtocol</span><span class="token punctuation">(</span><span class="token string">"udp"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//åè®®ä¸ºudpçš„Server</span>
s3<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> <span class="token function">NewServer</span><span class="token punctuation">(</span><span class="token string">"0.0.0.0"</span><span class="token punctuation">,</span> <span class="token number">8080</span><span class="token punctuation">,</span> <span class="token function">WithTimeout</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token operator">*</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">WithMaxConns</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//æ”¯æŒè¶…æ—¶æ—¶é—´å’Œæœ€å¤§è¿æ¥çš„Server</span>
</code></pre></div><h2>æ€»ç»“</h2>
<p>ç”±äºGoè¯­è¨€å‡½æ•°ä¸æ”¯æŒé‡è½½ï¼Œå› æ­¤åœ¨å¤šå‚æ•°çš„ç±»çš„åˆå§‹åŒ–ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°åˆå§‹åŒ–å‡½æ•°å†—ä½™é—®é¢˜ï¼Œ
æˆ‘ä»¬å¯ä»¥é€šè¿‡Option(é€‰é¡¹æ¨¡å¼)ï¼Œå¯ä»¥å¾ˆè‡ªç”±çš„å®šä¹‰ç±»çš„åˆå§‹åŒ–ï¼Œè§£å†³å‰é¢é‡åˆ°çš„é—®é¢˜ã€‚</p>
<p>è¿™é‡Œæœ¬è´¨ä¸Šä½¿ç”¨äº†Goè¯­è¨€ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>é—­åŒ…ï¼Œ<code>With...</code>ç­‰Optionçš„å®šä¹‰ï¼Œé€šè¿‡é—­åŒ…çš„æ–¹å¼ï¼Œæ‰©å±•äº†Optionçš„åœºæ™¯;</li>
<li>å¯å˜å‚æ•°ï¼Œ<code>(options ...option)</code>ï¼Œé€šè¿‡å¯å˜å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±é€‰æ‹©Option;</li>
</ul>
<h2>å‚è€ƒé“¾æ¥</h2>
<p><a href="https://coolshell.cn/articles/21146.html" target="_blank" rel="noopener noreferrer">GO ç¼–ç¨‹æ¨¡å¼ï¼šFUNCTIONAL OPTIONS</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>é€‚é…å™¨</title>
      <link>http://blog.cjhe.top/design-pattern/structural/adapter.html</link>
      <guid>http://blog.cjhe.top/design-pattern/structural/adapter.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">é€‚é…å™¨</source>
      <description>adapteradapter</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 18 Oct 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/adapter/adapter-zh-2x.png" alt="adapter" tabindex="0" loading="lazy"><figcaption>adapter</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼</h2>
<p>é€‚é…å™¨æ¨¡å¼(Adapter Pattern)ï¼šå®ƒå°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆç”¨æˆ·æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿çš„æ¥å£ä¸å…¼å®¹çš„é‚£äº›ç±»å¯ä»¥ç›¸äº’åˆä½œã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>é€‚é…å™¨</figcaption></figure>
<ul>
<li>
<p>Target: ç›®æ ‡è§’è‰²</p>
<p>è¯¥è§’è‰²å®šä¹‰æ˜¯ç”¨æˆ·æœŸæœ›çš„æ¥å£</p>
</li>
<li>
<p>Adapter: é€‚é…å™¨è§’è‰²</p>
<p>å°†é€‚é…è€…çš„æ¥å£è½¬æ¢ä¸ºç›®æ ‡æ¥å£çš„ç±»ï¼Œå®ƒæ˜¯é€‚é…å™¨æ¨¡å¼çš„æ ¸å¿ƒ</p>
</li>
<li>
<p>Adaptee: é€‚é…è€…</p>
<p>éœ€è¦è¢«é€‚é…çš„æ¥å£ï¼Œå®ƒä¸ç›®æ ‡è§’è‰²æ¥å£ä¸ä¸€è‡´</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> adapter

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// Targetæ˜¯é€‚é…çš„ç›®æ ‡æ¥å£</span>
<span class="token keyword">type</span> Target <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Adapteeæ˜¯è¢«é€‚é…çš„ç›®æ ‡æ¥å£</span>
<span class="token keyword">type</span> Adaptee <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">SpecificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// AdapteeImplæ˜¯è¢«é€‚é…çš„ç›®æ ‡ç±»</span>
<span class="token keyword">type</span> AdapteeImpl <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>impl <span class="token operator">*</span>AdapteeImpl<span class="token punctuation">)</span> <span class="token function">SpecificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"adapteeImpl SpecificRequest"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// NewAdapteeæ˜¯è¢«é€‚é…æ¥å£çš„å·¥å‚å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">NewAdaptee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Adaptee <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>AdapteeImpl<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Adapteræ˜¯è½¬æ¢Adapteeä¸ºTargetæ¥å£çš„é€‚é…å™¨</span>
<span class="token keyword">type</span> Adapter <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Adaptee
<span class="token punctuation">}</span>

<span class="token comment">// Adapteré€‚é…å™¨å®ç°ç›®æ ‡æ¥å£</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>a Adapter<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a<span class="token punctuation">.</span><span class="token function">SpecificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// NewAdapteræ˜¯Adapterçš„å·¥å‚å‡½æ•°ï¼Œå°†Adapteeè½¬åŒ–ä¸ºTarget</span>
<span class="token keyword">func</span> <span class="token function">NewAdapter</span><span class="token punctuation">(</span>adaptee Adaptee<span class="token punctuation">)</span> Target <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Adapter<span class="token punctuation">{</span>Adaptee<span class="token punctuation">:</span> adaptee<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> adapter

<span class="token keyword">func</span> <span class="token function">ExampleRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	adaptee <span class="token operator">:=</span> <span class="token function">NewAdaptee</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	target <span class="token operator">:=</span> <span class="token function">NewAdapter</span><span class="token punctuation">(</span>adaptee<span class="token punctuation">)</span>
	target<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// adapteeImpl SpecificRequest</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç±»ï¼Œä½†æ˜¯å®ƒçš„æ¥å£ä¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¥è½¬æ¢æ¥å£ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åŸæ¥çš„ç±»ã€‚</li>
<li>å½“æˆ‘ä»¬æƒ³è¦å¤ç”¨ä¸€äº›å·²æœ‰çš„åŠŸèƒ½ï¼Œä½†æ˜¯è¿™äº›åŠŸèƒ½æ¥è‡ªäºä¸åŒçš„ç³»ç»Ÿæˆ–è€…åº“æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¥ç»Ÿä¸€æ¥å£ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åŸæ¥çš„ç³»ç»Ÿæˆ–è€…åº“ã€‚</li>
<li>å½“æˆ‘ä»¬æƒ³è¦åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä½¿ç”¨åŒä¸€ä¸ªç±»æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¥é€‚åº”ä¸åŒçš„ç¯å¢ƒï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åŸæ¥çš„ç±»ã€‚</li>
</ul>
<h3>æœ‰å“ªäº›ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>æé«˜ä»£ç çš„é‡ç”¨æ€§ï¼šé€‚é…å™¨è®¾è®¡æ¨¡å¼å¯ä»¥å°†å·²ç»å­˜åœ¨çš„ä»£ç ä¸æ–°çš„ä»£ç è¿›è¡Œæ•´åˆï¼Œæé«˜äº†ç°æœ‰ä»£ç çš„é‡ç”¨ç‡ã€‚</li>
<li>å¯ä»¥è®©ä¸å…¼å®¹çš„ä»£ç ååŒå·¥ä½œï¼šé€‚é…å™¨è®¾è®¡æ¨¡å¼å¯ä»¥å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå¦ä¸€ä¸ªç±»çš„æ¥å£ï¼Œè®©å…¶å®ƒä¸å…¼å®¹çš„ä»£ç å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</li>
<li>ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼šé€‚é…å™¨è®¾è®¡æ¨¡å¼å¯ä»¥è®©å·²æœ‰çš„ç³»ç»Ÿä¿æŒç¨³å®šï¼Œä¸å¿…å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œåªæ˜¯å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œæ»¡è¶³<code>å¼€é—­åŸåˆ™</code>ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>å¢åŠ ä»£ç å¤æ‚æ€§ï¼šé€‚é…å™¨è®¾è®¡æ¨¡å¼éœ€è¦åœ¨åŸæœ‰çš„ç±»å’Œé€‚é…å™¨ç±»ä¸­å®šä¹‰å¤§é‡çš„ä»£ç ï¼Œä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</li>
<li>é™ä½ä»£ç çš„å¯è¯»æ€§ï¼šé€‚é…å™¨è®¾è®¡æ¨¡å¼åœ¨ç°æœ‰ç±»çš„åŸºç¡€ä¸Šå¢åŠ äº†é€‚é…å™¨ç±»ï¼Œä½¿å¾—ä»£ç çš„å¯è¯»æ€§ä¸‹é™ã€‚</li>
<li>æ–°å¢äº†ä¸€ä¸ªä¸­é—´å±‚ï¼Œå¯èƒ½ä¼šå½±å“ç³»ç»Ÿçš„æ€§èƒ½ï¼šé€‚é…å™¨è®¾è®¡æ¨¡å¼æ–°å¢äº†é€‚é…å™¨ç±»ï¼Œå¯èƒ½ä¼šå½±å“ç³»ç»Ÿçš„æ€§èƒ½ï¼Œå¢åŠ ç³»ç»Ÿçš„è¿è¡Œå¼€é”€ã€‚</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/adapter/adapter-zh-2x.png" type="image/png"/>
    </item>
    <item>
      <title>æ¡¥æ¥</title>
      <link>http://blog.cjhe.top/design-pattern/structural/bridge.html</link>
      <guid>http://blog.cjhe.top/design-pattern/structural/bridge.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">æ¡¥æ¥</source>
      <description>bridgebridge</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sat, 10 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/bridge/bridge-2x.png" alt="bridge" tabindex="0" loading="lazy"><figcaption>bridge</figcaption></figure>
<!-- more -->
<h2>åœºæ™¯é—®é¢˜</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå‡ ä½•å½¢çŠ¶ç±»Shapeï¼Œä»å®ƒæ‰©å±•å‡ºä¸¤ä¸ªå­ç±»ï¼šåœ†å½¢Cicleå’Œæ–¹å½¢Squareï¼Œä½ å¸Œæœ›å¯¹è¿™æ ·çš„ç±»è¿›è¡Œæ‰©å±•ä½¿å…¶åŒ…å«ä¸¤ç§é¢œè‰²ï¼šBlueã€Redã€‚</p>
<figure><figcaption>bridge-question</figcaption></figure>
<p>å¾ˆå¿«ä½ ä¼šå‘ç°ï¼Œå¦‚æœæ–°å¢å½¢çŠ¶ç±»ï¼Œä¾‹å¦‚: ä¸‰è§’å½¢ï¼Œæ¤­åœ†å½¢ã€‚æˆ–è€…æ–°å¢é¢œè‰²ï¼Œå­ç±»çš„æ•°é‡å°†ä¼šæš´èºå¼å¢é•¿ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¡¥æ¥æ¨¡å¼æ¥å°†å›¾å½¢çš„å½¢çŠ¶å’Œé¢œè‰²åˆ†ç¦»ä¸ºä¸¤ä¸ªå±‚æ¬¡ç»“æ„ï¼Œè®©å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</p>
<h2>ä»€ä¹ˆæ˜¯æ¡¥æ¥æ¨¡å¼</h2>
<p>æ¡¥æ¥æ¨¡å¼(Bridge Pattern)ï¼šæ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œèƒ½å°†æŠ½è±¡ä¸å®ç°åˆ†ç¦»ï¼Œä½¿äºŒè€…å¯ä»¥å„è‡ªå•ç‹¬å˜åŒ–è€Œä¸å—å¯¹æ–¹çº¦æŸï¼Œä½¿ç”¨æ—¶å†å°†å®ƒä»¬ç»„åˆèµ·æ¥ï¼Œå°±åƒæ¶è®¾æ¡¥æ¢ä¸€æ ·é“¾æ¥å®ƒä»¬çš„åŠŸèƒ½ï¼Œå¦‚æ­¤é™ä½äº†æŠ½è±¡ä¸å®ç°è¿™ä¸¤ä¸ªå¯å˜ç»´åº¦çš„è€¦åˆåº¦ï¼Œä»¥ä¿è¯ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚</p>
<p>æ¡¥æ¥æ¨¡å¼é€šè¿‡å°†ç»§æ‰¿æ”¹ä¸ºç»„åˆçš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æŠ½å–å…¶ä¸­ä¸€ä¸ªç»´åº¦å¹¶ä½¿ä¹‹æˆä¸ºç‹¬ç«‹çš„ç±»å±‚æ¬¡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨åˆå§‹ç±»ä¸­å¼•ç”¨è¿™ä¸ªæ–°å±‚æ¬¡çš„å¯¹è±¡ï¼Œä»è€Œä½¿å¾—ä¸€ä¸ªç±»ä¸å¿…æ‹¥æœ‰æ‰€æœ‰çš„çŠ¶æ€å’Œè¡Œä¸ºã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>bridge</figcaption></figure>
<ul>
<li>
<p>Abstraction: æŠ½è±¡è§’è‰²</p>
<p>å®šä¹‰æŠ½è±¡ç±»ï¼Œå¹¶åŒ…å«ä¸€ä¸ªå¯¹å®ç°å¯¹è±¡çš„å¼•ç”¨</p>
</li>
<li>
<p>RefinedAbstraction: æ‰©å±•æŠ½è±¡è§’è‰²</p>
<p>æŠ½è±¡è§’è‰²çš„å­ç±»ï¼Œå®ç°çˆ¶ç±»ä¸­çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå¹¶é€šè¿‡ç»„åˆå…³ç³»è°ƒç”¨å®ç°è§’è‰²ä¸­çš„ä¸šåŠ¡æ–¹æ³•ã€‚</p>
</li>
<li>
<p>Implementor: å®ç°è§’è‰²</p>
<p>å®šä¹‰å®ç°ç±»çš„æ¥å£ï¼Œè¯¥æ¥å£ä¸ä¸€å®šè¦ä¸æŠ½è±¡è§’è‰²çš„æ¥å£å®Œå…¨ä¸€è‡´ï¼Œè€Œæ˜¯æ ¹æ®å®é™…æƒ…å†µæ¥è®¾è®¡</p>
</li>
<li>
<p>ConCreteImplementor: å…·ä½“å®ç°è§’è‰²</p>
<p>å®ç°è§’è‰²æ¥å£çš„å…·ä½“å®ç°</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> bridge

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Implementor <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">OperationImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreateImplA <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ConcreateImplA<span class="token punctuation">)</span> <span class="token function">OperationImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ConcreateImplA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreateImplB <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ConcreateImplB<span class="token punctuation">)</span> <span class="token function">OperationImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ConcreateImplB"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Abstraction <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> RefineAbstractionA <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Impl Implementor
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ra RefineAbstractionA<span class="token punctuation">)</span> <span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"RefineAbstractionA"</span><span class="token punctuation">)</span>
	ra<span class="token punctuation">.</span>Impl<span class="token punctuation">.</span><span class="token function">OperationImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> RefineAbstractionB <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Impl Implementor
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ra RefineAbstractionB<span class="token punctuation">)</span> <span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"RefineAbstractionB"</span><span class="token punctuation">)</span>
	ra<span class="token punctuation">.</span>Impl<span class="token punctuation">.</span><span class="token function">OperationImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> bridge

<span class="token keyword">func</span> <span class="token function">ExampleOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> ConcreateImplA<span class="token punctuation">{</span><span class="token punctuation">}</span>
	b <span class="token operator">:=</span> ConcreateImplB<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token keyword">var</span> abstract Abstraction
	abstract <span class="token operator">=</span> RefineAbstractionA<span class="token punctuation">{</span>Impl<span class="token punctuation">:</span> a<span class="token punctuation">}</span>
	abstract<span class="token punctuation">.</span><span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	abstract <span class="token operator">=</span> RefineAbstractionA<span class="token punctuation">{</span>Impl<span class="token punctuation">:</span> b<span class="token punctuation">}</span>
	abstract<span class="token punctuation">.</span><span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	abstract <span class="token operator">=</span> RefineAbstractionB<span class="token punctuation">{</span>Impl<span class="token punctuation">:</span> a<span class="token punctuation">}</span>
	abstract<span class="token punctuation">.</span><span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	abstract <span class="token operator">=</span> RefineAbstractionB<span class="token punctuation">{</span>Impl<span class="token punctuation">:</span> b<span class="token punctuation">}</span>
	abstract<span class="token punctuation">.</span><span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// RefineAbstractionA</span>
	<span class="token comment">// ConcreateImplA</span>
	<span class="token comment">// RefineAbstractionA</span>
	<span class="token comment">// ConcreateImplB</span>
	<span class="token comment">// RefineAbstractionB</span>
	<span class="token comment">// ConcreateImplA</span>
	<span class="token comment">// RefineAbstractionB</span>
	<span class="token comment">// ConcreateImplB</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>è§£å†³åœºæ™¯é—®é¢˜</h3>
<p>å›åˆ°æœ¬æ–‡å‰é¢çš„é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨æ¡¥æ¥æ¨¡å¼è§£å†³è¯¥é—®é¢˜å‘¢</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> shape

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// Implementor</span>
<span class="token keyword">type</span> Color <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">GetColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// Concrete Implementor</span>
<span class="token keyword">type</span> Red <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r Red<span class="token punctuation">)</span> <span class="token function">GetColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token string">"red"</span>
<span class="token punctuation">}</span>

<span class="token comment">// Concrete Implementor</span>
<span class="token keyword">type</span> Blue <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>b Blue<span class="token punctuation">)</span> <span class="token function">GetColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token string">"blue"</span>
<span class="token punctuation">}</span>

<span class="token comment">// Abstraction</span>
<span class="token keyword">type</span> Shape <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Refined Abstraction</span>
<span class="token keyword">type</span> Circle <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	color Color <span class="token comment">//ç»„åˆå…³ç³»</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c Circle<span class="token punctuation">)</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">GetColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" circle"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Refined Abstraction</span>
<span class="token keyword">type</span> Square <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	color Color <span class="token comment">//ç»„åˆå…³ç³»</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s Square<span class="token punctuation">)</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">GetColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" square"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> shape

<span class="token keyword">func</span> <span class="token function">ExampleBridge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	red <span class="token operator">:=</span> Red<span class="token punctuation">{</span><span class="token punctuation">}</span>
	blue <span class="token operator">:=</span> Blue<span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> shape Shape
	shape <span class="token operator">=</span> Circle<span class="token punctuation">{</span>red<span class="token punctuation">}</span>
	shape<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	shape <span class="token operator">=</span> Circle<span class="token punctuation">{</span>blue<span class="token punctuation">}</span>
	shape<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	shape <span class="token operator">=</span> Square<span class="token punctuation">{</span>red<span class="token punctuation">}</span>
	shape<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	shape <span class="token operator">=</span> Square<span class="token punctuation">{</span>blue<span class="token punctuation">}</span>
	shape<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// red circle</span>
	<span class="token comment">// blue circle</span>
	<span class="token comment">// red square</span>
	<span class="token comment">// blue square</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>æœ‰å“ªäº›ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>å®ç°äº†æŠ½è±¡å’Œå®ç°éƒ¨åˆ†çš„åˆ†ç¦»ï¼Œä»è€Œæå¤§åœ°æé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œè®©æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†ç‹¬ç«‹å¼€æ¥ï¼Œè¿™æœ‰åŠ©äºç³»ç»Ÿè¿›è¡Œåˆ†å±‚è®¾è®¡ï¼Œä»è€Œäº§ç”Ÿæ›´å¥½çš„ç»“æ„åŒ–ç³»ç»Ÿã€‚</li>
<li>ç¬¦åˆå¼€é—­åŸåˆ™ï¼ŒæŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†å¯ä»¥åˆ†åˆ«ç‹¬ç«‹åœ°æ‰©å±•ï¼Œè€Œä¸ä¼šç›¸äº’å½±å“ï¼Œå¯¹ç³»ç»Ÿçš„ä¿®æ”¹æ˜¯é€šè¿‡å¢åŠ ä»£ç è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯ä¿®æ”¹åŸæœ‰ä»£ç ã€‚</li>
<li>ç¬¦åˆåˆæˆå¤ç”¨åŸåˆ™ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„å®ç°éƒ¨åˆ†æ¥ç»„åˆä¸åŒçš„æŠ½è±¡éƒ¨åˆ†ï¼Œå®ç°æ›´å¤šçš„åŠŸèƒ½ç»„åˆã€‚</li>
<li>å…¶å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ï¼Œå®¢æˆ·åªéœ€è¦å…³å¿ƒæŠ½è±¡éƒ¨åˆ†çš„æ¥å£ï¼Œä¸ç”¨äº†è§£å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>å¢åŠ äº†ç³»ç»Ÿçš„ç†è§£å’Œè®¾è®¡éš¾åº¦ï¼Œç”±äºå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…ä¸€å¼€å§‹å°±é’ˆå¯¹æŠ½è±¡å±‚è¿›è¡Œè®¾è®¡å’Œç¼–ç¨‹ï¼Œèƒ½æ­£ç¡®åœ°è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œè¿™å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§å’Œå­¦ä¹ æˆæœ¬ã€‚</li>
<li>è¦æ±‚æ­£ç¡®è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œå¦‚æœç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªå˜åŒ–ç»´åº¦æˆ–è€…ä¸¤ä¸ªå˜åŒ–ç»´åº¦ä¹‹é—´æœ‰å¾ˆå¼ºçš„è€¦åˆå…³ç³»ï¼Œé‚£ä¹ˆæ¡¥æ¥æ¨¡å¼å°±ä¸é€‚ç”¨äº†ã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<h3>æ¡¥æ¥è®¾è®¡æ¨¡å¼å’Œé€‚é…å™¨è®¾è®¡æ¨¡å¼çš„åŒºåˆ«</h3>
<p>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸ºäº†å¤ç”¨å·²æœ‰æ¥å£çš„åŠŸèƒ½ï¼Œè€Œé€šè¿‡é€‚é…å°†å·²æœ‰æ¥å£åŠŸèƒ½å¼•å…¥åˆ°æ‰€éœ€æ¥å£çš„ä¸€ç§æ¨¡å¼ï¼Œç›®çš„æ˜¯èƒ½å¤Ÿç»“åˆã€‚é€‚é…å™¨æ˜¯å…ˆå®šä¹‰äº†æ–°æ¥å£ï¼Œç„¶åæ‰ä¸æ—§æ¥å£è¿›è¡Œé€‚é…ï¼Œå³å…ˆæ¥å£åå…³ç³»ã€‚</p>
<p>æ¡¥æ¥æ¨¡å¼æ˜¯åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­è§£å†³å¤šä¸ªç»´åº¦ç‹¬ç«‹å˜åŒ–çš„ç±»ä¹‹é—´çš„è€¦åˆåº¦é—®é¢˜ï¼Œå…ˆå®šä¹‰äº†ä¸€ä¸ªæ¡¥ï¼ˆå³å®ç°å’ŒæŠ½è±¡çš„å…³ç³»ï¼‰ï¼Œé€šè¿‡å¤šä¸ªå®ç°çš„ä¸åŒç»„åˆè¾¾åˆ°å…¶çµæ´»æ€§çš„ç›®çš„ï¼Œå³å…ˆå…³ç³»åç»„åˆã€‚</p>
<ul>
<li>
<p>é€‚é…å™¨æ¨¡å¼ä¸­é€‚é…å™¨è§’è‰²åªéœ€è¦ä¸€ä¸ªï¼Œè§£å†³ä¸¤ä¸ªæ¥å£é€‚é…é—®é¢˜ã€‚</p>
</li>
<li>
<p>æ¡¥æ¥æ¨¡å¼ä¸­æ‰©å±•æŠ½è±¡è§’è‰²é€šå¸¸æœ‰å¤šä¸ªï¼Œè§£å†³æŠ½è±¡å’Œå®ç°ç»„åˆçˆ†ç‚¸é—®é¢˜ã€‚</p>
</li>
<li>
<p>é€‚é…å™¨æ¨¡å¼ä¸­é€‚é…è€…é€šå¸¸åªæœ‰ä¸€ä¸ªã€‚</p>
</li>
<li>
<p>æ¡¥æ¥æ¨¡å¼ä¸­å…·ä½“æŠ½è±¡å’Œå®ç°çš„å…³ç³»å¯ä»¥æœ‰å¤šä¸ªï¼Œä½¿å¾—å¤šä¸ªç»´åº¦ç‹¬ç«‹å˜åŒ–ã€‚</p>
</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/bridge/bridge-2x.png" type="image/png"/>
    </item>
    <item>
      <title>ç»„åˆ</title>
      <link>http://blog.cjhe.top/design-pattern/structural/composite.html</link>
      <guid>http://blog.cjhe.top/design-pattern/structural/composite.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ç»„åˆ</source>
      <description>compositecomposite</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sat, 03 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/composite/composite-2x.png" alt="composite" tabindex="0" loading="lazy"><figcaption>composite</figcaption></figure>
<!-- more -->
<h2>æŸä¸€åœºæ™¯é—®é¢˜</h2>
<p>ä¾‹å¦‚ï¼šæœ‰ä¸¤ç±»å¯¹è±¡ï¼š<code>äº§å“</code>å’Œ<code>ç›’å­</code>ï¼Œ<code>ç›’å­</code>ä¸­å¯ä»¥åŒ…å«å¤šä¸ª<code>äº§å“</code>æˆ–è€…å°<code>ç›’å­</code>ï¼Œåœ¨æ­¤åŸºç¡€éœ€è¦çŸ¥é“è¿™ä¸ªç›’å­çš„æ€»ä»·æ ¼ï¼Œå¦‚æœç›´æ¥æ‰“å¼€æ‰€æœ‰çš„ç›’å­ï¼Œç´¯åŠ äº§å“çš„ä»·å€¼ï¼Œè™½ç„¶å¯è¡Œã€‚ä½†å¯¹è®¡ç®—æœºä¼šå¢åŠ è®¸å¤šç¹æ‚çš„ç»†èŠ‚ã€‚</p>
<p>é‚£ä¹ˆä½¿ç”¨ç»„åˆæ¨¡å¼ï¼Œå°±å¯ä»¥å¾ˆå¥½çš„ç®€åŒ–è¿™ä¸ªç»†èŠ‚ï¼Œå¦‚æœæ˜¯<code>äº§å“</code>å°±ç›´æ¥è¿”å›ä»·æ ¼ï¼Œå¦‚æœæ˜¯<code>ç›’å­</code>ï¼Œåˆ™éå†ç›’å­ä¸­çš„æ‰€æœ‰é¡¹ç›®ï¼Œç´¯åŠ ä»·æ ¼ã€‚æœ€å¤§çš„ä¼˜ç‚¹ï¼Œ<code>äº§å“</code>å’Œ<code>ç›’å­</code>æä¾›ä¸€è‡´çš„æ¥å£ï¼Œä½ æ— éœ€äº†è§£å†…éƒ¨ç»“æ„ï¼Œåªéœ€è¦è°ƒç”¨è¿™ä¸€ä¸ªæ¥å£å³å¯ã€‚</p>
<h2>ä»€ä¹ˆæ˜¯ç»„åˆæ¨¡å¼</h2>
<p>ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰ï¼šæ˜¯é’ˆå¯¹ç”±å¤šä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼ˆéƒ¨åˆ†ï¼‰ç»„æˆçš„æ ‘å½¢ç»“æ„çš„å¯¹è±¡ï¼ˆæ•´ä½“ï¼‰è€Œå‘å±•å‡ºçš„ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒèƒ½å¤Ÿä½¿å®¢æˆ·ç«¯åœ¨æ“ä½œæ•´ä½“å¯¹è±¡æˆ–è€…å…¶ä¸‹çš„æ¯ä¸ªèŠ‚ç‚¹å¯¹è±¡æ—¶åšå‡ºç»Ÿä¸€çš„å“åº”ï¼Œä¿è¯æ ‘å½¢ç»“æ„å¯¹è±¡ä½¿ç”¨æ–¹æ³•çš„ä¸€è‡´æ€§ã€‚ä½¿å®¢æˆ·ç«¯ä¸å¿…å…³æ³¨å¯¹è±¡çš„æ•´ä½“æˆ–éƒ¨åˆ†ï¼Œæœ€ç»ˆè¾¾åˆ°å¯¹è±¡å¤æ‚çš„å±‚æ¬¡ç»“æ„ä¸å®¢æˆ·ç«¯è§£è€¦çš„ç›®çš„ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>composite</figcaption></figure>
<ul>
<li>
<p>Component: æŠ½è±¡æ„ä»¶è§’è‰²</p>
<p>å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºæ ‘å¶æ„ä»¶å’Œæ ‘ææ„ä»¶å£°æ˜å…¬å…±æ¥å£</p>
</li>
<li>
<p>Leaf: æ ‘å¶æ„ä»¶è§’è‰²</p>
<p>ç»„åˆæ¨¡å¼ä¸­çš„å¶èŠ‚ç‚¹å¯¹è±¡ï¼Œå®ƒæ²¡æœ‰å­èŠ‚ç‚¹</p>
</li>
<li>
<p>Composite: æ ‘ææ„ä»¶è§’è‰²</p>
<p>æ˜¯ç»„åˆæ¨¡å¼ä¸­çš„åˆ†æ”¯èŠ‚ç‚¹å¯¹è±¡ï¼Œå®ƒä¸å­èŠ‚ç‚¹ã€‚</p>
</li>
</ul>
<h3>æœ‰å“ªäº›åˆ†ç±»</h3>
<p>(1) é€æ˜æ–¹å¼ï¼šåœ¨è¯¥æ–¹å¼ä¸­ï¼Œç”±äºæŠ½è±¡æ„ä»¶å£°æ˜äº†æ‰€æœ‰å­ç±»ä¸­çš„å…¨éƒ¨æ–¹æ³•ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯æ— é¡»åŒºåˆ«æ ‘å¶å¯¹è±¡å’Œæ ‘æå¯¹è±¡ï¼Œå¯¹å®¢æˆ·ç«¯æ¥è¯´æ˜¯é€æ˜çš„ã€‚ä½†å…¶ç¼ºç‚¹æ˜¯ï¼šæ ‘å¶æ„ä»¶æœ¬æ¥æ²¡æœ‰ Add()ã€Remove() åŠ GetChild() æ–¹æ³•ï¼Œå´è¦å®ç°å®ƒä»¬ï¼ˆç©ºå®ç°æˆ–æŠ›å¼‚å¸¸ï¼‰ï¼Œè¿™æ ·ä¼šå¸¦æ¥ä¸€äº›å®‰å…¨æ€§é—®é¢˜ã€‚</p>
<p>(2) å®‰å…¨æ–¹å¼ï¼šåœ¨è¯¥æ–¹å¼ä¸­ï¼Œå°†ç®¡ç†å­æ„ä»¶çš„æ–¹æ³•ç§»åˆ°æ ‘ææ„ä»¶ä¸­ï¼ŒæŠ½è±¡æ„ä»¶å’Œæ ‘å¶æ„ä»¶æ²¡æœ‰å¯¹å­å¯¹è±¡çš„ç®¡ç†æ–¹æ³•ï¼Œè¿™æ ·å°±é¿å…äº†ä¸Šä¸€ç§æ–¹å¼çš„å®‰å…¨æ€§é—®é¢˜ï¼Œä½†ç”±äºå¶å­å’Œåˆ†æ”¯æœ‰ä¸åŒçš„æ¥å£ï¼Œå®¢æˆ·ç«¯åœ¨è°ƒç”¨æ—¶è¦çŸ¥é“æ ‘å¶å¯¹è±¡å’Œæ ‘æå¯¹è±¡çš„å­˜åœ¨ï¼Œæ‰€ä»¥å¤±å»äº†é€æ˜æ€§ã€‚</p>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> composite

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Component <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Leaf <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>l <span class="token operator">*</span>Leaf<span class="token punctuation">)</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"leaf execute"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Composite <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	children <span class="token punctuation">[</span><span class="token punctuation">]</span>Component
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>composite <span class="token operator">*</span>Composite<span class="token punctuation">)</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> composite<span class="token punctuation">.</span>children <span class="token punctuation">{</span>
		v<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>composite <span class="token operator">*</span>Composite<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>c Component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	composite<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>composite<span class="token punctuation">.</span>children<span class="token punctuation">,</span> c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>composite <span class="token operator">*</span>Composite<span class="token punctuation">)</span> <span class="token function">Remove</span><span class="token punctuation">(</span>c Component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag <span class="token operator">:=</span> <span class="token boolean">false</span>
	<span class="token keyword">switch</span> c<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token operator">*</span>Leaf<span class="token punctuation">:</span>
		children <span class="token operator">:=</span> composite<span class="token punctuation">.</span>children
		<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> children <span class="token punctuation">{</span>
			<span class="token keyword">if</span> value<span class="token punctuation">,</span> ok <span class="token operator">:=</span> v<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>Leaf<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
				<span class="token keyword">if</span> value <span class="token operator">==</span> c <span class="token punctuation">{</span>
					flag <span class="token operator">=</span> <span class="token boolean">true</span>
					<span class="token keyword">switch</span> i <span class="token punctuation">{</span>
					<span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span>
						composite<span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
					<span class="token keyword">case</span> <span class="token function">len</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>
						composite<span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">[</span><span class="token number">0</span> <span class="token punctuation">:</span> <span class="token function">len</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
					<span class="token keyword">default</span><span class="token punctuation">:</span>
						composite<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>children<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> children<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">break</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">case</span> <span class="token operator">*</span>Composite<span class="token punctuation">:</span>
		children <span class="token operator">:=</span> composite<span class="token punctuation">.</span>children
		<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> children <span class="token punctuation">{</span>
			<span class="token keyword">if</span> value<span class="token punctuation">,</span> ok <span class="token operator">:=</span> v<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>Composite<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
				<span class="token keyword">if</span> value <span class="token operator">==</span> c <span class="token punctuation">{</span>
					flag <span class="token operator">=</span> <span class="token boolean">true</span>
					<span class="token keyword">switch</span> i <span class="token punctuation">{</span>
					<span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span>
						composite<span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
					<span class="token keyword">case</span> <span class="token function">len</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>
						composite<span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">[</span><span class="token number">0</span> <span class="token punctuation">:</span> <span class="token function">len</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
					<span class="token keyword">default</span><span class="token punctuation">:</span>
						composite<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>children<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> children<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token operator">!</span>flag <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"not found"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>composite <span class="token operator">*</span>Composite<span class="token punctuation">)</span> <span class="token function">GetChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>Component <span class="token punctuation">{</span>
	<span class="token keyword">return</span> composite<span class="token punctuation">.</span>children
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> composite

<span class="token keyword">func</span> <span class="token function">ExampleLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> c Component
	l <span class="token operator">:=</span> Leaf<span class="token punctuation">{</span><span class="token punctuation">}</span>
	c <span class="token operator">=</span> <span class="token operator">&amp;</span>l
	c<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// leaf execute</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ExampleComposite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> c Component
	composite <span class="token operator">:=</span> <span class="token operator">&amp;</span>Composite<span class="token punctuation">{</span>
		children<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>Component<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	composite<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Leaf<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	composite<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Leaf<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	c <span class="token operator">=</span> composite
	c<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// leaf execute</span>
	<span class="token comment">// leaf execute</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>ç»„åˆæ¨¡å¼ä½¿å¾—å®¢æˆ·ç«¯ä»£ç å¯ä»¥ä¸€è‡´åœ°å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡ï¼Œæ— é¡»å…³å¿ƒè‡ªå·±å¤„ç†çš„æ˜¯å•ä¸ªå¯¹è±¡ï¼Œè¿˜æ˜¯ç»„åˆå¯¹è±¡ï¼Œè¿™ç®€åŒ–äº†å®¢æˆ·ç«¯ä»£ç ï¼›</li>
<li>æ›´å®¹æ˜“åœ¨ç»„åˆä½“å†…åŠ å…¥æ–°çš„å¯¹è±¡ï¼Œå®¢æˆ·ç«¯ä¸ä¼šå› ä¸ºåŠ å…¥äº†æ–°çš„å¯¹è±¡è€Œæ›´æ”¹æºä»£ç ï¼Œæ»¡è¶³<strong>å¼€é—­åŸåˆ™</strong>ï¼›</li>
<li>ç»„åˆæ¨¡å¼é€‚ç”¨äºé€’å½’ç»“æ„ï¼Œä½¿å¾—ä»£ç çš„å®ç°å˜å¾—æ›´åŠ ç®€å•ï¼›</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>é€’å½’ç»“æ„é™åˆ¶ï¼šé€’å½’ç»“æ„å¯¹äºè®¡ç®—æœºçš„æ€§èƒ½æ¥è¯´æ˜¯ä¸€ç§æŒ‘æˆ˜ï¼Œå¦‚æœç»„åˆå¯¹è±¡çš„ç»“æ„è¿‡äºå¤æ‚ï¼Œè¿™å°†ä¼šå½±å“ç¨‹åºçš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ï¼›</li>
<li>æ¥å£å®ç°å¤æ‚ï¼šç»„åˆå¯¹è±¡å¿…é¡»å®ç°å•ä¸ªå¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•ã€‚åœ¨ç»„åˆå¯¹è±¡ä¸­å®ç°ä¸å•ä¸ªå¯¹è±¡ç›¸åŒçš„æ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´ä»£ç å†—ä½™ï¼›</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/composite/composite-2x.png" type="image/png"/>
    </item>
    <item>
      <title>è£…é¥°å™¨</title>
      <link>http://blog.cjhe.top/design-pattern/structural/decorator.html</link>
      <guid>http://blog.cjhe.top/design-pattern/structural/decorator.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">è£…é¥°å™¨</source>
      <description>decoratordecorator</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sun, 04 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/decorator/decorator-2x.png" alt="decorator" tabindex="0" loading="lazy"><figcaption>decorator</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯è£…é¥°å™¨æ¨¡å¼</h2>
<p>è£…é¥°å™¨æ¨¡å¼(Decorator Pattern)ï¼šå®ƒå¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„ç»“æ„å’ŒåŠŸèƒ½çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½æˆ–è€…å¢å¼ºåŸæœ‰åŠŸèƒ½ã€‚è£…é¥°å™¨è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨ä¸€ä¸ªè£…é¥°å™¨å¯¹è±¡æ¥åŒ…è£…åŸæœ‰å¯¹è±¡ï¼Œä»è€Œå®ç°å¯¹åŸæœ‰å¯¹è±¡çš„åŠŸèƒ½æ‰©å±•æˆ–ä¿®æ”¹ã€‚</p>
<p>è£…é¥°å™¨éå¸¸ç±»ä¼¼äº<strong>ç»§æ‰¿</strong>ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸ºäº†å¢å¼ºåŸå§‹å¯¹è±¡çš„åŠŸèƒ½ï¼ŒåŒºåˆ«åœ¨äºæ–¹å¼çš„ä¸åŒï¼Œåè€…æ˜¯åœ¨ç¼–è¯‘æ—¶(compile-time)é™æ€åœ°é€šè¿‡å¯¹åŸå§‹ç±»çš„ç»§æ‰¿å®Œæˆï¼Œè€Œå‰è€…åˆ™æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶(run-time)é€šè¿‡å¯¹åŸå§‹å¯¹è±¡åœ°<strong>åŒ…è£…</strong>å®Œæˆã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>decorator</figcaption></figure>
<ul>
<li>
<p>Component: ç»„ä»¶æ¥å£</p>
<p>æ‰€æœ‰è¢«è£…é¥°ç»„ä»¶åŠè£…é¥°å™¨å¯¹åº”çš„æ¥å£æ ‡å‡†</p>
</li>
<li>
<p>ConcreteComponent: å…·ä½“ç»„ä»¶</p>
<p>éœ€è¦è¢«è£…é¥°çš„ç»„ä»¶ï¼Œå®ç°ç»„ä»¶æ¥å£æ ‡å‡†</p>
</li>
<li>
<p>Decorator: è£…é¥°å™¨</p>
<p>æŒæœ‰ä¸€ä¸ªç»„ä»¶ï¼ˆComponentï¼‰å¯¹è±¡çš„å®ä¾‹ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¸ç»„ä»¶æ¥å£ä¸€è‡´çš„æ¥å£ã€‚</p>
</li>
<li>
<p>ConcreteDecorator: è£…é¥°å™¨å®ç°</p>
<p>ç»§æ‰¿è‡ªè£…é¥°å™¨æŠ½è±¡ç±»çš„å…·ä½“å­ç±»è£…é¥°å™¨ï¼Œå¯ä»¥æœ‰å¤šç§å®ç°ï¼Œåœ¨è¢«è£…é¥°ç»„ä»¶å¯¹è±¡çš„åŸºç¡€ä¸Šä¸ºå…¶æ·»åŠ æ–°çš„ç‰¹æ€§ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> decorator

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Component <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteComponent <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteComponent<span class="token punctuation">)</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concrete component execute"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Decorator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	component Component
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>Decorator<span class="token punctuation">)</span> <span class="token function">Decorator</span><span class="token punctuation">(</span>c Component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	d<span class="token punctuation">.</span>component <span class="token operator">=</span> c
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d Decorator<span class="token punctuation">)</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	d<span class="token punctuation">.</span>component<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteDecortor1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Decorator
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteDecortor1<span class="token punctuation">)</span> <span class="token function">addedFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concrete decortor1 add function"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteDecortor1<span class="token punctuation">)</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span><span class="token function">addedFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>Decorator<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteDecortor2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Decorator
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteDecortor2<span class="token punctuation">)</span> <span class="token function">addedFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"concrete decortor2 add function"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c ConcreteDecortor2<span class="token punctuation">)</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span><span class="token function">addedFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>Decorator<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ExampleComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c <span class="token operator">:=</span> ConcreteComponent<span class="token punctuation">{</span><span class="token punctuation">}</span>
	c<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//c1æ‰©å±•cçš„åŠŸèƒ½</span>
	<span class="token keyword">var</span> c1 ConcreteDecortor1
	c1<span class="token punctuation">.</span>Decorator<span class="token punctuation">.</span><span class="token function">Decorator</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
	c1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//c2åˆæ‰©å±•c1çš„åŠŸèƒ½</span>
	<span class="token keyword">var</span> c2 ConcreteDecortor2
	c2<span class="token punctuation">.</span>Decorator<span class="token punctuation">.</span><span class="token function">Decorator</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span>
	c2<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// concrete component execute</span>
	<span class="token comment">// concrete decortor1 add function</span>
	<span class="token comment">// concrete component execute</span>
	<span class="token comment">// concrete decortor2 add function</span>
	<span class="token comment">// concrete decortor1 add function</span>
	<span class="token comment">// concrete component execute</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å½“éœ€è¦åœ¨ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„ç»“æ„å’ŒåŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œç»™å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½æˆ–è€…å¢å¼ºåŸæœ‰åŠŸèƒ½æ—¶ã€‚</li>
<li>å½“éœ€è¦æ ¹æ®ä¸åŒçš„éœ€æ±‚ï¼Œçµæ´»åœ°ç»„åˆä¸åŒçš„åŠŸèƒ½æ‰©å±•æˆ–ä¿®æ”¹æ—¶ã€‚</li>
<li>å½“éœ€è¦ä¿æŒåŸæœ‰å¯¹è±¡çš„æ¥å£ä¸å˜ï¼Œä¿è¯äº†è£…é¥°åçš„å¯¹è±¡å’ŒåŸæœ‰å¯¹è±¡çš„å…¼å®¹æ€§æ—¶ã€‚</li>
</ul>
<h3>æœ‰å“ªäº›ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰å¯¹è±¡çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œç»™å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½æˆ–è€…å¢å¼ºåŸæœ‰åŠŸèƒ½ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
<li>å¯ä»¥ä¿æŒåŸæœ‰å¯¹è±¡çš„æ¥å£ä¸å˜ï¼Œä¿è¯äº†è£…é¥°åçš„å¯¹è±¡å’ŒåŸæœ‰å¯¹è±¡çš„å…¼å®¹æ€§ã€‚</li>
<li>å¯ä»¥æ ¹æ®éœ€è¦çµæ´»åœ°ç»„åˆä¸åŒçš„è£…é¥°å™¨å¯¹è±¡ï¼Œå®ç°å¤šç§åŠŸèƒ½æ‰©å±•æˆ–ä¿®æ”¹ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œå› ä¸ºéœ€è¦åˆ›å»ºå¤šä¸ªè£…é¥°å™¨å¯¹è±¡å’Œç®¡ç†å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</li>
<li>ä¼šå¢åŠ ç³»ç»Ÿçš„è¿è¡Œæ—¶å¼€é”€ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨åŸæœ‰å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œéƒ½éœ€è¦ç»è¿‡è£…é¥°å™¨å¯¹è±¡çš„è½¬å‘å’Œå¤„ç†ã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<h3>è£…é¥°å™¨è®¾è®¡æ¨¡å¼å’Œé€‚é…å™¨è®¾è®¡æ¨¡å¼</h3>
<p>è£…é¥°å™¨æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«åœ¨äºå®ƒä»¬çš„åº”ç”¨åœºæ™¯å’Œç›®çš„ä¸åŒã€‚è£…é¥°å™¨æ¨¡å¼å¯ä»¥åº”ç”¨äºä»»ä½•éœ€è¦å¯¹å¯¹è±¡è¿›è¡ŒåŠŸèƒ½æ‰©å±•æˆ–ä¿®æ”¹çš„åœºæ™¯ï¼Œä¾‹å¦‚æ—¥å¿—è®°å½•ã€ç¼“å­˜ã€éªŒè¯ç­‰ã€‚é€‚é…å™¨æ¨¡å¼ä¸»è¦åº”ç”¨äºä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£ä¹‹é—´çš„è½¬æ¢ï¼Œä¾‹å¦‚ä¸åŒç±»å‹çš„ç”µæºæ’å¤´ã€ä¸åŒæ ¼å¼çš„æ•°æ®æºç­‰ã€‚</p>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/decorator/decorator-2x.png" type="image/png"/>
    </item>
    <item>
      <title>å¤–è§‚</title>
      <link>http://blog.cjhe.top/design-pattern/structural/facade.html</link>
      <guid>http://blog.cjhe.top/design-pattern/structural/facade.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å¤–è§‚</source>
      <description>facadefacade</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Fri, 02 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/facade/facade-2x.png" alt="facade" tabindex="0" loading="lazy"><figcaption>facade</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯å¤–è§‚æ¨¡å¼</h2>
<p>å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰ï¼šåˆå«ä½œé—¨é¢æ¨¡å¼ï¼Œæ˜¯ä¸€ç§é€šè¿‡ä¸ºå¤šä¸ªå¤æ‚çš„å­ç³»ç»Ÿæä¾›ä¸€ä¸ªä¸€è‡´çš„æ¥å£ï¼Œè€Œä½¿è¿™äº›å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“è¢«è®¿é—®çš„æ¨¡å¼ã€‚è¯¥æ¨¡å¼å¯¹å¤–æœ‰ä¸€ä¸ªç»Ÿä¸€æ¥å£ï¼Œå¤–éƒ¨åº”ç”¨ç¨‹åºä¸ç”¨å…³å¿ƒå†…éƒ¨å­ç³»ç»Ÿçš„å…·ä½“ç»†èŠ‚ï¼Œè¿™æ ·ä¼šå¤§å¤§é™ä½åº”ç”¨ç¨‹åºçš„å¤æ‚åº¦ï¼Œæé«˜äº†ç¨‹åºçš„å¯ç»´æŠ¤æ€§ã€‚</p>
<figure><figcaption>å¤–è§‚</figcaption></figure>
<p>å¤–è§‚æ¨¡å¼ç»å¸¸åœ¨æˆ‘ä»¬ä¸çŸ¥ä¸è§‰ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼šMVCæ¶æ„ä¸­ï¼ŒControllerå±‚å¯¹å¤–æä¾›ç®€å•çš„æ¥å£ï¼ŒControllerå±‚åŒ…å«å¤šä¸ªServiceå±‚è¿›è¡ŒåŠŸèƒ½åˆ’åˆ†ï¼Œæ¯ä¸ªServiceå±‚ä¹Ÿå¯èƒ½åŒ…å«å¤šä¸ªDaoå±‚è¿›è¡Œæ•°æ®æ“ä½œã€‚</p>
<figure><figcaption>mvc</figcaption></figure>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<ul>
<li>
<p>Facade: å¤–è§‚è§’è‰²</p>
<p>å®šä¹‰ä¸€ä¸ªç®€å•çš„æ¥å£</p>
</li>
<li>
<p>Subsystemï¼šå­ç³»ç»Ÿè§’è‰²</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> facade

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Facade <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	system1 Subsystem1
	system2 Subsystem2
	system3 Subsystem3
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>f Facade<span class="token punctuation">)</span> <span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	f<span class="token punctuation">.</span>system1<span class="token punctuation">.</span><span class="token function">Operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	f<span class="token punctuation">.</span>system2<span class="token punctuation">.</span><span class="token function">Operation2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	f<span class="token punctuation">.</span>system3<span class="token punctuation">.</span><span class="token function">Operation3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Subsystem1 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s Subsystem1<span class="token punctuation">)</span> <span class="token function">Operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"subsystem1 operation"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Subsystem2 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s Subsystem2<span class="token punctuation">)</span> <span class="token function">Operation2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"subsystem2 operation"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Subsystem3 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s Subsystem3<span class="token punctuation">)</span> <span class="token function">Operation3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"subsystem3 operation"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> facade

<span class="token keyword">func</span> <span class="token function">ExampleOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	f <span class="token operator">:=</span> Facade<span class="token punctuation">{</span>
		system1<span class="token punctuation">:</span> Subsystem1<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		system2<span class="token punctuation">:</span> Subsystem2<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		system3<span class="token punctuation">:</span> Subsystem3<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	f<span class="token punctuation">.</span><span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// subsystem1 operation</span>
	<span class="token comment">// subsystem2 operation</span>
	<span class="token comment">// subsystem3 operation</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>é™ä½äº†å­ç³»ç»Ÿä¸å®¢æˆ·ç«¯ä¹‹é—´çš„è€¦åˆåº¦ï¼Œä½¿å¾—å­ç³»ç»Ÿçš„å˜åŒ–ä¸ä¼šå½±å“è°ƒç”¨å®ƒçš„å®¢æˆ·ç±»ã€‚</li>
<li>å¯¹å®¢æˆ·å±è”½äº†å­ç³»ç»Ÿç»„ä»¶ï¼Œå‡å°‘äº†å®¢æˆ·å¤„ç†çš„å¯¹è±¡æ•°ç›®ï¼Œå¹¶ä½¿å¾—å­ç³»ç»Ÿä½¿ç”¨èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚</li>
<li>é™ä½äº†å¤§å‹è½¯ä»¶ç³»ç»Ÿä¸­çš„ç¼–è¯‘ä¾èµ–æ€§ï¼Œç®€åŒ–äº†ç³»ç»Ÿåœ¨ä¸åŒå¹³å°ä¹‹é—´çš„ç§»æ¤è¿‡ç¨‹ï¼Œå› ä¸ºç¼–è¯‘ä¸€ä¸ªå­ç³»ç»Ÿä¸ä¼šå½±å“å…¶ä»–çš„å­ç³»ç»Ÿï¼Œä¹Ÿä¸ä¼šå½±å“å¤–è§‚å¯¹è±¡ã€‚</li>
<li>åªæ˜¯æä¾›äº†ä¸€ä¸ªè®¿é—®å­ç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£ï¼Œå¹¶ä¸å½±å“ç”¨æˆ·ç›´æ¥ä½¿ç”¨å­ç³»ç»Ÿç±»ã€‚</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>ä¸èƒ½å¾ˆå¥½åœ°é™åˆ¶å®¢æˆ·ä½¿ç”¨å­ç³»ç»Ÿç±»ï¼Œå¦‚æœå¯¹å®¢æˆ·è®¿é—®å­ç³»ç»Ÿç±»åšå¤ªå¤šçš„é™åˆ¶åˆ™å‡å°‘äº†å¯å˜æ€§å’Œçµæ´»æ€§ã€‚</li>
<li>åœ¨ä¸å¼•å…¥æŠ½è±¡å¤–è§‚ç±»çš„æƒ…å†µä¸‹ï¼Œå¢åŠ æ–°çš„å­ç³»ç»Ÿå¯èƒ½éœ€è¦ä¿®æ”¹å¤–è§‚ç±»æˆ–å®¢æˆ·ç«¯çš„æºä»£ç ï¼Œè¿èƒŒäº†<strong>å¼€é—­åŸåˆ™</strong>ã€‚</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/facade/facade-2x.png" type="image/png"/>
    </item>
    <item>
      <title>äº«å…ƒ</title>
      <link>http://blog.cjhe.top/design-pattern/structural/flyweight.html</link>
      <guid>http://blog.cjhe.top/design-pattern/structural/flyweight.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">äº«å…ƒ</source>
      <description>flyweightflyweight</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Tue, 06 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/flyweight/flyweight-zh-2x.png" alt="flyweight" tabindex="0" loading="lazy"><figcaption>flyweight</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯äº«å…ƒæ¨¡å¼</h2>
<p>äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰ï¼šæœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨,é€šè¿‡å…±äº«å·²ç»å­˜åœ¨çš„å¯¹è±¡æ¥å¤§å¹…åº¦å‡å°‘éœ€è¦åˆ›å»ºçš„å¯¹è±¡æ•°é‡ã€é¿å…å¤§é‡ç›¸ä¼¼ç±»çš„å¼€é”€ï¼Œä»è€Œæé«˜ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡ã€‚</p>
<p>äº«å…ƒå¯¹è±¡èƒ½åšåˆ°å…±äº«çš„å…³é”®æ˜¯åŒºåˆ†ï¼šå†…è•´çŠ¶æ€ï¼ˆInternal Stateï¼‰å’Œå¤–è•´çŠ¶æ€ï¼ˆExternal Stateï¼‰ï¼Œå†…è•´çŠ¶æ€æ˜¯å­˜å‚¨åœ¨äº«å…ƒå¯¹è±¡å†…éƒ¨ï¼Œå¹¶ä¸”ä¸ä¼šéšç¯å¢ƒæ”¹å˜è€Œæ”¹å˜ï¼Œå› æ­¤å¯ä»¥å…±äº«ï¼Œå¤–è•´çŠ¶æ€æ˜¯éšç€ç¯å¢ƒæ”¹å˜è€Œæ”¹å˜ï¼Œå› æ­¤ä¸å¯ä»¥å…±äº«ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>flyweight</figcaption></figure>
<ul>
<li>
<p>Flyweight: äº«å…ƒæ¥å£</p>
<p>æ‰€æœ‰å…ƒä»¶çš„é«˜å±‚è§„èŒƒï¼Œå£°æ˜ä¸å¤–è•´çŠ¶æ€äº’åŠ¨çš„æ¥å£æ ‡å‡†</p>
</li>
<li>
<p>ConcreteFlyweight: äº«å…ƒå®ç°ç±»</p>
<p>è‡ªèº«ç»´æŠ¤ç€å†…è•´çŠ¶æ€ï¼Œä¸”èƒ½æ¥å—å¹¶ç›¸åº”å¤–è•´çŠ¶æ€ï¼Œå¯ä»¥æœ‰å¤šä¸ªå®ç°ã€‚ä¸€ä¸ªäº«å…ƒå¯¹è±¡å¯ä»¥è¢«ç§°ä½œä¸€ä¸ª<strong>å…ƒ</strong>ã€‚</p>
</li>
<li>
<p>UnsharedFlyweight: éäº«å…ƒè§’è‰²</p>
<p>æ˜¯ä¸å¯ä»¥å…±äº«çš„å¤–éƒ¨çŠ¶æ€ï¼Œå®ƒä»¥å‚æ•°çš„å½¢å¼æ³¨å…¥å…·ä½“äº«å…ƒçš„ç›¸å…³æ–¹æ³•ä¸­</p>
</li>
<li>
<p>FlyweightFactory: äº«å…ƒå·¥å‚</p>
<p>ç”¨æ¥ç»´æŠ¤äº«å…ƒå¯¹è±¡çš„å·¥å‚ï¼Œè´Ÿè´£å¯¹äº«å…ƒå¯¹è±¡å®ä¾‹è¿›è¡Œåˆ›å»ºäºç®¡ç†ï¼Œå¹¶å¯¹å¤–æä¾›è·å–äº«å…ƒå¯¹è±¡çš„æœåŠ¡ã€‚</p>
</li>
<li>
<p>Client: å®¢æˆ·ç«¯</p>
<p>äº«å…ƒçš„ä½¿ç”¨è€…ï¼Œè´Ÿè´£ç»´æŠ¤å¤–è•´çŠ¶æ€ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> flyweight

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> UnsharedFlyweight <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ExternalState <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ConcreteFlyweight <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	InternalState <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>concrete ConcreteFlyweight<span class="token punctuation">)</span> <span class="token function">execute</span><span class="token punctuation">(</span>unshared UnsharedFlyweight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>concrete<span class="token punctuation">.</span>InternalState<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unshared<span class="token punctuation">.</span>ExternalState<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Flyweight <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">execute</span><span class="token punctuation">(</span>unshared UnsharedFlyweight<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> FlyweightFactory <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	flyweights <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>Flyweight
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>factory FlyweightFactory<span class="token punctuation">)</span> <span class="token function">GetFlyweight</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">)</span> Flyweight <span class="token punctuation">{</span>
	<span class="token keyword">if</span> flyweight<span class="token punctuation">,</span> ok <span class="token operator">:=</span> factory<span class="token punctuation">.</span>flyweights<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> flyweight
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> flyweight

<span class="token keyword">func</span> <span class="token function">ExampleFlyweight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	factory <span class="token operator">:=</span> FlyweightFactory<span class="token punctuation">{</span>flyweights<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>Flyweight<span class="token punctuation">{</span>
		<span class="token string">"a"</span><span class="token punctuation">:</span> ConcreteFlyweight<span class="token punctuation">{</span>InternalState<span class="token punctuation">:</span> <span class="token string">"a"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string">"b"</span><span class="token punctuation">:</span> ConcreteFlyweight<span class="token punctuation">{</span>InternalState<span class="token punctuation">:</span> <span class="token string">"bb"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string">"c"</span><span class="token punctuation">:</span> ConcreteFlyweight<span class="token punctuation">{</span>InternalState<span class="token punctuation">:</span> <span class="token string">"ccc"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">}</span>
	a <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">GetFlyweight</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
	a<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>UnsharedFlyweight<span class="token punctuation">{</span>ExternalState<span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	b <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">GetFlyweight</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span>
	b<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>UnsharedFlyweight<span class="token punctuation">{</span>ExternalState<span class="token punctuation">:</span> <span class="token string">"2"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	c <span class="token operator">:=</span> factory<span class="token punctuation">.</span><span class="token function">GetFlyweight</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>UnsharedFlyweight<span class="token punctuation">{</span>ExternalState<span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// a</span>
	<span class="token comment">// 1</span>
	<span class="token comment">// bb</span>
	<span class="token comment">// 2</span>
	<span class="token comment">// ccc</span>
	<span class="token comment">// 3</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<p>äº«å…ƒæ¨¡å¼åªæ˜¯ä¸€ç§ä¼˜åŒ–ã€‚åœ¨åº”ç”¨è¯¥æ¨¡å¼ä¹‹å‰ï¼Œä½ è¦ç¡®å®šç¨‹åºä¸­å­˜åœ¨ä¸å¤§é‡ç±»ä¼¼å¯¹è±¡åŒæ—¶å ç”¨å†…å­˜ç›¸å…³çš„å†…å­˜æ¶ˆè€—é—®é¢˜ï¼Œå¹¶ä¸”ç¡®ä¿è¯¥é—®é¢˜æ— æ³•ä½¿ç”¨å…¶ä»–æ›´å¥½çš„æ–¹å¼æ¥è§£å†³ã€‚</p>
<h3>ä¼˜ç‚¹</h3>
<ul>
<li>äº«å…ƒæ¨¡å¼çš„ä¼˜ç‚¹åœ¨äºå®ƒå¯ä»¥æå¤§å‡å°‘å†…å­˜ä¸­å¯¹è±¡çš„æ•°é‡ï¼Œä½¿å¾—ç›¸åŒå¯¹è±¡æˆ–ç›¸ä¼¼å¯¹è±¡åœ¨å†…å­˜ä¸­åªä¿å­˜ä¸€ä»½ã€‚</li>
<li>äº«å…ƒæ¨¡å¼çš„å¤–éƒ¨çŠ¶æ€ç›¸å¯¹ç‹¬ç«‹ï¼Œè€Œä¸”ä¸ä¼šå½±å“å…¶å†…éƒ¨çŠ¶æ€ï¼Œä»è€Œä½¿å¾—äº«å…ƒå¯¹è±¡å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­è¢«å…±äº«ã€‚</li>
</ul>
<h3>ç¼ºç‚¹</h3>
<ul>
<li>å¢åŠ ç³»ç»Ÿå¤æ‚æ€§ã€‚äº«å…ƒæ¨¡å¼éœ€è¦ç»´æŠ¤å…±äº«å¯¹è±¡çš„çŠ¶æ€ï¼Œå¢åŠ äº†ä»£ç çš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿçš„ç»´æŠ¤éš¾åº¦ã€‚</li>
<li>å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€çš„åŒºåˆ†ã€‚äº«å…ƒæ¨¡å¼éœ€è¦åŒºåˆ†å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ï¼Œå†…éƒ¨çŠ¶æ€å¯ä»¥è¢«å…±äº«ï¼Œä½†å¤–éƒ¨çŠ¶æ€å¿…é¡»é€šè¿‡å‚æ•°ä¼ é€’ï¼Œå¢åŠ äº†å¯¹è±¡çš„å¯å®šåˆ¶æ€§ï¼Œä½†ä¹Ÿå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</li>
</ul>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/flyweight/flyweight-zh-2x.png" type="image/png"/>
    </item>
    <item>
      <title>ä»£ç†</title>
      <link>http://blog.cjhe.top/design-pattern/structural/proxy.html</link>
      <guid>http://blog.cjhe.top/design-pattern/structural/proxy.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">ä»£ç†</source>
      <description>proxyproxy</description>
      <category>è®¾è®¡æ¨¡å¼</category>
      <pubDate>Sat, 10 Dec 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="https://refactoringguru.cn/images/patterns/content/proxy/proxy-2x.png" alt="proxy" tabindex="0" loading="lazy"><figcaption>proxy</figcaption></figure>
<!-- more -->
<h2>ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼</h2>
<p>ä»£ç†æ¨¡å¼(Proxy Pattern)ï¼šå®ƒçš„ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥ä»£æ›¿çœŸå®å¯¹è±¡çš„è®¿é—®ï¼Œä»è€Œåœ¨ä¸ä¿®æ”¹åŸç›®æ ‡å¯¹è±¡çš„å‰æä¸‹ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½æ“ä½œï¼Œæ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚</p>
<h3>åŒ…å«å“ªäº›è§’è‰²</h3>
<figure><figcaption>ä»£ç†æ¨¡å¼</figcaption></figure>
<ul>
<li>
<p>Subject: æŠ½è±¡ä¸»é¢˜</p>
<p>é€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»å£°æ˜çœŸå®ä¸»é¢˜å’Œä»£ç†å¯¹è±¡å®ç°çš„ä¸šåŠ¡æ–¹æ³•</p>
</li>
<li>
<p>RealSubject: çœŸå®ä¸»é¢˜</p>
<p>å®ç°äº†æŠ½è±¡ä¸»é¢˜ä¸­çš„å…·ä½“ä¸šåŠ¡ï¼Œæ˜¯ä»£ç†å¯¹è±¡æ‰€ä»£è¡¨çš„çœŸå®å¯¹è±¡ï¼Œæ˜¯æœ€ç»ˆè¦å¼•ç”¨çš„å¯¹è±¡</p>
</li>
<li>
<p>Proxy: ä»£ç†ç±»</p>
<p>æä¾›äº†ä¸çœŸå®ä¸»é¢˜ç›¸åŒçš„æ¥å£ï¼Œå…¶å†…éƒ¨åŒ…å«æœ‰å¯¹çœŸå®ä¸»é¢˜çš„å¼•ç”¨ï¼Œå®ƒå¯ä»¥è®¿é—®ã€æ§åˆ¶æˆ–æ‰©å±•çœŸå®ä¸»é¢˜çš„åŠŸèƒ½ã€‚</p>
</li>
</ul>
<h3>ä»£ç ç¤ºä¾‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> proxy

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Subject <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> RealSubject <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r RealSubject<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"do request"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Proxy <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	realSubject Subject
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Proxy<span class="token punctuation">)</span> <span class="token function">preRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"pre request"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Proxy<span class="token punctuation">)</span> <span class="token function">postRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"post request"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Proxy<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	p<span class="token punctuation">.</span><span class="token function">preRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	p<span class="token punctuation">.</span>realSubject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	p<span class="token punctuation">.</span><span class="token function">postRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> proxy

<span class="token keyword">func</span> <span class="token function">ExampleRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> subject Subject
	subject <span class="token operator">=</span> Proxy<span class="token punctuation">{</span>realSubject<span class="token punctuation">:</span> RealSubject<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
	subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// pre request</span>
	<span class="token comment">// do request</span>
	<span class="token comment">// post request</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>ä½¿ç”¨åœºæ™¯</h2>
<ul>
<li>
<p>é™æ€ä»£ç†ï¼šä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡åœ¨ç¼–è¯‘æœŸå°±å·²ç»ç¡®å®šï¼Œä»£ç†å¯¹è±¡éœ€è¦å®ç°å’Œç›®æ ‡å¯¹è±¡ç›¸åŒçš„æ¥å£ï¼Œå¹¶æŒæœ‰ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨ã€‚é™æ€ä»£ç†çš„ä¼˜ç‚¹æ˜¯ç®€å•æ˜“å®ç°ï¼Œç¼ºç‚¹æ˜¯ä»£ç å†—ä½™ï¼Œæ¯ä¸ªä»£ç†ç±»éƒ½éœ€è¦é‡æ–°ç¼–å†™ã€‚</p>
</li>
<li>
<p>è¿œç¨‹ä»£ç†ï¼šä¸ºä¸€ä¸ªä½äºä¸åŒåœ°å€ç©ºé—´çš„å¯¹è±¡æä¾›ä¸€ä¸ªæœ¬åœ°çš„ä»£ç†å¯¹è±¡ï¼Œä½¿å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡æœ¬åœ°ä»£ç†å¯¹è±¡æ¥è®¿é—®è¿œç¨‹å¯¹è±¡ï¼Œå±è”½äº†ç½‘ç»œé€šä¿¡çš„ç»†èŠ‚ã€‚</p>
</li>
<li>
<p>è™šæ‹Ÿä»£ç†ï¼šå½“ä¸€ä¸ªå¯¹è±¡çš„åˆ›å»ºæˆ–è€…åŠ è½½æ—¶éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨è™šæ‹Ÿä»£ç†æ¥å»¶è¿Ÿå¯¹è±¡çš„åŠ è½½æˆ–è€…åˆ›å»ºï¼Œç›´åˆ°çœŸæ­£éœ€è¦ä½¿ç”¨è¯¥å¯¹è±¡æ—¶å†è¿›è¡ŒåŠ è½½æˆ–è€…åˆ›å»ºã€‚</p>
</li>
<li>
<p>ä¿æŠ¤ä»£ç†ï¼šå½“å¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®éœ€è¦è¿›è¡Œå®‰å…¨æ§åˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å®‰å…¨ä»£ç†æ¥æ§åˆ¶å¯¹è±¡çš„è®¿é—®æƒé™ï¼Œä¾‹å¦‚åœ¨å¯¹è±¡è¢«è®¿é—®æ—¶éœ€è¦è¿›è¡Œè®¤è¯æˆ–æˆæƒç­‰ã€‚</p>
</li>
<li>
<p>ç¼“å­˜ä»£ç†ï¼šå½“éœ€è¦ç¼“å­˜ä¸€äº›è®¡ç®—ç»“æœæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¼“å­˜ä»£ç†ï¼Œä»¥ä¾¿åœ¨åç»­çš„è®¿é—®ä¸­ç›´æ¥è¿”å›ç¼“å­˜çš„ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p>
</li>
<li>
<p>æ—¥å¿—è®°å½•ä»£ç†ï¼šåœ¨è®¿é—®è¢«ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨æ—¥å¿—è®°å½•ä»£ç†å¯ä»¥è®°å½•æ‰€æœ‰è®¿é—®è®°å½•ï¼Œä»¥ä¾¿äºé—®é¢˜æ’æŸ¥å’Œç³»ç»Ÿä¼˜åŒ–ç­‰ã€‚</p>
</li>
</ul>
<h3>è¿œç¨‹ä»£ç†</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Subject æ¥å£å®šä¹‰</span>
<span class="token keyword">type</span> Subject <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// RemoteSubject ç»“æ„ä½“å®ç° Subject æ¥å£</span>
<span class="token keyword">type</span> RemoteSubject <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    URL <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>rs <span class="token operator">*</span>RemoteSubject<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿œç¨‹è°ƒç”¨</span>
    response<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span>URL<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Error: "</span> <span class="token operator">+</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">defer</span> response<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    body<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Error: "</span> <span class="token operator">+</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">string</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Proxy ç»“æ„ä½“å®ç° Subject æ¥å£ï¼Œå¹¶åœ¨å†…éƒ¨åŒ…å«äº†ä¸€ä¸ª RemoteSubject å¯¹è±¡</span>
<span class="token keyword">type</span> Proxy <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    subject <span class="token operator">*</span>RemoteSubject
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Proxy<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨æ­¤å¤„æ‰§è¡Œä¸€äº›èº«ä»½éªŒè¯ã€æ—¥å¿—è®°å½•ç­‰æ“ä½œ</span>
    <span class="token keyword">if</span> p<span class="token punctuation">.</span>subject <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        p<span class="token punctuation">.</span>subject <span class="token operator">=</span> <span class="token operator">&amp;</span>RemoteSubject<span class="token punctuation">{</span>
            URL<span class="token punctuation">:</span> <span class="token string">"http://www.example.com"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">"Proxy -&gt; "</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// client ä»£ç </span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> subject Subject <span class="token operator">=</span> <span class="token operator">&amp;</span>Proxy<span class="token punctuation">{</span><span class="token punctuation">}</span>
    result <span class="token operator">:=</span> subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®¢æˆ·ç«¯å’Œè¿œç¨‹å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<h3>è™šæ‹Ÿä»£ç†</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Image æ¥å£å®šä¹‰</span>
<span class="token keyword">type</span> Image <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// RealImage ç»“æ„ä½“å®ç° Image æ¥å£</span>
<span class="token keyword">type</span> RealImage <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    filename <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>ri <span class="token operator">*</span>RealImage<span class="token punctuation">)</span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Displaying Real Image: "</span><span class="token punctuation">,</span> ri<span class="token punctuation">.</span>filename<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Proxy ç»“æ„ä½“å®ç° Image æ¥å£ï¼Œå¹¶åœ¨å†…éƒ¨åŒ…å«äº†ä¸€ä¸ª RealImage å¯¹è±¡</span>
<span class="token keyword">type</span> Proxy <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    image <span class="token operator">*</span>RealImage
    filename <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Proxy<span class="token punctuation">)</span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä½¿ç”¨è™šæ‹Ÿä»£ç†ï¼Œåœ¨çœŸæ­£éœ€è¦ä½¿ç”¨ RealImage å¯¹è±¡æ—¶æ‰è¿›è¡Œåˆ›å»ºå’ŒåŠ è½½</span>
    <span class="token keyword">if</span> p<span class="token punctuation">.</span>image <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Creating Real Image: "</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>filename<span class="token punctuation">)</span>
        p<span class="token punctuation">.</span>image <span class="token operator">=</span> <span class="token operator">&amp;</span>RealImage<span class="token punctuation">{</span>
            filename<span class="token punctuation">:</span> p<span class="token punctuation">.</span>filename<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    p<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// client ä»£ç </span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> image Image <span class="token operator">=</span> <span class="token operator">&amp;</span>Proxy<span class="token punctuation">{</span>
        filename<span class="token punctuation">:</span> <span class="token string">"example.jpg"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ Display() æ–¹æ³•ä¼šåˆ›å»ºå’ŒåŠ è½½ RealImage å¯¹è±¡</span>
    image<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// ç¬¬äºŒæ¬¡è°ƒç”¨ Display() æ–¹æ³•ç›´æ¥ä½¿ç”¨å·²åˆ›å»ºçš„ RealImage å¯¹è±¡</span>
    image<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å»¶è¿Ÿ RealImage å¯¹è±¡çš„åŠ è½½æˆ–è€…åˆ›å»ºï¼Œç›´åˆ°å®¢æˆ·ç«¯çœŸæ­£éœ€è¦è®¿é—®è¯¥å¯¹è±¡æ—¶æ‰è¿›è¡ŒåŠ è½½æˆ–è€…åˆ›å»ºï¼Œä»è€Œå‡å°‘äº†ç³»ç»Ÿçš„èµ„æºæ¶ˆè€—ï¼Œä¼˜åŒ–äº†ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p>
<h3>ä¿æŠ¤ä»£ç†</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Subject æ¥å£å®šä¹‰</span>
<span class="token keyword">type</span> Subject <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// RealSubject ç»“æ„ä½“å®ç° Subject æ¥å£</span>
<span class="token keyword">type</span> RealSubject <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    <span class="token comment">// RealSubject å¯¹è±¡éœ€è¦è¿›è¡Œèº«ä»½è®¤è¯æˆ–è€…æˆæƒç­‰å®‰å…¨å¤„ç†</span>
    Username <span class="token builtin">string</span>
    Password <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>rs <span class="token operator">*</span>RealSubject<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Request processed by Real Subject"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Proxy ç»“æ„ä½“å®ç° Subject æ¥å£ï¼Œå¹¶åœ¨å†…éƒ¨åŒ…å«äº†ä¸€ä¸ª RealSubject å¯¹è±¡</span>
<span class="token keyword">type</span> Proxy <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    subject <span class="token operator">*</span>RealSubject
    username <span class="token builtin">string</span>
    password <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Proxy<span class="token punctuation">)</span> <span class="token function">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨æ­¤å¤„æ‰§è¡Œèº«ä»½è®¤è¯ç­‰æ“ä½œ</span>
    <span class="token keyword">if</span> p<span class="token punctuation">.</span>username <span class="token operator">==</span> <span class="token string">"admin"</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span>password <span class="token operator">==</span> <span class="token string">"admin123"</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Proxy<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> p<span class="token punctuation">.</span>subject <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        p<span class="token punctuation">.</span>subject <span class="token operator">=</span> <span class="token operator">&amp;</span>RealSubject<span class="token punctuation">{</span>
            Username<span class="token punctuation">:</span> p<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
            Password<span class="token punctuation">:</span> p<span class="token punctuation">.</span>password<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åœ¨æ­¤å¤„æ‰§è¡Œæˆæƒç­‰æ“ä½œ</span>
    <span class="token keyword">if</span> p<span class="token punctuation">.</span><span class="token function">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        p<span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Authorization failed!"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// client ä»£ç </span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> subject Subject <span class="token operator">=</span> <span class="token operator">&amp;</span>Proxy<span class="token punctuation">{</span>
        username<span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span>
        password<span class="token punctuation">:</span> <span class="token string">"admin123"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬é€šè¿‡è®¤è¯å’Œæˆæƒç­‰æ“ä½œæ¥æ§åˆ¶å¯¹ RealSubject å¯¹è±¡çš„è®¿é—®æƒé™ï¼Œåªæœ‰è®¤è¯å’ŒæˆæƒæˆåŠŸä¹‹åæ‰èƒ½è®¿é—® RealSubject å¯¹è±¡ï¼Œå¦åˆ™è¿”å›æˆæƒå¤±è´¥çš„æç¤ºæ¶ˆæ¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç³»ç»Ÿä¸­çš„è®¿é—®è¿›è¡Œæ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œé²æ£’æ€§ã€‚</p>
<h3>ç¼“å­˜ä»£ç†</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Subject æ¥å£å®šä¹‰</span>
<span class="token keyword">type</span> Subject <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Request</span><span class="token punctuation">(</span>arg <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// RealSubject ç»“æ„ä½“å®ç° Subject æ¥å£</span>
<span class="token keyword">type</span> RealSubject <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>rs <span class="token operator">*</span>RealSubject<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span>arg <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Processing request with argument:"</span><span class="token punctuation">,</span> arg<span class="token punctuation">)</span>
    <span class="token keyword">return</span> arg <span class="token operator">*</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// Proxy ç»“æ„ä½“å®ç° Subject æ¥å£ï¼Œå¹¶åœ¨å†…éƒ¨åŒ…å«äº†ä¸€ä¸ª RealSubject å¯¹è±¡å’Œä¸€ä¸ªç¼“å­˜ map</span>
<span class="token keyword">type</span> Proxy <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    subject <span class="token operator">*</span>RealSubject
    cache <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Proxy<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span>arg <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token comment">// å°è¯•ä»ç¼“å­˜ä¸­è·å–ç»“æœ</span>
    res<span class="token punctuation">,</span> ok <span class="token operator">:=</span> p<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>arg<span class="token punctuation">]</span>
    <span class="token keyword">if</span> ok <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Return cached result:"</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
        <span class="token keyword">return</span> res
    <span class="token punctuation">}</span>
    <span class="token comment">// å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ç»“æœï¼Œåˆ™ä½¿ç”¨ RealSubject å¯¹è±¡è¿›è¡Œè®¡ç®—</span>
    <span class="token keyword">if</span> p<span class="token punctuation">.</span>subject <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        p<span class="token punctuation">.</span>subject <span class="token operator">=</span> <span class="token operator">&amp;</span>RealSubject<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    res <span class="token operator">=</span> p<span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
    <span class="token comment">// å°†è®¡ç®—ç»“æœæ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œå¹¶è¿”å›ç»“æœ</span>
    p<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>arg<span class="token punctuation">]</span> <span class="token operator">=</span> res
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

<span class="token comment">// client ä»£ç </span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> subject Subject <span class="token operator">=</span> <span class="token operator">&amp;</span>Proxy<span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// ç¼“å­˜ä¸­æ²¡æœ‰ç»“æœï¼ŒRealSubject è¿›è¡Œè®¡ç®—å¹¶æ·»åŠ åˆ°ç¼“å­˜ä¸­</span>
    subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// ç¼“å­˜ä¸­å­˜åœ¨ç»“æœï¼Œç›´æ¥è¿”å›ç¼“å­˜ç»“æœ</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘ä¸€äº›éœ€è¦é‡å¤è®¡ç®—çš„æ“ä½œï¼Œä¼˜åŒ–äº†ç³»ç»Ÿçš„æ€§èƒ½ï¼Œå¹¶ä¸”å¯ä»¥å¿«é€Ÿå“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>
<h3>æ—¥å¿—è®°å½•ä»£ç†</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Subject æ¥å£å®šä¹‰</span>
<span class="token keyword">type</span> Subject <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// RealSubject ç»“æ„ä½“å®ç° Subject æ¥å£</span>
<span class="token keyword">type</span> RealSubject <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>rs <span class="token operator">*</span>RealSubject<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Processing request..."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Proxy ç»“æ„ä½“å®ç° Subject æ¥å£ï¼Œå¹¶åœ¨å†…éƒ¨åŒ…å«äº†ä¸€ä¸ª RealSubject å¯¹è±¡å’Œä¸€ä¸ªæ—¥å¿—è®°å½•å™¨</span>
<span class="token keyword">type</span> Proxy <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    subject <span class="token operator">*</span>RealSubject
    logger <span class="token operator">*</span>log<span class="token punctuation">.</span>Logger
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Proxy<span class="token punctuation">)</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    p<span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token string">"Calling Request method..."</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> p<span class="token punctuation">.</span>subject <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        p<span class="token punctuation">.</span>subject <span class="token operator">=</span> <span class="token operator">&amp;</span>RealSubject<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    p<span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token string">"Request method finished."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// client ä»£ç </span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> subject Subject <span class="token operator">=</span> <span class="token operator">&amp;</span>Proxy<span class="token punctuation">{</span>
        logger<span class="token punctuation">:</span> log<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> log<span class="token punctuation">.</span>Ldate<span class="token operator">|</span>log<span class="token punctuation">.</span>Ltime<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    subject<span class="token punctuation">.</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è®°å½• Request æ–¹æ³•çš„è°ƒç”¨ä¿¡æ¯å’Œç»“æœä¿¡æ¯</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç³»ç»Ÿä¸­è®°å½•æ¯ä¸€æ¬¡å¯¹ç‰¹å®šå¯¹è±¡æˆ–æ–¹æ³•çš„è°ƒç”¨ï¼Œä»¥ä¾¿åç»­ç³»ç»Ÿè°ƒè¯•æˆ–é—®é¢˜æ’æŸ¥ã€‚</p>
<h3>æœ‰å“ªäº›ä¼˜ç¼ºç‚¹</h3>
<h4>ä¼˜ç‚¹</h4>
<ul>
<li>ä»£ç†æ¨¡å¼èƒ½å¤Ÿåè°ƒè°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚</li>
<li>è¿œç¨‹ä»£ç†ä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥è®¿é—®åœ¨è¿œç¨‹æœºå™¨ä¸Šçš„å¯¹è±¡ï¼Œè¿œç¨‹æœºå™¨å‘å…·æœ‰æ›´å¥½çš„è®¡ç®—æ€§èƒ½ä¸å¤„ç†é€Ÿåº¦ï¼Œå¯ä»¥åŠ å¿«ç›¸åº”å¹¶å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚</li>
<li>è™šæ‹Ÿä»£ç†é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå°å¯¹è±¡æ¥ä»£è¡¨ä¸€ä¸ªå¤§å¯¹è±¡ï¼Œå¯ä»¥å‡å°‘ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œä¼˜åŒ–å¹¶æé«˜è¿è¡Œé€Ÿåº¦ã€‚</li>
<li>ä¿æŠ¤ä»£ç†å¯ä»¥æ§åˆ¶å¯¹çœŸå®å¯¹è±¡çš„ä½¿ç”¨æƒé™ã€‚</li>
</ul>
<h4>ç¼ºç‚¹</h4>
<ul>
<li>ç”±äºå®¢æˆ·ç«¯å’ŒçœŸå®ä¸»é¢˜ä¹‹é—´å¢åŠ äº†ä»£ç†å¯¹è±¡ï¼Œå› æ­¤æœ‰äº›ç±»å‹çš„ä»£ç†æ¨¡å¼å¯èƒ½ä¼šé€ æˆè¯·æ±‚çš„å¤„ç†é€Ÿåº¦å˜æ…¢ã€‚</li>
<li>å®ç°ä»£ç†æ¨¡å¼éœ€è¦é¢å¤–çš„å·¥ä½œï¼Œæœ‰äº›ä»£ç†æ¨¡å¼çš„å®ç°éå¸¸å¤æ‚ã€‚</li>
</ul>
<h2>æ€»ç»“</h2>
<h3>ä»£ç†æ¨¡å¼å’Œè£…é¥°å™¨æ¨¡å¼</h3>
<ul>
<li>è¯­ä¹‰ä¸Šï¼šä»£ç†æ¨¡å¼æ˜¯ä¸ºäº†æ§åˆ¶å¯¹è¢«ä»£ç†å¯¹è±¡çš„è®¿é—®ï¼Œè€Œè£…é¥°å™¨æ¨¡å¼æ˜¯ä¸ºäº†å¢åŠ è¢«è£…é¥°å¯¹è±¡çš„åŠŸèƒ½ã€‚</li>
<li>ä½¿ç”¨æ–¹å¼ä¸Šï¼šè£…é¥°å™¨æ¨¡å¼éœ€è¦å°†è¢«è£…é¥°è€…ä½œä¸ºå‚æ•°ä¼ ç»™è£…é¥°è€…çš„æ„é€ å™¨ï¼Œè€Œè¢«ä»£ç†å¯¹è±¡ç”±ä»£ç†å¯¹è±¡åˆ›å»ºï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“è¢«ä»£ç†ç±»çš„å­˜åœ¨ã€‚</li>
<li>ä½¿ç”¨è€…è§’åº¦ä¸Šï¼šè¢«ä»£ç†å¯¹è±¡æ˜¯å·²ç»ç¡®å®šçš„ï¼Œè€Œè¢«è£…é¥°è€…åˆ™åœ¨ä½¿ç”¨æ—¶æ ¹æ®éœ€æ±‚è¿›è¡Œç»„åˆã€‚</li>
</ul>
<h3>ä»£ç†æ¨¡å¼å’Œ Middleware</h3>
<p>ä»£ç†è®¾è®¡æ¨¡å¼å’Œ Middleware ä¹‹é—´å­˜åœ¨ç›¸ä¼¼ä¹‹å¤„ï¼Œè¿™ä¸¤ä¸ªæ¨¡å¼éƒ½æ˜¯ä¸ºäº†å®ç°å¯¹è±¡é—´æ¾è€¦åˆï¼Œå¢å¼ºç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚ä¾‹å¦‚ï¼šæ—¥å¿—è®°å½•ã€è®¿é—®æ§åˆ¶ã€é€Ÿç‡é™åˆ¶ç­‰ã€‚å”¯ä¸€ä¸åŒçš„åœ°æ–¹æ˜¯ï¼šä»£ç†æ¨¡å¼æ˜¯é€šè¿‡å¼•å…¥è¢«ä»£ç†ç±»æ‰©å±•å…¶åŠŸèƒ½ï¼Œè€ŒGoè¯­è¨€middlewareæ˜¯é€šè¿‡å‡½æ•°å’Œé—­åŒ…å®ç°æ‰©å±•å‡½æ•°åŠŸèƒ½ï¼Œè¿™å½’åŠŸäºGoè¯­è¨€ä¸­å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ã€‚</p>
]]></content:encoded>
      <enclosure url="https://refactoringguru.cn/images/patterns/content/proxy/proxy-2x.png" type="image/png"/>
    </item>
    <item>
      <title>å°å¿ƒbreakğŸ¤¦â€â™‚ï¸</title>
      <link>http://blog.cjhe.top/go-language/advance/break.html</link>
      <guid>http://blog.cjhe.top/go-language/advance/break.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å°å¿ƒbreakğŸ¤¦â€â™‚ï¸</source>
      <description>è¿™é‡Œå±•ç¤ºbreakçš„ä¸€ä¸ªä¾‹å­ æŸ¥çœ‹æ‰§è¡Œç»“æœ è­¦å‘Š æŒ‰é“ç†å½“æ”¶åˆ°exitä¿¡å·æ—¶ï¼Œåç¨‹åº”è¯¥é€€å‡ºï¼Œä½†æ­¤æ—¶åç¨‹ä»æ—§åœ¨æ‰“å°tick å…¶å®breakè¯­å¥åªæ˜¯è·³å‡ºæœ€å†…éƒ¨çš„forã€swichæˆ–selectçš„æ‰§è¡Œã€‚ä¾‹å­ä¸­åªæ˜¯è·³å‡ºäº†selectè¯­å¥ï¼Œå¹¶æœªè·³å‡ºforå¾ªç¯ é‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆè·³åˆ°æœ€å¤–å±‚å‘¢ï¼Ÿ 1ã€é€šè¿‡break [label] æŸ¥çœ‹æ‰§è¡Œç»“æœ æç¤º ä»£ç æ‰§è¡Œåˆ°brea...</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Sat, 11 Feb 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>è¿™é‡Œå±•ç¤ºbreakçš„ä¸€ä¸ªä¾‹å­</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	exit <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			<span class="token keyword">select</span> <span class="token punctuation">{</span>
			<span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">:</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"tick"</span><span class="token punctuation">)</span>
			<span class="token keyword">case</span> <span class="token operator">&lt;-</span>exit<span class="token punctuation">:</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"exiting..."</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"exit!"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	exit <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// wait child goroutine exit</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>tick
tick
exiting...
tick
tick
</code></pre></div></details>
<div class="hint-container caution">
<p class="hint-container-title">è­¦å‘Š</p>
<p>æŒ‰é“ç†å½“æ”¶åˆ°exitä¿¡å·æ—¶ï¼Œåç¨‹åº”è¯¥é€€å‡ºï¼Œä½†æ­¤æ—¶åç¨‹ä»æ—§åœ¨æ‰“å°tick</p>
<p>å…¶å®breakè¯­å¥åªæ˜¯è·³å‡ºæœ€å†…éƒ¨çš„forã€swichæˆ–selectçš„æ‰§è¡Œã€‚ä¾‹å­ä¸­åªæ˜¯è·³å‡ºäº†selectè¯­å¥ï¼Œå¹¶æœªè·³å‡ºforå¾ªç¯</p>
</div>
<p>é‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆè·³åˆ°æœ€å¤–å±‚å‘¢ï¼Ÿ</p>
<p>1ã€é€šè¿‡break [label]</p>
<div class="language-go" data-ext="go" data-title="go"><pre go="" class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	exit <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	loop<span class="token punctuation">:</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			<span class="token keyword">select</span> <span class="token punctuation">{</span>
			<span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">:</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"tick"</span><span class="token punctuation">)</span>
			<span class="token keyword">case</span> <span class="token operator">&lt;-</span>exit<span class="token punctuation">:</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"exiting..."</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span> loop
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"exit!"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	exit <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// wait child goroutine exit</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>tick
tick
exiting...
exit!
</code></pre></div></details>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä»£ç æ‰§è¡Œåˆ°<code>break loop</code>æ—¶ï¼Œç¨‹åºå°†ç»“æŸloopæ‰€æŒ‡ä»£çš„forå¾ªç¯çš„æ‰§è¡Œ</p>
</div>
<p>2ã€é€šè¿‡goto [label]</p>
<div class="language-go" data-ext="go" data-title="go"><pre go="" class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	exit <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			<span class="token keyword">select</span> <span class="token punctuation">{</span>
			<span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">:</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"tick"</span><span class="token punctuation">)</span>
			<span class="token keyword">case</span> <span class="token operator">&lt;-</span>exit<span class="token punctuation">:</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"exiting..."</span><span class="token punctuation">)</span>
				<span class="token keyword">goto</span> loop
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	loop<span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"exit!"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	exit <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// wait child goroutine exit</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>tick
tick
exiting...
exit!
</code></pre></div></details>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä»£ç æ‰§è¡Œåˆ°<code>goto loop</code>æ—¶ï¼Œç¨‹åºå°†è·³è½¬åˆ°loopæ‰€æŒ‡çš„ä½ç½®ç»§ç»­æ‰§è¡Œ</p>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>for-rangeé¿å‘æŒ‡å—</title>
      <link>http://blog.cjhe.top/go-language/advance/for-range.html</link>
      <guid>http://blog.cjhe.top/go-language/advance/for-range.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">for-rangeé¿å‘æŒ‡å—</source>
      <description>è­¦å‘Š for rangeåŒå¸¸ä½¿ç”¨åœ¨éå†ï¼šæ•°ç»„ã€æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸²ã€mapå’Œchannelç­‰è¡¨è¾¾å¼ å…¶ä¸­æœ‰ä¸å°‘å‘éœ€è¦å°å¿ƒï¼ï¼ï¼</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Thu, 09 Feb 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container caution">
<p class="hint-container-title">è­¦å‘Š</p>
<p><code>for range</code>åŒå¸¸ä½¿ç”¨åœ¨éå†ï¼šæ•°ç»„ã€æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸²ã€mapå’Œchannelç­‰è¡¨è¾¾å¼</p>
<p>å…¶ä¸­æœ‰ä¸å°‘å‘éœ€è¦å°å¿ƒï¼ï¼ï¼</p>
</div>
<!-- more -->
<h2>for range</h2>
<p>for rangeä½¿ç”¨çŸ­å˜é‡å£°æ˜æ–¹å¼(:=)è¿›è¡Œéå†æ—¶å£°æ˜äº†å˜é‡
ä¾‹å¦‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	slice <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> slice <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token comment">//è·å–ç´¢å¼•å’Œå€¼</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> slice <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">//è·å–ç´¢å¼•å’Œå€¼</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>å°å¿ƒçŸ­å˜é‡å£°æ˜</h2>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> slice <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span> <span class="token comment">//éå†1</span>
		<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> slice <span class="token punctuation">{</span>
			<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"====="</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span> <span class="token comment">//éå†2</span>
		<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> slice <span class="token punctuation">{</span>
			<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>éå†1å’Œéå†2ä»…åœ¨ä¼ é€’go func()å‚æ•°æœ‰å·®åˆ«ï¼Œç»“æœå´å®Œå…¨ä¸ä¸€æ ·</p>
<details class="hint-container details"><summary>æŸ¥çœ‹è¿è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>4 5
4 5
4 5
4 5
4 5
=====
4 5
0 1
1 2
2 3
3 4
</code></pre></div><p>å…¶åŸå› åœ¨äºè¿™äº›è¿­ä»£å˜é‡åœ¨æ¯æ¬¡å¾ªç¯ä¸­éƒ½ä¼šè¢«é‡ç”¨ï¼Œè€Œä¸æ˜¯é‡æ–°å£°æ˜</p>
<ul>
<li>éå†1ä¸­ï¼Œéå†ç»“æŸåï¼Œå¼€å¯çš„5ä¸ªåç¨‹æ‰“å°å…±ç”¨çš„å˜é‡<code>i</code>å’Œ<code>v</code>,æ­¤æ—¶<code>i=4</code>,<code>v=5</code>;</li>
<li>éå†2ä¸­ï¼Œç”±äºåœ¨å„ä¸ªåç¨‹ä¸­ï¼Œé‡æ–°å£°æ˜äº†<code>i</code>å’Œ<code>v</code>å˜é‡ï¼ŒåŠæ—¶çš„å°†å€¼ä¼ å…¥å„ä¸ªåç¨‹ï¼Œå› æ­¤æ‰“å°çš„æ˜¯æœŸæœ›çš„ç»“æœï¼Œä½†å› ä¸ºå„ä¸ªåç¨‹è°ƒåº¦æ—¶é—´ä¸åŒï¼Œå› æ­¤ç»“æœæ˜¯ä¹±åºçš„ã€‚</li>
</ul>
</details>
<h2>å°å¿ƒéå†è¿‡ç¨‹ä¸­çš„ä¿®æ”¹</h2>
<p>for rangeåœ¨éå†è¡¨è¾¾å¼æ—¶å¦‚æœå¯¹å…¶ä¿®æ”¹ä¸åŒçš„ç±»å‹å½±å“æ˜¯ä¸ä¸€æ ·çš„</p>
<h3>æ•°ç»„éå†</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	<span class="token keyword">var</span> r <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> a <span class="token punctuation">{</span>
		<span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
			a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>
			a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">13</span>
		<span class="token punctuation">}</span>
		r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>[1 2 3 4 5]
[1 2 3 4 5]
[1 12 13 4 5]
</code></pre></div><p>åœ¨i=0æ—¶ï¼Œæˆ‘ä»¬ä¿®æ”¹äº†a[1]=12ã€a[2]=13ï¼Œä½†vè¿˜æ˜¯åŸæ¥çš„å€¼ï¼Œè¿™æ˜¯å› ä¸ºéå†æ—¶ä½¿ç”¨çš„æ˜¯æ•°ç»„açš„å‰¯æœ¬ï¼Œä¹Ÿå°±æ²¡æœ‰çœŸå®çš„ååº”åˆ°æ•°ç»„aæœ¬èº«ï¼Œå› æ­¤ræ‹¿åˆ°çš„æ•°æ®æ—¶aå‰¯æœ¬çš„æ•°æ®ï¼Œæ•°ç»„aæœ¬èº«å¹¶æœªå‘ç”Ÿå˜åŒ–ã€‚</p>
</details>
<h3>æ•°ç»„æŒ‡é’ˆéå†</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	<span class="token keyword">var</span> r <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token operator">&amp;</span>a <span class="token punctuation">{</span>
		<span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
			a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>
			a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">13</span>
		<span class="token punctuation">}</span>
		r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>[1 2 3 4 5]
[1 12 13 4 5]
[1 12 13 4 5]
</code></pre></div><p>æ­¤æ¬¡éå†çš„æ˜¯*[5]intä½œä¸ºrangeçš„è¡¨è¾¾å¼ï¼Œè™½ç„¶ä¹Ÿæ˜¯å‰¯æœ¬ï¼Œä½†å‰¯æœ¬æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´æ˜¯åŒæ ·çš„ã€‚å› æ­¤rçš„å€¼å¯ä»¥æ”¹å˜</p>
</details>
<h3>åˆ‡ç‰‡éå†</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	<span class="token keyword">var</span> r <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> a <span class="token punctuation">{</span>
		<span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
			a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>
			a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">13</span>
		<span class="token punctuation">}</span>
		r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>[1 2 3 4 5]
[1 12 13 4 5]
[1 12 13 4 5]
</code></pre></div><p>æœ‰åˆ‡ç‰‡çš„åº•å±‚ç»“æ„ï¼Œæˆ‘ä»¬çŸ¥é“åˆ‡ç‰‡ç”±ï¼ˆ<code>array</code>ï¼Œ<code>len</code>ï¼Œ<code>cap</code>ï¼‰ä¸‰å…ƒç»„ç»„æˆï¼Œå…¶ä¸­<code>array</code>æŒ‡å‘åº•å±‚æ•°ç»„ã€‚åœ¨rangeéå†æ—¶ï¼Œå®ƒå®é™…ä¸Šå¤åˆ¶çš„æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œä¸”åˆ‡ç‰‡çš„<code>array</code>æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œå› æ­¤ä¼šä¿®æ”¹ç›¸åŒçš„åº•å±‚æ•°æ®ã€‚</p>
</details>
<p>ğŸ‘€<strong>ä½†å¦‚æœåˆ‡ç‰‡å‘ç”Ÿäº†æ‰©å®¹ï¼Œå¯¼è‡´é•¿åº¦å‘ç”Ÿäº†æ”¹å˜ï¼Œfor rangeéå†çš„ä»æ˜¯åŸæ¥çš„é•¿åº¦</strong></p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	<span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> a <span class="token punctuation">{</span>
		<span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
			a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>
			a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">13</span>
			a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		r <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>[1 2 3 4 5]
[1 12 13 4 5 6 7]
[1 12 13 4 5]
</code></pre></div><p>åˆ‡ç‰‡aåœ¨éå†æ—¶é™„åŠ äº†ä¸¤ä¸ªå…ƒç´ ï¼Œlenç”±5åŠ åˆ°7ï¼Œä½†ç”±äºfor rangeä½¿ç”¨çš„æ˜¯åˆ‡ç‰‡açš„å‰¯æœ¬ï¼Œä»æ˜¯é•¿åº¦5ã€‚</p>
</details>
<h3>å­—ç¬¦ä¸²éå†</h3>
<p><code>string</code>ç±»å‹æ˜¯ä¸å¯å˜çš„ï¼Œæ¯æ¬¡å¾ªç¯çš„å•ä½æ˜¯ä¸€ä¸ª<code>rune</code>,è€Œä¸æ˜¯<code>byte</code>ï¼Œè™½ç„¶åº•å±‚ç»“æ„æ˜¯<code>byte</code>ã€‚å¦‚æœéå†è¿‡ç¨‹ä¸­å­˜åœ¨éæ³•UTF8å­—èŠ‚åºåˆ—ï¼Œé‚£ä¹ˆå°†è¿”å›<code>0xfffd</code>è¿™ä¸ªç‰¹æ®Šå€¼ï¼Œä¸”ä¸‹æ¬¡éå†ä»ä¸‹ä¸€ä¸ª<code>byte</code>å¼€å§‹ï¼Œè€Œä¸æ˜¯<code>rune</code></p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">"ä¸­å›½äºº"</span>

	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d %s 0x%x\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>

	<span class="token comment">//byte sequence of s: 0xe4 0xb8 0xad 0xe5 0x9b 0xbd 0xe4 0xba 0xba</span>
	<span class="token keyword">var</span> sl <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token number">0xe4</span><span class="token punctuation">,</span> <span class="token number">0xb8</span><span class="token punctuation">,</span> <span class="token number">0xad</span><span class="token punctuation">,</span> <span class="token number">0xe5</span><span class="token punctuation">,</span> <span class="token number">0x9b</span><span class="token punctuation">,</span> <span class="token number">0xbd</span><span class="token punctuation">,</span> <span class="token number">0xe4</span><span class="token punctuation">,</span> <span class="token number">0xba</span><span class="token punctuation">,</span> <span class="token number">0xba</span><span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> sl <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"0x%x "</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token function">string</span><span class="token punctuation">(</span>sl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d %v 0x%x\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span>

  <span class="token comment">//ä¿®æ”¹ä¸ºéæ³•å­—ç¬¦</span>
	sl<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xd0</span>
	sl<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xd6</span>
	sl<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xb9</span>

	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token function">string</span><span class="token punctuation">(</span>sl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d %v 0x%x\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹è¿è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>0 ä¸­ 0x4e2d
3 å›½ 0x56fd
6 äºº 0x4eba

0xe4 0xb8 0xad 0xe5 0x9b 0xbd 0xe4 0xba 0xba 

0 ä¸­ 0x4e2d
3 å›½ 0x56fd
6 äºº 0x4eba


0 ä¸­ 0x4e2d
3 ï¿½ 0xfffd
4 Ö¹ 0x5b9
6 äºº 0x4eba
</code></pre></div><p>åœ¨éå†ç¬¬4ä¸ªå­—èŠ‚æ—¶ï¼Œå‘ç°æ—¶éæ³•UTF8å­—ç¬¦ï¼Œåˆ™è¿”å›çš„æ˜¯ç‰¹æ®Šå€¼ï¼Œä¸”ä¸‹æ ‡iä»4å¼€å§‹ã€‚</p>
</details>
<h3>å­—å…¸éå†</h3>
<p>å­—å…¸éå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¯¹å…¶æ–°å¢å’Œåˆ é™¤ï¼Œé‚£ä¹ˆä¼šæœ‰æ€æ ·çš„ç»“æœå‘¢ï¼Ÿ</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>
		<span class="token string">"tony"</span><span class="token punctuation">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
		<span class="token string">"tom"</span><span class="token punctuation">:</span>  <span class="token number">22</span><span class="token punctuation">,</span>
		<span class="token string">"jim"</span><span class="token punctuation">:</span>  <span class="token number">23</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">{</span> <span class="token comment">//åŸå§‹</span>
		counter <span class="token operator">:=</span> <span class="token number">0</span>
		<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
			counter<span class="token operator">++</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"counter is "</span><span class="token punctuation">,</span> counter<span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"==="</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">{</span> <span class="token comment">//æµ‹è¯•åˆ é™¤</span>
		counter <span class="token operator">:=</span> <span class="token number">0</span>
		<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
			<span class="token keyword">if</span> counter <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
				<span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">"tony"</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			counter<span class="token operator">++</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"counter is "</span><span class="token punctuation">,</span> counter<span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"==="</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">{</span> <span class="token comment">//æµ‹è¯•å¢åŠ </span>
		m<span class="token punctuation">[</span><span class="token string">"tony"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">21</span>
		counter <span class="token operator">:=</span> <span class="token number">0</span>
		<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
			<span class="token keyword">if</span> counter <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
				m<span class="token punctuation">[</span><span class="token string">"lucy"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">24</span>
			<span class="token punctuation">}</span>
			counter<span class="token operator">++</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"counter is "</span><span class="token punctuation">,</span> counter<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹è¿è¡Œç»“æœ</summary>
<blockquote>
<p>å…¶è¾“å‡ºç»“æœæ˜¯æœªçŸ¥çš„</p>
<ul>
<li>3ã€3ã€4</li>
<li>3ã€2ã€4</li>
<li>3ã€3ã€3</li>
<li>3ã€2ã€3</li>
</ul>
<p>è¿™æ˜¯å› ä¸ºmapçš„éå†æ˜¯æ— åºçš„</p>
</blockquote>
</details>
]]></content:encoded>
    </item>
    <item>
      <title>goroutineå’Œè°ƒåº¦åŸç†</title>
      <link>http://blog.cjhe.top/go-language/advance/goroutine.html</link>
      <guid>http://blog.cjhe.top/go-language/advance/goroutine.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">goroutineå’Œè°ƒåº¦åŸç†</source>
      <description>Goè¯­è¨€åŸç”Ÿæ”¯æŒå¹¶å‘èƒ½åŠ›ï¼Œè€Œgoroutineæ˜¯Goè¯­è¨€åŸç”Ÿæ”¯æŒå¹¶å‘çš„å…·ä½“å®ç°ï¼Œæœ¬ç¯‡å°†ä¸ºä½ æ­å¼€goroutineçš„é¢çº±ã€‚ goroutinegoroutine</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Mon, 13 Feb 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>Goè¯­è¨€åŸç”Ÿæ”¯æŒå¹¶å‘èƒ½åŠ›ï¼Œè€Œgoroutineæ˜¯Goè¯­è¨€åŸç”Ÿæ”¯æŒå¹¶å‘çš„å…·ä½“å®ç°ï¼Œæœ¬ç¯‡å°†ä¸ºä½ æ­å¼€goroutineçš„é¢çº±ã€‚</p>
<figure><img src="http://cdn.cjhe.top/blog/goroutine.png" alt="goroutine" tabindex="0" loading="lazy"><figcaption>goroutine</figcaption></figure>
<!-- more -->
<h2>goroutine</h2>
<p>goroutineæ˜¯ç”±Goè¿è¡Œæ—¶ç®¡ç†çš„ç”¨æˆ·å±‚è½»é‡çº§çº¿ç¨‹ï¼Œç›¸æ¯”è¾ƒæ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼Œgoroutineçš„èµ„æºå ç”¨å’Œä½¿ç”¨ä»£ä»·éƒ½è¦å°çš„å¤šï¼Œä¸€ä¸ªgoroutineåˆå§‹åªéœ€è¦2KBçš„å†…å­˜ï¼Œè€Œçº¿ç¨‹éœ€è¦MBçº§åˆ«çš„ç©ºé—´ï¼Œè¿™æ ·åœ¨æœ‰é™çš„å†…å­˜ç©ºé—´é‡Œï¼Œå¯ä»¥åˆ›å»ºçš„goroutineçš„æ•°é‡ç›¸æ¯”è¾ƒçº¿ç¨‹æ•°é‡å¤šçš„å¤šã€‚å…¶æ¬¡ç”±äºçº¿ç¨‹åˆ‡æ¢éœ€è¦æ‹·è´å¤§é‡çš„ä¸Šä¸‹æ–‡ï¼Œè¿™å°±å¯¼è‡´çº¿ç¨‹åˆ‡æ¢è€—æ—¶è¾ƒé«˜ã€‚</p>
<h2>GPMæ¨¡å‹</h2>
<figure><figcaption>goroutine</figcaption></figure>
<p>GPMæ¨¡å‹ä¸­ï¼š</p>
<ul>
<li>Gä»£è¡¨<code>goroutine</code>ï¼Œå­˜å‚¨äº†<code>goroutine</code>çš„æ‰§è¡Œæ ˆä¿¡æ¯ã€<code>goroutine</code>çŠ¶æ€åŠ<code>goroutine</code>çš„ä»»åŠ¡å‡½æ•°ç­‰</li>
<li>Pä»£è¡¨<code>processor</code>ï¼Œé€»è¾‘å¤„ç†å™¨ï¼Œæ‰€æœ‰çš„Péƒ½åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼ŒPçš„æ•°é‡å†³å®šäº†ç³»ç»Ÿå†…æœ€å¤§å¯å¹¶è¡Œçš„Gçš„æ•°é‡ï¼Œæœ€å¤šæœ‰<code>GOMAXPROCS</code>(å¯é…ç½®)ä¸ª</li>
<li>Mä»£è¡¨<code>thread</code>å³ç”¨æˆ·æ€çº¿ç¨‹ï¼ŒMåœ¨ç»‘å®šæœ‰æ•ˆçš„Påï¼Œè¿›å…¥åˆ°ä¸€ä¸ªè°ƒåº¦å¾ªç¯ï¼šä»å„ç§é˜Ÿåˆ—ã€Pçš„æœ¬åœ°é˜Ÿåˆ—è·å–Gï¼Œåˆ‡æ¢åˆ°Gçš„æ‰§è¡Œæ ˆä¸Šå¹¶æ‰§è¡ŒGçš„å‡½æ•°ï¼Œè°ƒç”¨<code>goexit</code>åšæ¸…ç†å·¥ä½œå¹¶å›åˆ°Mï¼Œå¦‚æ­¤åå¤ã€‚</li>
</ul>
<p>æ­¤å¤–è¿˜æœ‰ï¼š</p>
<ul>
<li>å…¨å±€é˜Ÿåˆ—(Global Queue)ï¼šå­˜æ”¾ç­‰å¾…è¿è¡Œçš„G</li>
<li>Pçš„æœ¬åœ°é˜Ÿåˆ—(Local Queue)ï¼šå­˜æ”¾çš„ä¹Ÿæ˜¯ç­‰å¾…è¿è¡Œçš„Gï¼Œæ•°é‡ä¸è¶…è¿‡256ä¸ªã€‚
<ul>
<li>å½“Gæ–°å»ºgoroutine G'æ—¶ï¼ŒG'ä¼˜å…ˆåŠ å…¥åˆ°Pçš„æœ¬åœ°é˜Ÿåˆ—(å±€éƒ¨æ€§ï¼ŒGå’ŒG'ç›¸å…³)</li>
<li>å¦‚æœæœ¬åœ°é˜Ÿåˆ—æ»¡äº†ï¼Œåˆ™ä¼šæŠŠæœ¬åœ°é˜Ÿåˆ—ä¸­çš„ä¸€åŠGç§»åŠ¨åˆ°å…¨å±€é˜Ÿåˆ—</li>
</ul>
</li>
</ul>
<h2>è°ƒåº¦ç­–ç•¥</h2>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å…¶æ€æƒ³ï¼šå¤ç”¨çº¿ç¨‹Mï¼Œé¿å…é¢‘ç¹çš„åˆ›å»ºã€é”€æ¯</p>
</div>
<h3>work stealingæœºåˆ¶</h3>
<p>å½“æœ¬åœ°é˜Ÿåˆ—æ— å¯è¿è¡Œçš„Gæ—¶ï¼Œä¼šå°è¯•ä»å…¶ä»–Pé˜Ÿåˆ—ä¸­å·å–Gï¼Œè€Œä¸æ˜¯é”€æ¯M</p>
<h3>hand offæœºåˆ¶</h3>
<p>å½“Må› ä¸ºGè¿›è¡Œç³»ç»Ÿè°ƒç”¨é˜»å¡æ—¶ï¼ŒMä¼šé‡Šæ”¾ç»‘å®šçš„Pï¼Œæ­¤æ—¶çš„Må’ŒGéƒ½è¿›å…¥é˜»å¡çŠ¶æ€</p>
<ul>
<li>å¦‚æœæ­¤æ—¶æœ‰ç©ºé—²çš„Mï¼ŒPä¼šä¸å…¶ç»‘å®šå¹¶æ‰§è¡Œå‰©ä½™çš„Gï¼Œ</li>
<li>å¦‚æœæ²¡æœ‰ç©ºé—²çš„Mï¼Œåˆ™ä¼šåˆ›å»ºæ–°çš„M</li>
</ul>
<p>å½“ç³»ç»Ÿè°ƒç”¨è¿”å›åï¼Œé˜»å¡åœ¨è¯¥ç³»ç»Ÿè°ƒç”¨çš„Gä¼šå°è¯•è·å–ä¸€ä¸ªå¯ç”¨çš„P</p>
<ul>
<li>å¦‚æœæœ‰å¯ç”¨çš„Pï¼Œä¹‹å‰è¿è¡Œè¯¥Gçš„Må°†ç»‘å®šPç»§ç»­è¿è¡ŒG</li>
<li>å¦‚æœæ²¡æœ‰å¯ç”¨çš„Pï¼Œé‚£ä¹ˆGäºMä¹‹é—´çš„å…³è”å°†è§£é™¤ï¼ŒåŒæ—¶Gä¼šæ ‡è®°ä¸ºrunableï¼Œæ”¾å…¥å…¨å±€é˜Ÿåˆ—ç­‰å¾…è°ƒåº¦</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<ul>
<li>ç½‘ç»œI/Oä¸ä¼šé˜»å¡Mï¼Œä»…é˜»å¡G</li>
<li>æ–‡ä»¶I/Oä¼šé˜»å¡Mï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¤§é‡æ–‡ä»¶I/Oæ“ä½œä¼šå¯¼è‡´å¤§é‡çº¿ç¨‹è¢«åˆ›å»ºçš„åŸå› ã€‚</li>
</ul>
</div>
<h3>æŠ¢å è°ƒåº¦</h3>
<p>ä¸æ“ä½œç³»ç»ŸæŒ‰<strong>æ—¶é—´ç‰‡</strong>è°ƒåº¦çº¿ç¨‹ä¸åŒï¼ŒGoä¸­æ²¡æœ‰<strong>æ—¶é—´ç‰‡</strong>çš„æ¦‚å¿µã€‚å¦‚æœæŸä¸ªGæ²¡æœ‰è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œæ²¡æœ‰è¿›è¡ŒI/Oæ“ä½œã€æ²¡æœ‰é˜»å¡åœ¨ä¸€ä¸ªchannelæ“ä½œä¸Šï¼Œé‚£ä¹ˆ<strong>Mæ˜¯å¦‚ä½•è®©Gåœä¸‹æ¥å¹¶è°ƒåº¦ä¸‹ä¸€ä¸ªå¯è¿è¡Œçš„Gå‘¢</strong>ï¼Ÿ</p>
<ul>
<li>Go1.2ç‰ˆæœ¬åœ¨æ¯ä¸ªå‡½æ•°æˆ–æ–¹æ³•çš„å…¥å£å¢åŠ ä¸€æ®µé¢å¤–çš„ä»£ç ï¼Œè®©è¿è¡Œæ—¶æœ‰æœºä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦æ‰§è¡ŒæŠ¢å è°ƒåº¦ï¼›ï¼ˆå¯¹æ²¡æœ‰å‡½æ•°è°ƒç”¨çš„Gæ— æ•ˆï¼‰</li>
<li>Goç¨‹åºè¿è¡Œæ—¶ä¼šå¯åŠ¨ä¸€ä¸ªåä¸º<code>sysmon</code>çš„Mï¼ˆç§°ä¸ºç›‘æ§çº¿ç¨‹ï¼‰ï¼Œè¯¥Mæ— é¡»ç»‘å®šPå³å¯è¿è¡Œï¼ˆä»¥g0è¿™ä¸ªGçš„å½¢å¼ï¼‰ï¼Œè¯¥Må¯¹äºé•¿æ—¶é—´è¿è¡Œï¼ˆè¶…è¿‡10msï¼‰çš„Gå‘å‡ºæŠ¢å å¼è°ƒåº¦ã€‚</li>
</ul>
<h2>å‚è€ƒæ–‡çŒ®</h2>
<ul>
<li><a href="https://mp.weixin.qq.com/s/rfjysi-LB-uFiGiZjh-XNw" target="_blank" rel="noopener noreferrer">æ–‡ç« -Golangè°ƒåº¦å™¨GMPåŸç†ä¸è°ƒåº¦å…¨åˆ†æ</a></li>
<li><a href="https://book.douban.com/subject/35720729/" target="_blank" rel="noopener noreferrer">ä¹¦ç±-Goè¯­è¨€ç²¾è¿›ä¹‹è·¯</a></li>
</ul>
]]></content:encoded>
      <enclosure url="http://cdn.cjhe.top/blog/goroutine.png" type="image/png"/>
    </item>
    <item>
      <title>interfaceåº•å±‚åŸç†</title>
      <link>http://blog.cjhe.top/go-language/advance/interface.html</link>
      <guid>http://blog.cjhe.top/go-language/advance/interface.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">interfaceåº•å±‚åŸç†</source>
      <description>interfaceinterface</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Sun, 12 Feb 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="http://cdn.cjhe.top/blog/interface.png" alt="interface" tabindex="0" loading="lazy"><figcaption>interface</figcaption></figure>
<!-- more -->
<h2>æ¥å£ä¸ä¸ºnilçš„è¯¯åŒº</h2>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸ªdemo</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"errors"</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> MyError <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token builtin">error</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> ErrBad <span class="token operator">=</span> MyError<span class="token punctuation">{</span>
	<span class="token builtin">error</span><span class="token punctuation">:</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"bad error"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">returnsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> p <span class="token operator">*</span>MyError <span class="token operator">=</span> <span class="token boolean">nil</span>
	<span class="token keyword">if</span> <span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		p <span class="token operator">=</span> <span class="token operator">&amp;</span>ErrBad
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> p
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	e <span class="token operator">:=</span> <span class="token function">returnsError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"error: %+v\n"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ok"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹è¿è¡Œç»“æœ</summary>
<p><code>error: &lt;nil&gt;</code></p>
</details>
<p>è¿™é‡Œå¤§å®¶å¾ˆç–‘æƒ‘ï¼šæ˜æ˜<code>returnsError</code>å‡½æ•°è¿”å›çš„på€¼ä¸ºnilï¼Œä¸ºä½•å´æ»¡è¶³äº†ç¬¬30è¡Œçš„æ¡ä»¶åˆ†æ”¯ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ¥å£ç±»å‹çš„åº•å±‚ç»“æ„å†æ¥å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2>æ¥å£ç±»å‹åº•å±‚ç»“æ„</h2>
<p>å‚è§<code>$GOROOT/src/runtime/runtime2.go</code></p>
<figure><figcaption>interface</figcaption></figure>
<p>æ¥å£ç±»å‹å˜é‡æœ‰ä¸¤ç§å†…éƒ¨è¡¨ç¤ºï¼š</p>
<ul>
<li><code>eface</code>ï¼šç”¨äºè¡¨ç¤ºæ²¡æœ‰æ–¹æ³•çš„ç©ºæ¥å£(<code>empty interface</code>)ç±»å‹å˜é‡ï¼Œå³<code>interface{}</code>ç±»å‹çš„å˜é‡</li>
<li><code>iface</code>ï¼šç”¨äºè¡¨ç¤ºå…¶æ‹¥æœ‰æ–¹æ³•çš„æ¥å£(<code>interface</code>)ç±»å‹å˜é‡</li>
</ul>
<p><code>data</code>éƒ½æŒ‡å‘å½“å‰èµ‹å€¼ç»™æ¥å£ç±»å‹å˜é‡çš„åŠ¨æ€ç±»å‹å˜é‡çš„å€¼ï¼Œä½†<code>iface</code>ç›¸æ¯”è¾ƒ<code>eface</code>å¤šäº†<code>itab</code>è¿™ä¸ªç±»å‹ï¼Œå…¶ä¸­:</p>
<ul>
<li><code>inter</code>å­˜å‚¨è¯¥æ¥å£ç±»å‹è‡ªèº«çš„ä¿¡æ¯</li>
<li><code>_type</code>å­˜å‚¨è¯¥æ¥å£ç±»å‹å˜é‡</li>
<li><code>fun</code>å­˜å‚¨åŠ¨æ€ç±»å‹å·²å®ç°çš„æ¥å£æ–¹æ³•çš„è°ƒç”¨åœ°å€æ•°ç»„</li>
</ul>
<p>Goè¿è¡Œæ—¶ä¼šä¸ºç¨‹åºå†…çš„å…¨éƒ¨ç±»å‹å»ºç«‹åªè¯»çš„å…±äº«<code>_type</code>ä¿¡æ¯è¡¨ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬è¦åˆ¤æ–­æ¥å£ç±»å‹å˜é‡æ˜¯å¦ç›¸åŒï¼Œåªéœ€ï¼š</p>
<ul>
<li>åˆ¤æ–­<code>_type/tab</code>æ˜¯å¦ç›¸åŒ</li>
<li><code>data</code>æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´æ‰€å­˜å‚¨çš„æ•°æ®å€¼æ˜¯å¦ç›¸åŒ</li>
</ul>
<p>è¿™é‡Œéœ€è¦åŒºåˆ†ä¸åŒçš„ç±»å‹ä¹‹é—´çš„ç­‰å€¼æ¯”è¾ƒï¼Œå‚è§ä¸‹æ–‡</p>
<h3>nilæ¥å£å˜é‡</h3>
<p>æœªåˆå§‹åŒ–çš„æ¥å£ç±»å‹å˜é‡é»˜è®¤é›¶å€¼ä¸ºnil</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">printNilInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// nilæ¥å£å˜é‡</span>
	<span class="token keyword">var</span> i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ç©ºæ¥å£ç±»å‹</span>
	<span class="token keyword">var</span> err <span class="token builtin">error</span>     <span class="token comment">// éç©ºæ¥å£ç±»å‹</span>
	<span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i = nil:"</span><span class="token punctuation">,</span> i <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err = nil:"</span><span class="token punctuation">,</span> err <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"i = err:"</span><span class="token punctuation">,</span> i <span class="token operator">==</span> err<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>(0x0,0x0)
(0x0,0x0)
i = nil: true
err = nil: true
i = err: true
</code></pre></div></details>
<p>å€¼ä¸ºnilçš„æ¥å£ç±»å‹å˜é‡å†…éƒ¨è¡¨ç¤ºå‡ä¸º<code>(0x0,0x0)</code>ï¼Œå³ç±»å‹ä¿¡æ¯å’Œæ•°æ®ä¿¡æ¯å‡ä¸ºç©ºï¼Œå› æ­¤å’Œnilç›¸ç­‰</p>
<h3>ç©ºæ¥å£ç±»å‹å˜é‡</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">printEmptyInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// emptyæ¥å£å˜é‡</span>
	<span class="token keyword">var</span> eif1 <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ç©ºæ¥å£ç±»å‹</span>
	<span class="token keyword">var</span> eif2 <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ç©ºæ¥å£ç±»å‹</span>
	<span class="token keyword">var</span> n<span class="token punctuation">,</span> m <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">18</span>

	eif1 <span class="token operator">=</span> n
	eif2 <span class="token operator">=</span> m

	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif1:"</span><span class="token punctuation">,</span> eif1<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif2:"</span><span class="token punctuation">,</span> eif2<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif1 = eif2:"</span><span class="token punctuation">,</span> eif1 <span class="token operator">==</span> eif2<span class="token punctuation">)</span>

	eif2 <span class="token operator">=</span> <span class="token number">17</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif1:"</span><span class="token punctuation">,</span> eif1<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif2:"</span><span class="token punctuation">,</span> eif2<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif1 = eif2:"</span><span class="token punctuation">,</span> eif1 <span class="token operator">==</span> eif2<span class="token punctuation">)</span>

	eif2 <span class="token operator">=</span> <span class="token function">int64</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif1:"</span><span class="token punctuation">,</span> eif1<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif2:"</span><span class="token punctuation">,</span> eif2<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif1 = eif2:"</span><span class="token punctuation">,</span> eif1 <span class="token operator">==</span> eif2<span class="token punctuation">)</span>

	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>eif1: (0x10951e0,0xc000092f68)
eif2: (0x10951e0,0xc000092f60)
eif1 = eif2: false
eif1: (0x10951e0,0xc000092f68)
eif2: (0x10951e0,0x10c64e8)
eif1 = eif2: true
eif1: (0x10951e0,0xc000092f68)
eif2: (0x10952a0,0x10c64e8)
eif1 = eif2: false
</code></pre></div></details>
<p>å¯¹äºç©ºæ¥å£ç±»å‹å˜é‡ï¼Œåªæœ‰åœ¨<code>_type</code>å’Œ<code>data</code>æ‰€æŒ‡æ•°æ®å†…å®¹ä¸€è‡´ï¼ˆæ³¨æ„ï¼šä¸æ˜¯æ•°æ®æŒ‡é’ˆçš„å€¼ä¸€è‡´ï¼‰çš„æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªç©ºæ¥å£ç±»å‹å˜é‡ä¹‹é—´æ‰èƒ½ç”»ç­‰å·ã€‚</p>
<h3>éç©ºæ¥å£ç±»å‹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> T <span class="token builtin">int</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t T<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token string">"bad error"</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">printNonEmptyInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> err1 <span class="token builtin">error</span> <span class="token comment">// éç©ºæ¥å£ç±»å‹</span>
	<span class="token keyword">var</span> err2 <span class="token builtin">error</span> <span class="token comment">// éç©ºæ¥å£ç±»å‹</span>
	err1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err1:"</span><span class="token punctuation">,</span> err1<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err1 = nil:"</span><span class="token punctuation">,</span> err1 <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>

	err1 <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
	err2 <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err1:"</span><span class="token punctuation">,</span> err1<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err2:"</span><span class="token punctuation">,</span> err2<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err1 = err2:"</span><span class="token punctuation">,</span> err1 <span class="token operator">==</span> err2<span class="token punctuation">)</span>

	err2 <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err1:"</span><span class="token punctuation">,</span> err1<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err2:"</span><span class="token punctuation">,</span> err2<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err1 = err2:"</span><span class="token punctuation">,</span> err1 <span class="token operator">==</span> err2<span class="token punctuation">)</span>

	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>err1: (0x10c6a58,0x0)
err1 = nil: false
err1: (0x10c6ab8,0x10c64f0)
err2: (0x10c6ab8,0x10c64f8)
err1 = err2: false
err1: (0x10c6ab8,0x10c64f0)
err2: (0x10c69d8,0xc000096210)
err1 = err2: false
</code></pre></div></details>
<p>é’ˆå¯¹<code>err1 = (*T)(nil)</code>è¿™ç§èµ‹å€¼ï¼Œéç©ºæ¥å£ç±»å‹å˜é‡çš„ç±»å‹ä¿¡æ¯å¹¶ä¸ä¸ºç©ºï¼Œæ•°æ®æŒ‡é’ˆä¸ºç©ºï¼Œå› æ­¤ä¸<code>nil(0x0,0x0)</code>ä¸èƒ½ç”»ç­‰å·</p>
<h3>ç©ºæ¥å£ç±»å‹å’Œéç©ºæ¥å£ç±»å‹çš„ç­‰å€¼æ¯”è¾ƒ</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">printEmptyInterfaceAndNonEmptyInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> eif <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> err <span class="token builtin">error</span> <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif:"</span><span class="token punctuation">,</span> eif<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err:"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif = err:"</span><span class="token punctuation">,</span> eif <span class="token operator">==</span> err<span class="token punctuation">)</span>

	err <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif:"</span><span class="token punctuation">,</span> eif<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err:"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"eif = err:"</span><span class="token punctuation">,</span> eif <span class="token operator">==</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æ„</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>eif: (0x10974c0,0x10c64f0)
err: (0x10c6ab8,0x10c64f0)
eif = err: true
eif: (0x10974c0,0x10c64f0)
err: (0x10c6ab8,0x10c64f8)
eif = err: false
</code></pre></div></details>
<p>ç©ºæ¥å£ç±»å‹å˜é‡å’Œéç©ºæ¥å£ç±»å‹å˜é‡å†…éƒ¨è¡¨ç¤ºçš„ç»“æ„ä¸åŒï¼Œä½†Goè¿›è¡Œç­‰å€¼æ¯”è¾ƒæ—¶ï¼Œç±»å‹æ¯”è¾ƒä½¿ç”¨çš„æ˜¯<code>eface</code>çš„<code>_type</code>å’Œ<code>iface</code>çš„<code>tab._type</code></p>
]]></content:encoded>
      <enclosure url="http://cdn.cjhe.top/blog/interface.png" type="image/png"/>
    </item>
    <item>
      <title>æ·±å…¥äº†è§£Goé”åŸç†</title>
      <link>http://blog.cjhe.top/go-language/advance/mutex.html</link>
      <guid>http://blog.cjhe.top/go-language/advance/mutex.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">æ·±å…¥äº†è§£Goé”åŸç†</source>
      <description>Goè¯­è¨€syncåŒ…æä¾›äº†ä¸¤ç§é”ï¼š äº’æ–¥é” Mutex: åŠ é”æ—¶ï¼Œå…¶ä»–åŠ é”åç¨‹å‡é˜»å¡ è¯»å†™é” RWMutex: åŠ è¯»é”æ—¶ï¼ŒåŠ å†™é”åç¨‹é˜»å¡ï¼ŒåŠ è¯»é”åç¨‹ä¸é˜»å¡ åŠ å†™é”æ—¶ï¼Œå…¶ä»–åŠ è¯»å†™åç¨‹å‡é˜»å¡</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Sat, 11 Mar 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>Goè¯­è¨€syncåŒ…æä¾›äº†ä¸¤ç§é”ï¼š</p>
<ul>
<li>äº’æ–¥é” Mutex:
<ul>
<li>åŠ é”æ—¶ï¼Œå…¶ä»–åŠ é”åç¨‹å‡é˜»å¡</li>
</ul>
</li>
<li>è¯»å†™é” RWMutex:
<ul>
<li>åŠ è¯»é”æ—¶ï¼ŒåŠ å†™é”åç¨‹é˜»å¡ï¼ŒåŠ è¯»é”åç¨‹ä¸é˜»å¡</li>
<li>åŠ å†™é”æ—¶ï¼Œå…¶ä»–åŠ è¯»å†™åç¨‹å‡é˜»å¡</li>
</ul>
</li>
</ul>
<!-- more -->
<h2>äº’æ–¥é” Mutex</h2>
<h3>Mutexæ•°æ®ç»“æ„</h3>
<p>å‚è§<code>$GOROOT/src/sync/mutex.go</code></p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Mutex <span class="token keyword">struct</span><span class="token punctuation">{</span>
  state <span class="token builtin">int32</span>
  sema  <span class="token builtin">uint32</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶ä¸­ï¼š</p>
<ul>
<li>state: è¡¨ç¤ºäº’æ–¥é”çš„çŠ¶æ€ï¼Œæ¯”å¦‚æ˜¯å¦è¢«é”å®šç­‰ï¼›</li>
<li>sema: è¡¨ç¤ºä¿¡å·é‡ï¼Œåç¨‹é˜»å¡ç­‰å¾…è¯¥ä¿¡å·é‡ï¼Œè§£é”çš„åç¨‹é‡Šæ”¾ä¿¡å·é‡ä»è€Œå”¤é†’ç­‰å¾…ä¿¡å·é‡çš„åç¨‹ï¼›</li>
</ul>
<p>Mutex.stateè™½ç„¶æ˜¯<code>int32</code>æ•°æ®ç±»å‹ï¼Œå†…éƒ¨å®ç°æ—¶æŠŠè¯¥å˜é‡åˆ†æˆå››ä»½ï¼Œç”¨äºè®°å½•Mutexçš„å››ç§çŠ¶æ€</p>
<figure><figcaption>mutex</figcaption></figure>
<ul>
<li>Locked: è¡¨ç¤ºè¯¥Mutexæ˜¯å¦å·²è¢«é”å®šï¼Œ0è¡¨ç¤ºæ²¡æœ‰é”å®šï¼Œ1è¡¨ç¤ºå·²é”å®š</li>
<li>Woken: è¡¨ç¤ºæ˜¯å¦åç¨‹å·²è¢«å”¤é†’ï¼Œ0è¡¨ç¤ºæ²¡æœ‰åç¨‹å”¤é†’ï¼Œ1è¡¨ç¤ºå·²æœ‰åç¨‹å”¤é†’</li>
<li>Starving: è¡¨ç¤ºè¯¥Mutexæ˜¯å¦å¤„äºé¥¥é¥¿çŠ¶æ€ï¼Œ0è¡¨ç¤ºæ²¡æœ‰é¥¥é¥¿ï¼Œ1è¡¨ç¤ºé¥¥é¥¿çŠ¶æ€ï¼ˆè¯´æ˜å·²æœ‰åç¨‹é˜»å¡æ—¶é—´è¶…è¿‡1msï¼‰</li>
<li>Waiter: è¡¨ç¤ºé˜»å¡ç­‰å¾…åç¨‹çš„ä¸ªæ•°ï¼Œåç¨‹è§£é”æ—¶æ ¹æ®æ­¤å€¼æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦é‡Šæ”¾ä¿¡å·é‡</li>
</ul>
<h3>Mutexçš„æ–¹æ³•</h3>
<p>Mutexå¯¹å¤–æä¾›ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>Lock(): åŠ é”æ–¹æ³•</li>
<li>Unlock(): è§£é”æ–¹æ³•</li>
</ul>
<h4>å•ä¸ªåç¨‹çš„åŠ é”é‡Šæ”¾è¿‡ç¨‹</h4>
<p>Mutexå†…éƒ¨<code>state</code>è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<figure><figcaption>mutex-simple</figcaption></figure>
<h4>ä¸¤ä¸ªåç¨‹çš„åŠ é”é‡Šæ”¾è¿‡ç¨‹</h4>
<p>Mutexå†…éƒ¨<code>state</code>è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<figure><figcaption>mutex-comple</figcaption></figure>
<p>ä¸Šé¢ä»‹ç»MutexåŠ é”å’Œè§£é”åªä½¿ç”¨å†…éƒ¨<code>state</code>æ ‡è®°ï¼š<code>Waiter</code>å’Œ<code>Locked</code>ä¸¤ä¸ªï¼Œå¦å¤–ä¸¤ä¸ªæ ‡è®°å°±ä¸å¾—ä¸æè‡ªæ—‹è¿‡ç¨‹äº†ã€‚</p>
<h3>è‡ªæ—‹è¿‡ç¨‹</h3>
<blockquote>
<p>è‡ªæ—‹è¿‡ç¨‹æ˜¯ï¼šåŠ é”æ—¶ï¼Œå¦‚æœå½“å‰<code>Locked</code>ä¸º1ï¼Œåˆ™è¯´æ˜å½“å‰è¯¥é”ç”±å…¶ä»–åç¨‹æŒæœ‰ï¼Œå°è¯•åŠ é”çš„åç¨‹å¹¶ä¸æ˜¯é©¬ä¸Šè½¬å…¥é˜»å¡ï¼Œè€Œæ˜¯ä¼šæŒç»­åœ°æ¢æµ‹<code>Locked</code>æ˜¯å¦å˜ä¸º0ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯è‡ªæ—‹è¿‡ç¨‹ã€‚</p>
</blockquote>
<details class="hint-container details"><summary>è‡ªæ—‹çš„æ¡ä»¶</summary>
<ul>
<li>è‡ªæ—‹æ¬¡æ•°è¦è¶³å¤Ÿå°‘ï¼Œé€šå¸¸ä¸º4ï¼›</li>
<li>CPUæ ¸æ•°è¦å¤§äº1ï¼Œå¦åˆ™è‡ªæ—‹æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºæ­¤æ—¶ä¸å¯èƒ½æœ‰å…¶ä»–åç¨‹é‡Šæ”¾é”ï¼›</li>
<li>åç¨‹è°ƒåº¦GMPä¸­çš„Pçš„æ•°é‡è¦å¤§äº1ï¼›</li>
<li>åç¨‹è°ƒåº¦è¿è¡Œé˜Ÿåˆ—å¿…é¡»ä¸ºç©ºï¼Œå¦åˆ™ä¼šå»¶è¿Ÿåç¨‹è°ƒåº¦ï¼›</li>
</ul>
</details>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>è‡ªæ—‹çš„å¥½å¤„ï¼šå½“åŠ é”å¤±è´¥æ—¶ä¸å¿…ç«‹å³è½¬å…¥é˜»å¡ï¼Œæœ‰ä¸€å®šæœºä¼šè·å¾—é”ï¼Œé¿å…åç¨‹çš„åˆ‡æ¢ã€‚</p>
</div>
<p>è‡ªæ—‹çš„æ—¶é—´å¾ˆçŸ­ï¼Œå¦‚æœè‡ªæ—‹è¿‡ç¨‹ä¸­å‘ç°é”å·²è¢«é‡Šæ”¾ï¼Œé‚£ä¹ˆåç¨‹å¯ä»¥ç«‹å³è·å–é”ï¼Œæ­¤æ—¶å³ä¾¿æœ‰å…¶ä»–åç¨‹è¢«å”¤é†’ä¹Ÿæ— æ³•è·å–é”ï¼Œåªèƒ½å†æ¬¡é˜»å¡ã€‚</p>
<p>å¦‚æœè‡ªæ—‹è¿‡ç¨‹ä¸­è·å¾—é”ï¼Œé‚£ä¹ˆä¹‹å‰è¢«é˜»å¡çš„åç¨‹å°†æ— æ³•è·å¾—é”ï¼Œä¹‹å‰é˜»å¡çš„åç¨‹ä¸€ç›´è·å–ä¸åˆ°é”ï¼ˆè¶…è¿‡1msï¼‰å°†è¿›å…¥<strong>é¥¥é¥¿</strong>çŠ¶æ€</p>
<p>å¦‚æœæ­¤æ—¶æœ‰ä¸¤ä¸ªåç¨‹ï¼Œä¸€ä¸ªåœ¨åŠ é”ï¼Œå¦ä¸€ä¸ªåœ¨è§£é”ï¼Œåœ¨åŠ é”çš„è¿‡ç¨‹ä¸­å¯èƒ½å¤„äºè‡ªæ—‹ï¼Œæ­¤æ—¶ä¼šæŠŠ<code>Woken</code>æ ‡è®°ä¸º1ï¼Œç”¨äºå‘ŠçŸ¥è§£é”åç¨‹ï¼Œä¸å¿…é‡Šæ”¾ä¿¡å·é‡ï¼Œå®ƒå¾ˆå¿«ä¼šæ‹¿åˆ°é”ã€‚</p>
<h3>Mutexæ³¨æ„äº‹é¡¹</h3>
<div class="hint-container caution">
<p class="hint-container-title">è­¦å‘Š</p>
<p>Mutexç­‰syncä¸­å®šä¹‰çš„ç»“æ„ç±»å‹é¦–æ¬¡ä½¿ç”¨åä¸åº”å¯¹å…¶è¿›è¡Œå¤åˆ¶æ“ä½œ</p>
</div>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> foo <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	n <span class="token builtin">int</span>
	sync<span class="token punctuation">.</span>Mutex
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	f <span class="token operator">:=</span> foo<span class="token punctuation">{</span>n<span class="token punctuation">:</span> <span class="token number">17</span><span class="token punctuation">}</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>f foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"g2: try to lock foo..."</span><span class="token punctuation">)</span>
			f<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"g2: lock foo ok"</span><span class="token punctuation">)</span>
			time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
			f<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"g2: unlock foo ok"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>

	f<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"g1: lock foo ok"</span><span class="token punctuation">)</span>

	<span class="token comment">// åœ¨mutexé¦–æ¬¡ä½¿ç”¨åå¤åˆ¶å…¶å€¼</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>f foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"g3: try to lock foo..."</span><span class="token punctuation">)</span>
			f<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"g3: lock foo ok"</span><span class="token punctuation">)</span>
			time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
			f<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"g3: unlock foo ok"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>

	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	f<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"g1: unlock foo ok"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="hint-container details"><summary>æŸ¥çœ‹æ‰§è¡Œç»“æœ</summary>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>2023/03/12 19:23:45 g1: lock foo ok
2023/03/12 19:23:45 g2: try to lock foo...
2023/03/12 19:23:45 g3: try to lock foo...
2023/03/12 19:23:45 g2: lock foo ok
2023/03/12 19:23:48 g2: unlock foo ok
2023/03/12 19:23:48 g2: try to lock foo...
2023/03/12 19:23:48 g2: lock foo ok
2023/03/12 19:23:51 g2: unlock foo ok
...
</code></pre></div><p>æˆ‘ä»¬çœ‹åˆ°g3åœ¨åŠ é”æ“ä½œä¹‹åé˜»å¡ï¼Œè€Œg2æŒ‰ç…§é¢„æœŸæ­£å¸¸è¿è¡Œ</p>
<p>g2å’Œg3çš„åŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li>g2æ˜¯åœ¨äº’æ–¥é”é¦–æ¬¡ä½¿ç”¨ä¹‹å‰åˆ›å»º</li>
<li>g3æ˜¯åœ¨äº’æ–¥é”æ‰§è¡Œå®ŒåŠ é”æ“ä½œä¹‹ååˆ›å»ºï¼Œå¹¶ä¸”åœ¨åˆ›å»ºg3çš„æ—¶å€™å¤åˆ¶äº†fooå®ä¾‹</li>
</ul>
</details>
<p>syncåŒ…ä¸­ç±»å‹çš„å®ä¾‹åœ¨è¢«å¤åˆ¶å¾—åˆ°çš„å‰¯æœ¬åå°†è„±ç¦»åŸå®ä¾‹çš„æ§åˆ¶èŒƒå›´ï¼Œå› æ­¤æ¨èä¼ æŒ‡é’ˆçš„æ–¹å¼</p>
<h2>è¯»å†™é” RWMutex</h2>
<h3>RWMutexæ•°æ®ç»“æ„</h3>
<p>å‚è§<code>$GOROOT/src/sync/mutex.go</code></p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> RWMutex <span class="token keyword">struct</span><span class="token punctuation">{</span>
  w           Mutex
  writerSem   <span class="token builtin">uint32</span>
  readerSem   <span class="token builtin">uint32</span>
  readerCount <span class="token builtin">int32</span>
  readerWait  <span class="token builtin">int32</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶ä¸­ï¼š</p>
<ul>
<li>w: ç”¨äºæ§åˆ¶å¤šä¸ªå†™é”ï¼Œè·å¾—å†™é”é¦–å…ˆè¦è·å–è¯¥é”</li>
<li>writerSem: å†™é˜»å¡çš„åç¨‹ç­‰å¾…çš„ä¿¡å·é‡ï¼Œæœ€åä¸€ä¸ªè¯»åç¨‹é‡Šæ”¾é”æ—¶ä¼šé‡Šæ”¾ä¿¡å·é‡</li>
<li>readerSem: è¯»é˜»å¡çš„åç¨‹ç­‰å¾…çš„ä¿¡å·é‡ï¼ŒæŒæœ‰å†™é”çš„åç¨‹é‡Šæ”¾é”åä¼šé‡Šæ”¾ä¿¡å·é‡</li>
<li>readerCount: è®°å½•è¯»åç¨‹çš„ä¸ªæ•°</li>
<li>readerWait: è®°å½•å†™é˜»å¡æ—¶çš„è¯»åç¨‹ä¸ªæ•°</li>
</ul>
<h3>RWMutexçš„æ–¹æ³•</h3>
<ul>
<li>RLock(): åŠ è¯»é”
<ul>
<li>å¢åŠ è¯»æ“ä½œè®¡æ•°ï¼Œå³readerCount++</li>
<li>å¦‚æœå·²ç»æœ‰æŒæœ‰å†™é”åç¨‹ï¼Œåˆ™é˜»å¡è‡ªå·±</li>
</ul>
</li>
<li>RUnlock(): é‡Šæ”¾è¯»é”
<ul>
<li>å‡å°‘è¯»æ“ä½œè®¡æ•°ï¼Œå³readerCount--</li>
<li>å¦‚æœæœ‰é˜»å¡çš„å†™é”åç¨‹ï¼Œåˆ™å”¤é†’å®ƒ</li>
</ul>
</li>
<li>Lock(): åŠ å†™é”
<ul>
<li>è·å–äº’æ–¥é”</li>
<li>å¦‚æœæŒæœ‰è¯»é”åç¨‹ï¼Œåˆ™é˜»å¡è‡ªå·±ï¼Œç­‰å¾…æ‰€æœ‰çš„è¯»æ“ä½œç»“æŸ</li>
</ul>
</li>
<li>Unlock(): é‡Šæ”¾å†™é”
<ul>
<li>é‡Šæ”¾äº’æ–¥é”</li>
<li>å¦‚æœå…¶ä»–é˜»å¡çš„è¯»é”åç¨‹ï¼Œåˆ™å”¤é†’å®ƒ</li>
</ul>
</li>
</ul>
<figure><figcaption>rwmutex</figcaption></figure>
<h3>RWMutexçš„ç»†èŠ‚åˆ†æ</h3>
<h4>å†™æ“ä½œæ˜¯å¦‚ä½•é˜»æ­¢å†™æ“ä½œçš„ï¼Ÿ</h4>
<p>è¯»å†™é”RWMutexåŒ…å«ä¸€ä¸ªäº’æ–¥é”wï¼Œè·å–å†™é”å¿…é¡»å…ˆè·å–è¯¥äº’æ–¥é”ï¼Œå¦‚æœäº’æ–¥é”å·²è¢«å…¶ä»–åç¨‹æŒæœ‰ï¼Œåˆ™åªèƒ½é˜»å¡ç­‰å¾…ã€‚</p>
<h4>å†™æ“ä½œæ˜¯å¦‚ä½•é˜»æ­¢è¯»æ“ä½œçš„ï¼Ÿ</h4>
<p>è¯»å†™é”RWMutexåŒ…å«å½“å‰è¯»åç¨‹æ•°é‡readerCountï¼Œæ¯æ¬¡è·å–è¯»é”åˆ™åŠ 1ï¼Œæ¯æ¬¡é‡Šæ”¾è¯»é”åˆ™å‡1ï¼Œå› æ­¤å–å€¼ä¸º[0,N],Næœ€å¤§ä¸º2e30ã€‚
å½“è·å–å†™é”æ—¶ï¼Œä¼šå°†readerCountå‡å»2e30ï¼Œå˜æˆäº†è´Ÿå€¼ã€‚è·å–è¯»é”åç¨‹æ£€æµ‹åˆ°readerCountä¸ºè´Ÿå€¼ï¼Œä¾¿çŸ¥é“æ­£åœ¨åŠ å†™é”ï¼Œåªå¥½é˜»å¡è‡ªå·±ã€‚
çœŸå®çš„readerCountä¸ä¼šä¸¢å¤±ï¼Œåªéœ€è¦åŠ 2e30å³å¯ã€‚</p>
<h4>è¯»æ“ä½œæ˜¯å¦‚ä½•é˜»æ­¢å†™æ“ä½œçš„ï¼Ÿ</h4>
<p>è¯»é”ä¼šå…ˆå°†RWMutex.readerCountåŠ 1ï¼Œå†™é”åç¨‹æ£€æµ‹åˆ°readerCountä¸ä¸º0ï¼Œåˆ™ä¼šé˜»å¡è‡ªå·±ã€‚</p>
<h4>å†™é”ä¸ºä»€ä¹ˆä¸ä¼šè¢«<strong>é¥¿æ­»</strong>ï¼Ÿ</h4>
<p>è·å–å†™é”æœŸé—´ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–åç¨‹è·å–è¯»é”ï¼Œå¦‚æœå†™é”ä¸€ç›´ç­‰å¾…æ‰€æœ‰çš„è¯»æ“ä½œç»“æŸï¼Œåˆ™å¾ˆå¯èƒ½è¢«<strong>é¥¿æ­»</strong>ï¼ŒRWMutexé€šè¿‡readerWaitè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“è·å–å†™é”æ—¶ï¼Œä¼šæŠŠreaderCountå¤åˆ¶åˆ°readerWaitï¼Œç”¨äºæ ‡è®°æ’åœ¨å†™æ“ä½œå‰é¢çš„è¯»æ“ä½œä¸ªæ•°ï¼Œè¯»æ“ä½œç»“æŸä¼šé€’å‡readerCountçš„å€¼ï¼ŒåŒæ—¶ä¹Ÿä¼šé€’å‡readerWaitçš„å€¼ï¼Œå½“readerWaitå€¼ä¸º0æ—¶å”¤é†’å†™æ“ä½œã€‚å†™æ“ä½œç»“æŸåæ‰ä¼šå”¤é†’å…¶ä»–çš„è¯»æ“ä½œã€‚</p>
<h2>å‚è€ƒèµ„æ–™</h2>
<p><a href="https://book.douban.com/subject/35144587/" target="_blank" rel="noopener noreferrer">Goä¸“å®¶ç¼–ç¨‹</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>é­”å¹»çš„iotaæšä¸¾</title>
      <link>http://blog.cjhe.top/go-language/base/iota.html</link>
      <guid>http://blog.cjhe.top/go-language/base/iota.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">é­”å¹»çš„iotaæšä¸¾</source>
      <description>æç¤º iotaçš„å‡ºç°ä½¿å¾—æšä¸¾å€¼æ›´åŠ æ–¹ä¾¿ï¼Œä½†æ³¨æ„å“¦ï¼Œå¹¶ä¸ç®€å•ã€‚ä¸»è¦æ˜¯å¯¹iotaå®šä¹‰ä¸ç†è§£ï¼Œæˆ‘æ•´ç†äº†ä¸€äº›iotaçš„ä½¿ç”¨æ³¨æ„äº‹é¡¹</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Fri, 03 Feb 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>iotaçš„å‡ºç°ä½¿å¾—æšä¸¾å€¼æ›´åŠ æ–¹ä¾¿ï¼Œä½†æ³¨æ„å“¦ï¼Œå¹¶ä¸ç®€å•ã€‚ä¸»è¦æ˜¯å¯¹iotaå®šä¹‰ä¸ç†è§£ï¼Œæˆ‘æ•´ç†äº†ä¸€äº›iotaçš„ä½¿ç”¨æ³¨æ„äº‹é¡¹</p>
</div>
<!-- more -->
<h2>iota</h2>
<blockquote>
<p>iotaæ˜¯Goè¯­è¨€çš„ä¸€ä¸ªé¢„å®šä¹‰æ ‡è¯†ç¬¦ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯constå£°æ˜å—æˆ–å£°æ˜è¡Œä¸­æ¯ä¸ªå¸¸é‡æ‰€å¤„ä½ç½®çš„<strong>åç§»å€¼</strong>ï¼ˆä»0å¼€å§‹ï¼‰ã€‚</p>
</blockquote>
<h3>è§„åˆ™ï¼šå¦‚æœæŒ‰è¡Œé€’å¢ï¼Œå¯çœç•¥åç»­çš„iotaå…³é”®å­—</h3>
<p>ä¾‹å¦‚ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">const</span> <span class="token punctuation">(</span>
	Sunday    <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//0</span>
	Monday           <span class="token comment">//1</span>
	Tuesday          <span class="token comment">//2</span>
	Wednesday        <span class="token comment">//3</span>
	Thursday         <span class="token comment">//4</span>
	Friday           <span class="token comment">//5</span>
	Saturday         <span class="token comment">//6</span>
<span class="token punctuation">)</span>
</code></pre></div><p>è¿™ä¸å¸¸é‡çš„è§„åˆ™ï¼š<strong>å¦‚æœä¸æŒ‡å®šç±»å‹å’Œåˆå§‹åŒ–å€¼ï¼Œåˆ™é»˜è®¤è¡¨ç¤ºä½¿ç”¨ä¸Šè¡Œçš„èµ‹å€¼è¡¨è¾¾å¼</strong>ä¸€è‡´</p>
<p>ä¸Šé¢ç­‰ä»·äº</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">const</span> <span class="token punctuation">(</span>
	Sunday    <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//0</span>
	Monday    <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//1</span>
	Tuesday   <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//2</span>
	Wednesday <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//3</span>
	Thursday  <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//4</span>
	Friday    <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//5</span>
	Saturday  <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//6</span>
<span class="token punctuation">)</span>
</code></pre></div><h3>è§„åˆ™ï¼šiotaåªè·Ÿå¸¸é‡ç»„çš„åç§»ä½ç½®æœ‰å…³</h3>
<p>â€¼ï¸</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">const</span> <span class="token punctuation">(</span>
	a <span class="token operator">=</span> <span class="token char">'A'</span>
	b
	c <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//iota=2</span>
	d        <span class="token comment">//iota=3</span>

	e <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//iota=4</span>
	f        <span class="token comment">//iota=5</span>
<span class="token punctuation">)</span>
</code></pre></div><p>è™½ç„¶cæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨iotaæ ‡è¯†ç¬¦å®šä¹‰ï¼Œä½†åœ¨constå—ä¸­ä½ç½®å±äºç¬¬3ï¼Œæ­¤æ—¶iotaä¸º2ï¼›</p>
<p>dä¸eä¹‹é—´è™½ç„¶æœ‰ç©ºè¡Œï¼Œä½†eçš„åç§»ä½ç½®å±äºç¬¬5ï¼Œå› æ­¤iotaä¸º4ï¼›</p>
<h3>è§„åˆ™ï¼šæ¯é‡åˆ°ä¸€ä¸ªconstå…³é”®å­—ï¼Œiotaå°±ä¼šé‡ç½®ä¸º0</h3>
<p>ä¾‹å¦‚ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//iota=0</span>
<span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">//iota=0</span>
</code></pre></div><h3>è§„åˆ™ï¼šiotaè·Ÿä¸ªæ•°æ— å…³ï¼Œå³ä¾¿æ˜¯åŒä¸€è¡Œï¼Œå€¼ä¹Ÿéƒ½ä¸€æ ·</h3>
<p>â€¼ï¸</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">const</span> <span class="token punctuation">(</span>
	g<span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token boolean">iota</span><span class="token punctuation">,</span> <span class="token boolean">iota</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token comment">//0,10 (iota=0)</span>
	i<span class="token punctuation">,</span> j                   <span class="token comment">//1,11 (iota=1)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>è™½ç„¶g,hæ˜¯ä¸¤ä¸ªå¸¸é‡ï¼Œä½†ç”±äºåœ¨åŒä¸€è¡Œï¼Œiotaçš„å€¼ä¸€æ ·</p>
<h3>è§„åˆ™ï¼šå¦‚æœæƒ³ä»1å¼€å§‹ï¼Œåˆ™å¯ä»¥é€šè¿‡<code>_</code>å¿½ç•¥ç¬¬ä¸€ä¸ªiota</h3>
<p>ä¾‹å¦‚ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">const</span> <span class="token punctuation">(</span>
	<span class="token boolean">_</span>          <span class="token operator">=</span> <span class="token boolean">iota</span>
	KB <span class="token builtin">float64</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token boolean">iota</span><span class="token punctuation">)</span> <span class="token comment">//2^10</span>
	MB                            <span class="token comment">//2^20</span>
	GB                            <span class="token comment">//...</span>
	TB
	PB
	EB
	ZB
	YB
<span class="token punctuation">)</span>
</code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>æ•£åˆ—map</title>
      <link>http://blog.cjhe.top/go-language/base/map.html</link>
      <guid>http://blog.cjhe.top/go-language/base/map.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">æ•£åˆ—map</source>
      <description>mapmap</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Mon, 06 Feb 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="http://cdn.cjhe.top/blog/map.png" alt="map" tabindex="0" loading="lazy"><figcaption>map</figcaption></figure>
<!-- more -->
<blockquote>
<p>mapæ˜¯Goè¯­è¨€æä¾›çš„ä¸€ç§æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå®ƒè¡¨ç¤ºä¸€ç»„æ— åºçš„é”®å€¼å¯¹(key-value)</p>
</blockquote>
<h2>å£°æ˜</h2>
<p><strong>å…³é”®å­—å®šä¹‰</strong>ï¼š<code>map</code></p>
<p><strong>é›¶å€¼</strong>ï¼š<code>nil</code></p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>mapå¯¹äº<code>value</code>çš„ç±»å‹æ²¡æœ‰é™åˆ¶ï¼Œä½†æ˜¯å¯¹<code>key</code>çš„ç±»å‹æœ‰ä¸¥æ ¼çš„è¦æ±‚ï¼š
<code>key</code>çš„ç±»å‹å¿…é¡»æ”¯æŒ<code>==</code>å’Œ<code>!=</code>ä¸¤ä¸ªæ“ä½œç¬¦çš„æ•°æ®ç±»å‹
å› æ­¤ï¼Œå‡½æ•°ã€mapã€åˆ‡ç‰‡ç­‰ä¸èƒ½ä½œä¸º<code>key</code>ç±»å‹ã€‚</p>
</div>
<h2>åˆå§‹åŒ–</h2>
<p>å­—é¢é‡åˆå§‹åŒ–</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>m<span class="token operator">:=</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">"apple"</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"banana"</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span>
</code></pre></div><p>å†…ç½®å‡½æ•°make()åˆå§‹åŒ–</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>m<span class="token operator">:=</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><h2>æ“ä½œ</h2>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
	m<span class="token punctuation">[</span><span class="token string">"apple"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>       <span class="token comment">//æ–°å¢</span>
	m<span class="token punctuation">[</span><span class="token string">"apple"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>       <span class="token comment">//ä¿®æ”¹</span>
	<span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">"apple"</span><span class="token punctuation">)</span>   <span class="token comment">//åˆ é™¤</span>
	v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">"banana"</span><span class="token punctuation">]</span> <span class="token comment">//comma ok æŸ¥è¯¢</span>
	<span class="token keyword">if</span> ok <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">//è·å–keyçš„ä¸ªæ•°</span>
	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span> <span class="token comment">//éå†m</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>å‘<code>nil</code>ï¼ˆæœªåˆå§‹åŒ–ï¼‰çš„mapç±»å‹é‡Œæ·»åŠ æ•°æ®ä¼šå¯¼è‡´<code>panic</code></p>
</div>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<ul>
<li>åˆ é™¤ä¸å­˜åœ¨çš„keyä¸ä¼šå¯¼è‡´panicï¼›</li>
<li>æŸ¥è¯¢ä¸å­˜åœ¨çš„keyï¼Œå¦‚æœæœªä½¿ç”¨<strong>comma ok</strong>è¯­æ³•ï¼Œåˆ™ä¼šè¿”å›valueç±»å‹å¯¹åº”çš„<strong>é›¶å€¼</strong></li>
</ul>
</div>
<h2>åº•å±‚åŸç†</h2>
<p>å‚è§<code>$GOROOT/src/runtime/map.go</code></p>
<h3>mapçš„æ•°æ®ç»“æ„</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> hmap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	count      <span class="token builtin">int</span>            <span class="token comment">//å½“å‰ä¿å­˜çš„å…ƒç´ ä¸ªæ•°</span>
	flags      <span class="token builtin">uint8</span>          <span class="token comment">//å½“å‰mapæ‰€å¤„çš„çŠ¶æ€æ ‡å¿—</span>
	B          <span class="token builtin">uint8</span>          <span class="token comment">//bucketæ•°ç»„çš„å¤§å°çš„å¯¹æ•°ï¼š2^B=bucketæ•°é‡</span>
	noverflow  <span class="token builtin">uint16</span>         <span class="token comment">//overflow bucketsçš„å¤§çº¦æ•°é‡</span>
	hash0      <span class="token builtin">uint32</span>         <span class="token comment">//hashå‡½æ•°çš„ç§å­å€¼</span>
	buckets    unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//æŒ‡å‘bucketæ•°ç»„çš„æŒ‡é’ˆ</span>
	oldbuckets unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//åœ¨mapæ‰©å®¹é˜¶æ®µæŒ‡å‘å‰ä¸€ä¸ªbucketæ•°ç»„çš„æŒ‡é’ˆ</span>
	nevacuate  <span class="token builtin">uintptr</span>        <span class="token comment">//mapæ‰©å®¹é˜¶æ®µå……å½“æ‰©å®¹è¿›åº¦è®¡æ•°å™¨,å°äºæ­¤bucketéƒ½å·²å®Œæˆäº†æ•°æ®æ’ç©ºå’Œè¿ç§»æ“ä½œ</span>
	extra      <span class="token operator">*</span>mapextra      <span class="token comment">//å¯é€‰å­—æ®µï¼Œä¸gcç›¸å…³</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>bucketçš„æ•°æ®ç»“æ„</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// a bucket for a Go map</span>
<span class="token keyword">type</span> bmap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	tophash <span class="token punctuation">[</span>bucketCnt<span class="token punctuation">]</span><span class="token builtin">uint8</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®é™…ä¸Šç¼–è¾‘æœŸé—´ä¼šåŠ¨æ€ç”Ÿäº§ä¸€ä¸ªæ–°çš„ç»“æ„ä½“</span>
<span class="token keyword">type</span> bmap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	tophash  <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token builtin">uint8</span>
	keys     <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span>keytype
	values   <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span>valuetype
	overflow <span class="token builtin">uintptr</span>
<span class="token punctuation">}</span>
</code></pre></div><figure><figcaption>map</figcaption></figure>
<p>keyå’Œvalueåˆ†å¼€å­˜å‚¨ï¼Œç›®çš„æ˜¯ä¸ºäº†å‡å°‘å†…å­˜å¯¹é½å¸¦æ¥çš„å†…å­˜æµªè´¹ï¼Œä»¥map[int8]int64ä¸ºä¾‹ï¼š</p>
<figure><figcaption>map-memory</figcaption></figure>
<p>æ¯ä¸ªbucketå¯ä»¥å­˜å‚¨8ä¸ªé”®å€¼å¯¹ï¼Œè¶…è¿‡å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„bucketï¼Œé€šè¿‡overflowé“¾æ¥</p>
<p>å½“æœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šæ•°é‡çš„é”®è¢«<code>Hash</code>åˆ°äº†åŒä¸€ä¸ªbucketæ—¶ï¼Œæˆ‘ä»¬ç§°è¿™äº›é”®å‘ç”Ÿäº†å†²çªï¼ŒGoè¯­è¨€ä½¿ç”¨é“¾è¡¨è§£å†³é”®å†²çªã€‚</p>
<p>hashå†²çªå¹¶ä¸æ˜¯å¥½äº‹æƒ…ï¼Œå®ƒé™ä½äº†å­˜å–æ•ˆç‡ï¼Œå¥½çš„Hashç®—æ³•å¯ä»¥ä¿è¯Hashå€¼å¾—éšæœºæ€§ï¼Œä½†æ— è®ºä½¿ç”¨å“ªç§Hashç®—æ³•ï¼Œå†²çªç»ˆç©¶ä¸å¯é¿å…ï¼Œå½“å†²çªè¾ƒå¤šçš„æ—¶å€™å°±éœ€è¦é‡‡å–ä¸€äº›æªæ–½æ¥å‡å°‘å†²çªã€‚</p>
<h3>è´Ÿè½½å› å­LoadFactor</h3>
<blockquote>
<p>è´Ÿè½½å› å­ç”¨äºè¡¡é‡ä¸€ä¸ªHashè¡¨çš„å†²çªæƒ…å†µï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>è´Ÿè½½å› å­ = é”®æ•°é‡ / bucketæ•°é‡</p>
</blockquote>
<ul>
<li>è´Ÿè½½å› å­è¿‡å°ï¼Œç©ºé—´åˆ©ç”¨ç‡ä½ï¼›</li>
<li>è´Ÿè½½å› å­è¿‡å¤§ï¼Œè¯´æ˜å†²çªä¸¥é‡ï¼Œå­˜å–æ•ˆç‡ä½ï¼›</li>
</ul>
<p>å½“Hashè¡¨çš„è´Ÿè½½å› å­è¿‡å¤§æ—¶éœ€è¦rehashï¼Œå³ç”³è¯·æ›´å¤šçš„bucketï¼Œå¹¶å¯¹æ‰€æœ‰çš„é”®å€¼å¯¹é‡æ–°ç»„ç»‡ï¼Œä½¿å…¶å‡åŒ€çš„åˆ†å¸ƒåœ¨è¿™äº›bucketä¸­ã€‚</p>
<ul>
<li>redisçš„è´Ÿè½½å› å­å¤§äº1æ—¶å°±ä¼šè§¦å‘rehashï¼Œå› ä¸ºredisçš„æ¯ä¸ªbucketåªèƒ½å­˜1ä¸ªé”®å€¼å¯¹ï¼›</li>
<li>goçš„è´Ÿè½½å› å­å¤§äº6.5æ—¶æ‰ä¼šè§¦å‘rehashï¼Œå› ä¸ºgoçš„æ¯ä¸ªbucketå¯ä»¥å­˜8ä¸ªé”®å€¼å¯¹ï¼›</li>
</ul>
<h3>æ‰©å®¹</h3>
<p>æ¡ä»¶ï¼š</p>
<ul>
<li>è´Ÿè½½å› å­å¤§äº6.5æ—¶</li>
<li>overflowçš„æ•°é‡å¤§äº2^15=32768</li>
</ul>
<p>mapçš„æ‰©ç¼©å®¹çš„ä¸»è¦åŒºåˆ«åœ¨äºhmap.Bçš„å®¹é‡å¤§å°æ”¹å˜ï¼Œè€Œç¼©å®¹ç”±äºhmap.Bå‹æ ¹ä¸å˜ï¼Œå†…å­˜å ç”¨ä¾ç„¶å­˜åœ¨ã€‚è¿™å°±å¯¼è‡´åœ¨åˆ é™¤å…ƒç´ æ—¶ï¼Œå¹¶ä¸ä¼šé‡Šæ”¾å†…å­˜ï¼Œä½¿å¾—åˆ†é…çš„æ€»å†…å­˜ä¸æ–­å¢åŠ ï¼Œå¦‚æœä¸æ³¨æ„ï¼Œå†…å­˜å°±å¾ˆå®¹æ˜“çˆ†äº†ã€‚</p>
<h4>å¢é‡æ‰©å®¹</h4>
<blockquote>
<p>é€šè¿‡å°†bucketæ•°ç»„æ‰©å¤§ä¸€å€å®ç°ï¼Œå¹¶æ¬è¿é”®å€¼å¯¹</p>
</blockquote>
<ol>
<li>oldbucketsæŒ‡å‘ç°æœ‰bucketæ•°ç»„ï¼›</li>
<li>åˆ›å»ºä¸€ä¸ªä¸¤å€ç°æœ‰è§„æ¨¡çš„bucketæ•°ç»„ï¼›</li>
<li>bucketsæŒ‡å‘æ–°çš„bucketæ•°ç»„ï¼›</li>
<li>å°†oldbucketsçš„é”®å€¼å¯¹æ¬è¿åˆ°æ–°çš„bucketæ•°ç»„ï¼›</li>
<li>é‡Šæ”¾oldbucketsï¼›</li>
</ol>
<figure><figcaption>map-expand</figcaption></figure>
<h4>ç­‰é‡æ‰©å®¹</h4>
<blockquote>
<p>ç”¨äºè§£å†³ä¸€ä¸ªbucketé“¾æ¥å¾ˆå¤šbucketï¼Œoverflowæ•°é‡è¿‡é«˜</p>
<p>bucketæ•°ç»„å¤§å°ä¸å˜ï¼Œé‡æ–°æ’åˆ—é”®å€¼å¯¹ï¼Œåˆ†æ•£åˆ°ä¸åŒçš„bucketæ•°ç»„ä¸­</p>
<p>è¿™æ ·å°±æé«˜äº†è®¿é—®æ•ˆç‡</p>
</blockquote>
<h3>å¢åˆ æ”¹æŸ¥</h3>
<h4>æŸ¥æ‰¾è¿‡ç¨‹</h4>
<ul>
<li>æ ¹æ®keyè®¡ç®—hashå€¼ï¼›</li>
<li>å–hashå€¼ä½ä½ä¸hmap.Bå–æ¨¡æ¥ç¡®å®šbucketçš„ä½ç½®ï¼›</li>
<li>å–hashå€¼é«˜ä½ï¼Œåœ¨tophashæ•°ç»„ä¸­æŸ¥è¯¢ï¼›</li>
<li>å¦‚æœtophash[i]ä¸­å­˜å‚¨çš„hashå€¼ä¸å½“å‰keyçš„hashå€¼ç›¸ç­‰ï¼Œåˆ™è·å–tophash[i]çš„keyå€¼è¿›è¡Œæ¯”è¾ƒï¼›</li>
<li>å½“å‰bucketæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¾æ¬¡ä»æº¢å‡ºçš„bucketä¸­æŸ¥æ‰¾ï¼›</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å¦‚æœå½“å‰mapå¤„äºæ¬è¿è¿‡ç¨‹ä¸­ï¼Œé‚£ä¹ˆæŸ¥æ‰¾æ—¶ä»oldbucketsæ•°ç»„ä¸­æŸ¥æ‰¾ï¼Œä¸å†ä»æ–°çš„bucketsæ•°ç»„ä¸­æŸ¥æ‰¾</p>
</div>
<h4>æ·»åŠ è¿‡ç¨‹</h4>
<ul>
<li>æ ¹æ®keyè®¡ç®—hashå€¼ï¼›</li>
<li>å–hashå€¼ä½ä½ä¸hmap.Bå–æ¨¡æ¥ç¡®å®šbucketçš„ä½ç½®ï¼›</li>
<li>æŸ¥æ‰¾è¯¥keyæ˜¯å¦å­˜åœ¨
<ul>
<li>å¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥æ›´æ–°ï¼›</li>
<li>å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä»è¯¥bucketä¸­å¯»æ‰¾ç©ºä½™ä½ç½®å¹¶æ’å…¥ï¼›</li>
</ul>
</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å¦‚æœå½“å‰mapå¤„äºæ¬è¿è¿‡ç¨‹ä¸­ï¼Œé‚£ä¹ˆç›´æ¥æ·»åŠ åˆ°æ–°çš„bucketsæ•°ç»„ä¸­</p>
</div>
<h4>åˆ é™¤è¿‡ç¨‹</h4>
<ul>
<li>æŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨
<ul>
<li>å­˜åœ¨ï¼Œåˆ™åˆ é™¤ï¼›</li>
<li>ä¸å­˜åœ¨ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšï¼›</li>
</ul>
</li>
</ul>
<h2>mapæ³¨æ„äº‹é¡¹</h2>
<h3>mapçš„valueæ˜¯structè‡ªå®šä¹‰ç±»å‹ï¼Œæ— æ³•é€šè¿‡ç´¢å¼•çš„æ–¹å¼ç›´æ¥ä¿®æ”¹</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">MapDemo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		name <span class="token builtin">string</span>
		age  <span class="token builtin">int</span>
	<span class="token punctuation">}</span>
	ma <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span>User<span class="token punctuation">)</span>
	andes <span class="token operator">:=</span> User<span class="token punctuation">{</span>
		name<span class="token punctuation">:</span> <span class="token string">"andes"</span><span class="token punctuation">,</span>
		age<span class="token punctuation">:</span>  <span class="token number">18</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	ma<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> andes
	<span class="token comment">//ma[1].age = 19</span>
	andes<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">19</span>
	ma<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> andes
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>12è¡Œï¼Œå¦‚æœé€šè¿‡ç´¢å¼•çš„æ–¹å¼ç›´æ¥ä¿®æ”¹ï¼Œç¼–è¾‘å™¨ä¼šæŠ¥é”™ï¼š<a href="https://pkg.go.dev/golang.org/x/tools/internal/typesinternal#UnaddressableFieldAssign" target="_blank" rel="noopener noreferrer">UnaddressableFieldAssign</a>ï¼Œå¹¶ä¸”å®˜ç½‘ä¹Ÿç»™äº†è¯¦ç»†çš„è¯´æ˜ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>	// UnaddressableFieldAssign occurs when trying to assign to a struct field
	// in a map value.
	//
	// Example:
	//  func f() {
	//  	m := make(map[string]struct{i int})
	//  	m["foo"].i = 42
	//  }
	UnaddressableFieldAssign
</code></pre></div></div>
<h3>éå¹¶å‘è¯»å†™å®‰å…¨çš„</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">doIteration</span><span class="token punctuation">(</span>m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
		<span class="token boolean">_</span> <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"[%d, %d] "</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">doWrite</span><span class="token punctuation">(</span>m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
		m<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v <span class="token operator">+</span> <span class="token number">1</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>
		<span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
		<span class="token number">2</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
		<span class="token number">3</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			<span class="token function">doIteration</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			<span class="token function">doWrite</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿è¡ŒæŠ¥é”™ï¼š<code>fatal error: concurrent map iteration and map write</code></p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>Go åœ¨ map çš„å®ç°ä¸­å¢åŠ äº†è¯»å†™æ£€æŸ¥æœºåˆ¶ï¼Œä¸€æ—¦å‘ç°è¯»å†™å†²çªç«‹å³è§¦å‘ panic</p>
<p>å¦‚æœæƒ³ä½¿ç”¨å¹¶å‘çš„mapï¼š</p>
<ul>
<li>å¯ä»¥ä½¿ç”¨Go 1.9ç‰ˆæœ¬ä¸­å¼•å…¥æ”¯æŒå¹¶å‘å†™å®‰å…¨çš„<code>sync.Map</code>ç±»å‹ï¼›</li>
<li>å¯ä»¥ä½¿ç”¨mapæ—¶å¢åŠ é”ï¼›</li>
</ul>
</div>
<h3>æ— æ³•é€šè¿‡ç´¢å¼•ç›´æ¥è·å–valueçš„åœ°å€</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Num <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	id <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span>Num<span class="token punctuation">)</span>
	m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Num<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>
	value <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>value<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//invalid operation: cannot take address of m[0] (map index expression of type Num)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>è¿™æ˜¯ç”±äºmapä¼šæ‰©å®¹ï¼Œmapä¸­çš„æ•°æ®å…ƒç´ çš„valueåœ°å€å¯èƒ½åœ¨æ‰©å®¹è¿‡ç¨‹ä¸­å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤è·å–è¿™ä¸ªåœ°å€æ²¡æœ‰æ„ä¹‰ï¼ŒGoè¯­è¨€ä¸ºäº†é˜²æ­¢å‡ºç°è¯¥é—®é¢˜ï¼Œåœ¨ç¼–è¯‘æœŸé—´å°±æ£€æµ‹æ˜¯å¦æœ‰è·å–åœ°å€è¡Œä¸ºï¼Œé¿å…å‡ºç°é—®é¢˜ã€‚</p>
</div>
<h3>å°½é‡ä½¿ç”¨capå‚æ•°åˆå§‹åŒ–map</h3>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"testing"</span>

<span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">10000</span>

<span class="token keyword">func</span> <span class="token function">BenchmarkMapInitWithoutCap</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> n<span class="token operator">++</span> <span class="token punctuation">{</span>
		m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			m<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">BenchmarkMapInitWithCap</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> n<span class="token operator">++</span> <span class="token punctuation">{</span>
		m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			m<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ€§èƒ½åŸºå‡†æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>go test -benchmem -bench=. cap_benchmark_test.go           
goos: darwin
goarch: amd64
cpu: Intel(R) Core(TM) i5-8259U CPU @ 2.30GHz
BenchmarkMapInitWithoutCap-8        1226           1338887 ns/op          687175 B/op        276 allocs/op
BenchmarkMapInitWithCap-8           2534            425859 ns/op          322225 B/op         11 allocs/op
PASS
ok      command-line-arguments  5.939s
</code></pre></div>]]></content:encoded>
      <enclosure url="http://cdn.cjhe.top/blog/map.png" type="image/png"/>
    </item>
    <item>
      <title>åˆ‡ç‰‡slice</title>
      <link>http://blog.cjhe.top/go-language/base/slice.html</link>
      <guid>http://blog.cjhe.top/go-language/base/slice.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">åˆ‡ç‰‡slice</source>
      <description>sliceslice</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Fri, 03 Feb 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<figure><img src="http://cdn.cjhe.top/blog/slice-1.png" alt="slice" tabindex="0" loading="lazy"><figcaption>slice</figcaption></figure>
<!-- more -->
<blockquote>
<p>åˆ‡ç‰‡ï¼ˆsliceï¼‰ç®€ç§°åŠ¨æ€æ•°ç»„ï¼Œæ—¢ç„¶æ˜¯åŠ¨æ€ï¼Œåˆ‡ç‰‡çš„é•¿åº¦å¯ä»¥åŠ¨æ€ä¼¸ç¼©ã€‚</p>
</blockquote>
<p>åœ¨Goè¯­è¨€ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç»å¸¸ä½¿ç”¨åˆ‡ç‰‡è€Œéæ•°ç»„ï¼Œå› ä¸ºåˆ‡ç‰‡ç›¸æ¯”è¾ƒæ•°ç»„æ›´åŠ <strong>çµæ´»</strong>å’Œ<strong>é«˜æ•ˆ</strong>ã€‚</p>
<h2>å£°æ˜</h2>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> <span class="token punctuation">(</span>
		a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>               <span class="token comment">// æŒ‡é’ˆä¸ºnilï¼Œlenå’Œcapä¸º0</span>
		b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>           <span class="token comment">// ç©ºåˆ‡ç‰‡ï¼Œä¸ç­‰äºnilï¼Œè¡¨ç¤ºç©ºçš„é›†åˆ</span>
		c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>    <span class="token comment">// æŒ‡å‘åŒ…å«ä¸‰ä¸ªå…ƒç´ çš„æ•°ç»„ï¼š[1ï¼Œ2ï¼Œ3]ã€‚lenå’Œcapä¸º3</span>
		d <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>             <span class="token comment">// ä¸cæŒ‡å‘åŒä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯lenä¸º2ï¼Œcapä¸º3</span>
		e <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token function">cap</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">]</span>     <span class="token comment">// ä¸cæŒ‡å‘åŒä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯lenä¸º2ï¼Œcapä¸ºcap(c)çš„å¤§å°ï¼Œå³3</span>
		f <span class="token operator">=</span> c<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>             <span class="token comment">// ä¸cæŒ‡å‘åŒä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯lenä¸º0ï¼Œcapä¸º3</span>
		g <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>    <span class="token comment">// æŒ‡å‘æ–°çš„æ•°ç»„ï¼ŒåŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼š[0,0,0]ã€‚lenå’Œcapä¸º3</span>
		h <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å‘æ–°çš„æ•°ç»„ï¼ŒåŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼š[0,0,0]ã€‚lenä¸º2ï¼Œcapä¸º3</span>
		i <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å‘æ–°çš„æ•°ç»„ï¼ŒåŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼š[0,0,0]ã€‚lenä¸º0ï¼Œcapä¸º3</span>
	<span class="token punctuation">)</span>
</code></pre></div><div class="hint-container caution">
<p class="hint-container-title">è­¦å‘Š</p>
<p>åˆ‡ç‰‡å£°æ˜æ—¶æœªåˆå§‹åŒ–ï¼Œæ­¤æ—¶ä¸èƒ½å¯¹åˆ‡ç‰‡è¿›è¡Œç´¢å¼•æ“ä½œ!</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">//panic: runtime error: index out of range [0] with length 0</span>
</code></pre></div></div>
<p>ä½†æ˜¯</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>appendå¯ä»¥å¯¹æœªåˆå§‹åŒ–çš„åˆ‡ç‰‡è¿›è¡Œæ“ä½œï¼Œå› ä¸ºappendæ“ä½œä¼šå¯¹åº•å±‚æ•°æ®è¿›è¡Œæ‰©å®¹ã€‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//æ­£å¸¸</span>
</code></pre></div></div>
<h2>åº•å±‚ç»“æ„</h2>
<p>åˆ‡ç‰‡çš„ç»“æ„å®šä¹‰ï¼š<code>$GOROOT/src/runtime/slice.go</code></p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> slice <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	array unsafe<span class="token punctuation">.</span>Pointer
	<span class="token builtin">len</span>   <span class="token builtin">int</span>
	<span class="token builtin">cap</span>   <span class="token builtin">int</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åˆ‡ç‰‡çš„å®šä¹‰åŒ…å«ä¸‰ä¸ªå­—æ®µï¼š</p>
<ul>
<li><strong>array</strong>ï¼šæŒ‡å‘æ•°ç»„æŸå…ƒç´ çš„æŒ‡é’ˆï¼ˆè¯¥å…ƒç´ ä¹Ÿæ˜¯åˆ‡ç‰‡çš„èµ·å§‹å…ƒç´ ï¼‰ï¼›</li>
<li><strong>len</strong>ï¼šè¡¨ç¤ºåˆ‡ç‰‡çš„é•¿åº¦ï¼Œå³åˆ‡ç‰‡å½“å‰å…ƒç´ çš„ä¸ªæ•°ï¼›</li>
<li><strong>cap</strong>ï¼šè¡¨ç¤ºåˆ‡ç‰‡çš„æœ€å¤§å®¹é‡ï¼›</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">åˆ‡ç‰‡ä¸æ•°ç»„åœ¨å‡½æ•°å‚æ•°ä¼ é€’ä¸­æ¯”è¾ƒ</p>
<ul>
<li>åˆ‡ç‰‡ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œå®é™…ä¼ é€’çš„æ˜¯runtime.sliceç»“æ„ä½“å®ä¾‹ï¼Œæ— è®ºå…¶åº•å±‚æ•°æ®æœ‰å¤šå¤§ï¼Œå‚æ•°ä¼ é€’å¸¦æ¥çš„æ€§èƒ½æŸè€—éƒ½æ˜¯å¾ˆå°ä¸”æ’å®šçš„ã€‚</li>
<li>æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶å°±ä¸ä¸€æ ·äº†ï¼Œä¼šé‡æ–°æ‹·è´æ•´ä¸ªæ•°ç»„ï¼Œæ€§èƒ½æŸè€—å°±å¾ˆå¤§ã€‚</li>
</ul>
</div>
<p>æ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“åˆ‡ç‰‡çš„åº•å±‚ç»“æ„æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åŸºäºæ•°ç»„åˆ›å»ºåˆ‡ç‰‡</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>u <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">}</span>
s <span class="token operator">:=</span> u<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">]</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">//[14 15 16 17] 4 7</span>
</code></pre></div><figure><figcaption>sliceåº•å±‚ç»“æ„</figcaption></figure>
<h2>appendæ‰©å®¹åŸç†</h2>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 0 0</span>
s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1 1</span>
s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">// 2 2</span>
s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3 4</span>
s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4 4</span>
s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5 8</span>
</code></pre></div><p>å…¶æ‰§è¡Œé€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<figure><figcaption>sliceæ‰©å®¹</figcaption></figure>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p><code>append</code>å‡½æ•°åœ¨å½“å‰æ•°ç»„å®¹é‡æ— æ³•æ»¡è¶³æ—¶ï¼Œä¼šåˆ†é…æ–°çš„æ•°ç»„ï¼Œæ–°çš„æ•°ç»„å®¹é‡ä¼šæŒ‰ä¸€å®šçš„ç®—æ³•æ‰©å±•ï¼ˆå‚è§<code>$GOROOT/src/runtime/slice.go</code>çš„<code>growslice</code>å‡½æ•°ï¼‰ï¼Œå°†æ—§æ•°ç»„ä¸­çš„æ•°æ®å¤åˆ¶åˆ°æ–°æ•°ç»„ä¹‹åï¼Œåˆ‡ç‰‡arrayæŒ‡é’ˆæŒ‡å‘æ–°çš„æ•°ç»„ï¼Œä¹‹åæ—§çš„æ•°ç»„å°±å¦‚æœæœªè¢«ä½¿ç”¨æˆ–å…¶ä»–åˆ‡ç‰‡å¼•ç”¨ä¼šè¢«åƒåœ¾å›æ”¶æ‰ã€‚</p>
</div>
<h2>appendçš„æ³¨æ„äº‹é¡¹</h2>
<div class="language-go" data-ext="go" data-title="go"><pre go="" class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">SliceRise</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span>
		s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span>
	s2 <span class="token operator">:=</span> s1
	s2 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s2<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
	<span class="token function">SliceRise</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
	<span class="token function">SliceRise</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//[1 2] 2 2</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//[2 3 4] 3 4</span>
<span class="token punctuation">}</span>
</code></pre></div><ul>
<li>ç¬¬15è¡Œï¼Œç”±äºs2éœ€è¦çš„å­˜å‚¨ç©ºé—´è¶…è¿‡s1çš„å­˜å‚¨ç©ºé—´ï¼Œå› æ­¤é‡æ–°ç”³è¯·äº†ä¸€å—ç©ºé—´ï¼Œè‡³æ­¤s1å’Œs2ä¸å†å…±äº«åŒä¸€åº•å±‚æ•°ç»„ï¼›</li>
<li><code>SliceRise</code>å‡½æ•°ç¬¬ä¸€æ­¥ï¼Œè¿›è¡Œæ‰©å®¹ï¼Œç”±äºs1ä¼ å‚çš„åº•å±‚æ•°ç»„ä¸æ»¡è¶³å­˜å‚¨ç©ºé—´ï¼Œå› æ­¤såˆ‡ç‰‡å’Œs1å°†ä¸å†å…±äº«åŒä¸€ç©ºé—´ï¼Œç„¶è€Œs2ä¼ å‚çš„åº•å±‚æ•°ç»„æ»¡è¶³å­˜å‚¨ç©ºé—´ï¼Œå› æ­¤såˆ‡ç‰‡å’Œs2å…±äº«åº•å±‚æ•°æ®ï¼Œå› æ­¤å¯¹såˆ‡ç‰‡çš„æ“ä½œä¼šå½±å“åˆ°åº•å±‚æ•°æ®ï¼Œè¿›è¡Œå½±å“s2ï¼›</li>
</ul>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ä¸€æ—¦åº•å±‚æ•°ç»„å®¹é‡æ— æ³•æ»¡è¶³æŸä¸ªåˆ‡ç‰‡çš„å®¹é‡éœ€æ±‚ï¼Œè¯¥åˆ‡ç‰‡ä¸åº•å±‚æ•°ç»„å…³ç³»å°±ä¼š<strong>è§£é™¤ç»‘å®š</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>15è¡Œçš„s2å’Œs1çš„åº•å±‚æ•°ç»„è§£é™¤ç»‘å®š</li>
<li>16è¡Œè°ƒç”¨SliceRise(s1)ï¼Œå…¶ä¸­så’Œs1çš„åº•å±‚æ•°ç»„è§£é™¤ç»‘å®š</li>
</ul>
</div>
<div class="hint-container caution">
<p class="hint-container-title">è­¦å‘Š</p>
<p>å¦‚æœå¤šä¸ªåˆ‡ç‰‡å…±ç”¨åŒä¸€ä¸ªåº•å±‚æ•°ç»„,æŸä¸ªåˆ‡ç‰‡çš„æ“ä½œå¯¹å…¶ä»–åˆ‡ç‰‡éƒ½æ˜¯<strong>å¯è§çš„</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>17è¡Œè°ƒç”¨SliceRise(s2)ï¼Œs2å’Œså…±ç”¨åº•å±‚æ•°ç»„ï¼Œå› æ­¤sçš„ä¿®æ”¹ï¼Œs2æ˜¯å¯è§çš„ã€‚</li>
</ul>
</div>
<p>å†ä¸¾ä¸€ä¸ªå½±å“æ˜¯<strong>å¯è§çš„</strong>ä¾‹å­</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>  a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	b <span class="token operator">:=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
	b <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [2 3 0] 3 4</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1 2 3 0 5] 5 5</span>
</code></pre></div><p>båˆ‡ç‰‡å…±ç”¨aåˆ‡ç‰‡çš„åº•å±‚æ•°ç»„ï¼Œä¸”appendæ“ä½œå¹¶æœªè¶…è¿‡båˆ‡ç‰‡çš„å®¹é‡ï¼Œå› æ­¤ä¼šå½±å“åˆ°aåˆ‡ç‰‡ï¼š<code>a[3]</code>ç”±åŸæ¥çš„4å˜ä¸º0ã€‚</p>
<h2>appendçš„æ€§èƒ½</h2>
<p>appendæ‰©å®¹ä¼šé‡æ–°åˆ†é…åº•å±‚æ•°ç»„å¹¶å¤åˆ¶å…ƒç´ ï¼Œå½“å…ƒç´ è¾ƒå¤šæ—¶ï¼Œæ“ä½œä»£ä»·è¿˜æ˜¯å¾ˆå¤§çš„ã€‚é¿å…è¿™ç§åœºæ™¯çš„æ–¹æ³•æ˜¯å¯¹åˆ‡ç‰‡çš„å®¹é‡è§„æ¨¡è¿›è¡Œé¢„ä¼°ï¼Œå¹¶ä»¥capå‚æ•°çš„å½¢å¼è¿›è¡Œåˆ›å»ºï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>s<span class="token operator">:=</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">,</span> <span class="token builtin">cap</span><span class="token punctuation">)</span>
</code></pre></div><p>æˆ‘ä»¬å°†æœªé¢„ä¼°å®¹é‡çš„appendæ“ä½œä¸é¢„ä¼°å®¹é‡çš„appendæ“ä½œè¿›è¡Œå‹æµ‹å¦‚ä¸‹ï¼š</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"testing"</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">10000</span>

<span class="token keyword">func</span> <span class="token function">BenchmarkSliceInitWithoutCap</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> n<span class="token operator">++</span> <span class="token punctuation">{</span>
		s1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			s1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">BenchmarkSliceInitWithCap</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> n<span class="token operator">++</span> <span class="token punctuation">{</span>
		s1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			s1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>go test -benchmem -bench=. cap_benchmark_test.go 
goos: darwin
goarch: amd64
cpu: Intel(R) Core(TM) i5-8259U CPU @ 2.30GHz
BenchmarkSliceInitWithoutCap-8             18600             62965 ns/op          357625 B/op         19 allocs/op
BenchmarkSliceInitWithCap-8                71695             15997 ns/op           81920 B/op          1 allocs/op
PASS
ok      command-line-arguments  3.630s
</code></pre></div><ul>
<li>ä¸å¸¦capçš„appendæ“ä½œçš„å¹³å‡æ€§èƒ½æ˜¯62965 ns/opï¼Œæ˜¯å¸¦capçš„appendæ“ä½œçš„<code>4</code>å€å·¦å³ï¼›</li>
<li>ä¸å¸¦capçš„appendæ“ä½œæ¯æ¬¡æ“ä½œåˆ†é…357625Bå†…å­˜ï¼Œè€Œå¸¦capçš„appendæ“ä½œä»…åˆ†é…81920Bï¼›</li>
<li>ä¸å¸¦capçš„appendæ“ä½œå¹³å‡æ¯æ¬¡åˆ†é…19æ¬¡å†…å­˜ï¼Œè€Œå¸¦capçš„appendæ“ä½œä»…éœ€ä¸€æ¬¡å†…å­˜åˆ†é…ï¼›</li>
</ul>
<h2>appendçš„éå¸¸è§„æ“ä½œ</h2>
<p>å’Œæ•°ç»„ç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨<code>len()</code>å’Œ<code>cap()</code>å‡½æ•°è·å–åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡ã€‚æ­¤å¤–å¯ä»¥ä½¿ç”¨<code>append()</code>å¯¹åˆ‡ç‰‡è¿½åŠ å…ƒç´ ï¼Œä½†<code>append()</code>è¿œä¸æ­¢è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h3>æ·»åŠ åˆ‡ç‰‡å…ƒç´ </h3>
<h4>åœ¨åˆ‡ç‰‡å°¾éƒ¨è¿½åŠ å…ƒç´ </h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>                      <span class="token comment">//æŒ‡é’ˆä¸ºnilï¼Œlenå’Œcapä¸º0</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>                 <span class="token comment">//è¿½åŠ ä¸€ä¸ªå…ƒç´ ï¼Œlenå’Œcapéƒ½ä¸º1</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>           <span class="token comment">//è¿½åŠ ä¸‰ä¸ªå…ƒç´ ï¼Œlenå’Œcapéƒ½ä¸º4</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">}</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">//è¿½åŠ ä¸€ä¸ªåˆ‡ç‰‡ï¼Œlenä¸º7ï¼Œcapä¸º8</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>                   <span class="token comment">//[1 2 3 4 5 6 7]</span>
</code></pre></div><h4>åœ¨åˆ‡ç‰‡å¤´éƒ¨è¿½åŠ å…ƒç´ </h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>              <span class="token comment">//lenå’Œcapéƒ½ä¸º3</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token operator">...</span><span class="token punctuation">)</span>          <span class="token comment">//åœ¨å¼€å¤´æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œlenå’Œcapéƒ½ä¸º4</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">//åœ¨å¼€å¤´æ·»åŠ ä¸€ä¸ªåˆ‡ç‰‡ï¼Œlenä¸º7ï¼Œcapä¸º8</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>                      <span class="token comment">//[-3 -2 -1 0 1 2 3]</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åœ¨åˆ‡ç‰‡å¼€å¤´è¿½åŠ å…ƒç´ ä¼šå¯¼è‡´å†…å­˜çš„é‡æ–°åˆ†é…ï¼Œå·²æœ‰çš„å…ƒç´ ä¼šå¤åˆ¶ä¸€ä»½ã€‚å› æ­¤ä»åˆ‡ç‰‡çš„å¤´éƒ¨è¿½åŠ å…ƒç´ çš„æ€§èƒ½å¾ˆå·®ï¼Œä¹Ÿå¾ˆå°‘ä½¿ç”¨åˆ°ã€‚</p>
</div>
<h4>åœ¨åˆ‡ç‰‡ä¸­é—´è¿½åŠ å…ƒç´ </h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">}</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span>       <span class="token comment">//è¿½åŠ ä¸€ä¸ªå…ƒç´ ï¼Œç°åœ¨åŒ…å«å…ƒç´ [1,2,3,7]</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">//è¿½åŠ ä¸€ä¸ªåˆ‡ç‰‡ï¼Œç°åœ¨åŒ…å«å…ƒç´ [1,2,3,4,5,6,7]</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>                                         <span class="token comment">//[1 2 3 4 5 6 7]</span>
</code></pre></div><p>åŒæ ·ï¼Œåœ¨åˆ‡ç‰‡ä¸­é—´è¿½åŠ å…ƒç´ ï¼Œä¼šåˆ›å»ºè®¸å¤šä¸´æ—¶åˆ‡ç‰‡ï¼Œæ€§èƒ½æ¯”è¾ƒå·®ã€‚å¯ä»¥ä½¿ç”¨<code>copy()</code>å‡½æ•°å®Œæˆç±»ä¼¼çš„åŠŸèƒ½ï¼š</p>
<p>åœ¨içš„ä½ç½®ä¸Šæ’å…¥ä¸€ä¸ªå…ƒç´ </p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>     <span class="token comment">//æ‰©å±•ä¸€ä¸ªç©ºé—´</span>
<span class="token function">copy</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//a[i:]å‘åç§»åŠ¨</span>
a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span> x             <span class="token comment">//è®¾ç½®æ–°æ·»åŠ çš„å…ƒç´ </span>
</code></pre></div><div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>         <span class="token comment">//[1,2,4],cap=3</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>               <span class="token comment">//[1,2,4,0],cap=6</span>
<span class="token function">copy</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>             <span class="token comment">//[1,2,0,4],cap=6</span>
a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>                       <span class="token comment">//[1,2,3,4],cap=6</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//[1 2 3 4] 4 6</span>
</code></pre></div><p><code>copy(target,source)</code>å‡½æ•°ï¼Œå°†sourceçš„å†…å®¹å¤åˆ¶åˆ°targetï¼Œç›¸æ¯”è¾ƒappendï¼ŒèŠ‚çœäº†ä¸´æ—¶åˆ‡ç‰‡çš„åˆ›å»ºã€‚</p>
<p>åœ¨içš„ä½ç½®ä¸Šæ’å…¥å¤šä¸ªå…ƒç´ : x</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>x<span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token function">copy</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token function">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">copy</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span>
</code></pre></div><h3>åˆ é™¤åˆ‡ç‰‡å…ƒç´ </h3>
<h4>åœ¨åˆ‡ç‰‡å¤´éƒ¨åˆ é™¤å…ƒç´ </h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>a <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">//åˆ é™¤å¼€å¤´1ä¸ªå…ƒç´ </span>
a <span class="token operator">=</span> a<span class="token punctuation">[</span>N<span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">//åˆ é™¤å¼€å¤´Nä¸ªå…ƒç´ </span>
</code></pre></div><p>æˆ–è€…</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">//åˆ é™¤å¼€å¤´1ä¸ªå…ƒç´ </span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>N<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">//åˆ é™¤å¼€å¤´Nä¸ªå…ƒç´ </span>
</code></pre></div><p>è¿™é‡Œçš„lenå’Œcapéƒ½ä¸º2ï¼Œæ˜¯å› ä¸ºé‡æ–°åˆ†é…äº†å†…å­˜ç©ºé—´</p>
<h4>åœ¨åˆ‡ç‰‡ä¸­éƒ¨åˆ é™¤å…ƒç´ </h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">// åˆ é™¤ä¸­é—´1ä¸ªå…ƒç´ </span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token operator">+</span>N<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">// åˆ é™¤ä¸­é—´Nä¸ªå…ƒç´ </span>
</code></pre></div><div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>      <span class="token comment">//[1,2,3,4],len=4,cap=4</span>
a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span>    <span class="token comment">//[1,3,4],len=3,cap=4</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//[1 3 4] 3 4</span>
</code></pre></div><h4>åœ¨åˆ‡ç‰‡å°¾éƒ¨åˆ é™¤å…ƒç´ </h4>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>a <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">//åˆ é™¤å°¾éƒ¨1ä¸ªå…ƒç´ </span>
a <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">-</span>N<span class="token punctuation">]</span> <span class="token comment">//åˆ é™¤å°¾éƒ¨Nä¸ªå…ƒç´ </span>
</code></pre></div><div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>         <span class="token comment">//[1,2,3],len=3,cap=3</span>
a <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>                      <span class="token comment">//[1,2],len=2,cap=3</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//[1 2] 2 3</span>
</code></pre></div>]]></content:encoded>
      <enclosure url="http://cdn.cjhe.top/blog/slice-1.png" type="image/png"/>
    </item>
    <item>
      <title>å­—ç¬¦ä¸²</title>
      <link>http://blog.cjhe.top/go-language/base/string.html</link>
      <guid>http://blog.cjhe.top/go-language/base/string.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">å­—ç¬¦ä¸²</source>
      <description>å£°æ˜ å…³é”®å­—å®šä¹‰ï¼š string é›¶å€¼ï¼š &amp;quot;&amp;quot; æ“ä½œ å­—ç¬¦ä¸²æ”¯æŒä¸€äº›ç®€å•çš„è¿ç®—æˆ–æ“ä½œï¼Œå¦‚ä¸‹ï¼š æ¯”è¾ƒ æ”¯æŒå„ç§æ¯”è¾ƒå…³ç³»è¿ç®—ç¬¦: ==ã€!=ã€&amp;gt;=ã€&amp;lt;=ã€&amp;gt;ã€&amp;lt; éå† æç¤º Goè¯­è¨€æ”¯æŒUTF-8æ ¼å¼ç¼–ç ï¼Œå› æ­¤å­—ç¬¦ä¸²ä¸­å­—ç¬¦å¯ä»¥æ˜¯ASCIIå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ˜¯Unicodeå­—ç¬¦ï¼Œå…¶ä¸­ï¼š byteç±»å‹æ¥è¡¨ç¤ºASCIIå­—ç¬¦ runeç±»å‹æ¥è¡¨ç¤ºUnicodeå­—ç¬¦ byt...</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Sun, 23 Jan 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<h2>å£°æ˜</h2>
<p><strong>å…³é”®å­—å®šä¹‰ï¼š</strong> string</p>
<p><strong>é›¶å€¼ï¼š</strong> ""</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> str <span class="token builtin">string</span>
</code></pre></div><h2>æ“ä½œ</h2>
<p>å­—ç¬¦ä¸²æ”¯æŒä¸€äº›ç®€å•çš„è¿ç®—æˆ–æ“ä½œï¼Œå¦‚ä¸‹ï¼š</p>
<p>|  æ“ä½œ  |      å«ä¹‰      |     ç¤ºä¾‹      |   ç»“æœ   |
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>Goè¯­è¨€æ¨èåšå®¢</title>
      <link>http://blog.cjhe.top/go-language/recommend/blog.html</link>
      <guid>http://blog.cjhe.top/go-language/recommend/blog.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Goè¯­è¨€æ¨èåšå®¢</source>
      <description>æç¤º æ”¶é›†çš„ä¸€äº›å…³äºGoè¯­è¨€çš„åšå®¢æ–‡ç« ï¼Œå‰è¡Œä¸å†è¿·èŒ«</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Sat, 04 Mar 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>æ”¶é›†çš„ä¸€äº›å…³äºGoè¯­è¨€çš„åšå®¢æ–‡ç« ï¼Œå‰è¡Œä¸å†è¿·èŒ«</p>
</div>
<!-- more -->
<h2>Goç¤¾åŒº</h2>
<p>Goè¯­è¨€å®˜æ–¹ç½‘ç«™<a href="https://golang.google.cn/" target="_blank" rel="noopener noreferrer">Goå®˜æ–¹</a></p>
<p>GoCNç¤¾åŒºä¼šåˆ†äº«ä¸€äº›æ–‡ç« å’Œæ‹›è˜<a href="https://gocn.vip/" target="_blank" rel="noopener noreferrer">GoCNç¤¾åŒº</a></p>
<p>Goè¯­è¨€ä¸­æ–‡ç½‘åˆ†äº«ä¸€äº›æ–‡ç« <a href="https://studygolang.com/" target="_blank" rel="noopener noreferrer">Goè¯­è¨€ä¸­æ–‡ç½‘</a></p>
<p>Goå¤œè¯»ä¼šå®šæœŸçš„ç»„ç»‡é˜…è¯»Goé¡¹ç›®æºç <a href="https://talkgo.org/" target="_blank" rel="noopener noreferrer">Goå¤œè¯»</a></p>
<p>Goçš„ä¸€äº›ä¹¦ç±<a href="https://topgoer.cn/" target="_blank" rel="noopener noreferrer">åœ°é¼ æ–‡æ¡£</a></p>
<p>è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒºGoæ•™ç¨‹<a href="https://cloud.tencent.com/developer/doc/1101" target="_blank" rel="noopener noreferrer">è…¾è®¯äº‘</a></p>
<p>Go Blogä¸­æ–‡ç¿»è¯‘<a href="https://learnku.com/docs/go-blog" target="_blank" rel="noopener noreferrer"></a></p>
<p>learnku<a href="https://learnku.com/" target="_blank" rel="noopener noreferrer"></a></p>
<h2>Goè¯­è¨€è§„èŒƒ</h2>
<p><a href="https://github.com/xxjwxc/uber_go_guide_cn" target="_blank" rel="noopener noreferrer">Uberå…¬å¸Goè¯­è¨€ç¼–ç è§„èŒƒ</a></p>
<p><a href="https://github.com/golang/go/wiki/CodeReviewComments" target="_blank" rel="noopener noreferrer">Goä»£ç è¯„å®¡å¸¸è§é”™è¯¯æ¸…å•</a></p>
<p><a href="https://rakyll.org/style-packages/" target="_blank" rel="noopener noreferrer">GoåŒ…è§„èŒƒ</a></p>
<p>ç¨€åœŸæ˜è¿›-å¦‚ä½•å†™å‡ºä¼˜é›…çš„Golangä»£ç <a href="https://juejin.cn/post/6844903976509390856" target="_blank" rel="noopener noreferrer"></a></p>
<p>ç¨€åœŸæ˜è¿›-Goè¯­è¨€å®è·µï¼šç¼–å†™å¯ç»´æŠ¤çš„ç¨‹åºçš„å»ºè®®<a href="https://juejin.cn/post/6844904035611328520" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goå®˜æ–¹ä»£ç å®¡æŸ¥<a href="https://github.com/golang/go/wiki/CodeReviewComments" target="_blank" rel="noopener noreferrer"></a></p>
<h2>Goåšå®¢</h2>
<p>threedots<a href="https://threedots.tech/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Dave Cheney<a href="https://dave.cheney.net/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Goæ•°æ®ç»“æ„<a href="https://www.interviewcake.com/data-structures-reference" target="_blank" rel="noopener noreferrer">data-structures-reference</a></p>
<p>ç…é±¼ï¼Œæ–‡ç« è´¨é‡å¾ˆé«˜<a href="https://eddycjy.com/" target="_blank" rel="noopener noreferrer">eddycjy</a></p>
<p>å³°äº‘å°±å¥¹äº†ï¼Œä¸“æ³¨Goã€Kubernetesã€NoSQLã€Istio<a href="https://xiaorui.cc/" target="_blank" rel="noopener noreferrer"></a></p>
<p>é¸Ÿçª<a href="https://colobu.com/" target="_blank" rel="noopener noreferrer"></a></p>
<p>EricZhouï¼Œæœ‰ç³»åˆ—çš„Goæ–‡ç« <a href="https://mojotv.cn/" target="_blank" rel="noopener noreferrer"></a></p>
<p>å‚…å°é»‘<a href="https://fuxiaohei.me/" target="_blank" rel="noopener noreferrer"></a></p>
<p>polarisxu<a href="https://polarisxu.studygolang.com/" target="_blank" rel="noopener noreferrer"></a></p>
<p>mohuishou<a href="https://lailin.xyz/" target="_blank" rel="noopener noreferrer"></a></p>
<p>ä¸€æ”¯äºº<a href="https://yizhi.ren/" target="_blank" rel="noopener noreferrer"></a></p>
<p>å¯æ±—å­¦é™¢<a href="https://blog.khanacademy.org/engineering/" target="_blank" rel="noopener noreferrer"></a></p>
<p>Mark<a href="https://www.integralist.co.uk/" target="_blank" rel="noopener noreferrer"></a></p>
<p>qcrao<a href="https://qcrao.com/" target="_blank" rel="noopener noreferrer"></a></p>
<p>å†°éœœä¹‹åœ°<a href="https://halfrost.com/" target="_blank" rel="noopener noreferrer"></a></p>
<p>chai2010<a href="https://chai2010.cn/" target="_blank" rel="noopener noreferrer"></a></p>
<h2>Goç»ƒä¹ </h2>
<p>Goçš„ä¸€äº›ç»ƒä¹ é¡¹ç›®<a href="https://gophercises.com/" target="_blank" rel="noopener noreferrer">gophercises</a></p>
<p>Goçš„ç¤ºä¾‹ï¼Œæœ‰ä¸Šåƒä¸ªç¤ºä¾‹<a href="https://golangexample.com/" target="_blank" rel="noopener noreferrer">golangexample</a></p>
<p>Goè¯­è¨€ä¸€äº›ç¤ºä¾‹<a href="https://gobyexample.com/" target="_blank" rel="noopener noreferrer">gobyexample</a></p>
<p>Go Webå¼€å‘ç¤ºä¾‹<a href="https://gowebexamples.com/" target="_blank" rel="noopener noreferrer">gowebexamples</a></p>
<p>ReposHubç½‘ç«™çš„Goç»ƒä¹ <a href="https://reposhub.com/go" target="_blank" rel="noopener noreferrer"></a></p>
<p>è‹±æ–‡çš„Goç»ƒä¹ <a href="https://www.golangprograms.com/" target="_blank" rel="noopener noreferrer"></a></p>
<h2>Goé¡¹ç›®è„šæ‰‹æ¶</h2>
<p>eagleå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨å‡ ä¸ªå°æ—¶å†…æ­å»ºåº”ç”¨ï¼ŒåŸºäºeagle-layoutæ¨¡ç‰ˆç”Ÿæˆä¸€ä¸ªåŒ…å«ï¼šCLIã€Configã€æ—¥å¿—ã€ORMã€ç¼“å­˜ç­‰çš„é¡¹ç›®<a href="https://github.com/go-eagle/eagle" target="_blank" rel="noopener noreferrer">eagle</a></p>
<p>nunuä¹Ÿæ˜¯ä¸€ä¸ªåŸºäºæ¨¡ç‰ˆç”Ÿæˆé¡¹ç›®çš„å·¥å…·ï¼Œé›†æˆäº†ä¸»æµçš„æ¡†æ¶<a href="https://github.com/go-nunu/nunu" target="_blank" rel="noopener noreferrer">nunu</a></p>
<p>spongeåŸºäºé¡µé¢æ–¹å¼ç”Ÿæˆé¡¹ç›®<a href="https://github.com/zhufuyi/sponge" target="_blank" rel="noopener noreferrer">sponge</a></p>
<h2>çŸ¥è¯†å›¾è°±</h2>
<p>processon<a href="https://www.processon.com/view/link/5a9ba4c8e4b0a9d22eb3bdf0#map" target="_blank" rel="noopener noreferrer"></a></p>
<h2>èµ„æ–™æ”¶é›†</h2>
<p>ç®€ä¹¦<a href="https://www.jianshu.com/p/9895e6434819" target="_blank" rel="noopener noreferrer"></a></p>
<p>è‹±æ–‡Goåšå®¢æ”¶é›†<a href="https://draft.dev/learn/golang-blogs" target="_blank" rel="noopener noreferrer"></a></p>
]]></content:encoded>
    </item>
    <item>
      <title>Goè¯­è¨€æ¨èå·¥å…·</title>
      <link>http://blog.cjhe.top/go-language/recommend/tool.html</link>
      <guid>http://blog.cjhe.top/go-language/recommend/tool.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Goè¯­è¨€æ¨èå·¥å…·</source>
      <description>æç¤º å¥½çš„å·¥å…·å°†è§£æ”¾æˆ‘ä»¬çš„ç”Ÿäº§åŠ›ï¼</description>
      <category>Goè¯­è¨€</category>
      <pubDate>Thu, 08 Sep 2022 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å¥½çš„å·¥å…·å°†è§£æ”¾æˆ‘ä»¬çš„ç”Ÿäº§åŠ›ï¼</p>
</div>
<!-- more -->
<h2>å·¥å…·</h2>
<p>|                             å·¥å…·                             |                             åŠŸèƒ½                             |
| :</p>
]]></content:encoded>
    </item>
    <item>
      <title>Goå®‰å…¨æŒ‡å—</title>
      <link>http://blog.cjhe.top/go-language/reprint/tencent-secguide.html</link>
      <guid>http://blog.cjhe.top/go-language/reprint/tencent-secguide.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Goå®‰å…¨æŒ‡å—</source>
      <description>ã€è½¬ã€‘åŸæ–‡é“¾æ¥</description>
      <category>Goè¯­è¨€</category>
      <category>è½¬è½½</category>
      <pubDate>Fri, 03 Mar 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ã€è½¬ã€‘<a href="https://github.com/Tencent/secguide" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a></p>
<!-- more -->

<p>Goå®‰å…¨æŒ‡å—</p>
<h2>é€šç”¨ç±»</h2>
<h3>1.1 å†…å­˜ç®¡ç†</h3>
<h4>1.1.1ã€å¿…é¡»ã€‘åˆ‡ç‰‡é•¿åº¦æ ¡éªŒ</h4>
<ul>
<li>åœ¨å¯¹sliceè¿›è¡Œæ“ä½œæ—¶ï¼Œå¿…é¡»åˆ¤æ–­é•¿åº¦æ˜¯å¦åˆæ³•ï¼Œé˜²æ­¢ç¨‹åºpanic</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// bad: æœªåˆ¤æ–­dataçš„é•¿åº¦ï¼Œå¯å¯¼è‡´ index out of range</span>
<span class="token keyword">func</span> <span class="token function">decode</span><span class="token punctuation">(</span>data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'F'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'U'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'Z'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'Z'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'E'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'R'</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Bad"</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token comment">// bad: slice bounds out of range</span>
<span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> slice <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>slice<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// good: ä½¿ç”¨dataå‰åº”åˆ¤æ–­é•¿åº¦æ˜¯å¦åˆæ³•</span>
<span class="token keyword">func</span> <span class="token function">decode</span><span class="token punctuation">(</span>data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">6</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'F'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'U'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'Z'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'Z'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'E'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'R'</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Good"</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h4>1.1.2ã€å¿…é¡»ã€‘nilæŒ‡é’ˆåˆ¤æ–­</h4>
<ul>
<li>è¿›è¡ŒæŒ‡é’ˆæ“ä½œæ—¶ï¼Œå¿…é¡»åˆ¤æ–­è¯¥æŒ‡é’ˆæ˜¯å¦ä¸ºnilï¼Œé˜²æ­¢ç¨‹åºpanicï¼Œå°¤å…¶åœ¨è¿›è¡Œç»“æ„ä½“Unmarshalæ—¶</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Packet <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	PackeyType    <span class="token builtin">uint8</span>
	PackeyVersion <span class="token builtin">uint8</span>
	Data          <span class="token operator">*</span>Data
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Data <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Stat <span class="token builtin">uint8</span>
	Len  <span class="token builtin">uint8</span>
	Buf  <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Packet<span class="token punctuation">)</span> <span class="token function">UnmarshalBinary</span><span class="token punctuation">(</span>b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> io<span class="token punctuation">.</span>EOF
	<span class="token punctuation">}</span>

	p<span class="token punctuation">.</span>PackeyType <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
	p<span class="token punctuation">.</span>PackeyVersion <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

	<span class="token comment">// è‹¥é•¿åº¦ç­‰äº2ï¼Œé‚£ä¹ˆä¸ä¼šnew Data</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token punctuation">{</span>
		p<span class="token punctuation">.</span>Data <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// bad: æœªåˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸ºnil</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	packet <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>Packet<span class="token punctuation">)</span>
	data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">:=</span> packet<span class="token punctuation">.</span><span class="token function">UnmarshalBinary</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Failed to unmarshal packet"</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Stat: %v\n"</span><span class="token punctuation">,</span> packet<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Stat<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// good: åˆ¤æ–­DataæŒ‡é’ˆæ˜¯å¦ä¸ºnil</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	packet <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>Packet<span class="token punctuation">)</span>
	data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">:=</span> packet<span class="token punctuation">.</span><span class="token function">UnmarshalBinary</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Failed to unmarshal packet"</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> packet<span class="token punctuation">.</span>Data <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Stat: %v\n"</span><span class="token punctuation">,</span> packet<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Stat<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4>1.1.3ã€å¿…é¡»ã€‘æ•´æ•°å®‰å…¨</h4>
<ul>
<li>
<p>åœ¨è¿›è¡Œæ•°å­—è¿ç®—æ“ä½œæ—¶ï¼Œéœ€è¦åšå¥½é•¿åº¦é™åˆ¶ï¼Œé˜²æ­¢å¤–éƒ¨è¾“å…¥è¿ç®—å¯¼è‡´å¼‚å¸¸ï¼š</p>
<ul>
<li>ç¡®ä¿æ— ç¬¦å·æ•´æ•°è¿ç®—æ—¶ä¸ä¼šåè½¬</li>
<li>ç¡®ä¿æœ‰ç¬¦å·æ•´æ•°è¿ç®—æ—¶ä¸ä¼šå‡ºç°æº¢å‡º</li>
<li>ç¡®ä¿æ•´å‹è½¬æ¢æ—¶ä¸ä¼šå‡ºç°æˆªæ–­é”™è¯¯</li>
<li>ç¡®ä¿æ•´å‹è½¬æ¢æ—¶ä¸ä¼šå‡ºç°ç¬¦å·é”™è¯¯</li>
</ul>
</li>
<li>
<p>ä»¥ä¸‹åœºæ™¯å¿…é¡»ä¸¥æ ¼è¿›è¡Œé•¿åº¦é™åˆ¶ï¼š</p>
<ul>
<li>ä½œä¸ºæ•°ç»„ç´¢å¼•</li>
<li>ä½œä¸ºå¯¹è±¡çš„é•¿åº¦æˆ–è€…å¤§å°</li>
<li>ä½œä¸ºæ•°ç»„çš„è¾¹ç•Œï¼ˆå¦‚ä½œä¸ºå¾ªç¯è®¡æ•°å™¨ï¼‰</li>
</ul>
</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// bad: æœªé™åˆ¶é•¿åº¦ï¼Œå¯¼è‡´æ•´æ•°æº¢å‡º</span>
<span class="token keyword">func</span> <span class="token function">overflow</span><span class="token punctuation">(</span>numControlByUser <span class="token builtin">int32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> numInt <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">0</span>
	numInt <span class="token operator">=</span> numControlByUser <span class="token operator">+</span> <span class="token number">1</span>
	<span class="token comment">// å¯¹é•¿åº¦é™åˆ¶ä¸å½“ï¼Œå¯¼è‡´æ•´æ•°æº¢å‡º</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> numInt<span class="token punctuation">)</span>
	<span class="token comment">// ä½¿ç”¨numIntï¼Œå¯èƒ½å¯¼è‡´å…¶ä»–é”™è¯¯</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">overflow</span><span class="token punctuation">(</span><span class="token number">2147483647</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// good</span>
<span class="token keyword">func</span> <span class="token function">overflow</span><span class="token punctuation">(</span>numControlByUser <span class="token builtin">int32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> numInt <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">0</span>
	numInt <span class="token operator">=</span> numControlByUser <span class="token operator">+</span> <span class="token number">1</span>
	<span class="token keyword">if</span> numInt <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"integer overflow"</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"integer ok"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">overflow</span><span class="token punctuation">(</span><span class="token number">2147483647</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4>1.1.4ã€å¿…é¡»ã€‘makeåˆ†é…é•¿åº¦éªŒè¯</h4>
<ul>
<li>åœ¨è¿›è¡Œmakeåˆ†é…å†…å­˜æ—¶ï¼Œéœ€è¦å¯¹å¤–éƒ¨å¯æ§çš„é•¿åº¦è¿›è¡Œæ ¡éªŒï¼Œé˜²æ­¢ç¨‹åºpanicã€‚</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// bad</span>
<span class="token keyword">func</span> <span class="token function">parse</span><span class="token punctuation">(</span>lenControlByUser <span class="token builtin">int</span><span class="token punctuation">,</span> data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	size <span class="token operator">:=</span> lenControlByUser
	<span class="token comment">// å¯¹å¤–éƒ¨ä¼ å…¥çš„sizeï¼Œè¿›è¡Œé•¿åº¦åˆ¤æ–­ä»¥å…å¯¼è‡´panic</span>
	buffer <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span>
	<span class="token function">copy</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// good</span>
<span class="token keyword">func</span> <span class="token function">parse</span><span class="token punctuation">(</span>lenControlByUser <span class="token builtin">int</span><span class="token punctuation">,</span> data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	size <span class="token operator">:=</span> lenControlByUser
	<span class="token comment">// é™åˆ¶å¤–éƒ¨å¯æ§çš„é•¿åº¦å¤§å°èŒƒå›´</span>
	<span class="token keyword">if</span> size <span class="token operator">&gt;</span> <span class="token number">64</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"value too large"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	buffer <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span>
	<span class="token function">copy</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h4>1.1.5ã€å¿…é¡»ã€‘ç¦æ­¢SetFinalizerå’ŒæŒ‡é’ˆå¾ªç¯å¼•ç”¨åŒæ—¶ä½¿ç”¨</h4>
<ul>
<li>å½“ä¸€ä¸ªå¯¹è±¡ä»è¢«GCé€‰ä¸­åˆ°ç§»é™¤å†…å­˜ä¹‹å‰ï¼Œruntime.SetFinalizer()éƒ½ä¸ä¼šæ‰§è¡Œï¼Œå³ä½¿ç¨‹åºæ­£å¸¸ç»“æŸæˆ–è€…å‘ç”Ÿé”™è¯¯ã€‚ç”±æŒ‡é’ˆæ„æˆçš„â€œå¾ªç¯å¼•ç”¨â€è™½ç„¶èƒ½è¢«GCæ­£ç¡®å¤„ç†ï¼Œä½†ç”±äºæ— æ³•ç¡®å®šFinalizerä¾èµ–é¡ºåºï¼Œä»è€Œæ— æ³•è°ƒç”¨runtime.SetFinalizer()ï¼Œå¯¼è‡´ç›®æ ‡å¯¹è±¡æ— æ³•å˜æˆå¯è¾¾çŠ¶æ€ï¼Œä»è€Œé€ æˆå†…å­˜æ— æ³•è¢«å›æ”¶ã€‚</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// bad</span>
<span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a<span class="token punctuation">,</span> b Data
	a<span class="token punctuation">.</span>o <span class="token operator">=</span> <span class="token operator">&amp;</span>b
	b<span class="token punctuation">.</span>o <span class="token operator">=</span> <span class="token operator">&amp;</span>a

	<span class="token comment">// æŒ‡é’ˆå¾ªç¯å¼•ç”¨ï¼ŒSetFinalizer()æ— æ³•æ­£å¸¸è°ƒç”¨</span>
	runtime<span class="token punctuation">.</span><span class="token function">SetFinalizer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>d <span class="token operator">*</span>Data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"a %p final.\n"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	runtime<span class="token punctuation">.</span><span class="token function">SetFinalizer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>b<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>d <span class="token operator">*</span>Data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"b %p final.\n"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4>1.1.6ã€å¿…é¡»ã€‘ç¦æ­¢é‡å¤é‡Šæ”¾channel</h4>
<ul>
<li>é‡å¤é‡Šæ”¾ä¸€èˆ¬å­˜åœ¨äºå¼‚å¸¸æµç¨‹åˆ¤æ–­ä¸­ï¼Œå¦‚æœæ¶æ„æ”»å‡»è€…æ„é€ å‡ºå¼‚å¸¸æ¡ä»¶ä½¿ç¨‹åºé‡å¤é‡Šæ”¾channelï¼Œåˆ™ä¼šè§¦å‘è¿è¡Œæ—¶panicï¼Œä»è€Œé€ æˆDoSæ”»å‡»ã€‚</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// bad</span>
<span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span>c <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
	err <span class="token operator">:=</span> <span class="token function">processBusiness</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		c <span class="token operator">&lt;-</span> <span class="token number">0</span>
		<span class="token function">close</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// é‡å¤é‡Šæ”¾channel</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	c <span class="token operator">&lt;-</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token comment">// good</span>
<span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span>c <span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// ä½¿ç”¨deferå»¶è¿Ÿå…³é—­channel</span>
	err <span class="token operator">:=</span> <span class="token function">processBusiness</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		c <span class="token operator">&lt;-</span> <span class="token number">0</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	c <span class="token operator">&lt;-</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><h4>1.1.7ã€å¿…é¡»ã€‘ç¡®ä¿æ¯ä¸ªåç¨‹éƒ½èƒ½é€€å‡º</h4>
<ul>
<li>å¯åŠ¨ä¸€ä¸ªåç¨‹å°±ä¼šåšä¸€ä¸ªå…¥æ ˆæ“ä½œï¼Œåœ¨ç³»ç»Ÿä¸é€€å‡ºçš„æƒ…å†µä¸‹ï¼Œåç¨‹ä¹Ÿæ²¡æœ‰è®¾ç½®é€€å‡ºæ¡ä»¶ï¼Œåˆ™ç›¸å½“äºåç¨‹å¤±å»äº†æ§åˆ¶ï¼Œå®ƒå ç”¨çš„èµ„æºæ— æ³•å›æ”¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// bad: åç¨‹æ²¡æœ‰è®¾ç½®é€€å‡ºæ¡ä»¶</span>
<span class="token keyword">func</span> <span class="token function">doWaiter</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> second <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>second<span class="token punctuation">)</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">" is ready!"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4>1.1.8ã€æ¨èã€‘ä¸ä½¿ç”¨unsafeåŒ…</h4>
<ul>
<li>ç”±äºunsafeåŒ…ç»•è¿‡äº† Golang çš„å†…å­˜å®‰å…¨åŸåˆ™ï¼Œä¸€èˆ¬æ¥è¯´ä½¿ç”¨è¯¥åº“æ˜¯ä¸å®‰å…¨çš„ï¼Œå¯å¯¼è‡´å†…å­˜ç ´åï¼Œå°½é‡é¿å…ä½¿ç”¨è¯¥åŒ…ã€‚è‹¥å¿…é¡»è¦ä½¿ç”¨unsafeæ“ä½œæŒ‡é’ˆï¼Œå¿…é¡»åšå¥½å®‰å…¨æ ¡éªŒã€‚</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// bad: é€šè¿‡unsafeæ“ä½œåŸå§‹æŒ‡é’ˆ</span>
<span class="token keyword">func</span> <span class="token function">unsafePointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	b <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
	foo <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token function">uintptr</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">uintptr</span><span class="token punctuation">(</span><span class="token number">0xfffffffe</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token operator">*</span>foo <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// [signal SIGSEGV: segmentation violation code=0x1 addr=0xc100068f55 pc=0x49142b]</span>

</code></pre></div><h4>1.1.9ã€æ¨èã€‘ä¸ä½¿ç”¨sliceä½œä¸ºå‡½æ•°å…¥å‚</h4>
<ul>
<li>sliceåœ¨ä½œä¸ºå‡½æ•°å…¥å‚æ—¶ï¼Œå‡½æ•°å†…å¯¹sliceçš„ä¿®æ”¹å¯èƒ½ä¼šå½±å“åŸå§‹æ•°æ®</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>  <span class="token comment">// bad</span>
  <span class="token comment">// sliceä½œä¸ºå‡½æ•°å…¥å‚æ—¶åŒ…å«åŸå§‹æ•°ç»„æŒ‡é’ˆ</span>
  <span class="token keyword">func</span> <span class="token function">modify</span><span class="token punctuation">(</span>array <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// å¯¹å…¥å‚sliceçš„å…ƒç´ ä¿®æ”¹ä¼šå½±å“åŸå§‹æ•°æ®</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      array <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
  
      <span class="token function">modify</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token comment">// outputï¼š[10 2 3 4 5]</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// good</span>
  <span class="token comment">// æ•°ç»„ä½œä¸ºå‡½æ•°å…¥å‚ï¼Œè€Œä¸æ˜¯slice</span>
  <span class="token keyword">func</span> <span class="token function">modify</span><span class="token punctuation">(</span>array <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä¼ å…¥æ•°ç»„ï¼Œæ³¨æ„æ•°ç»„ä¸sliceçš„åŒºåˆ«</span>
      array <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
  
      <span class="token function">modify</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
</code></pre></div><h3>1.2 æ–‡ä»¶æ“ä½œ</h3>
<h4>1.2.1ã€å¿…é¡»ã€‘ è·¯å¾„ç©¿è¶Šæ£€æŸ¥</h4>
<ul>
<li>åœ¨è¿›è¡Œæ–‡ä»¶æ“ä½œæ—¶ï¼Œå¦‚æœå¯¹å¤–éƒ¨ä¼ å…¥çš„æ–‡ä»¶åæœªåšé™åˆ¶ï¼Œå¯èƒ½å¯¼è‡´ä»»æ„æ–‡ä»¶è¯»å–æˆ–è€…ä»»æ„æ–‡ä»¶å†™å…¥ï¼Œä¸¥é‡å¯èƒ½å¯¼è‡´ä»£ç æ‰§è¡Œã€‚</li>
</ul>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// bad: ä»»æ„æ–‡ä»¶è¯»å–</span>
<span class="token keyword">func</span> <span class="token function">handler</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	path <span class="token operator">:=</span> r<span class="token punctuation">.</span>URL<span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"path"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

	<span class="token comment">// æœªè¿‡æ»¤æ–‡ä»¶è·¯å¾„ï¼Œå¯èƒ½å¯¼è‡´ä»»æ„æ–‡ä»¶è¯»å–</span>
	data<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
	w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

	<span class="token comment">// å¯¹å¤–éƒ¨ä¼ å…¥çš„æ–‡ä»¶åå˜é‡ï¼Œè¿˜éœ€è¦éªŒè¯æ˜¯å¦å­˜åœ¨../ç­‰è·¯å¾„ç©¿è¶Šçš„æ–‡ä»¶å</span>
	data<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>filepath<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">"/home/user/"</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">)</span>
	w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// bad: ä»»æ„æ–‡ä»¶å†™å…¥</span>
<span class="token keyword">func</span> <span class="token function">unzip</span><span class="token punctuation">(</span>f <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> zip<span class="token punctuation">.</span><span class="token function">OpenReader</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> f <span class="token operator">:=</span> <span class="token keyword">range</span> r<span class="token punctuation">.</span>File <span class="token punctuation">{</span>
		p<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> filepath<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
		<span class="token comment">// æœªéªŒè¯å‹ç¼©æ–‡ä»¶åï¼Œå¯èƒ½å¯¼è‡´../ç­‰è·¯å¾„ç©¿è¶Šï¼Œä»»æ„æ–‡ä»¶è·¯å¾„å†™å…¥</span>
		ioutil<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"present"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0640</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// good: æ£€æŸ¥å‹ç¼©çš„æ–‡ä»¶åæ˜¯å¦åŒ…å«..è·¯å¾„ç©¿è¶Šç‰¹å¾å­—ç¬¦ï¼Œé˜²æ­¢ä»»æ„å†™å…¥</span>
<span class="token keyword">func</span> <span class="token function">unzipGood</span><span class="token punctuation">(</span>f <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">,</span> err <span class="token operator">:=</span> zip<span class="token punctuation">.</span><span class="token function">OpenReader</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"read zip file fail"</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> f <span class="token operator">:=</span> <span class="token keyword">range</span> r<span class="token punctuation">.</span>File <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token operator">!</span>strings<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token string">".."</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			p<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> filepath<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
			ioutil<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"present"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0640</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><h4>1.2.2ã€å¿…é¡»ã€‘ æ–‡ä»¶è®¿é—®æƒé™</h4>
<ul>
<li>æ ¹æ®åˆ›å»ºæ–‡ä»¶çš„æ•æ„Ÿæ€§è®¾ç½®ä¸åŒçº§åˆ«çš„è®¿é—®æƒé™ï¼Œä»¥é˜²æ­¢æ•æ„Ÿæ•°æ®è¢«ä»»æ„æƒé™ç”¨æˆ·è¯»å–ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®æ–‡ä»¶æƒé™ä¸ºï¼š`-rw-r</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Goè¯­è¨€ç¼–ç è§„èŒƒ</title>
      <link>http://blog.cjhe.top/go-language/reprint/uber-guide.html</link>
      <guid>http://blog.cjhe.top/go-language/reprint/uber-guide.html</guid>
      <source url="http://blog.cjhe.top/rss.xml">Goè¯­è¨€ç¼–ç è§„èŒƒ</source>
      <description>ã€è½¬ã€‘åŸæ–‡é“¾æ¥</description>
      <category>Goè¯­è¨€</category>
      <category>è½¬è½½</category>
      <pubDate>Sat, 04 Mar 2023 00:00:00 GMT</pubDate>
      <content:encoded><![CDATA[<p>ã€è½¬ã€‘<a href="https://github.com/xxjwxc/uber_go_guide_cn" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a></p>
<!-- more -->
<p>Uber Go è¯­è¨€ç¼–ç è§„èŒƒ</p>
<p><a href="https://www.uber.com/" target="_blank" rel="noopener noreferrer">Uber</a> æ˜¯ä¸€å®¶ç¾å›½ç¡…è°·çš„ç§‘æŠ€å…¬å¸ï¼Œä¹Ÿæ˜¯ Go è¯­è¨€çš„æ—©æœŸ adopterã€‚å…¶å¼€æºäº†å¾ˆå¤š golang é¡¹ç›®ï¼Œè¯¸å¦‚è¢« Gopher åœˆç†ŸçŸ¥çš„ <a href="https://github.com/uber-go/zap" target="_blank" rel="noopener noreferrer">zap</a>ã€<a href="https://github.com/jaegertracing/jaeger" target="_blank" rel="noopener noreferrer">jaeger</a> ç­‰ã€‚2018 å¹´å¹´æœ« Uber å°†å†…éƒ¨çš„ <a href="https://github.com/uber-go/guide" target="_blank" rel="noopener noreferrer">Go é£æ ¼è§„èŒƒ</a> å¼€æºåˆ° GitHubï¼Œç»è¿‡ä¸€å¹´çš„ç§¯ç´¯å’Œæ›´æ–°ï¼Œè¯¥è§„èŒƒå·²ç»åˆå…·è§„æ¨¡ï¼Œå¹¶å—åˆ°å¹¿å¤§ Gopher çš„å…³æ³¨ã€‚æœ¬æ–‡æ˜¯è¯¥è§„èŒƒçš„ä¸­æ–‡ç‰ˆæœ¬ã€‚æœ¬ç‰ˆæœ¬ä¼šæ ¹æ®åŸç‰ˆå®æ—¶æ›´æ–°ã€‚</p>
<h2>ç‰ˆæœ¬</h2>
<ul>
<li>å½“å‰æ›´æ–°ç‰ˆæœ¬ï¼š2022-10-19 ç‰ˆæœ¬åœ°å€ï¼š<a href="https://github.com/uber-go/guide/commit/4478e672bddf9d4f7ca4a561ab0779e08e469577" target="_blank" rel="noopener noreferrer">commit:#158</a></li>
<li>å¦‚æœæ‚¨å‘ç°ä»»ä½•æ›´æ–°ã€é—®é¢˜æˆ–æ”¹è¿›ï¼Œè¯·éšæ—¶ fork å’Œ PR</li>
<li>Please feel free to fork and PR if you find any updates, issues or improvement.</li>
</ul>
<h2>ç›®å½•</h2>
<ul>
<li><a href="#%E7%89%88%E6%9C%AC">ç‰ˆæœ¬</a></li>
<li><a href="#%E7%9B%AE%E5%BD%95">ç›®å½•</a></li>
<li><a href="#%E4%BB%8B%E7%BB%8D">ä»‹ç»</a></li>
<li><a href="#%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%99">æŒ‡å¯¼åŸåˆ™</a>
<ul>
<li><a href="#%E6%8C%87%E5%90%91-interface-%E7%9A%84%E6%8C%87%E9%92%88">æŒ‡å‘ interface çš„æŒ‡é’ˆ</a></li>
<li><a href="#interface-%E5%90%88%E7%90%86%E6%80%A7%E9%AA%8C%E8%AF%81">Interface åˆç†æ€§éªŒè¯</a></li>
<li><a href="#%E6%8E%A5%E6%94%B6%E5%99%A8-receiver-%E4%B8%8E%E6%8E%A5%E5%8F%A3">æ¥æ”¶å™¨ (receiver) ä¸æ¥å£</a></li>
<li><a href="#%E9%9B%B6%E5%80%BC-mutex-%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84">é›¶å€¼ Mutex æ˜¯æœ‰æ•ˆçš„</a></li>
<li><a href="#%E5%9C%A8%E8%BE%B9%E7%95%8C%E5%A4%84%E6%8B%B7%E8%B4%9D-slices-%E5%92%8C-maps">åœ¨è¾¹ç•Œå¤„æ‹·è´ Slices å’Œ Maps</a>
<ul>
<li><a href="#%E6%8E%A5%E6%94%B6-slices-%E5%92%8C-maps">æ¥æ”¶ Slices å’Œ Maps</a></li>
<li><a href="#%E8%BF%94%E5%9B%9E-slices-%E6%88%96-maps">è¿”å› slices æˆ– maps</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8-defer-%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90">ä½¿ç”¨ defer é‡Šæ”¾èµ„æº</a></li>
<li><a href="#channel-%E7%9A%84-size-%E8%A6%81%E4%B9%88%E6%98%AF-1%E8%A6%81%E4%B9%88%E6%98%AF%E6%97%A0%E7%BC%93%E5%86%B2%E7%9A%84">Channel çš„ size è¦ä¹ˆæ˜¯ 1ï¼Œè¦ä¹ˆæ˜¯æ— ç¼“å†²çš„</a></li>
<li><a href="#%E6%9E%9A%E4%B8%BE%E4%BB%8E-1-%E5%BC%80%E5%A7%8B">æšä¸¾ä» 1 å¼€å§‹</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-time-%E5%A4%84%E7%90%86%E6%97%B6%E9%97%B4">ä½¿ç”¨ time å¤„ç†æ—¶é—´</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8-timetime-%E8%A1%A8%E8%BE%BE%E7%9E%AC%E6%97%B6%E6%97%B6%E9%97%B4">ä½¿ç”¨ <code>time.Time</code> è¡¨è¾¾ç¬æ—¶æ—¶é—´</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-timeduration-%E8%A1%A8%E8%BE%BE%E6%97%B6%E9%97%B4%E6%AE%B5">ä½¿ç”¨ <code>time.Duration</code> è¡¨è¾¾æ—¶é—´æ®µ</a></li>
<li><a href="#%E5%AF%B9%E5%A4%96%E9%83%A8%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8-timetime-%E5%92%8C-timeduration">å¯¹å¤–éƒ¨ç³»ç»Ÿä½¿ç”¨ <code>time.Time</code> å’Œ <code>time.Duration</code></a></li>
</ul>
</li>
<li><a href="#errors">Errors</a>
<ul>
<li><a href="#%E9%94%99%E8%AF%AF%E7%B1%BB%E5%9E%8B">é”™è¯¯ç±»å‹</a></li>
<li><a href="#%E9%94%99%E8%AF%AF%E5%8C%85%E8%A3%85">é”™è¯¯åŒ…è£…</a></li>
<li><a href="#%E9%94%99%E8%AF%AF%E5%91%BD%E5%90%8D">é”™è¯¯å‘½å</a></li>
</ul>
</li>
<li><a href="#%E5%A4%84%E7%90%86%E6%96%AD%E8%A8%80%E5%A4%B1%E8%B4%A5">å¤„ç†æ–­è¨€å¤±è´¥</a></li>
<li><a href="#%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8-panic">ä¸è¦ä½¿ç”¨ panic</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-gouberorgatomic">ä½¿ç”¨ go.uber.org/atomic</a></li>
<li><a href="#%E9%81%BF%E5%85%8D%E5%8F%AF%E5%8F%98%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F">é¿å…å¯å˜å…¨å±€å˜é‡</a></li>
<li><a href="#%E9%81%BF%E5%85%8D%E5%9C%A8%E5%85%AC%E5%85%B1%E7%BB%93%E6%9E%84%E4%B8%AD%E5%B5%8C%E5%85%A5%E7%B1%BB%E5%9E%8B">é¿å…åœ¨å…¬å…±ç»“æ„ä¸­åµŒå…¥ç±»å‹</a></li>
<li><a href="#%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E5%86%85%E7%BD%AE%E5%90%8D%E7%A7%B0">é¿å…ä½¿ç”¨å†…ç½®åç§°</a></li>
<li><a href="#%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8-init">é¿å…ä½¿ç”¨ <code>init()</code></a></li>
<li><a href="#%E8%BF%BD%E5%8A%A0%E6%97%B6%E4%BC%98%E5%85%88%E6%8C%87%E5%AE%9A%E5%88%87%E7%89%87%E5%AE%B9%E9%87%8F">è¿½åŠ æ—¶ä¼˜å…ˆæŒ‡å®šåˆ‡ç‰‡å®¹é‡</a></li>
<li><a href="#%E4%B8%BB%E5%87%BD%E6%95%B0%E9%80%80%E5%87%BA%E6%96%B9%E5%BC%8F-exit">ä¸»å‡½æ•°é€€å‡ºæ–¹å¼ (Exit)</a>
<ul>
<li><a href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E9%80%80%E5%87%BA">ä¸€æ¬¡æ€§é€€å‡º</a></li>
</ul>
</li>
<li><a href="#%E5%9C%A8%E5%BA%8F%E5%88%97%E5%8C%96%E7%BB%93%E6%9E%84%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%AD%97%E6%AE%B5%E6%A0%87%E8%AE%B0">åœ¨åºåˆ—åŒ–ç»“æ„ä¸­ä½¿ç”¨å­—æ®µæ ‡è®°</a></li>
<li><a href="#%E4%B8%8D%E8%A6%81%E4%B8%80%E5%8A%B3%E6%B0%B8%E9%80%B8%E5%9C%B0%E4%BD%BF%E7%94%A8-goroutine">ä¸è¦ä¸€åŠ³æ°¸é€¸åœ°ä½¿ç”¨ goroutine</a>
<ul>
<li><a href="#%E7%AD%89%E5%BE%85-goroutines-%E9%80%80%E5%87%BA">ç­‰å¾… goroutines é€€å‡º</a></li>
<li><a href="#%E4%B8%8D%E8%A6%81%E5%9C%A8-init-%E4%BD%BF%E7%94%A8-goroutines">ä¸è¦åœ¨ <code>init()</code> ä½¿ç”¨ goroutines</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%80%A7%E8%83%BD">æ€§èƒ½</a>
<ul>
<li><a href="#%E4%BC%98%E5%85%88%E4%BD%BF%E7%94%A8-strconv-%E8%80%8C%E4%B8%8D%E6%98%AF-fmt">ä¼˜å…ˆä½¿ç”¨ strconv è€Œä¸æ˜¯ fmt</a></li>
<li><a href="#%E9%81%BF%E5%85%8D%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%B0%E5%AD%97%E8%8A%82%E7%9A%84%E8%BD%AC%E6%8D%A2">é¿å…å­—ç¬¦ä¸²åˆ°å­—èŠ‚çš„è½¬æ¢</a></li>
<li><a href="#%E6%8C%87%E5%AE%9A%E5%AE%B9%E5%99%A8%E5%AE%B9%E9%87%8F">æŒ‡å®šå®¹å™¨å®¹é‡</a>
<ul>
<li><a href="#%E6%8C%87%E5%AE%9Amap%E5%AE%B9%E9%87%8F%E6%8F%90%E7%A4%BA">æŒ‡å®šMapå®¹é‡æç¤º</a></li>
<li><a href="#%E6%8C%87%E5%AE%9A%E5%88%87%E7%89%87%E5%AE%B9%E9%87%8F">æŒ‡å®šåˆ‡ç‰‡å®¹é‡</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E8%A7%84%E8%8C%83">è§„èŒƒ</a>
<ul>
<li><a href="#%E9%81%BF%E5%85%8D%E8%BF%87%E9%95%BF%E7%9A%84%E8%A1%8C">é¿å…è¿‡é•¿çš„è¡Œ</a></li>
<li><a href="#%E4%B8%80%E8%87%B4%E6%80%A7">ä¸€è‡´æ€§</a></li>
<li><a href="#%E7%9B%B8%E4%BC%BC%E7%9A%84%E5%A3%B0%E6%98%8E%E6%94%BE%E5%9C%A8%E4%B8%80%E7%BB%84">ç›¸ä¼¼çš„å£°æ˜æ”¾åœ¨ä¸€ç»„</a></li>
<li><a href="#import-%E5%88%86%E7%BB%84">import åˆ†ç»„</a></li>
<li><a href="#%E5%8C%85%E5%90%8D">åŒ…å</a></li>
<li><a href="#%E5%87%BD%E6%95%B0%E5%90%8D">å‡½æ•°å</a></li>
<li><a href="#%E5%AF%BC%E5%85%A5%E5%88%AB%E5%90%8D">å¯¼å…¥åˆ«å</a></li>
<li><a href="#%E5%87%BD%E6%95%B0%E5%88%86%E7%BB%84%E4%B8%8E%E9%A1%BA%E5%BA%8F">å‡½æ•°åˆ†ç»„ä¸é¡ºåº</a></li>
<li><a href="#%E5%87%8F%E5%B0%91%E5%B5%8C%E5%A5%97">å‡å°‘åµŒå¥—</a></li>
<li><a href="#%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84-else">ä¸å¿…è¦çš„ else</a></li>
<li><a href="#%E9%A1%B6%E5%B1%82%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E">é¡¶å±‚å˜é‡å£°æ˜</a></li>
<li><a href="#%E5%AF%B9%E4%BA%8E%E6%9C%AA%E5%AF%BC%E5%87%BA%E7%9A%84%E9%A1%B6%E5%B1%82%E5%B8%B8%E9%87%8F%E5%92%8C%E5%8F%98%E9%87%8F%E4%BD%BF%E7%94%A8_%E4%BD%9C%E4%B8%BA%E5%89%8D%E7%BC%80">å¯¹äºæœªå¯¼å‡ºçš„é¡¶å±‚å¸¸é‡å’Œå˜é‡ï¼Œä½¿ç”¨_ä½œä¸ºå‰ç¼€</a></li>
<li><a href="#%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%AD%E7%9A%84%E5%B5%8C%E5%85%A5">ç»“æ„ä½“ä¸­çš„åµŒå…¥</a></li>
<li><a href="#%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E">æœ¬åœ°å˜é‡å£°æ˜</a></li>
<li><a href="#nil-%E6%98%AF%E4%B8%80%E4%B8%AA%E6%9C%89%E6%95%88%E7%9A%84-slice">nil æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ slice</a></li>
<li><a href="#%E7%BC%A9%E5%B0%8F%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F">ç¼©å°å˜é‡ä½œç”¨åŸŸ</a></li>
<li><a href="#%E9%81%BF%E5%85%8D%E5%8F%82%E6%95%B0%E8%AF%AD%E4%B9%89%E4%B8%8D%E6%98%8E%E7%A1%AE-avoid-naked-parameters">é¿å…å‚æ•°è¯­ä¹‰ä¸æ˜ç¡® (Avoid Naked Parameters)</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%A7%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AD%97%E9%9D%A2%E5%80%BC%E9%81%BF%E5%85%8D%E8%BD%AC%E4%B9%89">ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²å­—é¢å€¼ï¼Œé¿å…è½¬ä¹‰</a></li>
<li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E7%BB%93%E6%9E%84%E4%BD%93">åˆå§‹åŒ–ç»“æ„ä½“</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%AD%97%E6%AE%B5%E5%90%8D%E5%88%9D%E5%A7%8B%E5%8C%96%E7%BB%93%E6%9E%84">ä½¿ç”¨å­—æ®µååˆå§‹åŒ–ç»“æ„</a></li>
<li><a href="#%E7%9C%81%E7%95%A5%E7%BB%93%E6%9E%84%E4%B8%AD%E7%9A%84%E9%9B%B6%E5%80%BC%E5%AD%97%E6%AE%B5">çœç•¥ç»“æ„ä¸­çš„é›¶å€¼å­—æ®µ</a></li>
<li><a href="#%E5%AF%B9%E9%9B%B6%E5%80%BC%E7%BB%93%E6%9E%84%E4%BD%BF%E7%94%A8-var">å¯¹é›¶å€¼ç»“æ„ä½¿ç”¨ <code>var</code></a></li>
<li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96-struct-%E5%BC%95%E7%94%A8">åˆå§‹åŒ– Struct å¼•ç”¨</a></li>
</ul>
</li>
<li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96-maps">åˆå§‹åŒ– Maps</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2-string-format">å­—ç¬¦ä¸² string format</a></li>
<li><a href="#%E5%91%BD%E5%90%8D-printf-%E6%A0%B7%E5%BC%8F%E7%9A%84%E5%87%BD%E6%95%B0">å‘½å Printf æ ·å¼çš„å‡½æ•°</a></li>
</ul>
</li>
<li><a href="#%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%BC%8F">ç¼–ç¨‹æ¨¡å¼</a>
<ul>
<li><a href="#%E8%A1%A8%E9%A9%B1%E5%8A%A8%E6%B5%8B%E8%AF%95">è¡¨é©±åŠ¨æµ‹è¯•</a></li>
<li><a href="#%E5%8A%9F%E8%83%BD%E9%80%89%E9%A1%B9">åŠŸèƒ½é€‰é¡¹</a></li>
</ul>
</li>
<li><a href="#linting">Linting</a>
<ul>
<li><a href="#lint-runners">Lint Runners</a></li>
</ul>
</li>
<li><a href="#stargazers-over-time">Stargazers over time</a></li>
</ul>
<h2>ä»‹ç»</h2>
<p>æ ·å¼ (style) æ˜¯æ”¯é…æˆ‘ä»¬ä»£ç çš„æƒ¯ä¾‹ã€‚æœ¯è¯­<code>æ ·å¼</code>æœ‰ç‚¹ç”¨è¯ä¸å½“ï¼Œå› ä¸ºè¿™äº›çº¦å®šæ¶µç›–çš„èŒƒå›´ä¸é™äºç”± gofmt æ›¿æˆ‘ä»¬å¤„ç†çš„æºæ–‡ä»¶æ ¼å¼ã€‚</p>
<p>æœ¬æŒ‡å—çš„ç›®çš„æ˜¯é€šè¿‡è¯¦ç»†æè¿°åœ¨ Uber ç¼–å†™ Go ä»£ç çš„æ³¨æ„äº‹é¡¹æ¥ç®¡ç†è¿™ç§å¤æ‚æ€§ã€‚è¿™äº›è§„åˆ™çš„å­˜åœ¨æ˜¯ä¸ºäº†ä½¿ä»£ç åº“æ˜“äºç®¡ç†ï¼ŒåŒæ—¶ä»ç„¶å…è®¸å·¥ç¨‹å¸ˆæ›´æœ‰æ•ˆåœ°ä½¿ç”¨ Go è¯­è¨€åŠŸèƒ½ã€‚</p>
<p>è¯¥æŒ‡å—æœ€åˆç”± <a href="https://github.com/prashantv" target="_blank" rel="noopener noreferrer">Prashant Varanasi</a> å’Œ <a href="https://github.com/nomis52" target="_blank" rel="noopener noreferrer">Simon Newton</a> ç¼–å†™ï¼Œç›®çš„æ˜¯ä½¿ä¸€äº›åŒäº‹èƒ½å¿«é€Ÿä½¿ç”¨ Goã€‚å¤šå¹´æ¥ï¼Œè¯¥æŒ‡å—å·²æ ¹æ®å…¶ä»–äººçš„åé¦ˆè¿›è¡Œäº†ä¿®æ”¹ã€‚</p>
<p>æœ¬æ–‡æ¡£è®°å½•äº†æˆ‘ä»¬åœ¨ Uber éµå¾ªçš„ Go ä»£ç ä¸­çš„æƒ¯ç”¨çº¦å®šã€‚å…¶ä¸­è®¸å¤šæ˜¯ Go çš„é€šç”¨å‡†åˆ™ï¼Œè€Œå…¶ä»–æ‰©å±•å‡†åˆ™ä¾èµ–äºä¸‹é¢å¤–éƒ¨çš„æŒ‡å—ï¼š</p>
<ol>
<li><a href="https://golang.org/doc/effective_go.html" target="_blank" rel="noopener noreferrer">Effective Go</a></li>
<li><a href="https://github.com/golang/go/wiki/CommonMistakes" target="_blank" rel="noopener noreferrer">Go Common Mistakes</a></li>
<li><a href="https://github.com/golang/go/wiki/CodeReviewComments" target="_blank" rel="noopener noreferrer">Go Code Review Comments</a></li>
</ol>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿ä»£ç ç¤ºä¾‹èƒ½å¤Ÿå‡†ç¡®åœ°ç”¨äºGoçš„ä¸¤ä¸ªå‘å¸ƒç‰ˆæœ¬ <a href="https://go.dev/doc/devel/release" target="_blank" rel="noopener noreferrer">releases</a>.</p>
<p>æ‰€æœ‰ä»£ç éƒ½åº”è¯¥é€šè¿‡<code>golint</code>å’Œ<code>go vet</code>çš„æ£€æŸ¥å¹¶æ— é”™è¯¯ã€‚æˆ‘ä»¬å»ºè®®æ‚¨å°†ç¼–è¾‘å™¨è®¾ç½®ä¸ºï¼š</p>
<ul>
<li>ä¿å­˜æ—¶è¿è¡Œ <code>goimports</code></li>
<li>è¿è¡Œ <code>golint</code> å’Œ <code>go vet</code> æ£€æŸ¥é”™è¯¯</li>
</ul>
<p>æ‚¨å¯ä»¥åœ¨ä»¥ä¸‹ Go ç¼–è¾‘å™¨å·¥å…·æ”¯æŒé¡µé¢ä¸­æ‰¾åˆ°æ›´ä¸ºè¯¦ç»†çš„ä¿¡æ¯ï¼š
<a href="https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins</a></p>
<h2>æŒ‡å¯¼åŸåˆ™</h2>
<h3>æŒ‡å‘ interface çš„æŒ‡é’ˆ</h3>
<p>æ‚¨å‡ ä¹ä¸éœ€è¦æŒ‡å‘æ¥å£ç±»å‹çš„æŒ‡é’ˆã€‚æ‚¨åº”è¯¥å°†æ¥å£ä½œä¸ºå€¼è¿›è¡Œä¼ é€’ï¼Œåœ¨è¿™æ ·çš„ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œå®è´¨ä¸Šä¼ é€’çš„åº•å±‚æ•°æ®ä»ç„¶å¯ä»¥æ˜¯æŒ‡é’ˆã€‚</p>
<p>æ¥å£å®è´¨ä¸Šåœ¨åº•å±‚ç”¨ä¸¤ä¸ªå­—æ®µè¡¨ç¤ºï¼š</p>
<ol>
<li>ä¸€ä¸ªæŒ‡å‘æŸäº›ç‰¹å®šç±»å‹ä¿¡æ¯çš„æŒ‡é’ˆã€‚æ‚¨å¯ä»¥å°†å…¶è§†ä¸º"type"ã€‚</li>
<li>æ•°æ®æŒ‡é’ˆã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®æ˜¯æŒ‡é’ˆï¼Œåˆ™ç›´æ¥å­˜å‚¨ã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®æ˜¯ä¸€ä¸ªå€¼ï¼Œåˆ™å­˜å‚¨æŒ‡å‘è¯¥å€¼çš„æŒ‡é’ˆã€‚</li>
</ol>
<p>å¦‚æœå¸Œæœ›æ¥å£æ–¹æ³•ä¿®æ”¹åŸºç¡€æ•°æ®ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æŒ‡é’ˆä¼ é€’ (å°†å¯¹è±¡æŒ‡é’ˆèµ‹å€¼ç»™æ¥å£å˜é‡)ã€‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> F <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> S1 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s S1<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">type</span> S2 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>S2<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// f1.f() æ— æ³•ä¿®æ”¹åº•å±‚æ•°æ®</span>
<span class="token comment">// f2.f() å¯ä»¥ä¿®æ”¹åº•å±‚æ•°æ®ï¼Œç»™æ¥å£å˜é‡ f2 èµ‹å€¼æ—¶ä½¿ç”¨çš„æ˜¯å¯¹è±¡æŒ‡é’ˆ</span>
<span class="token keyword">var</span> f1 F <span class="token operator">=</span> S1<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> f2 F <span class="token operator">=</span> <span class="token operator">&amp;</span>S2<span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3>Interface åˆç†æ€§éªŒè¯</h3>
<p>åœ¨ç¼–è¯‘æ—¶éªŒè¯æ¥å£çš„ç¬¦åˆæ€§ã€‚è¿™åŒ…æ‹¬ï¼š</p>
<ul>
<li>å°†å®ç°ç‰¹å®šæ¥å£çš„å¯¼å‡ºç±»å‹ä½œä¸ºæ¥å£ API çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ£€æŸ¥</li>
<li>å®ç°åŒä¸€æ¥å£çš„ (å¯¼å‡ºå’Œéå¯¼å‡º) ç±»å‹å±äºå®ç°ç±»å‹çš„é›†åˆ</li>
<li>ä»»ä½•è¿åæ¥å£åˆç†æ€§æ£€æŸ¥çš„åœºæ™¯ï¼Œéƒ½ä¼šç»ˆæ­¢ç¼–è¯‘ï¼Œå¹¶é€šçŸ¥ç»™ç”¨æˆ·</li>
</ul>
<p>è¡¥å……ï¼šä¸Šé¢ 3 æ¡æ˜¯ç¼–è¯‘å™¨å¯¹æ¥å£çš„æ£€æŸ¥æœºåˆ¶ï¼Œ
å¤§ä½“æ„æ€æ˜¯é”™è¯¯ä½¿ç”¨æ¥å£ä¼šåœ¨ç¼–è¯‘æœŸæŠ¥é”™ã€‚
æ‰€ä»¥å¯ä»¥åˆ©ç”¨è¿™ä¸ªæœºåˆ¶è®©éƒ¨åˆ†é—®é¢˜åœ¨ç¼–è¯‘æœŸæš´éœ²ã€‚</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// å¦‚æœ Handler æ²¡æœ‰å®ç° http.Handlerï¼Œä¼šåœ¨è¿è¡Œæ—¶æŠ¥é”™</span>
<span class="token keyword">type</span> Handler <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>h <span class="token operator">*</span>Handler<span class="token punctuation">)</span> <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>
  w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span>
  r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Handler <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// ç”¨äºè§¦å‘ç¼–è¯‘æœŸçš„æ¥å£çš„åˆç†æ€§æ£€æŸ¥æœºåˆ¶</span>
<span class="token comment">// å¦‚æœ Handler æ²¡æœ‰å®ç° http.Handlerï¼Œä¼šåœ¨ç¼–è¯‘æœŸæŠ¥é”™</span>
<span class="token keyword">var</span> <span class="token boolean">_</span> http<span class="token punctuation">.</span>Handler <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>Handler<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>h <span class="token operator">*</span>Handler<span class="token punctuation">)</span> <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>
  w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span>
  r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div></td></tr>
</tbody></table>
<p>å¦‚æœ <code>*Handler</code> ä¸ <code>http.Handler</code> çš„æ¥å£ä¸åŒ¹é…ï¼Œ
é‚£ä¹ˆè¯­å¥ <code>var _ http.Handler = (*Handler)(nil)</code> å°†æ— æ³•ç¼–è¯‘é€šè¿‡ã€‚</p>
<p>èµ‹å€¼çš„å³è¾¹åº”è¯¥æ˜¯æ–­è¨€ç±»å‹çš„é›¶å€¼ã€‚
å¯¹äºæŒ‡é’ˆç±»å‹ï¼ˆå¦‚ <code>*Handler</code>ï¼‰ã€åˆ‡ç‰‡å’Œæ˜ å°„ï¼Œè¿™æ˜¯ <code>nil</code>ï¼›
å¯¹äºç»“æ„ç±»å‹ï¼Œè¿™æ˜¯ç©ºç»“æ„ã€‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> LogHandler <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  h   http<span class="token punctuation">.</span>Handler
  log <span class="token operator">*</span>zap<span class="token punctuation">.</span>Logger
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token boolean">_</span> http<span class="token punctuation">.</span>Handler <span class="token operator">=</span> LogHandler<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>h LogHandler<span class="token punctuation">)</span> <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>
  w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span>
  r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>æ¥æ”¶å™¨ (receiver) ä¸æ¥å£</h3>
<p>ä½¿ç”¨å€¼æ¥æ”¶å™¨çš„æ–¹æ³•æ—¢å¯ä»¥é€šè¿‡å€¼è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡é’ˆè°ƒç”¨ã€‚</p>
<p>å¸¦æŒ‡é’ˆæ¥æ”¶å™¨çš„æ–¹æ³•åªèƒ½é€šè¿‡æŒ‡é’ˆæˆ– <a href="https://golang.org/ref/spec#Method_values" target="_blank" rel="noopener noreferrer">addressable values</a> è°ƒç”¨ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> S <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  data <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s S<span class="token punctuation">)</span> <span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> s<span class="token punctuation">.</span>data
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>S<span class="token punctuation">)</span> <span class="token function">Write</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  s<span class="token punctuation">.</span>data <span class="token operator">=</span> str
<span class="token punctuation">}</span>

sVals <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span>S<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"A"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token comment">// ä½ é€šè¿‡å€¼åªèƒ½è°ƒç”¨ Read</span>
sVals<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// è¿™ä¸èƒ½ç¼–è¯‘é€šè¿‡ï¼š</span>
<span class="token comment">//  sVals[1].Write("test")</span>

sPtrs <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token operator">*</span>S<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"A"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token comment">// é€šè¿‡æŒ‡é’ˆæ—¢å¯ä»¥è°ƒç”¨ Readï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ Write æ–¹æ³•</span>
sPtrs<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
sPtrs<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span>
</code></pre></div><p>ç±»ä¼¼çš„ï¼Œå³ä½¿æ–¹æ³•æœ‰äº†å€¼æ¥æ”¶å™¨ï¼Œä¹ŸåŒæ ·å¯ä»¥ç”¨æŒ‡é’ˆæ¥æ”¶å™¨æ¥æ»¡è¶³æ¥å£ã€‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> F <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> S1 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s S1<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">type</span> S2 <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>S2<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

s1Val <span class="token operator">:=</span> S1<span class="token punctuation">{</span><span class="token punctuation">}</span>
s1Ptr <span class="token operator">:=</span> <span class="token operator">&amp;</span>S1<span class="token punctuation">{</span><span class="token punctuation">}</span>
s2Val <span class="token operator">:=</span> S2<span class="token punctuation">{</span><span class="token punctuation">}</span>
s2Ptr <span class="token operator">:=</span> <span class="token operator">&amp;</span>S2<span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> i F
i <span class="token operator">=</span> s1Val
i <span class="token operator">=</span> s1Ptr
i <span class="token operator">=</span> s2Ptr

<span class="token comment">//  ä¸‹é¢ä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚å› ä¸º s2Val æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œ S2 çš„ f æ–¹æ³•ä¸­æ²¡æœ‰ä½¿ç”¨å€¼æ¥æ”¶å™¨</span>
<span class="token comment">//   i = s2Val</span>
</code></pre></div><p><a href="https://golang.org/doc/effective_go.html" target="_blank" rel="noopener noreferrer">Effective Go</a> ä¸­æœ‰ä¸€æ®µå…³äº <a href="https://golang.org/doc/effective_go.html#pointers_vs_values" target="_blank" rel="noopener noreferrer">pointers vs. values</a> çš„ç²¾å½©è®²è§£ã€‚</p>
<p>è¡¥å……ï¼š</p>
<ul>
<li>ä¸€ä¸ªç±»å‹å¯ä»¥æœ‰å€¼æ¥æ”¶å™¨æ–¹æ³•é›†å’ŒæŒ‡é’ˆæ¥æ”¶å™¨æ–¹æ³•é›†
<ul>
<li>å€¼æ¥æ”¶å™¨æ–¹æ³•é›†æ˜¯æŒ‡é’ˆæ¥æ”¶å™¨æ–¹æ³•é›†çš„å­é›†ï¼Œåä¹‹ä¸æ˜¯</li>
</ul>
</li>
<li>è§„åˆ™
<ul>
<li>å€¼å¯¹è±¡åªå¯ä»¥ä½¿ç”¨å€¼æ¥æ”¶å™¨æ–¹æ³•é›†</li>
<li>æŒ‡é’ˆå¯¹è±¡å¯ä»¥ä½¿ç”¨ å€¼æ¥æ”¶å™¨æ–¹æ³•é›† + æŒ‡é’ˆæ¥æ”¶å™¨æ–¹æ³•é›†</li>
</ul>
</li>
<li>æ¥å£çš„åŒ¹é… (æˆ–è€…å«å®ç°)
<ul>
<li>ç±»å‹å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œå«åŒ¹é…</li>
<li>å…·ä½“çš„è®²ï¼Œè¦ä¹ˆæ˜¯ç±»å‹çš„å€¼æ–¹æ³•é›†åŒ¹é…æ¥å£ï¼Œè¦ä¹ˆæ˜¯æŒ‡é’ˆæ–¹æ³•é›†åŒ¹é…æ¥å£</li>
</ul>
</li>
</ul>
<p>å…·ä½“çš„åŒ¹é…åˆ†ä¸¤ç§ï¼š</p>
<ul>
<li>å€¼æ–¹æ³•é›†å’Œæ¥å£åŒ¹é…
<ul>
<li>ç»™æ¥å£å˜é‡èµ‹å€¼çš„ä¸ç®¡æ˜¯å€¼è¿˜æ˜¯æŒ‡é’ˆå¯¹è±¡ï¼Œéƒ½ okï¼Œå› ä¸ºéƒ½åŒ…å«å€¼æ–¹æ³•é›†</li>
</ul>
</li>
<li>æŒ‡é’ˆæ–¹æ³•é›†å’Œæ¥å£åŒ¹é…
<ul>
<li>åªèƒ½å°†æŒ‡é’ˆå¯¹è±¡èµ‹å€¼ç»™æ¥å£å˜é‡ï¼Œå› ä¸ºåªæœ‰æŒ‡é’ˆæ–¹æ³•é›†å’Œæ¥å£åŒ¹é…</li>
<li>å¦‚æœå°†å€¼å¯¹è±¡èµ‹å€¼ç»™æ¥å£å˜é‡ï¼Œä¼šåœ¨ç¼–è¯‘æœŸæŠ¥é”™ (ä¼šè§¦å‘æ¥å£åˆç†æ€§æ£€æŸ¥æœºåˆ¶)</li>
</ul>
</li>
</ul>
<p>ä¸ºå•¥ i = s2Val ä¼šæŠ¥é”™ï¼Œå› ä¸ºå€¼æ–¹æ³•é›†å’Œæ¥å£ä¸åŒ¹é…ã€‚</p>
<h3>é›¶å€¼ Mutex æ˜¯æœ‰æ•ˆçš„</h3>
<p>é›¶å€¼ <code>sync.Mutex</code> å’Œ <code>sync.RWMutex</code> æ˜¯æœ‰æ•ˆçš„ã€‚æ‰€ä»¥æŒ‡å‘ mutex çš„æŒ‡é’ˆåŸºæœ¬æ˜¯ä¸å¿…è¦çš„ã€‚</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>mu <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>Mutex<span class="token punctuation">)</span>
mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">var</span> mu sync<span class="token punctuation">.</span>Mutex
mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></td></tr>
</tbody></table>
<p>å¦‚æœä½ ä½¿ç”¨ç»“æ„ä½“æŒ‡é’ˆï¼Œmutex åº”è¯¥ä½œä¸ºç»“æ„ä½“çš„éæŒ‡é’ˆå­—æ®µã€‚å³ä½¿è¯¥ç»“æ„ä½“ä¸è¢«å¯¼å‡ºï¼Œä¹Ÿä¸è¦ç›´æ¥æŠŠ mutex åµŒå…¥åˆ°ç»“æ„ä½“ä¸­ã€‚</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> SMap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  sync<span class="token punctuation">.</span>Mutex

  data <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewSMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>SMap <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>SMap<span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>SMap<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span>k <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  m<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> m<span class="token punctuation">.</span>data<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> SMap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  mu sync<span class="token punctuation">.</span>Mutex

  data <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewSMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>SMap <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>SMap<span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>SMap<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span>k <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  m<span class="token punctuation">.</span>mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">defer</span> m<span class="token punctuation">.</span>mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> m<span class="token punctuation">.</span>data<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></td></tr>
<tr><td>
<p><code>Mutex</code> å­—æ®µï¼Œ <code>Lock</code> å’Œ <code>Unlock</code> æ–¹æ³•æ˜¯ <code>SMap</code> å¯¼å‡ºçš„ API ä¸­ä¸åˆ»æ„è¯´æ˜çš„ä¸€éƒ¨åˆ†ã€‚</p>
 </td><td>
<p>mutex åŠå…¶æ–¹æ³•æ˜¯ <code>SMap</code> çš„å®ç°ç»†èŠ‚ï¼Œå¯¹å…¶è°ƒç”¨è€…ä¸å¯è§ã€‚</p>
 </td></tr>
 </tbody></table>
<h3>åœ¨è¾¹ç•Œå¤„æ‹·è´ Slices å’Œ Maps</h3>
<p>slices å’Œ maps åŒ…å«äº†æŒ‡å‘åº•å±‚æ•°æ®çš„æŒ‡é’ˆï¼Œå› æ­¤åœ¨éœ€è¦å¤åˆ¶å®ƒä»¬æ—¶è¦ç‰¹åˆ«æ³¨æ„ã€‚</p>
<h4>æ¥æ”¶ Slices å’Œ Maps</h4>
<p>è¯·è®°ä½ï¼Œå½“ map æˆ– slice ä½œä¸ºå‡½æ•°å‚æ•°ä¼ å…¥æ—¶ï¼Œå¦‚æœæ‚¨å­˜å‚¨äº†å¯¹å®ƒä»¬çš„å¼•ç”¨ï¼Œåˆ™ç”¨æˆ·å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p>
<table>
<thead><tr><th>Bad</th> <th>Good</th></tr></thead>
<tbody>
<tr>
<td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>Driver<span class="token punctuation">)</span> <span class="token function">SetTrips</span><span class="token punctuation">(</span>trips <span class="token punctuation">[</span><span class="token punctuation">]</span>Trip<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  d<span class="token punctuation">.</span>trips <span class="token operator">=</span> trips
<span class="token punctuation">}</span>

trips <span class="token operator">:=</span> <span class="token operator">...</span>
d1<span class="token punctuation">.</span><span class="token function">SetTrips</span><span class="token punctuation">(</span>trips<span class="token punctuation">)</span>

<span class="token comment">// ä½ æ˜¯è¦ä¿®æ”¹ d1.trips å—ï¼Ÿ</span>
trips<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">...</span>
</code></pre></div></td>
<td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>Driver<span class="token punctuation">)</span> <span class="token function">SetTrips</span><span class="token punctuation">(</span>trips <span class="token punctuation">[</span><span class="token punctuation">]</span>Trip<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  d<span class="token punctuation">.</span>trips <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>Trip<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>trips<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token function">copy</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>trips<span class="token punctuation">,</span> trips<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

trips <span class="token operator">:=</span> <span class="token operator">...</span>
d1<span class="token punctuation">.</span><span class="token function">SetTrips</span><span class="token punctuation">(</span>trips<span class="token punctuation">)</span>

<span class="token comment">// è¿™é‡Œæˆ‘ä»¬ä¿®æ”¹ trips[0]ï¼Œä½†ä¸ä¼šå½±å“åˆ° d1.trips</span>
trips<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">...</span>
</code></pre></div></td>
</tr>
</tbody>
</table>
<h4>è¿”å› slices æˆ– maps</h4>
<p>åŒæ ·ï¼Œè¯·æ³¨æ„ç”¨æˆ·å¯¹æš´éœ²å†…éƒ¨çŠ¶æ€çš„ map æˆ– slice çš„ä¿®æ”¹ã€‚</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Stats <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  mu sync<span class="token punctuation">.</span>Mutex

  counters <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// Snapshot è¿”å›å½“å‰çŠ¶æ€ã€‚</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Stats<span class="token punctuation">)</span> <span class="token function">Snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
  s<span class="token punctuation">.</span>mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">defer</span> s<span class="token punctuation">.</span>mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> s<span class="token punctuation">.</span>counters
<span class="token punctuation">}</span>

<span class="token comment">// snapshot ä¸å†å—äº’æ–¥é”ä¿æŠ¤</span>
<span class="token comment">// å› æ­¤å¯¹ snapshot çš„ä»»ä½•è®¿é—®éƒ½å°†å—åˆ°æ•°æ®ç«äº‰çš„å½±å“</span>
<span class="token comment">// å½±å“ stats.counters</span>
snapshot <span class="token operator">:=</span> stats<span class="token punctuation">.</span><span class="token function">Snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Stats <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  mu sync<span class="token punctuation">.</span>Mutex

  counters <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Stats<span class="token punctuation">)</span> <span class="token function">Snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
  s<span class="token punctuation">.</span>mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">defer</span> s<span class="token punctuation">.</span>mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  result <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>counters<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s<span class="token punctuation">.</span>counters <span class="token punctuation">{</span>
    result<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token comment">// snapshot ç°åœ¨æ˜¯ä¸€ä¸ªæ‹·è´</span>
snapshot <span class="token operator">:=</span> stats<span class="token punctuation">.</span><span class="token function">Snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></td></tr>
</tbody></table>
<h3>ä½¿ç”¨ defer é‡Šæ”¾èµ„æº</h3>
<p>ä½¿ç”¨ defer é‡Šæ”¾èµ„æºï¼Œè¯¸å¦‚æ–‡ä»¶å’Œé”ã€‚</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>p<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> p<span class="token punctuation">.</span>count <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">{</span>
  p<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> p<span class="token punctuation">.</span>count
<span class="token punctuation">}</span>

p<span class="token punctuation">.</span>count<span class="token operator">++</span>
newCount <span class="token operator">:=</span> p<span class="token punctuation">.</span>count
p<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">return</span> newCount

<span class="token comment">// å½“æœ‰å¤šä¸ª return åˆ†æ”¯æ—¶ï¼Œå¾ˆå®¹æ˜“é—å¿˜ unlock</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>p<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">defer</span> p<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> p<span class="token punctuation">.</span>count <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> p<span class="token punctuation">.</span>count
<span class="token punctuation">}</span>

p<span class="token punctuation">.</span>count<span class="token operator">++</span>
<span class="token keyword">return</span> p<span class="token punctuation">.</span>count

<span class="token comment">// æ›´å¯è¯»</span>
</code></pre></div></td></tr>
</tbody></table>
<p>Defer çš„å¼€é”€éå¸¸å°ï¼Œåªæœ‰åœ¨æ‚¨å¯ä»¥è¯æ˜å‡½æ•°æ‰§è¡Œæ—¶é—´å¤„äºçº³ç§’çº§çš„ç¨‹åº¦æ—¶ï¼Œæ‰åº”é¿å…è¿™æ ·åšã€‚ä½¿ç”¨ defer æå‡å¯è¯»æ€§æ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºä½¿ç”¨å®ƒä»¬çš„æˆæœ¬å¾®ä¸è¶³é“ã€‚å°¤å…¶é€‚ç”¨äºé‚£äº›ä¸ä»…ä»…æ˜¯ç®€å•å†…å­˜è®¿é—®çš„è¾ƒå¤§çš„æ–¹æ³•ï¼Œåœ¨è¿™äº›æ–¹æ³•ä¸­å…¶ä»–è®¡ç®—çš„èµ„æºæ¶ˆè€—è¿œè¶…è¿‡ <code>defer</code>ã€‚</p>
<h3>Channel çš„ size è¦ä¹ˆæ˜¯ 1ï¼Œè¦ä¹ˆæ˜¯æ— ç¼“å†²çš„</h3>
<p>channel é€šå¸¸ size åº”ä¸º 1 æˆ–æ˜¯æ— ç¼“å†²çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œchannel æ˜¯æ— ç¼“å†²çš„ï¼Œå…¶ size ä¸ºé›¶ã€‚ä»»ä½•å…¶ä»–å°ºå¯¸éƒ½å¿…é¡»ç»è¿‡ä¸¥æ ¼çš„å®¡æŸ¥ã€‚æˆ‘ä»¬éœ€è¦è€ƒè™‘å¦‚ä½•ç¡®å®šå¤§å°ï¼Œè€ƒè™‘æ˜¯ä»€ä¹ˆé˜»æ­¢äº† channel åœ¨é«˜è´Ÿè½½ä¸‹å’Œé˜»å¡å†™æ—¶çš„å†™å…¥ï¼Œä»¥åŠå½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ç³»ç»Ÿé€»è¾‘æœ‰å“ªäº›å˜åŒ–ã€‚(ç¿»è¯‘è§£é‡Šï¼šæŒ‰ç…§åŸæ–‡æ„æ€æ˜¯éœ€è¦ç•Œå®šé€šé“è¾¹ç•Œï¼Œç«æ€æ¡ä»¶ï¼Œä»¥åŠé€»è¾‘ä¸Šä¸‹æ–‡æ¢³ç†)</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// åº”è¯¥è¶³ä»¥æ»¡è¶³ä»»ä½•æƒ…å†µï¼</span>
c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// å¤§å°ï¼š1</span>
c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// æˆ–è€…</span>
<span class="token comment">// æ— ç¼“å†² channelï¼Œå¤§å°ä¸º 0</span>
c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre></div></td></tr>
</tbody></table>
<h3>æšä¸¾ä» 1 å¼€å§‹</h3>
<p>åœ¨ Go ä¸­å¼•å…¥æšä¸¾çš„æ ‡å‡†æ–¹æ³•æ˜¯å£°æ˜ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹å’Œä¸€ä¸ªä½¿ç”¨äº† iota çš„ const ç»„ã€‚ç”±äºå˜é‡çš„é»˜è®¤å€¼ä¸º 0ï¼Œå› æ­¤é€šå¸¸åº”ä»¥éé›¶å€¼å¼€å¤´æšä¸¾ã€‚</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Operation <span class="token builtin">int</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
  Add Operation <span class="token operator">=</span> <span class="token boolean">iota</span>
  Subtract
  Multiply
<span class="token punctuation">)</span>

<span class="token comment">// Add=0, Subtract=1, Multiply=2</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> Operation <span class="token builtin">int</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
  Add Operation <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token operator">+</span> <span class="token number">1</span>
  Subtract
  Multiply
<span class="token punctuation">)</span>

<span class="token comment">// Add=1, Subtract=2, Multiply=3</span>
</code></pre></div></td></tr>
</tbody></table>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨é›¶å€¼æ˜¯æœ‰æ„ä¹‰çš„ï¼ˆæšä¸¾ä»é›¶å¼€å§‹ï¼‰ï¼Œä¾‹å¦‚ï¼Œå½“é›¶å€¼æ˜¯ç†æƒ³çš„é»˜è®¤è¡Œä¸ºæ—¶ã€‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">type</span> LogOutput <span class="token builtin">int</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
  LogToStdout LogOutput <span class="token operator">=</span> <span class="token boolean">iota</span>
  LogToFile
  LogToRemote
<span class="token punctuation">)</span>

<span class="token comment">// LogToStdout=0, LogToFile=1, LogToRemote=2</span>
</code></pre></div><h3>ä½¿ç”¨ time å¤„ç†æ—¶é—´</h3>
<p>æ—¶é—´å¤„ç†å¾ˆå¤æ‚ã€‚å…³äºæ—¶é—´çš„é”™è¯¯å‡è®¾é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ã€‚</p>
<ol>
<li>ä¸€å¤©æœ‰ 24 å°æ—¶</li>
<li>ä¸€å°æ—¶æœ‰ 60 åˆ†é’Ÿ</li>
<li>ä¸€å‘¨æœ‰ä¸ƒå¤©</li>
<li>ä¸€å¹´ 365 å¤©</li>
<li><a href="https://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time" target="_blank" rel="noopener noreferrer">è¿˜æœ‰æ›´å¤š</a></li>
</ol>
<p>ä¾‹å¦‚ï¼Œ<em>1</em> è¡¨ç¤ºåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ä¸ŠåŠ ä¸Š 24 å°æ—¶å¹¶ä¸æ€»æ˜¯äº§ç”Ÿä¸€ä¸ªæ–°çš„æ—¥å†æ—¥ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨å¤„ç†æ—¶é—´æ—¶å§‹ç»ˆä½¿ç”¨ <a href="https://golang.org/pkg/time/" target="_blank" rel="noopener noreferrer"><code>"time"</code></a> åŒ…ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºä»¥æ›´å®‰å…¨ã€æ›´å‡†ç¡®çš„æ–¹å¼å¤„ç†è¿™äº›ä¸æ­£ç¡®çš„å‡è®¾ã€‚</p>
<h4>ä½¿ç”¨ <code>time.Time</code> è¡¨è¾¾ç¬æ—¶æ—¶é—´</h4>
<p>åœ¨å¤„ç†æ—¶é—´çš„ç¬é—´æ—¶ä½¿ç”¨ <a href="https://golang.org/pkg/time/#Time" target="_blank" rel="noopener noreferrer"><code>time.Time</code></a>ï¼Œåœ¨æ¯”è¾ƒã€æ·»åŠ æˆ–å‡å»æ—¶é—´æ—¶ä½¿ç”¨ <code>time.Time</code> ä¸­çš„æ–¹æ³•ã€‚</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">isActive</span><span class="token punctuation">(</span>now<span class="token punctuation">,</span> start<span class="token punctuation">,</span> stop <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> start <span class="token operator">&lt;=</span> now <span class="token operator">&amp;&amp;</span> now <span class="token operator">&lt;</span> stop
<span class="token punctuation">}</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">isActive</span><span class="token punctuation">(</span>now<span class="token punctuation">,</span> start<span class="token punctuation">,</span> stop time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>start<span class="token punctuation">.</span><span class="token function">Before</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span> <span class="token operator">||</span> start<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> now<span class="token punctuation">.</span><span class="token function">Before</span><span class="token punctuation">(</span>stop<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></td></tr>
</tbody></table>
<h4>ä½¿ç”¨ <code>time.Duration</code> è¡¨è¾¾æ—¶é—´æ®µ</h4>
<p>åœ¨å¤„ç†æ—¶é—´æ®µæ—¶ä½¿ç”¨ <a href="https://golang.org/pkg/time/#Duration" target="_blank" rel="noopener noreferrer"><code>time.Duration</code></a> .</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">poll</span><span class="token punctuation">(</span>delay <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>delay<span class="token punctuation">)</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">poll</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// æ˜¯å‡ ç§’é’Ÿè¿˜æ˜¯å‡ æ¯«ç§’ï¼Ÿ</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">poll</span><span class="token punctuation">(</span>delay time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">poll</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
</code></pre></div></td></tr>
</tbody></table>
<p>å›åˆ°ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œåœ¨ä¸€ä¸ªæ—¶é—´ç¬é—´åŠ ä¸Š 24 å°æ—¶ï¼Œæˆ‘ä»¬ç”¨äºæ·»åŠ æ—¶é—´çš„æ–¹æ³•å–å†³äºæ„å›¾ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸‹ä¸€ä¸ªæ—¥å†æ—¥ (å½“å‰å¤©çš„ä¸‹ä¸€å¤©) çš„åŒä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ <a href="https://golang.org/pkg/time/#Time.AddDate" target="_blank" rel="noopener noreferrer"><code>Time.AddDate</code></a>ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¿è¯æŸä¸€æ—¶åˆ»æ¯”å‰ä¸€æ—¶åˆ»æ™š 24 å°æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ <a href="https://golang.org/pkg/time/#Time.Add" target="_blank" rel="noopener noreferrer"><code>Time.Add</code></a>ã€‚</p>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>newDay <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">AddDate</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token comment">/* years */</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token comment">/* months */</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token comment">/* days */</span><span class="token punctuation">)</span>
maybeNewDay <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">24</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Hour<span class="token punctuation">)</span>
</code></pre></div><h4>å¯¹å¤–éƒ¨ç³»ç»Ÿä½¿ç”¨ <code>time.Time</code> å’Œ <code>time.Duration</code></h4>
<p>å°½å¯èƒ½åœ¨ä¸å¤–éƒ¨ç³»ç»Ÿçš„äº¤äº’ä¸­ä½¿ç”¨ <code>time.Duration</code> å’Œ <code>time.Time</code> ä¾‹å¦‚ :</p>
<ul>
<li>
<p>Command-line æ ‡å¿—: <a href="https://golang.org/pkg/flag/" target="_blank" rel="noopener noreferrer"><code>flag</code></a> é€šè¿‡ <a href="https://golang.org/pkg/time/#ParseDuration" target="_blank" rel="noopener noreferrer"><code>time.ParseDuration</code></a> æ”¯æŒ <code>time.Duration</code></p>
</li>
<li>
<p>JSON: <a href="https://golang.org/pkg/encoding/json/" target="_blank" rel="noopener noreferrer"><code>encoding/json</code></a> é€šè¿‡å…¶ <a href="https://golang.org/pkg/time/#Time.UnmarshalJSON" target="_blank" rel="noopener noreferrer"><code>UnmarshalJSON</code> method</a> æ–¹æ³•æ”¯æŒå°† <code>time.Time</code> ç¼–ç ä¸º <a href="https://tools.ietf.org/html/rfc3339" target="_blank" rel="noopener noreferrer">RFC 3339</a> å­—ç¬¦ä¸²</p>
</li>
<li>
<p>SQL: <a href="https://golang.org/pkg/database/sql/" target="_blank" rel="noopener noreferrer"><code>database/sql</code></a> æ”¯æŒå°† <code>DATETIME</code> æˆ– <code>TIMESTAMP</code> åˆ—è½¬æ¢ä¸º <code>time.Time</code>ï¼Œå¦‚æœåº•å±‚é©±åŠ¨ç¨‹åºæ”¯æŒåˆ™è¿”å›</p>
</li>
<li>
<p>YAML: <a href="https://godoc.org/gopkg.in/yaml.v2" target="_blank" rel="noopener noreferrer"><code>gopkg.in/yaml.v2</code></a> æ”¯æŒå°† <code>time.Time</code> ä½œä¸º <a href="https://tools.ietf.org/html/rfc3339" target="_blank" rel="noopener noreferrer">RFC 3339</a> å­—ç¬¦ä¸²ï¼Œå¹¶é€šè¿‡ <a href="https://golang.org/pkg/time/#ParseDuration" target="_blank" rel="noopener noreferrer"><code>time.ParseDuration</code></a> æ”¯æŒ <code>time.Duration</code>ã€‚</p>
</li>
</ul>
<p>å½“ä¸èƒ½åœ¨è¿™äº›äº¤äº’ä¸­ä½¿ç”¨ <code>time.Duration</code> æ—¶ï¼Œè¯·ä½¿ç”¨ <code>int</code> æˆ– <code>float64</code>ï¼Œå¹¶åœ¨å­—æ®µåç§°ä¸­åŒ…å«å•ä½ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç”±äº <code>encoding/json</code> ä¸æ”¯æŒ <code>time.Duration</code>ï¼Œå› æ­¤è¯¥å•ä½åŒ…å«åœ¨å­—æ®µçš„åç§°ä¸­ã€‚</p>
<table>
<thead><tr><th>Bad</th><th>Good</th></tr></thead>
<tbody>
<tr><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// {"interval": 2}</span>
<span class="token keyword">type</span> Config <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Interval <span class="token builtin">int</span> <span class="token string">`json:"interval"`</span>
<span class="token punctuation">}</span>
</code></pre></div></td><td>
<div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// {"intervalMillis": 2000}</span>
<span class="token keyword">type</span> Config <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  IntervalMillis <span class="token builtin">int</span> <span class="token string">`json:"intervalMillis"`</span>
<span class="token punctuation">}</span>
</code></pre></div></td></tr>
</tbody></table>
<p>å½“åœ¨è¿™äº›äº¤äº’ä¸­ä¸èƒ½ä½¿ç”¨ <code>time.Time</code> æ—¶ï¼Œé™¤éè¾¾æˆä¸€è‡´ï¼Œå¦åˆ™ä½¿ç”¨ <code>string</code> å’Œ <a href="https://tools.ietf.org/html/rfc3339" target="_blank" rel="noopener noreferrer">RFC 3339</a> ä¸­å®šä¹‰çš„æ ¼å¼æ—¶é—´æˆ³ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<a href="https://golang.org/pkg/time/#Time.UnmarshalText" target="_blank" rel="noopener noreferrer"><code>Time.UnmarshalText</code></a> ä½¿ç”¨æ­¤æ ¼å¼ï¼Œå¹¶å¯é€šè¿‡ <a href="https://golang.org/pkg/time/#RFC3339" target="_blank" rel="noopener noreferrer"><code>time.RFC3339</code></a> åœ¨ <code>Time.Format</code> å’Œ <code>time.Parse</code> ä¸­ä½¿ç”¨ã€‚</p>
<p>å°½ç®¡è¿™åœ¨å®è·µä¸­å¹¶ä¸æˆé—®é¢˜ï¼Œä½†è¯·è®°ä½ï¼Œ<code>"time"</code> åŒ…ä¸æ”¯æŒè§£æé—°ç§’æ—¶é—´æˆ³ï¼ˆ<a href="https://github.com/golang/go/issues/8728" target="_blank" rel="noopener noreferrer">8728</a>ï¼‰ï¼Œä¹Ÿä¸åœ¨è®¡ç®—ä¸­è€ƒè™‘é—°ç§’ï¼ˆ<a href="https://github.com/golang/go/issues/15190" target="_blank" rel="noopener noreferrer">15190</a>ï¼‰ã€‚å¦‚æœæ‚¨æ¯”è¾ƒä¸¤ä¸ªæ—¶é—´ç¬é—´ï¼Œåˆ™å·®å¼‚å°†ä¸åŒ…æ‹¬è¿™ä¸¤ä¸ªç¬é—´ä¹‹é—´å¯èƒ½å‘ç”Ÿçš„é—°ç§’ã€‚</p>
<!-- TODO: section on String methods for enums -->
<h3>Errors</h3>
<h4>é”™è¯¯ç±»å‹</h4>
<p>å£°æ˜é”™è¯¯çš„é€‰é¡¹å¾ˆå°‘ã€‚
åœ¨é€‰æ‹©æœ€é€‚åˆæ‚¨çš„ç”¨ä¾‹çš„é€‰é¡¹ä¹‹å‰ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹äº‹é¡¹ã€‚</p>
<ul>
<li>è°ƒç”¨è€…æ˜¯å¦éœ€è¦åŒ¹é…é”™è¯¯ä»¥ä¾¿ä»–ä»¬å¯ä»¥å¤„ç†å®ƒï¼Ÿ
å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡å£°æ˜é¡¶çº§é”™è¯¯å˜é‡æˆ–è‡ªå®šä¹‰ç±»å‹æ¥æ”¯æŒ <a href="https://golang.org/pkg/errors/#Is" target="_blank" rel="noopener noreferrer"><code>errors.Is</code></a> æˆ– <a href="https://golang.org/pkg/errors/#As" target="_blank" rel="noopener noreferrer"><code>errors.As</code></a> å‡½æ•°ã€‚</li>
<li>é”™è¯¯æ¶ˆæ¯æ˜¯å¦ä¸ºé™æ€å­—ç¬¦ä¸²ï¼Œè¿˜æ˜¯éœ€è¦ä¸Šä¸‹æ–‡ä¿¡æ¯çš„åŠ¨æ€å­—ç¬¦ä¸²ï¼Ÿ
å¦‚æœæ˜¯é™æ€å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [<code>errors.New</code>]ï¼Œä½†å¯¹äºåè€…ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ [<code>fmt.Errorf</code>] æˆ–è‡ªå®šä¹‰é”™è¯¯ç±»å‹ã€‚</li>
<li>æˆ‘ä»¬æ˜¯å¦æ­£åœ¨ä¼ é€’ç”±ä¸‹æ¸¸å‡½æ•°è¿”å›çš„æ–°é”™è¯¯ï¼Ÿ
å¦‚æœæ˜¯è¿™æ ·ï¼Œè¯·å‚é˜…<a href="#%E9%94%99%E8%AF%AF%E5%8C%85%E8%A3%85">é”™è¯¯åŒ…è£…éƒ¨åˆ†</a>ã€‚</li>
</ul>
<p>| é”™è¯¯åŒ¹é…ï¼Ÿ | é”™è¯¯æ¶ˆæ¯ | æŒ‡å¯¼                                |
|</p>
]]></content:encoded>
      <enclosure url="https://starchart.cc/xxjwxc/uber_go_guide_cn.svg" type="image/svg+xml"/>
    </item>
  </channel>
</rss>