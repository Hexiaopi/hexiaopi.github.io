<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.36" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="http://blog.cjhe.top/network/application-layer/MQTT.html"><meta property="og:site_name" content="ä¸ªäººåšå®¢"><meta property="og:title" content="MQTTåè®®"><meta property="og:description" content="MQTT(Mesage Queuing Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“åè®®)ï¼Œæ˜¯ä¸€ç§åŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„è½»é‡çº§é€šè®¯åè®®ï¼Œè¯¥åè®®æ„å»ºäºTCP/IPåè®®ä¸Šã€‚ å‘å±•å†å² 1999å¹´ç”±IBMå‘æ˜ï¼Œèµ·åˆç”¨äºåŸæ²¹ç®¡é“æ•°æ®é‡‡é›†ç›‘æ§ç³»ç»Ÿï¼Œè§£å†³å«æ˜Ÿä¸åŸæ²¹ç®¡é“æ£€æµ‹æ•°æ®çš„ä¼ è¾“é—®é¢˜ã€‚ 2010 å‘å¸ƒMQTT 3.1ã€‚ 2014å¹´åœ¨ OASIS æ ‡å‡†åŒ–..."><meta property="og:type" content="article"><meta property="og:image" content="http://www.uinio.com/Embedded/MQTT/4.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-04-11T06:38:26.000Z"><meta property="article:author" content="Hexiaopi"><meta property="article:tag" content="MQTT"><meta property="article:published_time" content="2023-08-26T00:00:00.000Z"><meta property="article:modified_time" content="2024-04-11T06:38:26.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MQTTåè®®","image":["http://www.uinio.com/Embedded/MQTT/4.png","http://www.uinio.com/Embedded/MQTT/5.png","http://www.uinio.com/Embedded/MQTT/6.png","http://www.uinio.com/Embedded/MQTT/8.png","http://www.uinio.com/Embedded/MQTT/9.png"],"datePublished":"2023-08-26T00:00:00.000Z","dateModified":"2024-04-11T06:38:26.000Z","author":[{"@type":"Person","name":"Hexiaopi","url":"https://github.com/Hexiaopi"}]}</script><link rel="alternate" type="application/atom+xml" href="http://blog.cjhe.top/atom.xml" title="ä¸ªäººåšå®¢ Atom Feed"><link rel="alternate" type="application/json" href="http://blog.cjhe.top/feed.json" title="ä¸ªäººåšå®¢ JSON Feed"><link rel="alternate" type="application/rss+xml" href="http://blog.cjhe.top/rss.xml" title="ä¸ªäººåšå®¢ RSS Feed"><title>MQTTåè®® | ä¸ªäººåšå®¢</title><meta name="description" content="MQTT(Mesage Queuing Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“åè®®)ï¼Œæ˜¯ä¸€ç§åŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„è½»é‡çº§é€šè®¯åè®®ï¼Œè¯¥åè®®æ„å»ºäºTCP/IPåè®®ä¸Šã€‚ å‘å±•å†å² 1999å¹´ç”±IBMå‘æ˜ï¼Œèµ·åˆç”¨äºåŸæ²¹ç®¡é“æ•°æ®é‡‡é›†ç›‘æ§ç³»ç»Ÿï¼Œè§£å†³å«æ˜Ÿä¸åŸæ²¹ç®¡é“æ£€æµ‹æ•°æ®çš„ä¼ è¾“é—®é¢˜ã€‚ 2010 å‘å¸ƒMQTT 3.1ã€‚ 2014å¹´åœ¨ OASIS æ ‡å‡†åŒ–...">
    <link rel="preload" href="/assets/style-CZnC3lHa.css" as="style"><link rel="stylesheet" href="/assets/style-CZnC3lHa.css">
    <link rel="modulepreload" href="/assets/app-CxLAmY8D.js"><link rel="modulepreload" href="/assets/MQTT.html-DnkSBjCt.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/CHANGELOG.html-B-NRMkEW.js" as="script"><link rel="prefetch" href="/assets/index.html-rfRIWiZk.js" as="script"><link rel="prefetch" href="/assets/intro.html-CJxzd1nQ.js" as="script"><link rel="prefetch" href="/assets/slides.html-YlbGhLW3.js" as="script"><link rel="prefetch" href="/assets/limit.html-DGFHHiFe.js" as="script"><link rel="prefetch" href="/assets/index.html-BWx777uT.js" as="script"><link rel="prefetch" href="/assets/index.html-BnWfReni.js" as="script"><link rel="prefetch" href="/assets/principle.html-e6eWVqwx.js" as="script"><link rel="prefetch" href="/assets/quantity-code.html-BRnpbvpx.js" as="script"><link rel="prefetch" href="/assets/index.html-DFQwKpPP.js" as="script"><link rel="prefetch" href="/assets/index.html-DdoZi_Zh.js" as="script"><link rel="prefetch" href="/assets/grafana.html-BHHg0TNQ.js" as="script"><link rel="prefetch" href="/assets/promql.html-CLLSVOdC.js" as="script"><link rel="prefetch" href="/assets/index.html-BB7YxryW.js" as="script"><link rel="prefetch" href="/assets/how-to-get-rich-without-getting-lucky.html-B7oQw2Sq.js" as="script"><link rel="prefetch" href="/assets/how-to-live-longer.html-JG-ATc34.js" as="script"><link rel="prefetch" href="/assets/website.html-BYKrKh0Y.js" as="script"><link rel="prefetch" href="/assets/index.html-D3cQy3qu.js" as="script"><link rel="prefetch" href="/assets/api.html-9o6lAZ_t.js" as="script"><link rel="prefetch" href="/assets/branch.html-CdKC7ogC.js" as="script"><link rel="prefetch" href="/assets/commit.html--U19lD8M.js" as="script"><link rel="prefetch" href="/assets/directory.html-qaNBw7sC.js" as="script"><link rel="prefetch" href="/assets/doc.html-CC4OwQ7x.js" as="script"><link rel="prefetch" href="/assets/version.html-5i1gXln2.js" as="script"><link rel="prefetch" href="/assets/distribute-lock.html-DjqMu6eY.js" as="script"><link rel="prefetch" href="/assets/ca.html-CVt5jn6h.js" as="script"><link rel="prefetch" href="/assets/confd.html-B2xd6E9u.js" as="script"><link rel="prefetch" href="/assets/vscode-leetcode.html-CuYXOxE-.js" as="script"><link rel="prefetch" href="/assets/binary-search-tree.html-CoUFhiN5.js" as="script"><link rel="prefetch" href="/assets/binary-tree.html-BYJNq0uO.js" as="script"><link rel="prefetch" href="/assets/index.html-D5PgDN4b.js" as="script"><link rel="prefetch" href="/assets/engine.html-BpLv2q6z.js" as="script"><link rel="prefetch" href="/assets/idx.html-BR48RKRc.js" as="script"><link rel="prefetch" href="/assets/join.html-BEBjntR9.js" as="script"><link rel="prefetch" href="/assets/read-process.html-DK1IZYR-.js" as="script"><link rel="prefetch" href="/assets/sql-order.html-C3QEtjLb.js" as="script"><link rel="prefetch" href="/assets/transaction.html-BUjHCzFB.js" as="script"><link rel="prefetch" href="/assets/write-process.html-CATIrn-q.js" as="script"><link rel="prefetch" href="/assets/index.html-Dvc0y-mP.js" as="script"><link rel="prefetch" href="/assets/chain-of-responsibility.html-bHcpBWyt.js" as="script"><link rel="prefetch" href="/assets/command.html-CCk9zzW_.js" as="script"><link rel="prefetch" href="/assets/iterator.html-D_Vnot6c.js" as="script"><link rel="prefetch" href="/assets/mediator.html-DdGrdxxF.js" as="script"><link rel="prefetch" href="/assets/memento.html-BV2fWHxv.js" as="script"><link rel="prefetch" href="/assets/observer.html-DRId-Wjw.js" as="script"><link rel="prefetch" href="/assets/state.html-DL2ouBgS.js" as="script"><link rel="prefetch" href="/assets/strategy.html-DXJ8KB3I.js" as="script"><link rel="prefetch" href="/assets/template-method.html-Bh9bYahu.js" as="script"><link rel="prefetch" href="/assets/visitor.html-D3IGKPgF.js" as="script"><link rel="prefetch" href="/assets/index.html-PcRh0Dgj.js" as="script"><link rel="prefetch" href="/assets/exit.html-Cyji80dT.js" as="script"><link rel="prefetch" href="/assets/fan-in-fan-out.html-DH2PzL2x.js" as="script"><link rel="prefetch" href="/assets/pipeline.html-COtQNdB7.js" as="script"><link rel="prefetch" href="/assets/producer-consumer.html-D9GPw6WN.js" as="script"><link rel="prefetch" href="/assets/index.html-CJ8I_f-S.js" as="script"><link rel="prefetch" href="/assets/abstract-factory.html-D_Ns24M-.js" as="script"><link rel="prefetch" href="/assets/builder.html-DDi63vou.js" as="script"><link rel="prefetch" href="/assets/factory-compare.html-lKUlnVAv.js" as="script"><link rel="prefetch" href="/assets/factory-method.html-DjXdkjy1.js" as="script"><link rel="prefetch" href="/assets/object-pool.html-CJwtX4so.js" as="script"><link rel="prefetch" href="/assets/prototype.html--tIVyMwH.js" as="script"><link rel="prefetch" href="/assets/simple-factory.html-DvUKzAhn.js" as="script"><link rel="prefetch" href="/assets/singleton.html-Cnn7fcYW.js" as="script"><link rel="prefetch" href="/assets/index.html-BrzZJdza.js" as="script"><link rel="prefetch" href="/assets/option.html-BfvvVNEN.js" as="script"><link rel="prefetch" href="/assets/index.html-Bh4CPMrZ.js" as="script"><link rel="prefetch" href="/assets/adapter.html-BgDyzkF4.js" as="script"><link rel="prefetch" href="/assets/bridge.html-CM7hLooX.js" as="script"><link rel="prefetch" href="/assets/composite.html-CmhkGgXP.js" as="script"><link rel="prefetch" href="/assets/decorator.html-zoYO0pL0.js" as="script"><link rel="prefetch" href="/assets/facade.html-DKDpM6ue.js" as="script"><link rel="prefetch" href="/assets/flyweight.html-t4ehEQQL.js" as="script"><link rel="prefetch" href="/assets/proxy.html-DsONeIP5.js" as="script"><link rel="prefetch" href="/assets/index.html-2Dr0TXa6.js" as="script"><link rel="prefetch" href="/assets/minio-monitor.html-LaFontOc.js" as="script"><link rel="prefetch" href="/assets/mongodb-exporter.html-BjTq8GEI.js" as="script"><link rel="prefetch" href="/assets/mysql-exporter.html-K-i8-oUT.js" as="script"><link rel="prefetch" href="/assets/redis-exporter.html-DrPZbQhy.js" as="script"><link rel="prefetch" href="/assets/shell-line-break.html-B681csfB.js" as="script"><link rel="prefetch" href="/assets/index.html-B7n2-EQ9.js" as="script"><link rel="prefetch" href="/assets/cadvisor-k8s-deploy.html-CBqnkiYa.js" as="script"><link rel="prefetch" href="/assets/helm-dashboard.html-CW3MtwRv.js" as="script"><link rel="prefetch" href="/assets/kube-state-metrics-k8s-deploy.html-EzXeDHvu.js" as="script"><link rel="prefetch" href="/assets/node-exporter-k8s-deploy.html-Jy64Mcby.js" as="script"><link rel="prefetch" href="/assets/prometheus-k8s-deploy.html-BT6EBDdY.js" as="script"><link rel="prefetch" href="/assets/index.html--DlOXs1Z.js" as="script"><link rel="prefetch" href="/assets/break.html-COM4zAnw.js" as="script"><link rel="prefetch" href="/assets/for-range.html-BQEmnGCR.js" as="script"><link rel="prefetch" href="/assets/goroutine.html-DfByax73.js" as="script"><link rel="prefetch" href="/assets/interface.html-BbuW2ZO1.js" as="script"><link rel="prefetch" href="/assets/mutex.html-Bb0upkiC.js" as="script"><link rel="prefetch" href="/assets/index.html-BKIoVUk3.js" as="script"><link rel="prefetch" href="/assets/array.html-B0dtNnYH.js" as="script"><link rel="prefetch" href="/assets/constant.html-BZLIY3zZ.js" as="script"><link rel="prefetch" href="/assets/data-type.html-BctrbVUe.js" as="script"><link rel="prefetch" href="/assets/defer.html-CQaTqQhz.js" as="script"><link rel="prefetch" href="/assets/enviroment.html-DNPaWrWe.js" as="script"><link rel="prefetch" href="/assets/identifier.html-BqJbX_g5.js" as="script"><link rel="prefetch" href="/assets/iota.html-IqrZNXGM.js" as="script"><link rel="prefetch" href="/assets/map.html-h_C_cs41.js" as="script"><link rel="prefetch" href="/assets/operator.html-BkFHnD4G.js" as="script"><link rel="prefetch" href="/assets/package.html-bajTLq6G.js" as="script"><link rel="prefetch" href="/assets/recover.html-28U7VBz9.js" as="script"><link rel="prefetch" href="/assets/slice.html-CjrOPkZn.js" as="script"><link rel="prefetch" href="/assets/string.html-CZfI_nYl.js" as="script"><link rel="prefetch" href="/assets/variable.html-rCboUUFD.js" as="script"><link rel="prefetch" href="/assets/index.html-V5-Rj7Kj.js" as="script"><link rel="prefetch" href="/assets/blog.html-DkfFMXj-.js" as="script"><link rel="prefetch" href="/assets/book.html-C9uEkDpO.js" as="script"><link rel="prefetch" href="/assets/tool.html-DB1NOAll.js" as="script"><link rel="prefetch" href="/assets/index.html-DEibqBma.js" as="script"><link rel="prefetch" href="/assets/proverb.html-CpNn6ZQT.js" as="script"><link rel="prefetch" href="/assets/tencent-secguide.html-BDMCrzgf.js" as="script"><link rel="prefetch" href="/assets/uber-guide.html-B7vy-sv_.js" as="script"><link rel="prefetch" href="/assets/zen.html-LcqdH0pH.js" as="script"><link rel="prefetch" href="/assets/index.html-B9zjb8mk.js" as="script"><link rel="prefetch" href="/assets/flag.html-CBucQFNp.js" as="script"><link rel="prefetch" href="/assets/index.html-DPUY90LM.js" as="script"><link rel="prefetch" href="/assets/pflag.html-DhMVMGXo.js" as="script"><link rel="prefetch" href="/assets/HTTP.html-dF-cY48n.js" as="script"><link rel="prefetch" href="/assets/index.html-BvBRY-zJ.js" as="script"><link rel="prefetch" href="/assets/websocket.html-CdyWxHGS.js" as="script"><link rel="prefetch" href="/assets/ICMP.html-BN1YTXI0.js" as="script"><link rel="prefetch" href="/assets/index.html-DZce7c4w.js" as="script"><link rel="prefetch" href="/assets/index.html-D4cpjmT1.js" as="script"><link rel="prefetch" href="/assets/index.html-Bt5nC1TJ.js" as="script"><link rel="prefetch" href="/assets/auth.html-Cn_5AKUD.js" as="script"><link rel="prefetch" href="/assets/404.html-hw3x-F_l.js" as="script"><link rel="prefetch" href="/assets/index.html-BpagD52E.js" as="script"><link rel="prefetch" href="/assets/index.html-Cr3o5T84.js" as="script"><link rel="prefetch" href="/assets/index.html-KHKl7EX_.js" as="script"><link rel="prefetch" href="/assets/index.html-DZJDO-rf.js" as="script"><link rel="prefetch" href="/assets/index.html-CmINVIdz.js" as="script"><link rel="prefetch" href="/assets/index.html-BFdBllwq.js" as="script"><link rel="prefetch" href="/assets/index.html-VlHQSYgd.js" as="script"><link rel="prefetch" href="/assets/index.html-DGLq9qE9.js" as="script"><link rel="prefetch" href="/assets/index.html-DJQUFKFw.js" as="script"><link rel="prefetch" href="/assets/index.html-CGXvc3aO.js" as="script"><link rel="prefetch" href="/assets/index.html-BAaP94F7.js" as="script"><link rel="prefetch" href="/assets/index.html-jR3Dg9Tz.js" as="script"><link rel="prefetch" href="/assets/index.html-COAQ4HoR.js" as="script"><link rel="prefetch" href="/assets/index.html-Cra-uru6.js" as="script"><link rel="prefetch" href="/assets/index.html-DYlH-vIM.js" as="script"><link rel="prefetch" href="/assets/index.html-CslzFPtF.js" as="script"><link rel="prefetch" href="/assets/index.html-K6DIpcGS.js" as="script"><link rel="prefetch" href="/assets/index.html-tjBahOaZ.js" as="script"><link rel="prefetch" href="/assets/index.html-Bog0upJZ.js" as="script"><link rel="prefetch" href="/assets/index.html-B1WllyAt.js" as="script"><link rel="prefetch" href="/assets/index.html-BqBXlptT.js" as="script"><link rel="prefetch" href="/assets/index.html-DRw_JJST.js" as="script"><link rel="prefetch" href="/assets/index.html-CKLuDkSj.js" as="script"><link rel="prefetch" href="/assets/index.html-BuXIjmSu.js" as="script"><link rel="prefetch" href="/assets/index.html-CNgUHd1i.js" as="script"><link rel="prefetch" href="/assets/index.html-DB6WeRN7.js" as="script"><link rel="prefetch" href="/assets/index.html-zJdh0R4Q.js" as="script"><link rel="prefetch" href="/assets/index.html-GPGoN4OW.js" as="script"><link rel="prefetch" href="/assets/index.html-BDYaoPQ3.js" as="script"><link rel="prefetch" href="/assets/index.html-C7aHef9y.js" as="script"><link rel="prefetch" href="/assets/index.html-CQO4EuNS.js" as="script"><link rel="prefetch" href="/assets/index.html-0c7-W0Jt.js" as="script"><link rel="prefetch" href="/assets/index.html-guRZIeS3.js" as="script"><link rel="prefetch" href="/assets/index.html-B0SNhmrX.js" as="script"><link rel="prefetch" href="/assets/index.html-p_ttPf2J.js" as="script"><link rel="prefetch" href="/assets/index.html-BLAsJVLc.js" as="script"><link rel="prefetch" href="/assets/index.html-CH84IdsL.js" as="script"><link rel="prefetch" href="/assets/index.html-6dMhaNap.js" as="script"><link rel="prefetch" href="/assets/index.html-34NmMPDR.js" as="script"><link rel="prefetch" href="/assets/index.html-DAbnYfeZ.js" as="script"><link rel="prefetch" href="/assets/index.html-CMnzTY1i.js" as="script"><link rel="prefetch" href="/assets/index.html-DFBotqTt.js" as="script"><link rel="prefetch" href="/assets/index.html-D4Ty8q8X.js" as="script"><link rel="prefetch" href="/assets/index.html-BVPR8Vcu.js" as="script"><link rel="prefetch" href="/assets/index.html-CRtG3uzl.js" as="script"><link rel="prefetch" href="/assets/index.html-DKA9CQs9.js" as="script"><link rel="prefetch" href="/assets/index.html-42ztIhfI.js" as="script"><link rel="prefetch" href="/assets/index.html-B4SlB1HK.js" as="script"><link rel="prefetch" href="/assets/index.html-BlPWZFLO.js" as="script"><link rel="prefetch" href="/assets/index.html-BTPX7T2F.js" as="script"><link rel="prefetch" href="/assets/index.html-ChIVyVCg.js" as="script"><link rel="prefetch" href="/assets/index.html-CToLyElQ.js" as="script"><link rel="prefetch" href="/assets/index.html-CHYWvRVR.js" as="script"><link rel="prefetch" href="/assets/index.html-CelwS1jb.js" as="script"><link rel="prefetch" href="/assets/index.html-bbKhCzrT.js" as="script"><link rel="prefetch" href="/assets/index.html-CqtEqExH.js" as="script"><link rel="prefetch" href="/assets/index.html-DKA9CQs9.js" as="script"><link rel="prefetch" href="/assets/index.html-CMnzTY1i.js" as="script"><link rel="prefetch" href="/assets/index.html-B_lfogn3.js" as="script"><link rel="prefetch" href="/assets/index.html-C7aHef9y.js" as="script"><link rel="prefetch" href="/assets/index.html-EHT_qsDq.js" as="script"><link rel="prefetch" href="/assets/index.html-CeIMk4Zb.js" as="script"><link rel="prefetch" href="/assets/index.html-BaW1bjnj.js" as="script"><link rel="prefetch" href="/assets/index.html-CCEzZlZq.js" as="script"><link rel="prefetch" href="/assets/index.html-DEPC0YZ0.js" as="script"><link rel="prefetch" href="/assets/index.html-zQ6bQku8.js" as="script"><link rel="prefetch" href="/assets/index.html-DuywdH2U.js" as="script"><link rel="prefetch" href="/assets/index.html-C5_YBSFA.js" as="script"><link rel="prefetch" href="/assets/index.html-CbPflwKC.js" as="script"><link rel="prefetch" href="/assets/index.html-SARxLD6s.js" as="script"><link rel="prefetch" href="/assets/index.html-DR2EZuJL.js" as="script"><link rel="prefetch" href="/assets/index.html-Baj_TKme.js" as="script"><link rel="prefetch" href="/assets/index.html-DQ2oC0B1.js" as="script"><link rel="prefetch" href="/assets/index.html-TVYZFuye.js" as="script"><link rel="prefetch" href="/assets/index.html-Dg_JoLKY.js" as="script"><link rel="prefetch" href="/assets/index.html-D1EdW4vk.js" as="script"><link rel="prefetch" href="/assets/index.html-tQ6EPvCg.js" as="script"><link rel="prefetch" href="/assets/index.html-DOsZz7Fq.js" as="script"><link rel="prefetch" href="/assets/giscus-7BMGhbDA.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-CYbl4_PU.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-BG2Xu2Hd.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-B2Y_eiOr.js" as="script"><link rel="prefetch" href="/assets/math.esm-DN7Rh_EM.js" as="script"><link rel="prefetch" href="/assets/search.esm-DuBqnxcF.js" as="script"><link rel="prefetch" href="/assets/notes.esm-DcquA2oP.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-Ctj_eavO.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script"><link rel="prefetch" href="/assets/SearchResult-DeO7prf2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.png" alt><!----><span class="vp-site-name hide-in-pad">ä¸ªäººåšå®¢</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="åšå®¢ä¸»é¡µ"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/design-pattern/" aria-label="è®¾è®¡æ¨¡å¼"><span class="font-icon icon fa-fw fa-sm fas fa-project-diagram" style=""></span>è®¾è®¡æ¨¡å¼<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/go-language/" aria-label="Goè¯­è¨€"><span class="font-icon icon fa-fw fa-sm fas fa-language" style=""></span>Goè¯­è¨€<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/database/" aria-label="æ•°æ®åº“"><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span>æ•°æ®åº“<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link active" href="/network/" aria-label="ç½‘ç»œ"><span class="font-icon icon fa-fw fa-sm fas fa-network-wired" style=""></span>ç½‘ç»œ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/devops/" aria-label="devops"><span class="font-icon icon fa-fw fa-sm fas fa-rocket" style=""></span>devops<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/project-standard/" aria-label="é¡¹ç›®è§„èŒƒ"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span>é¡¹ç›®è§„èŒƒ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/CHANGELOG.html" aria-label="å˜æ›´æ—¥å¿—"><span class="font-icon icon fa-fw fa-sm fas fa-clock" style=""></span>å˜æ›´æ—¥å¿—<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Hexiaopi/Hexiaopi.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/" aria-label="åšå®¢ä¸»é¡µ"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>åšå®¢ä¸»é¡µ<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/intro.html" aria-label="ä»‹ç»é¡µ"><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span>ä»‹ç»é¡µ<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/slides.html" aria-label="å¹»ç¯ç‰‡é¡µ"><span class="font-icon icon fa-fw fa-sm fas fa-person-chalkboard" style=""></span>å¹»ç¯ç‰‡é¡µ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-project-diagram" style=""></span><a class="route-link nav-link vp-sidebar-title" href="/design-pattern/" aria-label="è®¾è®¡æ¨¡å¼"><!---->è®¾è®¡æ¨¡å¼<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-language" style=""></span><span class="vp-sidebar-title">Goè¯­è¨€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span><a class="route-link nav-link vp-sidebar-title" href="/database/" aria-label="æ•°æ®åº“"><!---->æ•°æ®åº“<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-network-wired" style=""></span><a class="route-link nav-link active vp-sidebar-title" href="/network/" aria-label="ç½‘ç»œ"><!---->ç½‘ç»œ<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><a class="route-link nav-link active vp-sidebar-title" href="/network/application-layer/" aria-label="åº”ç”¨å±‚åè®®"><!---->åº”ç”¨å±‚åè®®<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/network/application-layer/" aria-label="åº”ç”¨å±‚åè®®"><!---->åº”ç”¨å±‚åè®®<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/network/application-layer/HTTP.html" aria-label="HTTPåè®®"><!---->HTTPåè®®<!----></a></li><li><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/network/application-layer/MQTT.html" aria-label="MQTTåè®®"><!---->MQTTåè®®<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/network/application-layer/websocket.html" aria-label="WebSocketåè®®"><!---->WebSocketåè®®<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><a class="route-link nav-link vp-sidebar-title" href="/network/transport-layer/" aria-label="ä¼ è¾“å±‚åè®®"><!---->ä¼ è¾“å±‚åè®®<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><a class="route-link nav-link vp-sidebar-title" href="/network/internet-layer/" aria-label="ç½‘ç»œå±‚åè®®"><!---->ç½‘ç»œå±‚åè®®<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><a class="route-link nav-link vp-sidebar-title" href="/network/link-layer/" aria-label="é“¾è·¯å±‚åè®®"><!---->é“¾è·¯å±‚åè®®<!----></a><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-rocket" style=""></span><a class="route-link nav-link vp-sidebar-title" href="/devops/" aria-label="devops"><!---->devops<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><a class="route-link nav-link vp-sidebar-title" href="/project-standard/" aria-label="é¡¹ç›®è§„èŒƒ"><!---->é¡¹ç›®è§„èŒƒ<!----></a><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->MQTTåè®®</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/Hexiaopi" target="_blank" rel="noopener noreferrer">Hexiaopi</a></span><span property="author" content="Hexiaopi"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-08-26T00:00:00.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/network/application-layer/MQTT.html" data-page-key="/network/application-layer/MQTT.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 18 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT18M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category1 clickable" role="navigation">ç½‘ç»œ</span><!--]--><meta property="articleSection" content="ç½‘ç»œ"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag7 clickable" role="navigation">MQTT</span><!--]--><meta property="keywords" content="MQTT"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å‘å±•å†å²">å‘å±•å†å²</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¼˜ç‚¹">ä¼˜ç‚¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é€šä¿¡æ¨¡å¼">é€šä¿¡æ¨¡å¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç‰¹ç‚¹">ç‰¹ç‚¹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸»é¢˜-topic">ä¸»é¢˜ Topic</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æœåŠ¡è´¨é‡-qos">æœåŠ¡è´¨é‡ QoS</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ¶ˆæ¯ç±»å‹">æ¶ˆæ¯ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¿æŒè¿æ¥-keepalive">ä¿æŒè¿æ¥ keepAlive</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ¶ˆæ¯ä¿ç•™æœºåˆ¶">æ¶ˆæ¯ä¿ç•™æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸´ç»ˆé—å˜±-lastwill">ä¸´ç»ˆé—å˜± lastWill</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äº¤äº’æµç¨‹">äº¤äº’æµç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æŠ¥æ–‡ç»“æ„">æŠ¥æ–‡ç»“æ„</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å›ºå®šæŠ¥å¤´">å›ºå®šæŠ¥å¤´</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¯å˜æŠ¥å¤´">å¯å˜æŠ¥å¤´</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#mqtt5æ–°ç‰¹æ€§">MQTT5æ–°ç‰¹æ€§</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è‡ªå®šä¹‰mqttåè®®å¤´">è‡ªå®šä¹‰MQTTåè®®å¤´</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸå› ç -reason-codes">åŸå› ç  Reason Codes</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸æ”¯æŒç‰¹æ€§è¿”å›ç ">ä¸æ”¯æŒç‰¹æ€§è¿”å›ç </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ¸…ç†ä¼šè¯">æ¸…ç†ä¼šè¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#authæ•°æ®åŒ…">AUTHæ•°æ®åŒ…</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŒå‘æ–­å¼€disconnect">åŒå‘æ–­å¼€DISCONNECT</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#qosçº§åˆ«1ä¸2æ¶ˆæ¯ä¸å†é‡è¯•">QoSçº§åˆ«1ä¸2æ¶ˆæ¯ä¸å†é‡è¯•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å®‰å…¨">å®‰å…¨</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¼ è¾“å±‚è®¤è¯">ä¼ è¾“å±‚è®¤è¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åº”ç”¨å±‚è®¤è¯">åº”ç”¨å±‚è®¤è¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#brokerç®¡ç†">Brokerç®¡ç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¼€æºmqtt-broker">å¼€æºMQTT broker</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><blockquote><p>MQTT(Mesage Queuing Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“åè®®)ï¼Œæ˜¯ä¸€ç§åŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„è½»é‡çº§é€šè®¯åè®®ï¼Œè¯¥åè®®æ„å»ºäºTCP/IPåè®®ä¸Šã€‚</p></blockquote><h2 id="å‘å±•å†å²" tabindex="-1"><a class="header-anchor" href="#å‘å±•å†å²"><span>å‘å±•å†å²</span></a></h2><ul><li>1999å¹´ç”±IBMå‘æ˜ï¼Œèµ·åˆç”¨äºåŸæ²¹ç®¡é“æ•°æ®é‡‡é›†ç›‘æ§ç³»ç»Ÿï¼Œè§£å†³å«æ˜Ÿä¸åŸæ²¹ç®¡é“æ£€æµ‹æ•°æ®çš„ä¼ è¾“é—®é¢˜ã€‚</li><li>2010 å‘å¸ƒMQTT 3.1ã€‚</li><li>2014å¹´åœ¨ <strong>OASIS</strong> æ ‡å‡†åŒ–ç»„ç»‡çš„æ¨åŠ¨ä¸‹äºå…¬å¸ƒäº† <a href="https://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html" target="_blank" rel="noopener noreferrer"><code>V3.1.1</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç‰ˆæœ¬è§„èŒƒã€‚</li><li>2019å¹´3æœˆå‘å¸ƒäº†æœ€æ–°çš„ <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/cs02/mqtt-v5.0-cs02.html" target="_blank" rel="noopener noreferrer"><code>V5.0</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç‰ˆæœ¬è§„èŒƒã€‚</li></ul><h2 id="ä¼˜ç‚¹" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹"><span>ä¼˜ç‚¹</span></a></h2><ul><li>æ”¯æŒQoSï¼ˆè®¾å¤‡ç½‘ç»œç¯å¢ƒå¤æ‚ï¼‰</li><li>è½»é‡ä¸”çœå¸¦å®½ï¼ˆMQTTæŠ¥æ–‡ç´§å‡‘ï¼Œå¯åœ¨ä¸¥é‡å—é™çš„ç¡¬ä»¶è®¾å¤‡å’Œä½å¸¦å®½ã€é«˜å»¶è¿Ÿçš„ç½‘ç»œä¸Šå®ç°ç¨³å®šä¼ è¾“ï¼‰</li><li>å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå°†å‘å¸ƒè€…ä¸è®¢é˜…è€…è§£è€¦</li><li>æŒç»­ä¼šè¯æ„ŸçŸ¥èƒ½åŠ›ï¼ˆæ—¶åˆ»çŸ¥é“è®¾å¤‡æ˜¯å¦åœ¨çº¿ï¼‰</li></ul><h2 id="é€šä¿¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é€šä¿¡æ¨¡å¼"><span>é€šä¿¡æ¨¡å¼</span></a></h2><blockquote><p>å‘å¸ƒ/è®¢é˜…æ¨¡å¼(Publish/Subscribe)å°†å‘é€æ¶ˆæ¯çš„å‘å¸ƒè€…(Publisher)ä¸æ¥æ”¶æ¶ˆæ¯çš„è®¢é˜…è€…(Subscriber)åˆ†ç¦»ï¼Œä¹‹é—´çš„è¿æ¥å…³ç³»ç”±ä»£ç†è€…(Broker)è¿›è¡Œå¤„ç†ã€‚ä¸¤è€…ä¸ç›´æ¥è¿›è¡Œé€šä¿¡ï¼Œç”šè‡³å½¼æ­¤ä¹‹å‰éƒ½ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ã€‚</p></blockquote><figure><img src="/assets/MQTT%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%BC%8F-CRbGB6zu.png" alt="MQTTé€šä¿¡æ¨¡å¼" tabindex="0" loading="lazy"><figcaption>MQTTé€šä¿¡æ¨¡å¼</figcaption></figure><h3 id="ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#ç‰¹ç‚¹"><span>ç‰¹ç‚¹</span></a></h3><blockquote><p>å‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„é‡è¦ç‰¹æ€§å°±æ˜¯å°†æ¶ˆæ¯çš„å‘å¸ƒè€…ä¸è®¢é˜…è€…è§£è€¦ï¼Œè¿™ç§è§£è€¦ä½“ç°åœ¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p><ul><li>ç©ºé—´è§£è€¦ï¼šå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸éœ€è¦ç›¸äº’äº†è§£ï¼ˆä¾‹å¦‚æ— é¡»äº¤æ¢IPåœ°å€ä¸ç«¯å£ï¼‰ï¼›</li><li>æ—¶é—´è§£è€¦ï¼šå‘å¸ƒè€…ä¸è®¢é˜…è€…çš„æ“ä½œä¸éœ€è¦åŒæ—¶è¿è¡Œï¼ˆå¯ä¸‹çº¿ï¼‰ï¼›</li><li>åŒæ­¥è§£è€¦ï¼šåœ¨å‘å¸ƒæˆ–è€…è®¢é˜…æ¶ˆæ¯çš„è¿‡ç¨‹å½“ä¸­ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…å¯ä»¥å¼‚æ­¥è¿›è¡Œå·¥ä½œï¼ˆC/Sæ¨¡å¼éœ€è¦å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯ç­‰å¾…ï¼‰ï¼›</li></ul></blockquote><p>Brokeré€šè¿‡æŸç§<strong>è¿‡æ»¤è§„åˆ™</strong>å°†Publisherçš„æ¶ˆæ¯å‘é€ç»™Subscriberï¼Œè¯¥<strong>è¿‡æ»¤è§„åˆ™</strong>å°±æ˜¯<strong>Topic</strong></p><h2 id="æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒæ¦‚å¿µ"><span>æ ¸å¿ƒæ¦‚å¿µ</span></a></h2><h3 id="ä¸»é¢˜-topic" tabindex="-1"><a class="header-anchor" href="#ä¸»é¢˜-topic"><span>ä¸»é¢˜ Topic</span></a></h3><blockquote><p>MQTT åè®®çš„<strong>ä¸»é¢˜</strong>ï¼ˆTopicï¼‰æ˜¯æŒ‡<strong>ä»£ç†è€…</strong>ç”¨äºä¸º<strong>å®¢æˆ·ç«¯</strong>è¿‡æ»¤ä¸è·¯ç”±æ¶ˆæ¯çš„ <strong>UTF-8 ç¼–ç å­—ç¬¦ä¸²</strong></p><p>ä¸€ä¸ª<strong>ä¸»é¢˜</strong>æ˜¯ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ª<strong>ä¸»é¢˜çº§åˆ«</strong>ï¼ˆTopic Levelï¼‰æ„æˆï¼Œæ¯ä¸ªä¸»é¢˜çº§åˆ«ç”±æ­£æ–œçº¿ <code>/</code> è¿›è¡Œåˆ†éš”ã€‚</p><p>ä¾‹å¦‚ï¼š&lt;çˆ¶çº§Topicåç§°&gt;/&lt;äºŒçº§Topicåç§°&gt;/&lt;ä¸‰çº§Topicåç§°&gt;</p><p>æ¯ä¸ª<strong>ä¸»é¢˜</strong>å¿…é¡»è‡³å°‘åŒ…å« 1 ä¸ªå­—ç¬¦ï¼ˆä¸€ä¸ªå•ç‹¬çš„æ–œæ† <code>/</code> ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ä¸»é¢˜ï¼‰ï¼Œå¹¶ä¸”ä¸»é¢˜å­—ç¬¦ä¸²å…è®¸å­˜åœ¨<strong>ç©ºæ ¼</strong>ã€‚</p><p>ä¸»é¢˜<strong>åŒºåˆ†å¤§å°å†™</strong>ï¼Œ<code>home/temperature</code> ä¸ <code>Home/Temperature</code> æ˜¯ 2 ä¸ªä¸åŒçš„<strong>ä¸»é¢˜</strong>ã€‚</p><p>ä¸»é¢˜ä¸éœ€è¦æå‰åˆ›å»ºï¼Œå‘å¸ƒè€…å‘é€æ¶ˆæ¯åˆ°æŸä¸ªä¸»é¢˜æˆ–è®¢é˜…è€…è®¢é˜…æŸä¸ªä¸»é¢˜æ—¶ï¼ŒBrokerå°±ä¼šè‡ªåŠ¨åˆ›å»º</p></blockquote><h4 id="é€šé…ç¬¦" tabindex="-1"><a class="header-anchor" href="#é€šé…ç¬¦"><span>é€šé…ç¬¦</span></a></h4><ul><li><p>å•çº§é€šé…ç¬¦ï¼š<code>+</code></p><blockquote><p>åªèƒ½åŒ¹é…ä¸€ä¸ªä¸»é¢˜çº§åˆ«</p></blockquote></li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>  ä¾‹å¦‚ï¼šè®¢é˜…myhome/groundfloor/+/temperature
  myhome/groundfloor/livingroom/temperature		//åŒ¹é…
  myhome/groundfloor/kitchen/temperature			//åŒ¹é…
  myhome/groundfloor/kitchen/brightness			//ä¸åŒ¹é…
  myhome/firstfloor/kitchen/temperature			//ä¸åŒ¹é…
  myhome/groundfloor/kitchen/fridge/temperature	//ä¸åŒ¹é…
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>å¤šçº§é€šé…ç¬¦ï¼š<code>#</code></p><blockquote><p>å¯ä»¥åŒ¹é…å¤šä¸ªä¸»é¢˜çº§åˆ«</p></blockquote></li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>  ä¾‹å¦‚ï¼šè®¢é˜…myhome/groundfloor/#
  myhome/groundfloor/livingroom/temperature		//åŒ¹é…
  myhome/groundfloor/kitchen/temperature			//åŒ¹é…
  myhome/groundfloor/kitchen/brightness			//åŒ¹é…
  myhome/firstfloor/kitchen/temperature			//ä¸åŒ¹é…
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>ç³»ç»Ÿä¿ç•™ä¸»é¢˜ï¼š<code>$</code></p><blockquote><p>MQTTç³»ç»Ÿå†…éƒ¨ä¿ç•™ï¼Œç”¨äºä»£ç†è€…å†…éƒ¨ç»Ÿè®¡ä¿¡æ¯</p></blockquote></li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>  $SYS/broker/clients/disconnected
  $SYS/broker/clients/connected
  $SYS/broker/messages/sent
  $SYS/broker/clients/total
  $SYS/broker/uptime
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç”¨ä¾‹" tabindex="-1"><a class="header-anchor" href="#ç”¨ä¾‹"><span>ç”¨ä¾‹</span></a></h4><p>æ¯”å¦‚æˆ‘ä»¬ç”¨ä¼ æ„Ÿå™¨ç›‘è§†å®¶é‡Œçš„å§å®¤ã€å®¢å…ä»¥åŠå¨æˆ¿çš„æ¸©åº¦ã€æ¹¿åº¦å’Œç©ºæ°”è´¨é‡ï¼Œå¯ä»¥è®¾è®¡ä¸€ä¸‹å‡ ä¸ªä¸»é¢˜ï¼š</p><ul><li><code>myhome/bedroom/temperature</code></li><li><code>myhome/bedroom/humidity</code></li><li><code>myhome/bedroom/airquality</code></li><li><code>myhome/livingroom/temperature</code></li><li><code>myhome/livingroom/humidity</code></li><li><code>myhome/livingroom/airquality</code></li><li><code>myhome/kitchen/temperature</code></li><li><code>myhome/kitchen/humidity</code></li><li><code>myhome/kitchen/airquality</code></li></ul><p>å½“æˆ‘ä»¬æƒ³è·å–å§å®¤çš„æ‰€æœ‰æ•°æ®æ—¶ï¼Œå¯ä»¥è®¢é˜… <code>myhome/bedroom/+</code> ä¸»é¢˜ï¼Œå½“æˆ‘ä»¬æƒ³è·å–ä¸‰ä¸ªæˆ¿é—´çš„æ¸©åº¦æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥è®¢é˜… <code>myhome/+/temperature</code> ä¸»é¢˜ï¼Œå½“æˆ‘ä»¬æƒ³è·å–æ‰€æœ‰çš„æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥è®¢é˜… <code>myhome/#</code> æˆ–è€… <code>#</code>ã€‚</p><h4 id="æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®è·µ"><span>æœ€ä½³å®è·µ</span></a></h4><ul><li>åˆ‡å‹¿åœ¨ä¸»é¢˜å¼€å¤´ä½¿ç”¨æ­£æ–œæ  <code>/</code>ï¼Œé¿å…å¼•å…¥ä¸€ä¸ª<strong>é›¶å­—ç¬¦</strong>ä½œä¸ºä¸å¿…è¦çš„ä¸»é¢˜çº§åˆ«ï¼›</li><li>æ°¸è¿œä¸è¦åœ¨ä¸»é¢˜ä¸­ä½¿ç”¨ç©ºæ ¼ï¼ˆåŒ…æ‹¬ UTF-8 å½“ä¸­ä¸åŒç±»å‹çš„ç©ºç™½ï¼‰ï¼Œä»è€Œé¿å…ä¸ºé˜…è¯»å’Œè°ƒè¯•å¸¦æ¥ä¸å¿…è¦çš„å›°æ‰°ï¼›</li><li>å°½é‡ä¿æŒä¸»é¢˜ç®€çŸ­ï¼Œå¯¹äºèµ„æºæœ‰é™çš„ç‰©è”ç½‘è®¾å¤‡ï¼Œæ¯ä¸ªå­—èŠ‚å ç”¨çš„å­˜å‚¨ç©ºé—´éƒ½éå¸¸é‡è¦ï¼›</li><li>ä»…ä½¿ç”¨ ASCII å­—ç¬¦ï¼Œé¿å…ä½¿ç”¨ä¸€äº›ä¸å¯æ‰“å°çš„å­—ç¬¦ï¼›</li><li>å°†å”¯ä¸€æ ‡è¯†ç¬¦æˆ–è€…<strong>å®¢æˆ·ç«¯</strong> ID åµŒå…¥ä¸»é¢˜ï¼Œä»è€Œæ–¹ä¾¿çš„è¯†åˆ«æ¶ˆæ¯çš„å‘é€è€…ï¼›</li><li>ä¸è¦è½»æ˜“ç›´æ¥è®¢é˜… <code>#</code>ï¼Œå³ä¸è¦ç›´æ¥ä½¿ç”¨<strong>å¤šçº§é€šé…ç¬¦</strong>è®¢é˜…<strong>ä»£ç†è€…</strong>ä¸Šå‘å¸ƒçš„å…¨éƒ¨æ¶ˆæ¯ï¼Œé¿å…ç»™<strong>è®¢é˜…è€…</strong>å¸¦æ¥è¿‡å¤§çš„æ•°æ®ååé‡ï¼›</li><li>ä¼˜åŒ–ä¸»é¢˜å±‚æ¬¡ç»“æ„ï¼Œä¿æŒä¸»é¢˜å‘½åçš„é•¿æœŸæ‰©å±•æ€§ï¼›</li></ul><h3 id="æœåŠ¡è´¨é‡-qos" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡è´¨é‡-qos"><span>æœåŠ¡è´¨é‡ QoS</span></a></h3><ul><li>QoS-0(è‡³å¤šä¸€æ¬¡)ï¼šæ¥æ”¶æ–¹ä¸ä¼šç¡®è®¤æ”¶åˆ°æ¶ˆæ¯ï¼Œå‘é€å‘ä¹Ÿä¸ä¼šå­˜å‚¨å’Œé‡æ–°ä¼ è¾“æ¶ˆæ¯ï¼Œæ¶ˆæ¯å‘å¸ƒå®Œå…¨ä¾èµ–åº•å±‚TCP/IPç½‘ç»œï¼Œæ¶ˆæ¯å¯èƒ½ä¼šä¸¢å¤±ã€‚</li><li>QoS-1(è‡³å°‘ä¸€æ¬¡)ï¼šå‘é€æ–¹ä¼šå­˜å‚¨æ¶ˆæ¯ç›´è‡³æ¥æ”¶æ–¹è·å¾—ç¡®è®¤æ¶ˆæ¯çš„PUBACKæ•°æ®åŒ…ä¸ºæ­¢ï¼Œç¡®ä¿æ¶ˆæ¯åˆ°è¾¾ï¼Œä½†å¯èƒ½ä¼šå‡ºç°é‡å¤ï¼›</li><li>QoS-2(åªæœ‰ä¸€æ¬¡)ï¼šç¡®ä¿æ¶ˆæ¯åˆ°è¾¾ä¸”æ²¡æœ‰é‡å¤ã€‚</li></ul><figure><img src="/assets/MQTT-QoS-BKr96jNV.png" alt="MQTT-QoS" tabindex="0" loading="lazy"><figcaption>MQTT-QoS</figcaption></figure><p>http://www.steves-internet-guide.com/mqtt-publish-subscribe/</p><ul><li>å½“å®¢æˆ·ç«¯ A çš„å‘å¸ƒ QoS å¤§äºå®¢æˆ·ç«¯ B çš„è®¢é˜… QoS æ—¶ï¼ŒæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯ B è½¬å‘æ¶ˆæ¯æ—¶ä½¿ç”¨çš„ QoS ä¸ºå®¢æˆ·ç«¯ B çš„è®¢é˜… QoSã€‚</li><li>å½“å®¢æˆ·ç«¯ A çš„å‘å¸ƒ QoS å°äºå®¢æˆ·ç«¯ B çš„è®¢é˜… QoS æ—¶ï¼ŒæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯ B è½¬å‘æ¶ˆæ¯æ—¶ä½¿ç”¨çš„ QoS ä¸ºå®¢æˆ·ç«¯ A çš„å‘å¸ƒ QoS</li></ul><h3 id="æ¶ˆæ¯ç±»å‹" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯ç±»å‹"><span>æ¶ˆæ¯ç±»å‹</span></a></h3><ul><li>CONNECT/CONNACK è¿æ¥ç›¸å…³</li><li>PUBLISH/PUBACK å‘å¸ƒç›¸å…³</li><li>SUBSCRIBE/SUBACK è®¢é˜…ç›¸å…³</li><li>UNSUBSCRIBE/UNSUBACK å–æ¶ˆè®¢é˜…ç›¸å…³</li><li>PINGREQ/PINGRESP å¿ƒè·³ç›¸å…³</li><li>DISCONNECT å…³é—­è¿æ¥</li></ul><h4 id="connect" tabindex="-1"><a class="header-anchor" href="#connect"><span>CONNECT</span></a></h4><figure><img src="http://www.uinio.com/Embedded/MQTT/4.png" alt="MQTT-CONNECT" tabindex="0" loading="lazy"><figcaption>MQTT-CONNECT</figcaption></figure><ul><li><strong>å®¢æˆ·ç«¯æ ‡è¯†ç¬¦</strong> <code>clientId</code>ï¼šç”¨äºæ ‡è¯†è¿æ¥åˆ°<strong>ä»£ç†è€…</strong>çš„æ¯ä¸ª<strong>å®¢æˆ·ç«¯</strong>ï¼Œè¯¥æ ‡è¯†ç¬¦çš„å–å€¼å¯¹äº<strong>ä»£ç†è€…</strong>ä¸<strong>å®¢æˆ·ç«¯</strong>è€Œè¨€å¿…é¡»å”¯ä¸€ï¼›</li><li><strong>æ¸…ç†ä¼šè¯</strong> <code>cleanSession</code>ï¼šç”¨äºå‘ŠçŸ¥<strong>ä»£ç†è€…</strong>ï¼Œå½“å‰<strong>å®¢æˆ·ç«¯</strong>æ˜¯å¦éœ€è¦å»ºç«‹æŒä¹…ä¼šè¯ï¼› <ul><li>å½“ <code>CleanSession = false</code> æ—¶ï¼Œ<strong>ä»£ç†è€…</strong>å°†å­˜å‚¨<strong>å®¢æˆ·ç«¯</strong>çš„æ‰€æœ‰è®¢é˜…ï¼Œä»¥åŠå®¢æˆ·ç«¯ä»¥<strong>æœåŠ¡è´¨é‡</strong>ï¼ˆQoSï¼‰çº§åˆ« <code>1</code> æˆ–è€… <code>2</code> æ‰€è®¢é˜…çš„å…¨éƒ¨é—æ¼æ¶ˆæ¯ï¼›</li><li>å½“ <code>CleanSession = true</code> æ—¶ï¼Œ<strong>ä»£ç†è€…</strong>ä¸ä½†ä¸ä¼šä¸º<strong>å®¢æˆ·ç«¯</strong>ä¿å­˜ä»»ä½•æ¶ˆæ¯ï¼Œè¿˜ä¼šæ¸…é™¤æ‰æ¥è‡ªäºä¹‹å‰æŒä¹…ä¼šè¯çš„æ‰€æœ‰æ¶ˆæ¯ï¼›</li></ul></li><li><strong>ç”¨æˆ·å/å¯†ç </strong> <code>username</code>/<code>password</code>ï¼šç”¨äºå¯¹<strong>å®¢æˆ·ç«¯</strong>è¿›è¡Œè®¤è¯ä¸æˆæƒï¼Œé»˜è®¤ä¸ºæ˜æ–‡ä¼ è¾“ï¼Œå®é™…åº”ç”¨å½“ä¸­åº”å½“è¿›è¡ŒåŠ å¯†å¤„ç†ï¼›</li><li><strong>ä¸´ç»ˆé—å˜±</strong> <code>lastWill*</code>ï¼šå±äº MQTT <strong>ä¸´ç»ˆé—å˜±</strong>ï¼ˆLWTï¼ŒLast Will and Testamentï¼‰ç‰¹æ€§çš„ä¸€éƒ¨åˆ†ï¼Œå½“<strong>å®¢æˆ·ç«¯</strong>éæ­£å¸¸æ–­å¼€è¿æ¥æ—¶ï¼Œç”¨äºå‘é€é—å˜±æ¶ˆæ¯é€šçŸ¥å…¶å®ƒçš„<strong>å®¢æˆ·ç«¯</strong>ï¼›</li><li><strong>ä¿æŒè¿æ¥</strong> <code>keepAlive</code>ï¼šç”¨äºæŒ‡å®š<strong>å®¢æˆ·ç«¯</strong>åœ¨è¿æ¥å»ºç«‹æ—¶ï¼Œä¸<strong>ä»£ç†è€…</strong>é€šä¿¡çš„æ—¶é—´é—´éš”ï¼ˆä»¥<strong>ç§’</strong>ä¸ºå•ä½ï¼‰ï¼Œå³<strong>ä»£ç†è€…</strong>ä¸<strong>å®¢æˆ·ç«¯</strong>åœ¨ä¸å‘é€æ¶ˆæ¯çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¿æŒè¿æ¥çš„æœ€é•¿æ—¶é—´ï¼›</li></ul><h4 id="connack" tabindex="-1"><a class="header-anchor" href="#connack"><span>CONNACK</span></a></h4><figure><img src="http://www.uinio.com/Embedded/MQTT/5.png" alt="MQTT-CONNACK" tabindex="0" loading="lazy"><figcaption>MQTT-CONNACK</figcaption></figure><ul><li><p><strong>ä¼šè¯å‡ºç°æ ‡è¯†</strong> <code>sessionPresent</code>ï¼šç”¨äºå‘ŠçŸ¥<strong>å®¢æˆ·ç«¯</strong>ï¼Œå½“å‰çš„<strong>ä»£ç†è€…</strong>æ˜¯å¦å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªä¼šè¯ï¼›å½“<strong>å®¢æˆ·ç«¯</strong>è¿æ¥æ¶ˆæ¯çš„ <code>cleanSession = true</code> æ—¶ï¼Œç”±äºå½“å‰æ²¡æœ‰å¯ç”¨çš„ä¼šè¯ï¼Œæ‰€ä»¥è¯¥é¡¹æ€»æ˜¯ä¸º <code>false</code>ï¼›è€Œå½“<strong>å®¢æˆ·ç«¯</strong>è¿æ¥æ¶ˆæ¯çš„ <code>cleanSession = false</code> æ—¶ï¼Œæ­¤æ—¶å°±ä¼šå­˜åœ¨ä¸¤ç§å¯èƒ½æ€§ï¼š</p><ul><li>å¦‚æœä¼šè¯æ¶ˆæ¯å¯¹äº <code>clientId</code> å¯ç”¨ï¼Œå¹¶ä¸”<strong>ä»£ç†è€…</strong>æœåŠ¡å·²ç»ç¼“å­˜äº†è¿™äº›ä¼šè¯ä¿¡æ¯ï¼Œé‚£ä¹ˆ <code>sessionPresent</code> ä¸º <code>true</code>ï¼›</li><li>åä¹‹ï¼Œå¦‚æœ<strong>ä»£ç†è€…</strong>æ²¡æœ‰ä»»ä½•è¿™ä¸ª <code>clientId</code> çš„ä¼šè¯ä¿¡æ¯ï¼Œé‚£ä¹ˆè¯¥é¡¹å°±ä¸º <code>false</code>ï¼›</li></ul></li><li><p><strong>è¿æ¥è¿”å›ç </strong> <code>returnCode</code>ï¼šç”¨äºé€šçŸ¥<strong>å®¢æˆ·ç«¯</strong>å½“å‰è¿æ¥æ˜¯å¦æˆåŠŸï¼Œå…·ä½“å–å€¼è¯·å‚è€ƒä¸‹é¢è¡¨æ ¼ï¼š</p><table><thead><tr><th style="text-align:center;">è¿”å›ä»£ç </th><th>è¿”å›ç å“åº”</th></tr></thead><tbody><tr><td style="text-align:center;"><code>0</code></td><td>å·²æ¥å—è¿æ¥ï¼›</td></tr><tr><td style="text-align:center;"><code>1</code></td><td>è¿æ¥è¢«æ‹’ç»ï¼Œä¸å¯æ¥å—çš„åè®®ç‰ˆæœ¬ï¼›</td></tr><tr><td style="text-align:center;"><code>2</code></td><td>è¿æ¥è¢«æ‹’ç»ï¼Œæ ‡è¯†ç¬¦è¢«æ‹’ç»ï¼›</td></tr><tr><td style="text-align:center;"><code>3</code></td><td>è¿æ¥è¢«æ‹’ç»ï¼ŒæœåŠ¡å™¨ä¸å¯ç”¨ï¼›</td></tr><tr><td style="text-align:center;"><code>4</code></td><td>è¿æ¥è¢«æ‹’ç»ï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼›</td></tr><tr><td style="text-align:center;"><code>5</code></td><td>è¿æ¥è¢«æ‹’ç»ï¼Œæœªè·å¾—æˆæƒï¼›</td></tr></tbody></table></li></ul><h4 id="publish" tabindex="-1"><a class="header-anchor" href="#publish"><span>PUBLISH</span></a></h4><figure><img src="http://www.uinio.com/Embedded/MQTT/6.png" alt="MQTT-PUBLISH" tabindex="0" loading="lazy"><figcaption>MQTT-PUBLISH</figcaption></figure><ul><li><strong>ä¸»é¢˜åç§°</strong> <code>topicName</code>ï¼šæ˜¯ä¸€æ®µä»¥æ–œæ <code>/</code>ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå…·æœ‰å±‚æ¬¡ç»“æ„çš„ç®€å•å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ <code>home/bedroom/moisture</code>ï¼›</li><li><strong>æœåŠ¡è´¨é‡</strong> <code>qos</code>ï¼šæœåŠ¡è´¨é‡ï¼ˆQoSï¼ŒQuality of Serviceï¼‰ç­‰çº§æœ‰ <code>0</code>ã€<code>1</code>ã€<code>2</code> ä¸‰ä¸ªç­‰çº§ï¼Œç”¨äºç¡®å®šæ¶ˆæ¯åˆ°è¾¾æ¥æ”¶è€…ï¼ˆ<strong>å‘å¸ƒè€…</strong>ã€<strong>è®¢é˜…è€…</strong>ã€<strong>ä»£ç†è€…</strong>ï¼‰æ‰€éœ€çš„ä¿éšœç±»å‹ï¼›</li><li><strong>ä¿ç•™æ ‡è®°</strong> <code>retainFlag</code>ï¼šç”¨äºå®šä¹‰<strong>ä»£ç†è€…</strong>æ˜¯å¦ç¼“å­˜æŒ‡å®š<strong>ä¸»é¢˜</strong>çš„æœ€åä¸€ä¸ªæ­£ç¡®å€¼ï¼Œå½“ä¸€ä¸ªæ–°çš„<strong>å®¢æˆ·ç«¯</strong>è®¢é˜…è¯¥<strong>ä¸»é¢˜</strong>æ—¶ï¼Œå°±ä¼šæ¥æ”¶åˆ°ä¿ç•™åœ¨è¯¥<strong>ä¸»é¢˜</strong>ä¸Šçš„æœ€åä¸€æ¡æ¶ˆæ¯ï¼›</li><li><strong>è´Ÿè½½</strong> <code>payload</code>ï¼šæŒ‡å®šæ¶ˆæ¯æ‰€è¦ä¼ è¾“çš„å®é™…å†…å®¹ï¼Œå¯ä»¥æ˜¯<code>å›¾åƒ</code>ã€<code>æ–‡æœ¬</code>ã€<code>äºŒè¿›åˆ¶</code>ç­‰æ•°æ®ç±»å‹ï¼›</li><li><strong>æ•°æ®åŒ…æ ‡è¯†ç¬¦</strong> <code>packetId</code>ï¼šåœ¨<strong>å®¢æˆ·ç«¯</strong>ä¸<strong>ä»£ç†è€…</strong>è¿›è¡Œæ¶ˆæ¯ä¼ è¾“æ—¶ï¼Œä¸ºæ¯ä¸ªæ•°æ®åŒ…æ·»åŠ çš„å”¯ä¸€æ ‡è¯†ï¼Œå¹¶ä¸”åªä¸å¤§äº <code>0</code> çš„ QoS çº§åˆ«æœ‰å…³ï¼Œé€šå¸¸ç”±<strong>å®¢æˆ·ç«¯</strong>æˆ–è€…<strong>ä»£ç†è€…</strong>è‡ªåŠ¨è¿›è¡Œè®¾ç½®ï¼›</li><li><strong>DUP æ ‡å¿—</strong> <code>dupFlag</code>ï¼šç”¨äºæ ‡è¯†è¿™æ¡æ¶ˆæ¯æ˜¯é‡å¤çš„ï¼Œç”±äºé¢„æœŸæ¥æ”¶è€…ï¼ˆ<strong>å®¢æˆ·ç«¯</strong>ã€<strong>ä»£ç†è€…</strong>ï¼‰æ²¡æœ‰ç¡®è®¤åŸå§‹æ¶ˆæ¯è€Œè¢«é‡å‘ï¼Œè¯¥åœºæ™¯ä»…ä¸ QoS å¤§äº <code>0</code> åœºæ™¯æœ‰å…³ï¼›</li></ul><h4 id="subscribe" tabindex="-1"><a class="header-anchor" href="#subscribe"><span>SUBSCRIBE</span></a></h4><figure><img src="http://www.uinio.com/Embedded/MQTT/8.png" alt="MQTT-SUBSCRIBE" tabindex="0" loading="lazy"><figcaption>MQTT-SUBSCRIBE</figcaption></figure><ul><li><strong>æ•°æ®åŒ…æ ‡è¯†ç¬¦</strong> <code>packetId</code>ï¼š<strong>è®¢é˜…è€…</strong>å‘<strong>ä»£ç†è€…</strong>è®¢é˜…æ¶ˆæ¯æ—¶ï¼Œä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªæ•°æ®åŒ…æ·»åŠ å”¯ä¸€çš„æ ‡è¯†ï¼›</li><li><strong>ä¸»é¢˜/æœåŠ¡è´¨é‡åˆ—è¡¨</strong>ï¼šä¸€æ¡ <code>SUBSCRIBE</code> æ¶ˆæ¯å¯ä»¥åŒ…å«å¤šä¸ªè®¢é˜…ï¼Œæ¯ä¸ªè®¢é˜…ç”±ä¸€ä¸ª <code>Topic</code> ä¸»é¢˜å’Œä¸€ä¸ª <code>QoS</code> çº§åˆ«ç»„æˆï¼›<code>SUBSCRIBE</code> æ¶ˆæ¯ä¸­çš„<strong>ä¸»é¢˜</strong>å¯ä»¥åŒ…å«<strong>é€šé…ç¬¦</strong>ï¼Œä»¥ä¾¿è®¢é˜…æŒ‡å®š<strong>ä¸»é¢˜æ¨¡å¼</strong>ï¼ˆè€Œéç‰¹å®šçš„<strong>ä¸»é¢˜</strong>ï¼‰ï¼›å¦‚æœå½“å‰å®¢æˆ·ç«¯å…·æœ‰é‡å¤çš„è®¢é˜…ï¼Œé‚£ä¹ˆ<strong>ä»£ç†è€…</strong>å°†ä¼šå“åº”è¯¥ä¸»é¢˜æ‰€å…·æœ‰çš„æœ€é«˜ <code>QoS</code> çº§åˆ«æ¶ˆæ¯ï¼›</li></ul><h4 id="suback" tabindex="-1"><a class="header-anchor" href="#suback"><span>SUBACK</span></a></h4><p>ä¸ºäº†ç¡®è®¤æ¯æ¡è®¢é˜…ï¼Œ<strong>ä»£ç†è€…</strong>ä¼šå‘<strong>è®¢é˜…è€…</strong>å‘é€ä¸€æ¡ <code>SUBACK</code> ç¡®è®¤æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯åŒ…å«æœ‰åŸå§‹è®¢é˜…æ¶ˆæ¯çš„<strong>æ•°æ®åŒ…æ ‡è¯†ç¬¦</strong> <code>packetId</code>ï¼Œä»¥åŠä¸€ä¸ª<strong>è¿”å›ç </strong> <code>returnCode</code> åˆ—è¡¨ã€‚</p><figure><img src="http://www.uinio.com/Embedded/MQTT/9.png" alt="MQTT-SUBACK" tabindex="0" loading="lazy"><figcaption>MQTT-SUBACK</figcaption></figure><ul><li><strong>æ•°æ®åŒ…æ ‡è¯†ç¬¦</strong> <code>packetId</code>ï¼šæ•°æ®åŒ…çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸ <code>SUBSCRIBE</code> è®¢é˜…æ¶ˆæ¯å½“ä¸­çš„ <code>packetId</code> ä¿æŒä¸€è‡´ï¼›</li><li><strong>è¿”å›ç </strong> <code>returnCode</code>ï¼š<strong>ä»£ç†è€…</strong>ä¼šä¸ºåœ¨ <code>SUBSCRIBE</code> æ¶ˆæ¯å½“ä¸­æ¥æ”¶åˆ°çš„æ¯ä¸ª <code>topic/qos</code> å“åº”ä¸€ä¸ªè¿”å›ç ï¼Œä¾‹å¦‚<strong>è®¢é˜…è€…</strong>å‘é€çš„ <code>SUBSCRIBE</code> æ¶ˆæ¯æ‹¥æœ‰ <code>5</code> ä¸ªè®¢é˜…ï¼Œé‚£ä¹ˆ<strong>ä»£ç†è€…</strong>å“åº”çš„ <code>SUBACK</code> é€€è®¢æ¶ˆæ¯å°±ä¼šåŒ…å« <code>5</code> ä¸ªè¿”å›ç ï¼Œè¿™äº›è¿”å›ç ç”¨äºç¡®è®¤æ¯ä¸ª<strong>ä¸»é¢˜</strong>æ˜¯å¦éƒ½å·²ç»è¢«æ­£ç¡®è®¢é˜…ï¼Œå¹¶ä¸”å±•ç¤º<strong>ä»£ç†è€…</strong>æ‰€æˆäºˆçš„ QoS çº§åˆ«ï¼›å¦‚æœ<strong>ä»£ç†è€…</strong>ç”±äºæƒé™æˆ–è€…ä¸»é¢˜ä¸æ­£ç¡®ç­‰åŸå› æ‹’ç»äº†æœ¬æ¬¡è®¢é˜…ï¼Œåˆ™ <code>SUBACK</code> æ¶ˆæ¯å°†ä¼šåŒ…å«è¯¥ä¸»é¢˜çš„å¤±è´¥è¿”å›ç ï¼›</li></ul><table><thead><tr><th style="text-align:center;">è¿”å›ä»£ç </th><th style="text-align:center;">è¿”å›ç å“åº”</th></tr></thead><tbody><tr><td style="text-align:center;"><code>0</code></td><td style="text-align:center;"><strong>æˆåŠŸ</strong>ï¼Œæœ€å¤§ QoS ä¸º <code>0</code>ï¼›</td></tr><tr><td style="text-align:center;"><code>1</code></td><td style="text-align:center;"><strong>æˆåŠŸ</strong>ï¼Œæœ€å¤§ QoS ä¸º <code>1</code>ï¼›</td></tr><tr><td style="text-align:center;"><code>2</code></td><td style="text-align:center;"><strong>æˆåŠŸ</strong>ï¼Œæœ€å¤§ QoS ä¸º <code>2</code>ï¼›</td></tr><tr><td style="text-align:center;"><code>128</code></td><td style="text-align:center;"><strong>å¤±è´¥</strong>ï¼›</td></tr></tbody></table><h3 id="ä¿æŒè¿æ¥-keepalive" tabindex="-1"><a class="header-anchor" href="#ä¿æŒè¿æ¥-keepalive"><span>ä¿æŒè¿æ¥ keepAlive</span></a></h3><p>èƒŒæ™¯</p><p>MQTTæ„å»ºåœ¨TCPä¹‹ä¸Šï¼ŒTCPèƒ½å¤Ÿç¡®ä¿æ•°æ®åŒ…å¯é æœ‰åºï¼Œå¹¶ç»è¿‡é”™è¯¯æ£€æŸ¥ä¹‹ååœ¨ç½‘ç»œä¸Šä¼ è¾“ã€‚ä½†æœ‰æ—¶å€™é€šä¿¡åŒæ–¹ä¹‹é—´çš„ä¼ è¾“ä¼šä¸åŒæ­¥ï¼ˆä¾‹å¦‚å…¶ä¸­ä¸€æ–¹å´©æºƒæˆ–å‘ç”Ÿä¼ è¾“é”™è¯¯ï¼‰ï¼Œè¿™ç§ä¸å®Œæ•´çš„è¿æ¥çŠ¶æ€åœ¨TCPå½“ä¸­è¢«ç§°ä¸º<strong>åŠå¼€è¿æ¥ï¼ˆHalf-open Connectionï¼‰</strong>ï¼Œè¿›è€Œé€ æˆé€šä¿¡çš„ä¸€æ–¹æ˜æ˜å·²ç»ä¼ è¾“å¤±è´¥ï¼Œè€Œå¦ä¸€æ–¹ä»ç„¶åœ¨å°è¯•å‘é€æ¶ˆæ¯å¹¶ä¸”ç­‰å¾…è¿™äº›æ¶ˆæ¯è¢«ç¡®è®¤ã€‚</p><p>æ–¹å¼</p><blockquote><p>CONNECTæŠ¥æ–‡é‡Œå¯è®¾ç½®Keepaliveå­—æ®µï¼Œæ¥è®¾ç½®ä¿æ´»å¿ƒè·³åŒ…ï¼šPINGREQ/PINGRESPçš„å‘é€æ—¶é—´é—´éš”ã€‚</p><p>å½“é•¿æ—¶é—´æ— æ³•æ”¶åˆ°è®¾å¤‡çš„PINGREQçš„æ—¶å€™ï¼ŒBrokerè®¤ä¸ºè®¾å¤‡å·²ä¸‹çº¿</p></blockquote><p>ä½œç”¨</p><ul><li>å‘ç°å¯¹ç«¯æ­»äº¡æˆ–è€…ç½‘ç»œä¸­æ–­</li><li>åœ¨é•¿æ—¶é—´æ— æ¶ˆæ¯äº¤äº’çš„æƒ…å†µä¸‹ï¼Œä¿æŒè¿æ¥ä¸è¢«ç½‘ç»œè®¾å¤‡æ–­å¼€</li></ul><h3 id="æ¶ˆæ¯ä¿ç•™æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯ä¿ç•™æœºåˆ¶"><span>æ¶ˆæ¯ä¿ç•™æœºåˆ¶</span></a></h3><blockquote><p>å‘å¸ƒè€…åªèƒ½ç¡®ä¿æ¶ˆæ¯å®‰å…¨çš„ä¼ é€’ç»™ä»£ç†è€…ï¼Œè€Œæ— æ³•ä¿è¯æ¶ˆæ¯ä¸€å®šä¼šè¢«è®¢é˜…è€…æ”¶åˆ°ã€‚è€Œè®¢é˜…è€…å¯èƒ½ç½‘è·¯åŸå› å¯¼è‡´ä¸‹çº¿ï¼Œä¸‹çº¿æœŸé—´çš„æ¶ˆæ¯éœ€è¦ä¿è¯è®¾å¤‡ä¸‹ä¸€æ¬¡ä¸Šçº¿æ—¶é€è¾¾ï¼ŒMQTTæ¶ˆæ¯ä¿ç•™æœºåˆ¶ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p></blockquote><h4 id="å¯¹äºå‘å¸ƒè€…" tabindex="-1"><a class="header-anchor" href="#å¯¹äºå‘å¸ƒè€…"><span>å¯¹äºå‘å¸ƒè€…</span></a></h4><p>å‘å¸ƒè€…åœ¨å‘å¸ƒä¸»é¢˜çš„æ—¶å€™ï¼Œå°†<code>retainFlag</code>è®¾ç½®ä¸º<code>true</code>æ—¶ï¼Œä»£ç†è€…ä¼šå­˜å‚¨è¯¥ä¸»é¢˜ä¸‹çš„<code>æœ€åä¸€æ¡ä¿ç•™æ¶ˆæ¯</code>ä»¥åŠç›¸åº”çš„QoSçº§åˆ«ã€‚</p><p>å¦‚æœè¦åˆ é™¤ä¿ç•™æ¶ˆæ¯ï¼Œåˆ™å¯ä»¥å‘å¯¹åº”çš„ä¸»é¢˜å‘é€ä»…æœ‰<code>0 Byte</code>æœ‰æ•ˆè½½è·çš„ä¿ç•™æ¶ˆæ¯ï¼Œä»£ç†è€…ä¼šåˆ é™¤ä¹‹å‰ä¿ç•™çš„æ¶ˆæ¯ã€‚</p><h4 id="å¯¹äºè®¢é˜…è€…" tabindex="-1"><a class="header-anchor" href="#å¯¹äºè®¢é˜…è€…"><span>å¯¹äºè®¢é˜…è€…</span></a></h4><p>æŒä¹…ä¼šè¯ä¼šåœ¨è®¢é˜…è€…ä¸ä»£ç†è€…å»ºç«‹è¿æ¥æ—¶ï¼Œç”±å®¢æˆ·ç«¯æä¾›è‡ªèº«çš„clientIdç»™ä»£ç†è€…ï¼Œç”¨äºé‰´åˆ«æ¯æ¬¡ä¼šè¯è¯·æ±‚ã€‚</p><p>ä»£ç†è€…é€šå¸¸ä¼šæŒæœ‰å¦‚ä¸‹ä¿¡æ¯ï¼š</p><ul><li>è¯¥å®¢æˆ·ç«¯ä¼šè¯ä¹‹å‰æ˜¯å¦å­˜åœ¨ï¼›</li><li>è¯¥å®¢æˆ·ç«¯çš„æ‰€æœ‰è®¢é˜…ä¿¡æ¯ï¼›</li><li>åœ¨æœåŠ¡è´¨é‡QoSçº§åˆ«<code>1</code>å’Œ<code>2</code>çš„å·¥ä½œæµç¨‹å½“ä¸­ï¼Œå®¢æˆ·ç«¯å°šæœªç¡®è®¤çš„æ¶ˆæ¯ï¼›ï¼ˆæ¶ˆæ¯å·²å‘ï¼Œä½†æœªç¡®è®¤ï¼‰</li><li>å®¢æˆ·ç«¯ä¸‹çº¿æ—¶é”™è¿‡çš„æ‰€æœ‰æ–°çš„QoSçº§åˆ«<code>1</code>å’Œ<code>2</code>çš„æ¶ˆæ¯ï¼›ï¼ˆæ–°çš„æ¶ˆæ¯ï¼‰</li><li>ä»å®¢æˆ·ç«¯æ¥æ”¶åˆ°ï¼Œä½†æ˜¯å°šæœªå®Œå…¨ç¡®è®¤çš„Qosçº§åˆ«<code>2</code>çš„æ¶ˆæ¯ï¼›ï¼ˆæ¶ˆæ¯å·²å‘ï¼Œå®¢æˆ·ç«¯åªç¡®è®¤ä¸€æ¬¡ï¼‰</li></ul><p>å®¢æˆ·ç«¯ä½¿ç”¨ä¸€ä¸ªæ¸…ç†ä¼šè¯<code>cleanSession</code>æ ‡å¿—æ¥é€šçŸ¥ä»£ç†è€…æ˜¯å¦æŒä¹…ä¼šè¯</p><ul><li>å½“<code>cleanSession=true</code>ï¼Œè¡¨ç¤ºå½“å‰å®¢æˆ·ç«¯ä¸éœ€è¦æŒä¹…åŒ–ä¼šè¯ï¼Œæ–­å¼€è¿æ¥æœŸé—´ä¿¡æ¯ä¼šä¸¢å¤±ï¼›</li><li>å½“<code>cleanSession=false</code>ï¼Œè¡¨ç¤ºå½“å‰å®¢æˆ·ç«¯éœ€è¦æŒä¹…åŒ–ä¼šè¯ï¼Œæ–­å¼€è¿æ¥æœŸé—´ä¿¡æ¯ä¼šä¿ç•™ï¼›</li></ul><h3 id="ä¸´ç»ˆé—å˜±-lastwill" tabindex="-1"><a class="header-anchor" href="#ä¸´ç»ˆé—å˜±-lastwill"><span>ä¸´ç»ˆé—å˜± lastWill</span></a></h3><blockquote><p>å½“æŸä¸ªå®¢æˆ·ç«¯æœªèƒ½æ­£å¸¸æ–­å¼€ä¸ä»£ç†è€…ä¹‹é—´çš„è¿æ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥é‡‡ç”¨MQTTçš„ä¸´ç»ˆé—å˜±ï¼ˆLWTï¼ŒLast Will and Testamentï¼‰æœºåˆ¶æ¥é€šçŸ¥å…¶ä»–å®¢æˆ·ç«¯ã€‚</p></blockquote><p>å¹¿æ’­æ—¶æœºï¼š</p><ul><li>ä»£ç†è€…æ£€æµ‹åˆ°I/oé”™è¯¯æˆ–è€…ç½‘ç»œæ•…éšœï¼›</li><li>å®¢æˆ·ç«¯åœ¨å®šä¹‰çš„ä¿æŒè¿æ¥å‘¨æœŸå†…é€šä¿¡å¤±è´¥ï¼›</li><li>å®¢æˆ·ç«¯åœ¨å…³é—­ç½‘ç»œè¿æ¥ä¹‹å‰ï¼Œæ²¡æœ‰å‘é€DISCONNECTæ•°æ®åŒ…ï¼›</li><li>ç”±äºåè®®å‘ç”Ÿé”™è¯¯ï¼Œä»£ç†è€…å…³é—­ç½‘ç»œè¿æ¥ï¼›</li></ul><p>æœ€ä½³å®è·µï¼š</p><blockquote><p>å®¢æˆ·ç«¯ä¸‹çº¿ï¼Œbrokerå‘æŸä¸ªtopicå‘å¸ƒä¸€æ¡æ¶ˆæ¯ï¼Œé€šçŸ¥ä¸šåŠ¡ç³»ç»Ÿè®¾å¤‡çŠ¶æ€å‘ç”Ÿæ›´æ–°ã€‚</p><ol><li>client1å‘ä»£ç†è€…å‘é€ä¸€æ¡å¸¦æœ‰lastWillMessagå‚æ•°çš„CONNECTæ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯æœ‰æ•ˆè´Ÿè½½<code>payload=&quot;offline&quot;</code>,åŒæ—¶è®¾ç½®ä¸´ç»ˆé—å˜±å±æ€§ä¸º<code>lastWillRetain=true</code>å’Œ<code>lastWillTopic=status/client1</code>ï¼›</li><li>client1åœ¨<code>status/client1</code>ä¸»é¢˜ä¸‹å‘å¸ƒæœ‰æ•ˆè´Ÿè½½<code>payload=&quot;online&quot;</code>ä»¥åŠä¿ç•™æ ‡å¿—<code>retainFlag=true</code>çš„æ¶ˆæ¯ï¼›</li><li>åªè¦client1ä¿æŒè¿æ¥ï¼Œè®¢é˜…åˆ°<code>status/client1</code>ä¸»é¢˜çš„å®¢æˆ·ç«¯å°±ä¼šæ”¶åˆ°â€œonlineâ€çš„ä¿ç•™æ¶ˆæ¯ï¼›</li><li>å¦‚æœclient1æ„å¤–æ–­å¼€è¿æ¥ï¼Œåˆ™ä»£ç†è€…å°†å‘å¸ƒæœ‰æ•ˆè´Ÿè½½<code>payload=&quot;offline&quot;</code>åˆ°<code>status/client1</code>ä¸»é¢˜ï¼Œæ­¤æ—¶å…¶ä»–å®¢æˆ·ç«¯å°±çŸ¥é“client1ä¸‹çº¿ã€‚</li></ol></blockquote><h2 id="äº¤äº’æµç¨‹" tabindex="-1"><a class="header-anchor" href="#äº¤äº’æµç¨‹"><span>äº¤äº’æµç¨‹</span></a></h2><figure><img src="/assets/MQTT%E4%BA%A4%E4%BA%92%E6%97%B6%E5%BA%8F-BnkOhY8C.png" alt="MQTT-äº¤äº’æ—¶åº" tabindex="0" loading="lazy"><figcaption>MQTT-äº¤äº’æ—¶åº</figcaption></figure><h2 id="æŠ¥æ–‡ç»“æ„" tabindex="-1"><a class="header-anchor" href="#æŠ¥æ–‡ç»“æ„"><span>æŠ¥æ–‡ç»“æ„</span></a></h2><table><thead><tr><th style="text-align:center;">Fixed headerå›ºå®šæŠ¥å¤´ï¼Œ2ä¸ªå­—èŠ‚ï¼Œæ‰€æœ‰æ¶ˆæ¯ç±»å‹éƒ½åŒ…å«</th></tr></thead><tbody><tr><td style="text-align:center;">Variable headerå¯å˜æŠ¥å¤´ï¼Œéƒ¨åˆ†æ¶ˆæ¯ç±»å‹åŒ…å«</td></tr><tr><td style="text-align:center;">Payloadæœ‰æ•ˆè½½è·ï¼Œéƒ¨åˆ†æ¶ˆæ¯ç±»å‹åŒ…å«</td></tr></tbody></table><h3 id="å›ºå®šæŠ¥å¤´" tabindex="-1"><a class="header-anchor" href="#å›ºå®šæŠ¥å¤´"><span>å›ºå®šæŠ¥å¤´</span></a></h3><table><tr align="center"><td>Bit</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr><tr align="center"><td>byte1</td><td colspan="4">MQTTæ§åˆ¶æŠ¥æ–‡ç±»å‹</td><td colspan="4">ç”¨äºæŒ‡å®šæ§åˆ¶æŠ¥æ–‡ç±»å‹çš„æ§åˆ¶ä½</td></tr><tr align="center"><td>byte2</td><td colspan="8">å‰©ä½™é•¿åº¦</td></tr></table><ul><li><p>MQTTæ§åˆ¶æŠ¥æ–‡ç±»å‹ï¼ˆ4~7ä½ç½®ï¼‰</p><table><thead><tr><th style="text-align:center;">åå­—</th><th style="text-align:center;">å€¼</th><th style="text-align:center;">æŠ¥æ–‡æµåŠ¨æ–¹å‘</th><th style="text-align:center;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">ç¦æ­¢</td><td style="text-align:center;">ä¿ç•™</td></tr><tr><td style="text-align:center;">CONNECT</td><td style="text-align:center;">1</td><td style="text-align:center;">å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯</td><td style="text-align:center;">å®¢æˆ·ç«¯è¯·æ±‚è¿æ¥æœåŠ¡ç«¯</td></tr><tr><td style="text-align:center;">CONNACK</td><td style="text-align:center;">2</td><td style="text-align:center;">æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯</td><td style="text-align:center;">è¿æ¥æŠ¥æ–‡ç¡®è®¤</td></tr><tr><td style="text-align:center;">PUBLISH</td><td style="text-align:center;">3</td><td style="text-align:center;">ä¸¤ä¸ªæ–¹å‘éƒ½å…è®¸</td><td style="text-align:center;">å‘å¸ƒæ¶ˆæ¯</td></tr><tr><td style="text-align:center;">PUBACK</td><td style="text-align:center;">4</td><td style="text-align:center;">ä¸¤ä¸ªæ–¹å‘éƒ½å…è®¸</td><td style="text-align:center;">QoS 1æ¶ˆæ¯å‘å¸ƒæ”¶åˆ°ç¡®è®¤</td></tr><tr><td style="text-align:center;">PUBREC</td><td style="text-align:center;">5</td><td style="text-align:center;">ä¸¤ä¸ªæ–¹å‘éƒ½å…è®¸</td><td style="text-align:center;">å‘å¸ƒæ”¶åˆ°ï¼ˆä¿è¯äº¤ä»˜ç¬¬ä¸€æ­¥ï¼‰</td></tr><tr><td style="text-align:center;">PUBREL</td><td style="text-align:center;">6</td><td style="text-align:center;">ä¸¤ä¸ªæ–¹å‘éƒ½å…è®¸</td><td style="text-align:center;">å‘å¸ƒé‡Šæ”¾ï¼ˆä¿è¯äº¤ä»˜ç¬¬äºŒæ­¥ï¼‰</td></tr><tr><td style="text-align:center;">PUBCOMP</td><td style="text-align:center;">7</td><td style="text-align:center;">ä¸¤ä¸ªæ–¹å‘éƒ½å…è®¸</td><td style="text-align:center;">QoS 2æ¶ˆæ¯å‘å¸ƒå®Œæˆï¼ˆä¿è¯äº¤ä»˜ç¬¬ä¸‰æ­¥ï¼‰</td></tr><tr><td style="text-align:center;">SUBSCRIBE</td><td style="text-align:center;">8</td><td style="text-align:center;">å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯</td><td style="text-align:center;">å®¢æˆ·ç«¯è®¢é˜…è¯·æ±‚</td></tr><tr><td style="text-align:center;">SUBACK</td><td style="text-align:center;">9</td><td style="text-align:center;">æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯</td><td style="text-align:center;">è®¢é˜…è¯·æ±‚æŠ¥æ–‡ç¡®è®¤</td></tr><tr><td style="text-align:center;">UNSUBSCRIBE</td><td style="text-align:center;">10</td><td style="text-align:center;">å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯</td><td style="text-align:center;">å®¢æˆ·ç«¯å–æ¶ˆè®¢é˜…è¯·æ±‚</td></tr><tr><td style="text-align:center;">UNSUNACK</td><td style="text-align:center;">11</td><td style="text-align:center;">æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯</td><td style="text-align:center;">å–æ¶ˆè®¢é˜…æŠ¥æ–‡ç¡®è®¤</td></tr><tr><td style="text-align:center;">PINGREQ</td><td style="text-align:center;">12</td><td style="text-align:center;">å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯</td><td style="text-align:center;">å¿ƒè·³è¯·æ±‚</td></tr><tr><td style="text-align:center;">PINGRESP</td><td style="text-align:center;">13</td><td style="text-align:center;">æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯</td><td style="text-align:center;">å¿ƒè·³å“åº”</td></tr><tr><td style="text-align:center;">DISCONNECT</td><td style="text-align:center;">14</td><td style="text-align:center;">å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯</td><td style="text-align:center;">å®¢æˆ·ç«¯æ–­å¼€è¿æ¥</td></tr><tr><td style="text-align:center;">Reserved</td><td style="text-align:center;">15</td><td style="text-align:center;">ç¦æ­¢</td><td style="text-align:center;">ä¿ç•™</td></tr></tbody></table></li><li><p>æ ‡å¿—ä½ï¼ˆ0~3ä½ç½®ï¼‰</p><table><thead><tr><th style="text-align:center;">æ§åˆ¶æŠ¥æ–‡</th><th style="text-align:center;">å›ºå®šæŠ¥å¤´æ ‡å¿—</th><th style="text-align:center;">Bit3</th><th style="text-align:center;">Bit2</th><th style="text-align:center;">Bit1</th><th style="text-align:center;">Bit0</th></tr></thead><tbody><tr><td style="text-align:center;">CONNECT</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">CONNACK</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">PUBLISH</td><td style="text-align:center;">Used in MQTT 3.1.1</td><td style="text-align:center;">DUP1</td><td style="text-align:center;">QoS2</td><td style="text-align:center;">QoS2</td><td style="text-align:center;">RETAIN3</td></tr><tr><td style="text-align:center;">PUBACK</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">PUBREC</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">PUBREL</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">1</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">PUBCOMP</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">SUBSCRIBE</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">1</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">SUBACK</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">UNSUBSCRIBE</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">1</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">UNSUBACK</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">PINGREQ</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0 v0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">PINGRESP</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td></tr><tr><td style="text-align:center;">DISCONNECT</td><td style="text-align:center;">Reserved</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td><td style="text-align:center;">0</td></tr></tbody></table><p>DUP1 =æ§åˆ¶æŠ¥æ–‡çš„é‡å¤åˆ†å‘æ ‡å¿—</p><p>QoS2 = PUBLISH æŠ¥æ–‡çš„æœåŠ¡è´¨é‡ç­‰çº§</p><p>RETAIN3 = PUBLISH æŠ¥æ–‡çš„ä¿ç•™æ ‡å¿—</p></li><li><p>å‰©ä½™é•¿åº¦</p><p>ä»ç¬¬2ä¸ªå­—èŠ‚å¼€å§‹</p><p>åŒ…æ‹¬å¯å˜æŠ¥å¤´å’Œè´Ÿè½½çš„æ•°æ®ï¼Œå˜é•¿åº¦ç¼–ç æ–¹æ¡ˆï¼Œæ¯ä¸ªå­—èŠ‚å¯ä»¥ç¼–ç 128ä¸ªæ•°å€¼å’Œä¸€ä¸ªå»¶ç»­ä½ï¼Œå‰©ä½™é•¿åº¦å­—æ®µæœ€å¤§4ä¸ªã€‚</p></li></ul><h3 id="å¯å˜æŠ¥å¤´" tabindex="-1"><a class="header-anchor" href="#å¯å˜æŠ¥å¤´"><span>å¯å˜æŠ¥å¤´</span></a></h3><p>æŸäº›MQTTæ§åˆ¶æŠ¥æ–‡åŒ…å«ä¸€ä¸ªå¯å˜æŠ¥å¤´éƒ¨åˆ†ï¼Œå®ƒåœ¨å›ºå®šæŠ¥å¤´å’Œè´Ÿè½½ä¹‹é—´ã€‚å¯å˜æŠ¥å¤´çš„å†…å®¹æ ¹æ®æŠ¥æ–‡ç±»å‹çš„ä¸åŒè€Œä¸åŒã€‚å¯å˜æŠ¥å¤´çš„æŠ¥æ–‡æ ‡è¯†ç¬¦å­—æ®µå­˜åœ¨å¤šä¸ªç±»å‹çš„æŠ¥æ–‡é‡Œã€‚å¦‚</p><p>CONNECTæŠ¥æ–‡çš„å¯å˜æŠ¥å¤´æŒ‰ä¸‹åˆ—æ¬¡æ•°åŒ…å«å››ä¸ªå­—æ®µï¼šåè®®åã€åè®®çº§åˆ«ã€è¿æ¥æ ‡å¿—å’Œä¿æŒè¿æ¥</p><h2 id="mqtt5æ–°ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#mqtt5æ–°ç‰¹æ€§"><span>MQTT5æ–°ç‰¹æ€§</span></a></h2><h3 id="è‡ªå®šä¹‰mqttåè®®å¤´" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰mqttåè®®å¤´"><span>è‡ªå®šä¹‰MQTTåè®®å¤´</span></a></h3><blockquote><p>MQTT 5å¯ä»¥åœ¨åè®®å¤´éƒ¨å½“ä¸­æ·»åŠ è‡ªå®šä¹‰çš„é”®å€¼å¯¹ï¼Œç±»ä¼¼HTTPåè®®ã€‚</p></blockquote><h3 id="åŸå› ç -reason-codes" tabindex="-1"><a class="header-anchor" href="#åŸå› ç -reason-codes"><span>åŸå› ç  Reason Codes</span></a></h3><blockquote><p>åŸå› ç ç”¨äºæ ‡è¯†ä¸€äº›é¢„å®šä¹‰çš„åè®®é”™è¯¯ï¼Œé€šå¸¸æ”¾ç½®åœ¨æ•°æ®åŒ…å½“ä¸­ã€‚ä»è€Œå…è®¸å®¢æˆ·ç«¯ä¸ä»£ç†è€…å»è§£é‡Šé”™è¯¯æ¡ä»¶ã€‚åŸå› ç æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºæ¶ˆæç¡®è®¤ï¼ˆNegative Acknowledgementsï¼‰</p></blockquote><h3 id="ä¸æ”¯æŒç‰¹æ€§è¿”å›ç " tabindex="-1"><a class="header-anchor" href="#ä¸æ”¯æŒç‰¹æ€§è¿”å›ç "><span>ä¸æ”¯æŒç‰¹æ€§è¿”å›ç </span></a></h3><p>èƒŒæ™¯</p><blockquote><p>è®¸å¤šä¼ä¸šä¸å¼€æºç»„ç»‡å¹¶æä¾›äº†è¯¸å¤šMQTTå®ç°ï¼Œä½†æ˜¯å¹¶éæ‰€æœ‰è¿™äº›å®ç°éƒ½ä¸MQTTè§„èŒƒå®Œå…¨å…¼å®¹ã€‚ä¸ºæ­¤ï¼ŒMQTT5æä¾›äº†ä¸€äº›è¿”å›ç è¯´æ˜ä»£ç†è€…ä¸æ”¯æŒæŸä¸ªç‰¹æ€§ï¼Œå®¢æˆ·ç«¯éœ€è¦è§£é‡Šè¿™äº›è¿”å›ç ï¼Œç¡®ä¿ä¸ä¼šä½¿ç”¨åˆ°è¿™äº›ä¸æ”¯æŒçš„ç‰¹æ€§ã€‚</p></blockquote><p>å®ç°</p><blockquote><p>ä»£ç†è€…é€šè¿‡<code>CONNACK</code>æ•°æ®åŒ…å½“ä¸­çš„é¢„å®šä¹‰åè®®å¤´æ¥æ ‡è¯†</p></blockquote><table><thead><tr><th>é¢„å®šä¹‰åè®®å¤´</th><th>æ•°æ®ç±»å‹</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td>Retain Available</td><td><code>Boolean</code></td><td>æ ‡è¯†<strong>ä¿ç•™æ¶ˆæ¯</strong>æ˜¯å¦å¯ç”¨ï¼›</td></tr><tr><td>Maximum QoS</td><td><code>Number</code></td><td>å…è®¸<strong>å®¢æˆ·ç«¯</strong>ç”¨äºå‘å¸ƒæ¶ˆæ¯ã€è®¢é˜…ä¸»é¢˜çš„æœ€å¤§ <strong>QoS</strong> çº§åˆ«ï¼›</td></tr><tr><td>Wildcard available</td><td><code>Boolean</code></td><td><strong>é€šé…ç¬¦</strong>æ˜¯å¦å¯ä»¥ç”¨äºä¸»é¢˜è®¢é˜…ï¼›</td></tr><tr><td>Subscription identifiers available</td><td><code>Boolean</code></td><td><strong>è®¢é˜…æ ‡è¯†ç¬¦</strong>å¯¹äº MQTT å®¢æˆ·ç«¯æ˜¯å¦å¯ç”¨ï¼›</td></tr><tr><td>Shared Subscriptions available</td><td><code>Boolean</code></td><td><strong>å…±äº«è®¢é˜…</strong>å¯¹äº MQTT å®¢æˆ·ç«¯æ˜¯å¦å¯ç”¨ï¼›</td></tr><tr><td>Maximum Message Size</td><td><code>Number</code></td><td>MQTT <strong>å®¢æˆ·ç«¯</strong>èƒ½å¤Ÿä½¿ç”¨çš„æœ€å¤§<strong>æ¶ˆæ¯</strong>å°ºå¯¸ï¼›</td></tr><tr><td>Server Keep Alive</td><td><code>Number</code></td><td><strong>ä»£ç†è€…</strong>ä¸ºæŸä¸ª<strong>å®¢æˆ·ç«¯</strong>æ‰€èƒ½å¤Ÿæ”¯æŒçš„<strong>ä¿æŒè¿æ¥</strong>æ—¶é—´é—´éš”ï¼›</td></tr></tbody></table><h3 id="æ¸…ç†ä¼šè¯" tabindex="-1"><a class="header-anchor" href="#æ¸…ç†ä¼šè¯"><span>æ¸…ç†ä¼šè¯</span></a></h3><p>èƒŒæ™¯</p><blockquote><p>MQTT v3.1.1 æ²¡æœ‰è§„å®šæŒä¹…ä¼šè¯åº”è¯¥ä»€ä¹ˆæ—¶å€™è¿‡æœŸï¼Œä»åè®®å±‚è¿™ä¸ªä¼šè¯åº”è¯¥æ°¸ä¹…å­˜åœ¨ï¼Œä¼šéå¸¸å ç”¨æœåŠ¡ç«¯çš„èµ„æºã€‚</p><p>æ¸…ç†ä¼šè¯åŠŸèƒ½ç”±<code>Clean Session</code>æ‹†åˆ†ä¸º<code>Clean Start</code>å’Œ<code>Session Expiry Interval</code></p><ul><li><code>Clean Start</code>å­—æ®µæŒ‡å®šæ˜¯å¦éœ€è¦å…¨æ–°çš„ä¼šè¯ï¼›</li><li><code>Session Expiiry Interval</code>å­—æ®µæŒ‡å®šä¼šè¯è¿‡æœŸæ—¶é—´ï¼›</li></ul></blockquote><h3 id="authæ•°æ®åŒ…" tabindex="-1"><a class="header-anchor" href="#authæ•°æ®åŒ…"><span>AUTHæ•°æ®åŒ…</span></a></h3><blockquote><p>MQTT5å¼•å…¥äº†å´­æ–°çš„AUTHåŒ…ï¼Œä¸»è¦åº”ç”¨äºå®ç°ä¸€äº›ç‰¹å®šçš„èº«ä»½éªŒè¯æœºåˆ¶ã€‚</p></blockquote><h3 id="åŒå‘æ–­å¼€disconnect" tabindex="-1"><a class="header-anchor" href="#åŒå‘æ–­å¼€disconnect"><span>åŒå‘æ–­å¼€DISCONNECT</span></a></h3><blockquote><p>MQTT3.1.1å®¢æˆ·ç«¯ä¼šåœ¨å…³é—­TCPä¹‹å‰ï¼Œå‘é€DISCONNECTæ•°æ®åŒ…æ¥é€šçŸ¥ä»£ç†è€…æœåŠ¡æ­£å¸¸æ–­å¼€è¿æ¥ã€‚</p><p>MQTT5å…è®¸ä»£ç†è€…å‘å®¢æˆ·ç«¯å‘é€DISCONNECTæ•°æ®åŒ…</p></blockquote><h3 id="qosçº§åˆ«1ä¸2æ¶ˆæ¯ä¸å†é‡è¯•" tabindex="-1"><a class="header-anchor" href="#qosçº§åˆ«1ä¸2æ¶ˆæ¯ä¸å†é‡è¯•"><span>QoSçº§åˆ«1ä¸2æ¶ˆæ¯ä¸å†é‡è¯•</span></a></h3><blockquote><p>MQTT3.1.1å¯¹åº”QoSçº§åˆ«ä¸º1å’Œ2æ¡ä»¶ä¸‹ï¼Œå¦‚æœTCPè¿æ¥ä¸­æ–­ï¼Œä¼šå‘èµ·å¤šæ¬¡TCPè¿æ¥ä¿è¯æ¶ˆæ¯è¢«æ­£ç¡®çš„ä¼ é€’ã€‚ä½†å¯¹äºè¶…å‡ºè´Ÿè½½èƒ½åŠ›çš„å®¢æˆ·ç«¯å¯èƒ½ä¼šå› æ­¤å˜å¾—æ›´åŠ è¶…è½½</p></blockquote><p>ä¾‹å¦‚ï¼š</p><ul><li>å®¢æˆ·ç«¯ä»ä»£ç†è€…æ¥æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯ï¼Œéœ€è¦è€—æ—¶11ç§’å¤„ç†ï¼Œå¹¶ä¸”åœ¨å¤„ç†ä¹‹åç¡®è®¤æ•°æ®åŒ…</li><li>ä»£ç†è€…ä¼šåœ¨10ç§’ä¹‹åé‡æ–°ä¼ è¾“æ¶ˆæ¯ï¼Œä¼šæµªè´¹å¸¦å®½å¹¶åŠ é‡å®¢æˆ·ç«¯çš„è´Ÿæ‹…ã€‚</li></ul><blockquote><p>MQTT5ä¸å…è®¸ä»£ç†è€…å’Œå®¢æˆ·ç«¯åœ¨æ­£å¸¸çš„TCPè¿æ¥ä¸Šé‡æ–°ä¼ é€’æ¶ˆæ¯ï¼Œå¦‚æœé‡åˆ°TCPè¿æ¥å…³é—­ï¼Œåˆ™ä»£ç†è€…ä¸å®¢æˆ·ç«¯å¿…é¡»é‡æ–°å‘é€æœªç»ç¡®è®¤çš„æ•°æ®åŒ…ã€‚å³ï¼šä¸é‡æ–°å‘é€æ¶ˆæ¯ï¼Œè€Œæ˜¯å‘é€ç¡®è®¤åŒ…ã€‚</p></blockquote><h2 id="å®‰å…¨" tabindex="-1"><a class="header-anchor" href="#å®‰å…¨"><span>å®‰å…¨</span></a></h2><h3 id="ä¼ è¾“å±‚è®¤è¯" tabindex="-1"><a class="header-anchor" href="#ä¼ è¾“å±‚è®¤è¯"><span>ä¼ è¾“å±‚è®¤è¯</span></a></h3><blockquote><p>ä¼ è¾“å±‚æ”¯æŒTLSè®¤è¯ï¼Œå¹¶åŠ å¯†é€šè®¯</p><p>å¦‚æœå®¢æˆ·ç«¯ä¸æ”¯æŒTLSï¼Œå¯ä»¥å¯¹æ¶ˆæ¯ä½“è¿›è¡ŒåŠ å¯†</p></blockquote><h3 id="åº”ç”¨å±‚è®¤è¯" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨å±‚è®¤è¯"><span>åº”ç”¨å±‚è®¤è¯</span></a></h3><blockquote><p>ä¸åŠ å¯†é€šè®¯ï¼Œæ”¯æŒï¼š</p><ul><li>client id</li><li>username/password</li></ul></blockquote><h3 id="brokerç®¡ç†" tabindex="-1"><a class="header-anchor" href="#brokerç®¡ç†"><span>Brokerç®¡ç†</span></a></h3><blockquote><p>å¯¹topicå¢åŠ è¯»å†™ç®¡ç†æƒé™ï¼Œå¯ä»¥é™åˆ¶æŒ‡å®šç”¨æˆ·å¯¹æŒ‡å®šTopicçš„æ•°æ®è¯»å†™</p></blockquote><h2 id="å¼€æºmqtt-broker" tabindex="-1"><a class="header-anchor" href="#å¼€æºmqtt-broker"><span>å¼€æºMQTT broker</span></a></h2><p>https://github.com/mqtt/mqtt.org/wiki/servers</p><table><thead><tr><th style="text-align:center;"></th><th style="text-align:center;">Eclipse Mosquitto</th><th style="text-align:center;">EMQX</th><th style="text-align:center;">Mosca</th><th style="text-align:center;">VerneMQ</th><th style="text-align:center;">ejabberd</th><th style="text-align:center;">emitter</th></tr></thead><tbody><tr><td style="text-align:center;">åœ°å€</td><td style="text-align:center;">https://github.com/eclipse/mosquitto</td><td style="text-align:center;">https://github.com/emqx/emqx</td><td style="text-align:center;">https://github.com/moscajs/mosca</td><td style="text-align:center;">https://github.com/vernemq/vernemq</td><td style="text-align:center;">https://github.com/processone/ejabberd</td><td style="text-align:center;">https://github.com/emitter-io/emitter</td></tr><tr><td style="text-align:center;">å¼€æºåè®®</td><td style="text-align:center;">Eclipse Public License 2.0</td><td style="text-align:center;">APL-2.0</td><td style="text-align:center;">æ— </td><td style="text-align:center;">APL-2.0</td><td style="text-align:center;">GPL-2.0</td><td style="text-align:center;">AGPL-3.0</td></tr><tr><td style="text-align:center;">Star</td><td style="text-align:center;">6.2k</td><td style="text-align:center;">9.6k</td><td style="text-align:center;">3.1k</td><td style="text-align:center;">2.7k</td><td style="text-align:center;">5.2k</td><td style="text-align:center;">3.3k</td></tr><tr><td style="text-align:center;">æ›´æ–°é¢‘ç‡</td><td style="text-align:center;">å‡ ä¸ªæœˆå‰</td><td style="text-align:center;">ç»å¸¸</td><td style="text-align:center;">2020å¹´1æœˆä¸å†æ›´æ–°</td><td style="text-align:center;">ç»å¸¸</td><td style="text-align:center;">ç»å¸¸</td><td style="text-align:center;">å‡ ä¸ªæœˆå‰</td></tr><tr><td style="text-align:center;">å¼€å‘è¯­è¨€</td><td style="text-align:center;">C</td><td style="text-align:center;">Erlang</td><td style="text-align:center;">nodejs</td><td style="text-align:center;">Erlang</td><td style="text-align:center;">Erlang</td><td style="text-align:center;">go</td></tr><tr><td style="text-align:center;">åè®®æ”¯æŒ</td><td style="text-align:center;">MQTT3.1ã€MQTT3.1.1ã€MQTT5</td><td style="text-align:center;">MQTT3.1ã€MQTT3.1.1ã€MQTT5</td><td style="text-align:center;">MQTT3.1ã€MQTT3.1.1</td><td style="text-align:center;">MQTT3.1ã€MQTT3.1.1ã€MQTT5</td><td style="text-align:center;">MQTT3.1ã€MQTT3.1.1ã€MQTT5</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">é›†ç¾¤èƒ½åŠ›</td><td style="text-align:center;">é€šè¿‡æ¡¥æ¥æ”¯æŒé›†ç¾¤</td><td style="text-align:center;">æ”¯æŒ</td><td style="text-align:center;">æ”¯æŒ</td><td style="text-align:center;">æ”¯æŒ</td><td style="text-align:center;">æ”¯æŒ</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">æ‰©å±•èƒ½åŠ›</td><td style="text-align:center;">æŒä¹…åŒ–åˆ°ç£ç›˜</td><td style="text-align:center;">æ”¯æŒå…³ç³»æ•°æ®åº“ã€NoSQLã€ä»¥åŠå¸¸è§çš„æ¶ˆæ¯é˜Ÿåˆ—å¦‚ï¼škafkaã€RabbitMQã€Pulsar</td><td style="text-align:center;"></td><td style="text-align:center;">æ”¯æŒç¦»çº¿æ¶ˆæ¯å­˜å‚¨ï¼ˆLevelDBï¼‰,èº«ä»½éªŒè¯ï¼ˆMongoDBã€Redisã€PostgreSQLã€CockroachDBã€Memcachedï¼‰ã€æ”¯æŒLuaè„šæœ¬</td><td style="text-align:center;">æ”¯æŒMySQLã€PostgreSQLæŒä¹…åŒ–æ•°æ®ï¼Œredisä¼šè¯ï¼Œluaè„šæœ¬</td><td style="text-align:center;">æ”¯æŒå†…å­˜ã€SSD</td></tr></tbody></table></div><!--[--><!----><!--]--><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a href="https://github.com/Hexiaopi/Hexiaopi.github.io/edit/main/src/network/application-layer/MQTT.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link vp-meta-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: hechangjie0619@icloud.com">HeXiaoPi</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/network/application-layer/HTTP.html" aria-label="HTTPåè®®"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->HTTPåè®®</div></a><a class="route-link nav-link next" href="/network/application-layer/websocket.html" aria-label="WebSocketåè®®"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">WebSocketåè®®<!----></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer"><a href="http://beian.miit.gov.cn/" rel="noopener noreferrer" target="_blank">å¤‡æ¡ˆå·: çš–ICPå¤‡2022000616å·-1</a> | <a href="/about/site.html">å…³äºç½‘ç«™</a></div><div class="vp-copyright">Copyright Â© 2024 Hexiaopi </div></footer></div><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CxLAmY8D.js" defer></script>
  </body>
</html>
